function Mx(o,t){for(var r=0;r<t.length;r++){const u=t[r];if(typeof u!="string"&&!Array.isArray(u)){for(const d in u)if(d!=="default"&&!(d in o)){const m=Object.getOwnPropertyDescriptor(u,d);m&&Object.defineProperty(o,d,m.get?m:{enumerable:!0,get:()=>u[d]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function r(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(d){if(d.ep)return;d.ep=!0;const m=r(d);fetch(d.href,m)}})();var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var E1={exports:{}},au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function Ox(){if(Ym)return au;Ym=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(u,d,m){var _=null;if(m!==void 0&&(_=""+m),d.key!==void 0&&(_=""+d.key),"key"in d){m={};for(var S in d)S!=="key"&&(m[S]=d[S])}else m=d;return d=m.ref,{$$typeof:o,type:u,key:_,ref:d!==void 0?d:null,props:m}}return au.Fragment=t,au.jsx=r,au.jsxs=r,au}var Xm;function Lx(){return Xm||(Xm=1,E1.exports=Ox()),E1.exports}var Rt=Lx(),x1={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Bx(){if(qm)return le;qm=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),X=Symbol.iterator;function et(W){return W===null||typeof W!="object"?null:(W=X&&W[X]||W["@@iterator"],typeof W=="function"?W:null)}var wt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gt=Object.assign,At={};function zt(W,ft,Dt){this.props=W,this.context=ft,this.refs=At,this.updater=Dt||wt}zt.prototype.isReactComponent={},zt.prototype.setState=function(W,ft){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ft,"setState")},zt.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function Lt(){}Lt.prototype=zt.prototype;function bt(W,ft,Dt){this.props=W,this.context=ft,this.refs=At,this.updater=Dt||wt}var jt=bt.prototype=new Lt;jt.constructor=bt,gt(jt,zt.prototype),jt.isPureReactComponent=!0;var Le=Array.isArray;function Ht(){}var k={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function P(W,ft,Dt){var Mt=Dt.ref;return{$$typeof:o,type:W,key:ft,ref:Mt!==void 0?Mt:null,props:Dt}}function K(W,ft){return P(W.type,ft,W.props)}function q(W){return typeof W=="object"&&W!==null&&W.$$typeof===o}function Y(W){var ft={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Dt){return ft[Dt]})}var j=/\/+/g;function Pt(W,ft){return typeof W=="object"&&W!==null&&W.key!=null?Y(""+W.key):ft.toString(36)}function nt(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Ht,Ht):(W.status="pending",W.then(function(ft){W.status==="pending"&&(W.status="fulfilled",W.value=ft)},function(ft){W.status==="pending"&&(W.status="rejected",W.reason=ft)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ot(W,ft,Dt,Mt,ee){var Nt=typeof W;(Nt==="undefined"||Nt==="boolean")&&(W=null);var Ee=!1;if(W===null)Ee=!0;else switch(Nt){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(W.$$typeof){case o:case t:Ee=!0;break;case M:return Ee=W._init,ot(Ee(W._payload),ft,Dt,Mt,ee)}}if(Ee)return ee=ee(W),Ee=Mt===""?"."+Pt(W,0):Mt,Le(ee)?(Dt="",Ee!=null&&(Dt=Ee.replace(j,"$&/")+"/"),ot(ee,ft,Dt,"",function(sr){return sr})):ee!=null&&(q(ee)&&(ee=K(ee,Dt+(ee.key==null||W&&W.key===ee.key?"":(""+ee.key).replace(j,"$&/")+"/")+Ee)),ft.push(ee)),1;Ee=0;var xe=Mt===""?".":Mt+":";if(Le(W))for(var Ze=0;Ze<W.length;Ze++)Mt=W[Ze],Nt=xe+Pt(Mt,Ze),Ee+=ot(Mt,ft,Dt,Nt,ee);else if(Ze=et(W),typeof Ze=="function")for(W=Ze.call(W),Ze=0;!(Mt=W.next()).done;)Mt=Mt.value,Nt=xe+Pt(Mt,Ze++),Ee+=ot(Mt,ft,Dt,Nt,ee);else if(Nt==="object"){if(typeof W.then=="function")return ot(nt(W),ft,Dt,Mt,ee);throw ft=String(W),Error("Objects are not valid as a React child (found: "+(ft==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ft)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function pt(W,ft,Dt){if(W==null)return W;var Mt=[],ee=0;return ot(W,Mt,"","",function(Nt){return ft.call(Dt,Nt,ee++)}),Mt}function Yt(W){if(W._status===-1){var ft=W._result;ft=ft(),ft.then(function(Dt){(W._status===0||W._status===-1)&&(W._status=1,W._result=Dt)},function(Dt){(W._status===0||W._status===-1)&&(W._status=2,W._result=Dt)}),W._status===-1&&(W._status=0,W._result=ft)}if(W._status===1)return W._result.default;throw W._result}var ce=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ft=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ft))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},ye={map:pt,forEach:function(W,ft,Dt){pt(W,function(){ft.apply(this,arguments)},Dt)},count:function(W){var ft=0;return pt(W,function(){ft++}),ft},toArray:function(W){return pt(W,function(ft){return ft})||[]},only:function(W){if(!q(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return le.Activity=L,le.Children=ye,le.Component=zt,le.Fragment=r,le.Profiler=d,le.PureComponent=bt,le.StrictMode=u,le.Suspense=I,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,le.__COMPILER_RUNTIME={__proto__:null,c:function(W){return k.H.useMemoCache(W)}},le.cache=function(W){return function(){return W.apply(null,arguments)}},le.cacheSignal=function(){return null},le.cloneElement=function(W,ft,Dt){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Mt=gt({},W.props),ee=W.key;if(ft!=null)for(Nt in ft.key!==void 0&&(ee=""+ft.key),ft)!z.call(ft,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&ft.ref===void 0||(Mt[Nt]=ft[Nt]);var Nt=arguments.length-2;if(Nt===1)Mt.children=Dt;else if(1<Nt){for(var Ee=Array(Nt),xe=0;xe<Nt;xe++)Ee[xe]=arguments[xe+2];Mt.children=Ee}return P(W.type,ee,Mt)},le.createContext=function(W){return W={$$typeof:_,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:m,_context:W},W},le.createElement=function(W,ft,Dt){var Mt,ee={},Nt=null;if(ft!=null)for(Mt in ft.key!==void 0&&(Nt=""+ft.key),ft)z.call(ft,Mt)&&Mt!=="key"&&Mt!=="__self"&&Mt!=="__source"&&(ee[Mt]=ft[Mt]);var Ee=arguments.length-2;if(Ee===1)ee.children=Dt;else if(1<Ee){for(var xe=Array(Ee),Ze=0;Ze<Ee;Ze++)xe[Ze]=arguments[Ze+2];ee.children=xe}if(W&&W.defaultProps)for(Mt in Ee=W.defaultProps,Ee)ee[Mt]===void 0&&(ee[Mt]=Ee[Mt]);return P(W,Nt,ee)},le.createRef=function(){return{current:null}},le.forwardRef=function(W){return{$$typeof:S,render:W}},le.isValidElement=q,le.lazy=function(W){return{$$typeof:M,_payload:{_status:-1,_result:W},_init:Yt}},le.memo=function(W,ft){return{$$typeof:T,type:W,compare:ft===void 0?null:ft}},le.startTransition=function(W){var ft=k.T,Dt={};k.T=Dt;try{var Mt=W(),ee=k.S;ee!==null&&ee(Dt,Mt),typeof Mt=="object"&&Mt!==null&&typeof Mt.then=="function"&&Mt.then(Ht,ce)}catch(Nt){ce(Nt)}finally{ft!==null&&Dt.types!==null&&(ft.types=Dt.types),k.T=ft}},le.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},le.use=function(W){return k.H.use(W)},le.useActionState=function(W,ft,Dt){return k.H.useActionState(W,ft,Dt)},le.useCallback=function(W,ft){return k.H.useCallback(W,ft)},le.useContext=function(W){return k.H.useContext(W)},le.useDebugValue=function(){},le.useDeferredValue=function(W,ft){return k.H.useDeferredValue(W,ft)},le.useEffect=function(W,ft){return k.H.useEffect(W,ft)},le.useEffectEvent=function(W){return k.H.useEffectEvent(W)},le.useId=function(){return k.H.useId()},le.useImperativeHandle=function(W,ft,Dt){return k.H.useImperativeHandle(W,ft,Dt)},le.useInsertionEffect=function(W,ft){return k.H.useInsertionEffect(W,ft)},le.useLayoutEffect=function(W,ft){return k.H.useLayoutEffect(W,ft)},le.useMemo=function(W,ft){return k.H.useMemo(W,ft)},le.useOptimistic=function(W,ft){return k.H.useOptimistic(W,ft)},le.useReducer=function(W,ft,Dt){return k.H.useReducer(W,ft,Dt)},le.useRef=function(W){return k.H.useRef(W)},le.useState=function(W){return k.H.useState(W)},le.useSyncExternalStore=function(W,ft,Dt){return k.H.useSyncExternalStore(W,ft,Dt)},le.useTransition=function(){return k.H.useTransition()},le.version="19.2.3",le}var Qm;function s0(){return Qm||(Qm=1,x1.exports=Bx()),x1.exports}var Mn=s0();const Vx=r0(Mn);var A1={exports:{}},ou={},_1={exports:{}},w1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Px(){return Zm||(Zm=1,(function(o){function t(ot,pt){var Yt=ot.length;ot.push(pt);t:for(;0<Yt;){var ce=Yt-1>>>1,ye=ot[ce];if(0<d(ye,pt))ot[ce]=pt,ot[Yt]=ye,Yt=ce;else break t}}function r(ot){return ot.length===0?null:ot[0]}function u(ot){if(ot.length===0)return null;var pt=ot[0],Yt=ot.pop();if(Yt!==pt){ot[0]=Yt;t:for(var ce=0,ye=ot.length,W=ye>>>1;ce<W;){var ft=2*(ce+1)-1,Dt=ot[ft],Mt=ft+1,ee=ot[Mt];if(0>d(Dt,Yt))Mt<ye&&0>d(ee,Dt)?(ot[ce]=ee,ot[Mt]=Yt,ce=Mt):(ot[ce]=Dt,ot[ft]=Yt,ce=ft);else if(Mt<ye&&0>d(ee,Yt))ot[ce]=ee,ot[Mt]=Yt,ce=Mt;else break t}}return pt}function d(ot,pt){var Yt=ot.sortIndex-pt.sortIndex;return Yt!==0?Yt:ot.id-pt.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;o.unstable_now=function(){return m.now()}}else{var _=Date,S=_.now();o.unstable_now=function(){return _.now()-S}}var I=[],T=[],M=1,L=null,X=3,et=!1,wt=!1,gt=!1,At=!1,zt=typeof setTimeout=="function"?setTimeout:null,Lt=typeof clearTimeout=="function"?clearTimeout:null,bt=typeof setImmediate<"u"?setImmediate:null;function jt(ot){for(var pt=r(T);pt!==null;){if(pt.callback===null)u(T);else if(pt.startTime<=ot)u(T),pt.sortIndex=pt.expirationTime,t(I,pt);else break;pt=r(T)}}function Le(ot){if(gt=!1,jt(ot),!wt)if(r(I)!==null)wt=!0,Ht||(Ht=!0,Y());else{var pt=r(T);pt!==null&&nt(Le,pt.startTime-ot)}}var Ht=!1,k=-1,z=5,P=-1;function K(){return At?!0:!(o.unstable_now()-P<z)}function q(){if(At=!1,Ht){var ot=o.unstable_now();P=ot;var pt=!0;try{t:{wt=!1,gt&&(gt=!1,Lt(k),k=-1),et=!0;var Yt=X;try{e:{for(jt(ot),L=r(I);L!==null&&!(L.expirationTime>ot&&K());){var ce=L.callback;if(typeof ce=="function"){L.callback=null,X=L.priorityLevel;var ye=ce(L.expirationTime<=ot);if(ot=o.unstable_now(),typeof ye=="function"){L.callback=ye,jt(ot),pt=!0;break e}L===r(I)&&u(I),jt(ot)}else u(I);L=r(I)}if(L!==null)pt=!0;else{var W=r(T);W!==null&&nt(Le,W.startTime-ot),pt=!1}}break t}finally{L=null,X=Yt,et=!1}pt=void 0}}finally{pt?Y():Ht=!1}}}var Y;if(typeof bt=="function")Y=function(){bt(q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Pt=j.port2;j.port1.onmessage=q,Y=function(){Pt.postMessage(null)}}else Y=function(){zt(q,0)};function nt(ot,pt){k=zt(function(){ot(o.unstable_now())},pt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(ot){ot.callback=null},o.unstable_forceFrameRate=function(ot){0>ot||125<ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ot?Math.floor(1e3/ot):5},o.unstable_getCurrentPriorityLevel=function(){return X},o.unstable_next=function(ot){switch(X){case 1:case 2:case 3:var pt=3;break;default:pt=X}var Yt=X;X=pt;try{return ot()}finally{X=Yt}},o.unstable_requestPaint=function(){At=!0},o.unstable_runWithPriority=function(ot,pt){switch(ot){case 1:case 2:case 3:case 4:case 5:break;default:ot=3}var Yt=X;X=ot;try{return pt()}finally{X=Yt}},o.unstable_scheduleCallback=function(ot,pt,Yt){var ce=o.unstable_now();switch(typeof Yt=="object"&&Yt!==null?(Yt=Yt.delay,Yt=typeof Yt=="number"&&0<Yt?ce+Yt:ce):Yt=ce,ot){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Yt+ye,ot={id:M++,callback:pt,priorityLevel:ot,startTime:Yt,expirationTime:ye,sortIndex:-1},Yt>ce?(ot.sortIndex=Yt,t(T,ot),r(I)===null&&ot===r(T)&&(gt?(Lt(k),k=-1):gt=!0,nt(Le,Yt-ce))):(ot.sortIndex=ye,t(I,ot),wt||et||(wt=!0,Ht||(Ht=!0,Y()))),ot},o.unstable_shouldYield=K,o.unstable_wrapCallback=function(ot){var pt=X;return function(){var Yt=X;X=pt;try{return ot.apply(this,arguments)}finally{X=Yt}}}})(w1)),w1}var Wm;function kx(){return Wm||(Wm=1,_1.exports=Px()),_1.exports}var T1={exports:{}},Vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function Ux(){if(Km)return Vi;Km=1;var o=s0();function t(I){var T="https://react.dev/errors/"+I;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)T+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+I+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var u={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(I,T,M){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:L==null?null:""+L,children:I,containerInfo:T,implementation:M}}var _=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(I,T){if(I==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Vi.createPortal=function(I,T){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(t(299));return m(I,T,null,M)},Vi.flushSync=function(I){var T=_.T,M=u.p;try{if(_.T=null,u.p=2,I)return I()}finally{_.T=T,u.p=M,u.d.f()}},Vi.preconnect=function(I,T){typeof I=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,u.d.C(I,T))},Vi.prefetchDNS=function(I){typeof I=="string"&&u.d.D(I)},Vi.preinit=function(I,T){if(typeof I=="string"&&T&&typeof T.as=="string"){var M=T.as,L=S(M,T.crossOrigin),X=typeof T.integrity=="string"?T.integrity:void 0,et=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;M==="style"?u.d.S(I,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:L,integrity:X,fetchPriority:et}):M==="script"&&u.d.X(I,{crossOrigin:L,integrity:X,fetchPriority:et,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},Vi.preinitModule=function(I,T){if(typeof I=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var M=S(T.as,T.crossOrigin);u.d.M(I,{crossOrigin:M,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&u.d.M(I)},Vi.preload=function(I,T){if(typeof I=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var M=T.as,L=S(M,T.crossOrigin);u.d.L(I,M,{crossOrigin:L,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},Vi.preloadModule=function(I,T){if(typeof I=="string")if(T){var M=S(T.as,T.crossOrigin);u.d.m(I,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:M,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else u.d.m(I)},Vi.requestFormReset=function(I){u.d.r(I)},Vi.unstable_batchedUpdates=function(I,T){return I(T)},Vi.useFormState=function(I,T,M){return _.H.useFormState(I,T,M)},Vi.useFormStatus=function(){return _.H.useHostTransitionStatus()},Vi.version="19.2.3",Vi}var Jm;function Fx(){if(Jm)return T1.exports;Jm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),T1.exports=Ux(),T1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function zx(){if($m)return ou;$m=1;var o=kx(),t=s0(),r=Fx();function u(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function _(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function S(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function I(e){if(m(e)!==e)throw Error(u(188))}function T(e){var i=e.alternate;if(!i){if(i=m(e),i===null)throw Error(u(188));return i!==e?null:e}for(var l=e,f=i;;){var E=l.return;if(E===null)break;var A=E.alternate;if(A===null){if(f=E.return,f!==null){l=f;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===l)return I(E),e;if(A===f)return I(E),i;A=A.sibling}throw Error(u(188))}if(l.return!==f.return)l=E,f=A;else{for(var b=!1,B=E.child;B;){if(B===l){b=!0,l=E,f=A;break}if(B===f){b=!0,f=E,l=A;break}B=B.sibling}if(!b){for(B=A.child;B;){if(B===l){b=!0,l=A,f=E;break}if(B===f){b=!0,f=A,l=E;break}B=B.sibling}if(!b)throw Error(u(189))}}if(l.alternate!==f)throw Error(u(190))}if(l.tag!==3)throw Error(u(188));return l.stateNode.current===l?e:i}function M(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=M(e),i!==null)return i;e=e.sibling}return null}var L=Object.assign,X=Symbol.for("react.element"),et=Symbol.for("react.transitional.element"),wt=Symbol.for("react.portal"),gt=Symbol.for("react.fragment"),At=Symbol.for("react.strict_mode"),zt=Symbol.for("react.profiler"),Lt=Symbol.for("react.consumer"),bt=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Ht=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var j=Symbol.for("react.client.reference");function Pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===j?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gt:return"Fragment";case zt:return"Profiler";case At:return"StrictMode";case Le:return"Suspense";case Ht:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case wt:return"Portal";case bt:return e.displayName||"Context";case Lt:return(e._context.displayName||"Context")+".Consumer";case jt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return i=e.displayName||null,i!==null?i:Pt(e.type)||"Memo";case z:i=e._payload,e=e._init;try{return Pt(e(i))}catch{}}return null}var nt=Array.isArray,ot=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Yt={pending:!1,data:null,method:null,action:null},ce=[],ye=-1;function W(e){return{current:e}}function ft(e){0>ye||(e.current=ce[ye],ce[ye]=null,ye--)}function Dt(e,i){ye++,ce[ye]=e.current,e.current=i}var Mt=W(null),ee=W(null),Nt=W(null),Ee=W(null);function xe(e,i){switch(Dt(Nt,i),Dt(ee,e),Dt(Mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?gm(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=gm(i),e=mm(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ft(Mt),Dt(Mt,e)}function Ze(){ft(Mt),ft(ee),ft(Nt)}function sr(e){e.memoizedState!==null&&Dt(Ee,e);var i=Mt.current,l=mm(i,e.type);i!==l&&(Dt(ee,e),Dt(Mt,l))}function Fn(e){ee.current===e&&(ft(Mt),ft(ee)),Ee.current===e&&(ft(Ee),nu._currentValue=Yt)}var Xr,Ae;function ci(e){if(Xr===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Xr=i&&i[1]||"",Ae=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+e+Ae}var Ni=!1;function ar(e,i){if(!e||Ni)return"";Ni=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(i){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(ht){var at=ht}Reflect.construct(e,[],yt)}else{try{yt.call()}catch(ht){at=ht}e.call(yt.prototype)}}else{try{throw Error()}catch(ht){at=ht}(yt=e())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(ht){if(ht&&at&&typeof ht.stack=="string")return[ht.stack,at.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=f.DetermineComponentFrameRoot(),b=A[0],B=A[1];if(b&&B){var H=b.split(`
`),st=B.split(`
`);for(E=f=0;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;for(;E<st.length&&!st[E].includes("DetermineComponentFrameRoot");)E++;if(f===H.length||E===st.length)for(f=H.length-1,E=st.length-1;1<=f&&0<=E&&H[f]!==st[E];)E--;for(;1<=f&&0<=E;f--,E--)if(H[f]!==st[E]){if(f!==1||E!==1)do if(f--,E--,0>E||H[f]!==st[E]){var dt=`
`+H[f].replace(" at new "," at ");return e.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",e.displayName)),dt}while(1<=f&&0<=E);break}}}finally{Ni=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ci(l):""}function bn(e,i){switch(e.tag){case 26:case 27:case 5:return ci(e.type);case 16:return ci("Lazy");case 13:return e.child!==i&&i!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return ar(e.type,!1);case 11:return ar(e.type.render,!1);case 1:return ar(e.type,!0);case 31:return ci("Activity");default:return""}}function je(e){try{var i="",l=null;do i+=bn(e,l),l=e,e=e.return;while(e);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Wt=Object.prototype.hasOwnProperty,xn=o.unstable_scheduleCallback,Bt=o.unstable_cancelCallback,na=o.unstable_shouldYield,Za=o.unstable_requestPaint,dn=o.unstable_now,qr=o.unstable_getCurrentPriorityLevel,hi=o.unstable_ImmediatePriority,ia=o.unstable_UserBlockingPriority,fi=o.unstable_NormalPriority,Jn=o.unstable_LowPriority,Wa=o.unstable_IdlePriority,_s=o.log,Ro=o.unstable_setDisableYieldValue,He=null,Ct=null;function Ge(e){if(typeof _s=="function"&&Ro(e),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(He,e)}catch{}}var ne=Math.clz32?Math.clz32:ra,ln=Math.log,br=Math.LN2;function ra(e){return e>>>=0,e===0?32:31-(ln(e)/br|0)|0}var or=256,pe=262144,rn=4194304;function lr(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ur(e,i,l){var f=e.pendingLanes;if(f===0)return 0;var E=0,A=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var B=f&134217727;return B!==0?(f=B&~A,f!==0?E=lr(f):(b&=B,b!==0?E=lr(b):l||(l=B&~e,l!==0&&(E=lr(l))))):(B=f&~A,B!==0?E=lr(B):b!==0?E=lr(b):l||(l=f&~e,l!==0&&(E=lr(l)))),E===0?0:i!==0&&i!==E&&(i&A)===0&&(A=E&-E,l=i&-i,A>=l||A===32&&(l&4194048)!==0)?i:E}function In(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ka(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var e=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),e}function di(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function Ir(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qi(e,i,l,f,E,A){var b=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var B=e.entanglements,H=e.expirationTimes,st=e.hiddenUpdates;for(l=b&~l;0<l;){var dt=31-ne(l),yt=1<<dt;B[dt]=0,H[dt]=-1;var at=st[dt];if(at!==null)for(st[dt]=null,dt=0;dt<at.length;dt++){var ht=at[dt];ht!==null&&(ht.lane&=-536870913)}l&=~yt}f!==0&&ws(e,f,0),A!==0&&E===0&&e.tag!==0&&(e.suspendedLanes|=A&~(b&~i))}function ws(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var f=31-ne(i);e.entangledLanes|=i,e.entanglements[f]=e.entanglements[f]|1073741824|l&261930}function cr(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var f=31-ne(l),E=1<<f;E&i|e[f]&i&&(e[f]|=i),l&=~E}}function Ts(e,i){var l=i&-i;return l=(l&42)!==0?1:Bn(l),(l&(e.suspendedLanes|i))!==0?0:l}function Bn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function gi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function mi(){var e=pt.p;return e!==0?e:(e=window.event,e===void 0?32:km(e.type))}function Ot(e,i){var l=pt.p;try{return pt.p=e,i()}finally{pt.p=l}}var ri=Math.random().toString(36).slice(2),An="__reactFiber$"+ri,Fe="__reactProps$"+ri,pi="__reactContainer$"+ri,Qr="__reactEvents$"+ri,sa="__reactListeners$"+ri,Fi="__reactHandles$"+ri,Do="__reactResources$"+ri,Nr="__reactMarker$"+ri;function yi(e){delete e[An],delete e[Fe],delete e[Qr],delete e[sa],delete e[Fi]}function fn(e){var i=e[An];if(i)return i;for(var l=e.parentNode;l;){if(i=l[pi]||l[An]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=wm(e);e!==null;){if(l=e[An])return l;e=wm(e)}return i}e=l,l=e.parentNode}return null}function Te(e){if(e=e[An]||e[pi]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Ri(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(u(33))}function $n(e){var i=e[Do];return i||(i=e[Do]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _n(e){e[Nr]=!0}var Et=new Set,Ja={};function ze(e,i){Ei(e,i),Ei(e+"Capture",i)}function Ei(e,i){for(Ja[e]=i,e=0;e<i.length;e++)Et.add(i[e])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ie={},Ce={};function ge(e){return Wt.call(Ce,e)?!0:Wt.call(Ie,e)?!1:$a.test(e)?Ce[e]=!0:(Ie[e]=!0,!1)}function rs(e,i,l){if(ge(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var f=i.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function xi(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function wn(e,i,l,f){if(f===null)e.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+f)}}function _e(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ai(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function to(e,i,l){var f=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,A=f.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return E.call(this)},set:function(b){l=""+b,A.call(this,b)}}),Object.defineProperty(e,i,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function $t(e){if(!e._valueTracker){var i=Ai(e)?"checked":"value";e._valueTracker=to(e,i,""+e[i])}}function Di(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),f="";return e&&(f=Ai(e)?e.checked?"true":"false":e.value),e=f,e!==l?(i.setValue(e),!0):!1}function Rr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qi=/[\n"\\]/g;function fe(e){return e.replace(Qi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nn(e,i,l,f,E,A,b,B){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+_e(i)):e.value!==""+_e(i)&&(e.value=""+_e(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?U(e,b,_e(i)):l!=null?U(e,b,_e(l)):f!=null&&e.removeAttribute("value"),E==null&&A!=null&&(e.defaultChecked=!!A),E!=null&&(e.checked=E&&typeof E!="function"&&typeof E!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.name=""+_e(B):e.removeAttribute("name")}function it(e,i,l,f,E,A,b,B){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(e.type=A),i!=null||l!=null){if(!(A!=="submit"&&A!=="reset"||i!=null)){$t(e);return}l=l!=null?""+_e(l):"",i=i!=null?""+_e(i):l,B||i===e.value||(e.value=i),e.defaultValue=i}f=f??E,f=typeof f!="function"&&typeof f!="symbol"&&!!f,e.checked=B?e.checked:!!f,e.defaultChecked=!!f,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),$t(e)}function U(e,i,l){i==="number"&&Rr(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Ut(e,i,l,f){if(e=e.options,i){i={};for(var E=0;E<l.length;E++)i["$"+l[E]]=!0;for(l=0;l<e.length;l++)E=i.hasOwnProperty("$"+e[l].value),e[l].selected!==E&&(e[l].selected=E),E&&f&&(e[l].defaultSelected=!0)}else{for(l=""+_e(l),i=null,E=0;E<e.length;E++){if(e[E].value===l){e[E].selected=!0,f&&(e[E].defaultSelected=!0);return}i!==null||e[E].disabled||(i=e[E])}i!==null&&(i.selected=!0)}}function Rn(e,i,l){if(i!=null&&(i=""+_e(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+_e(l):""}function jn(e,i,l,f){if(i==null){if(f!=null){if(l!=null)throw Error(u(92));if(nt(f)){if(1<f.length)throw Error(u(93));f=f[0]}l=f}l==null&&(l=""),i=l}l=_e(i),e.defaultValue=l,f=e.textContent,f===l&&f!==""&&f!==null&&(e.value=f),$t(e)}function Mi(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var aa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function si(e,i,l){var f=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":f?e.setProperty(i,l):typeof l!="number"||l===0||aa.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function Xt(e,i,l){if(i!=null&&typeof i!="object")throw Error(u(62));if(e=e.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||i!=null&&i.hasOwnProperty(f)||(f.indexOf("--")===0?e.setProperty(f,""):f==="float"?e.cssFloat="":e[f]="");for(var E in i)f=i[E],i.hasOwnProperty(E)&&l[E]!==f&&si(e,E,f)}else for(var A in i)i.hasOwnProperty(A)&&si(e,A,i[A])}function We(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(e){return ss.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Oi(){}var Cs=null;function Zi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var un=null,Li=null;function Bi(e){var i=Te(e);if(i&&(e=i.stateNode)){var l=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Nn(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fe(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var f=l[i];if(f!==e&&f.form===e.form){var E=f[Fe]||null;if(!E)throw Error(u(90));Nn(f,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<l.length;i++)f=l[i],f.form===e.form&&Di(f)}break t;case"textarea":Rn(e,l.value,l.defaultValue);break t;case"select":i=l.value,i!=null&&Ut(e,!!l.multiple,i,!1)}}}var Qt=!1;function os(e,i,l){if(Qt)return e(i,l);Qt=!0;try{var f=e(i);return f}finally{if(Qt=!1,(un!==null||Li!==null)&&(pc(),un&&(i=un,e=Li,Li=un=null,Bi(i),e)))for(i=0;i<e.length;i++)Bi(e[i])}}function Kt(e,i){var l=e.stateNode;if(l===null)return null;var f=l[Fe]||null;if(f===null)return null;l=f[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break t;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(u(231,i,typeof l));return l}var Ke=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ss=!1;if(Ke)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){Ss=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{Ss=!1}var hr=null,fr=null,vs=null;function Zr(){if(vs)return vs;var e,i=fr,l=i.length,f,E="value"in hr?hr.value:hr.textContent,A=E.length;for(e=0;e<l&&i[e]===E[e];e++);var b=l-e;for(f=1;f<=b&&i[l-f]===E[A-f];f++);return vs=E.slice(e,1<f?1-f:void 0)}function dr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Wi(){return!1}function Dn(e){function i(l,f,E,A,b){this._reactName=l,this._targetInst=E,this.type=f,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(l=e[B],this[B]=l?l(A):A[B]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?zi:Wi,this.isPropagationStopped=Wi,this}return L(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gn=Dn(ji),Wr=L({},ji,{view:0,detail:0}),oa=Dn(Wr),Kr,la,Dr,ua=L({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(Kr=e.screenX-Dr.screenX,la=e.screenY-Dr.screenY):la=Kr=0,Dr=e),Kr)},movementY:function(e){return"movementY"in e?e.movementY:la}}),Pe=Dn(ua),ls=L({},ua,{dataTransfer:0}),bs=Dn(ls),gr=L({},Wr,{relatedTarget:0}),Is=Dn(gr),lt=L({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),oe=Dn(lt),Tn=L({},ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ns=Dn(Tn),no=L({},ji,{data:0}),Mr=Dn(no),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ca={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ca[e])?!!i[e]:!1}function Or(){return Cn}var we=L({},Wr,{key:function(e){if(e.key){var i=Mo[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Oo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(e){return e.type==="keypress"?dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rs=Dn(we),Lr=L({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Se=Dn(Lr),p=L({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),C=Dn(p),N=L({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Dn(N),$=L({},ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=Dn($),It=L({},ji,{newState:0,oldState:0}),re=Dn(It),Sn=[9,13,27,32],Be=Ke&&"CompositionEvent"in window,cn=null;Ke&&"documentMode"in document&&(cn=document.documentMode);var Hi=Ke&&"TextEvent"in window&&!cn,Br=Ke&&(!Be||cn&&8<cn&&11>=cn),ai=" ",Gi=!1;function Ds(e,i){switch(e){case"keyup":return Sn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ha=!1;function us(e,i){switch(e){case"compositionend":return Vr(i);case"keypress":return i.which!==32?null:(Gi=!0,ai);case"textInput":return e=i.data,e===ai&&Gi?null:e;default:return null}}function Lo(e,i){if(ha)return e==="compositionend"||!Be&&Ds(e,i)?(e=Zr(),vs=fr=hr=null,ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Br&&i.locale!=="ko"?null:i.data;default:return null}}var Ki={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ki[e.type]:i==="textarea"}function mr(e,i,l,f){un?Li?Li.push(f):Li=[f]:un=f,i=Tc(i,"onChange"),0<i.length&&(l=new gn("onChange","change",null,l,f),e.push({event:l,listeners:i}))}var io=null,Ms=null;function Rh(e){lm(e,0)}function ro(e){var i=Ri(e);if(Di(i))return e}function pr(e,i){if(e==="change")return i}var Lu=!1;if(Ke){var so;if(Ke){var Os="oninput"in document;if(!Os){var Ne=document.createElement("div");Ne.setAttribute("oninput","return;"),Os=typeof Ne.oninput=="function"}so=Os}else so=!1;Lu=so&&(!document.documentMode||9<document.documentMode)}function ao(){io&&(io.detachEvent("onpropertychange",R),Ms=io=null)}function R(e){if(e.propertyName==="value"&&ro(Ms)){var i=[];mr(i,Ms,e,Zi(e)),os(Rh,i)}}function n(e,i,l){e==="focusin"?(ao(),io=i,Ms=l,io.attachEvent("onpropertychange",R)):e==="focusout"&&ao()}function s(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ro(Ms)}function a(e,i){if(e==="click")return ro(i)}function c(e,i){if(e==="input"||e==="change")return ro(i)}function h(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var g=typeof Object.is=="function"?Object.is:h;function y(e,i){if(g(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),f=Object.keys(i);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var E=l[f];if(!Wt.call(i,E)||!g(e[E],i[E]))return!1}return!0}function x(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w(e,i){var l=x(e);e=0;for(var f;l;){if(l.nodeType===3){if(f=e+l.textContent.length,e<=i&&f>=i)return{node:l,offset:i-e};e=f}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=x(l)}}function v(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?v(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function D(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Rr(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Rr(e.document)}return i}function O(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var F=Ke&&"documentMode"in document&&11>=document.documentMode,G=null,Q=null,tt=null,ut=!1;function vt(e,i,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ut||G==null||G!==Rr(f)||(f=G,"selectionStart"in f&&O(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),tt&&y(tt,f)||(tt=f,f=Tc(Q,"onSelect"),0<f.length&&(i=new gn("onSelect","select",null,i,l),e.push({event:i,listeners:f}),i.target=G)))}function St(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var _t={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionrun:St("Transition","TransitionRun"),transitionstart:St("Transition","TransitionStart"),transitioncancel:St("Transition","TransitionCancel"),transitionend:St("Transition","TransitionEnd")},me={},se={};Ke&&(se=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);function Vn(e){if(me[e])return me[e];if(!_t[e])return e;var i=_t[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in se)return me[e]=i[l];return e}var Ji=Vn("animationend"),_i=Vn("animationiteration"),Je=Vn("animationstart"),ti=Vn("transitionrun"),Yi=Vn("transitionstart"),fa=Vn("transitioncancel"),Ls=Vn("transitionend"),Bu=new Map,bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bl.push("scrollEnd");function Jr(e,i){Bu.set(e,i),ze(i,[e])}var Vu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pr=[],Bo=0,Dh=0;function Pu(){for(var e=Bo,i=Dh=Bo=0;i<e;){var l=Pr[i];Pr[i++]=null;var f=Pr[i];Pr[i++]=null;var E=Pr[i];Pr[i++]=null;var A=Pr[i];if(Pr[i++]=null,f!==null&&E!==null){var b=f.pending;b===null?E.next=E:(E.next=b.next,b.next=E),f.pending=E}A!==0&&H0(l,E,A)}}function ku(e,i,l,f){Pr[Bo++]=e,Pr[Bo++]=i,Pr[Bo++]=l,Pr[Bo++]=f,Dh|=f,e.lanes|=f,e=e.alternate,e!==null&&(e.lanes|=f)}function Mh(e,i,l,f){return ku(e,i,l,f),Uu(e)}function oo(e,i){return ku(e,null,null,i),Uu(e)}function H0(e,i,l){e.lanes|=l;var f=e.alternate;f!==null&&(f.lanes|=l);for(var E=!1,A=e.return;A!==null;)A.childLanes|=l,f=A.alternate,f!==null&&(f.childLanes|=l),A.tag===22&&(e=A.stateNode,e===null||e._visibility&1||(E=!0)),e=A,A=A.return;return e.tag===3?(A=e.stateNode,E&&i!==null&&(E=31-ne(l),e=A.hiddenUpdates,f=e[E],f===null?e[E]=[i]:f.push(i),i.lane=l|536870912),A):null}function Uu(e){if(50<Zl)throw Zl=0,jf=null,Error(u(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Vo={};function mE(e,i,l,f){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(e,i,l,f){return new mE(e,i,l,f)}function Oh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bs(e,i){var l=e.alternate;return l===null?(l=yr(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function G0(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Fu(e,i,l,f,E,A){var b=0;if(f=e,typeof e=="function")Oh(e)&&(b=1);else if(typeof e=="string")b=Ax(e,l,Mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case P:return e=yr(31,l,i,E),e.elementType=P,e.lanes=A,e;case gt:return lo(l.children,E,A,i);case At:b=8,E|=24;break;case zt:return e=yr(12,l,i,E|2),e.elementType=zt,e.lanes=A,e;case Le:return e=yr(13,l,i,E),e.elementType=Le,e.lanes=A,e;case Ht:return e=yr(19,l,i,E),e.elementType=Ht,e.lanes=A,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bt:b=10;break t;case Lt:b=9;break t;case jt:b=11;break t;case k:b=14;break t;case z:b=16,f=null;break t}b=29,l=Error(u(130,e===null?"null":typeof e,"")),f=null}return i=yr(b,l,i,E),i.elementType=e,i.type=f,i.lanes=A,i}function lo(e,i,l,f){return e=yr(7,e,f,i),e.lanes=l,e}function Lh(e,i,l){return e=yr(6,e,null,i),e.lanes=l,e}function Y0(e){var i=yr(18,null,null,0);return i.stateNode=e,i}function Bh(e,i,l){return i=yr(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var X0=new WeakMap;function kr(e,i){if(typeof e=="object"&&e!==null){var l=X0.get(e);return l!==void 0?l:(i={value:e,source:i,stack:je(i)},X0.set(e,i),i)}return{value:e,source:i,stack:je(i)}}var Po=[],ko=0,zu=null,Il=0,Ur=[],Fr=0,da=null,cs=1,hs="";function Vs(e,i){Po[ko++]=Il,Po[ko++]=zu,zu=e,Il=i}function q0(e,i,l){Ur[Fr++]=cs,Ur[Fr++]=hs,Ur[Fr++]=da,da=e;var f=cs;e=hs;var E=32-ne(f)-1;f&=~(1<<E),l+=1;var A=32-ne(i)+E;if(30<A){var b=E-E%5;A=(f&(1<<b)-1).toString(32),f>>=b,E-=b,cs=1<<32-ne(i)+E|l<<E|f,hs=A+e}else cs=1<<A|l<<E|f,hs=e}function Vh(e){e.return!==null&&(Vs(e,1),q0(e,1,0))}function Ph(e){for(;e===zu;)zu=Po[--ko],Po[ko]=null,Il=Po[--ko],Po[ko]=null;for(;e===da;)da=Ur[--Fr],Ur[Fr]=null,hs=Ur[--Fr],Ur[Fr]=null,cs=Ur[--Fr],Ur[Fr]=null}function Q0(e,i){Ur[Fr++]=cs,Ur[Fr++]=hs,Ur[Fr++]=da,cs=i.id,hs=i.overflow,da=e}var wi=null,mn=null,Ve=!1,ga=null,zr=!1,kh=Error(u(519));function ma(e){var i=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(kr(i,e)),kh}function Z0(e){var i=e.stateNode,l=e.type,f=e.memoizedProps;switch(i[An]=e,i[Fe]=f,l){case"dialog":be("cancel",i),be("close",i);break;case"iframe":case"object":case"embed":be("load",i);break;case"video":case"audio":for(l=0;l<Kl.length;l++)be(Kl[l],i);break;case"source":be("error",i);break;case"img":case"image":case"link":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"input":be("invalid",i),it(i,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":be("invalid",i);break;case"textarea":be("invalid",i),jn(i,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||f.suppressHydrationWarning===!0||fm(i.textContent,l)?(f.popover!=null&&(be("beforetoggle",i),be("toggle",i)),f.onScroll!=null&&be("scroll",i),f.onScrollEnd!=null&&be("scrollend",i),f.onClick!=null&&(i.onclick=Oi),i=!0):i=!1,i||ma(e,!0)}function W0(e){for(wi=e.return;wi;)switch(wi.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:wi=wi.return}}function Uo(e){if(e!==wi)return!1;if(!Ve)return W0(e),Ve=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||i1(e.type,e.memoizedProps)),l=!l),l&&mn&&ma(e),W0(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));mn=_m(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));mn=_m(e)}else i===27?(i=mn,Na(e.type)?(e=l1,l1=null,mn=e):mn=i):mn=wi?Hr(e.stateNode.nextSibling):null;return!0}function uo(){mn=wi=null,Ve=!1}function Uh(){var e=ga;return e!==null&&(nr===null?nr=e:nr.push.apply(nr,e),ga=null),e}function Nl(e){ga===null?ga=[e]:ga.push(e)}var Fh=W(null),co=null,Ps=null;function pa(e,i,l){Dt(Fh,i._currentValue),i._currentValue=l}function ks(e){e._currentValue=Fh.current,ft(Fh)}function zh(e,i,l){for(;e!==null;){var f=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),e===l)break;e=e.return}}function jh(e,i,l,f){var E=e.child;for(E!==null&&(E.return=e);E!==null;){var A=E.dependencies;if(A!==null){var b=E.child;A=A.firstContext;t:for(;A!==null;){var B=A;A=E;for(var H=0;H<i.length;H++)if(B.context===i[H]){A.lanes|=l,B=A.alternate,B!==null&&(B.lanes|=l),zh(A.return,l,e),f||(b=null);break t}A=B.next}}else if(E.tag===18){if(b=E.return,b===null)throw Error(u(341));b.lanes|=l,A=b.alternate,A!==null&&(A.lanes|=l),zh(b,l,e),b=null}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===e){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}}function Fo(e,i,l,f){e=null;for(var E=i,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var b=E.alternate;if(b===null)throw Error(u(387));if(b=b.memoizedProps,b!==null){var B=E.type;g(E.pendingProps.value,b.value)||(e!==null?e.push(B):e=[B])}}else if(E===Ee.current){if(b=E.alternate,b===null)throw Error(u(387));b.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(e!==null?e.push(nu):e=[nu])}E=E.return}e!==null&&jh(i,e,l,f),i.flags|=262144}function ju(e){for(e=e.firstContext;e!==null;){if(!g(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ho(e){co=e,Ps=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ti(e){return K0(co,e)}function Hu(e,i){return co===null&&ho(e),K0(e,i)}function K0(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Ps===null){if(e===null)throw Error(u(308));Ps=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ps=Ps.next=i;return l}var pE=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,f){e.push(f)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},yE=o.unstable_scheduleCallback,EE=o.unstable_NormalPriority,Xn={$$typeof:bt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hh(){return{controller:new pE,data:new Map,refCount:0}}function Rl(e){e.refCount--,e.refCount===0&&yE(EE,function(){e.controller.abort()})}var Dl=null,Gh=0,zo=0,jo=null;function xE(e,i){if(Dl===null){var l=Dl=[];Gh=0,zo=Qf(),jo={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Gh++,i.then(J0,J0),i}function J0(){if(--Gh===0&&Dl!==null){jo!==null&&(jo.status="fulfilled");var e=Dl;Dl=null,zo=0,jo=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function AE(e,i){var l=[],f={status:"pending",value:null,reason:null,then:function(E){l.push(E)}};return e.then(function(){f.status="fulfilled",f.value=i;for(var E=0;E<l.length;E++)(0,l[E])(i)},function(E){for(f.status="rejected",f.reason=E,E=0;E<l.length;E++)(0,l[E])(void 0)}),f}var $0=ot.S;ot.S=function(e,i){Vg=dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&xE(e,i),$0!==null&&$0(e,i)};var fo=W(null);function Yh(){var e=fo.current;return e!==null?e:hn.pooledCache}function Gu(e,i){i===null?Dt(fo,fo.current):Dt(fo,i.pool)}function td(){var e=Yh();return e===null?null:{parent:Xn._currentValue,pool:e}}var Ho=Error(u(460)),Xh=Error(u(474)),Yu=Error(u(542)),Xu={then:function(){}};function ed(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nd(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(Oi,Oi),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rd(e),e;default:if(typeof i.status=="string")i.then(Oi,Oi);else{if(e=hn,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=i,e.status="pending",e.then(function(f){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=f}},function(f){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=f}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rd(e),e}throw mo=i,Ho}}function go(e){try{var i=e._init;return i(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(mo=l,Ho):l}}var mo=null;function id(){if(mo===null)throw Error(u(459));var e=mo;return mo=null,e}function rd(e){if(e===Ho||e===Yu)throw Error(u(483))}var Go=null,Ml=0;function qu(e){var i=Ml;return Ml+=1,Go===null&&(Go=[]),nd(Go,e,i)}function Ol(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Qu(e,i){throw i.$$typeof===X?Error(u(525)):(e=Object.prototype.toString.call(i),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function sd(e){function i(J,Z){if(e){var rt=J.deletions;rt===null?(J.deletions=[Z],J.flags|=16):rt.push(Z)}}function l(J,Z){if(!e)return null;for(;Z!==null;)i(J,Z),Z=Z.sibling;return null}function f(J){for(var Z=new Map;J!==null;)J.key!==null?Z.set(J.key,J):Z.set(J.index,J),J=J.sibling;return Z}function E(J,Z){return J=Bs(J,Z),J.index=0,J.sibling=null,J}function A(J,Z,rt){return J.index=rt,e?(rt=J.alternate,rt!==null?(rt=rt.index,rt<Z?(J.flags|=67108866,Z):rt):(J.flags|=67108866,Z)):(J.flags|=1048576,Z)}function b(J){return e&&J.alternate===null&&(J.flags|=67108866),J}function B(J,Z,rt,mt){return Z===null||Z.tag!==6?(Z=Lh(rt,J.mode,mt),Z.return=J,Z):(Z=E(Z,rt),Z.return=J,Z)}function H(J,Z,rt,mt){var Zt=rt.type;return Zt===gt?dt(J,Z,rt.props.children,mt,rt.key):Z!==null&&(Z.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===z&&go(Zt)===Z.type)?(Z=E(Z,rt.props),Ol(Z,rt),Z.return=J,Z):(Z=Fu(rt.type,rt.key,rt.props,null,J.mode,mt),Ol(Z,rt),Z.return=J,Z)}function st(J,Z,rt,mt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==rt.containerInfo||Z.stateNode.implementation!==rt.implementation?(Z=Bh(rt,J.mode,mt),Z.return=J,Z):(Z=E(Z,rt.children||[]),Z.return=J,Z)}function dt(J,Z,rt,mt,Zt){return Z===null||Z.tag!==7?(Z=lo(rt,J.mode,mt,Zt),Z.return=J,Z):(Z=E(Z,rt),Z.return=J,Z)}function yt(J,Z,rt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Lh(""+Z,J.mode,rt),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case et:return rt=Fu(Z.type,Z.key,Z.props,null,J.mode,rt),Ol(rt,Z),rt.return=J,rt;case wt:return Z=Bh(Z,J.mode,rt),Z.return=J,Z;case z:return Z=go(Z),yt(J,Z,rt)}if(nt(Z)||Y(Z))return Z=lo(Z,J.mode,rt,null),Z.return=J,Z;if(typeof Z.then=="function")return yt(J,qu(Z),rt);if(Z.$$typeof===bt)return yt(J,Hu(J,Z),rt);Qu(J,Z)}return null}function at(J,Z,rt,mt){var Zt=Z!==null?Z.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Zt!==null?null:B(J,Z,""+rt,mt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case et:return rt.key===Zt?H(J,Z,rt,mt):null;case wt:return rt.key===Zt?st(J,Z,rt,mt):null;case z:return rt=go(rt),at(J,Z,rt,mt)}if(nt(rt)||Y(rt))return Zt!==null?null:dt(J,Z,rt,mt,null);if(typeof rt.then=="function")return at(J,Z,qu(rt),mt);if(rt.$$typeof===bt)return at(J,Z,Hu(J,rt),mt);Qu(J,rt)}return null}function ht(J,Z,rt,mt,Zt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return J=J.get(rt)||null,B(Z,J,""+mt,Zt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case et:return J=J.get(mt.key===null?rt:mt.key)||null,H(Z,J,mt,Zt);case wt:return J=J.get(mt.key===null?rt:mt.key)||null,st(Z,J,mt,Zt);case z:return mt=go(mt),ht(J,Z,rt,mt,Zt)}if(nt(mt)||Y(mt))return J=J.get(rt)||null,dt(Z,J,mt,Zt,null);if(typeof mt.then=="function")return ht(J,Z,rt,qu(mt),Zt);if(mt.$$typeof===bt)return ht(J,Z,rt,Hu(Z,mt),Zt);Qu(Z,mt)}return null}function Ft(J,Z,rt,mt){for(var Zt=null,Xe=null,Gt=Z,de=Z=0,De=null;Gt!==null&&de<rt.length;de++){Gt.index>de?(De=Gt,Gt=null):De=Gt.sibling;var qe=at(J,Gt,rt[de],mt);if(qe===null){Gt===null&&(Gt=De);break}e&&Gt&&qe.alternate===null&&i(J,Gt),Z=A(qe,Z,de),Xe===null?Zt=qe:Xe.sibling=qe,Xe=qe,Gt=De}if(de===rt.length)return l(J,Gt),Ve&&Vs(J,de),Zt;if(Gt===null){for(;de<rt.length;de++)Gt=yt(J,rt[de],mt),Gt!==null&&(Z=A(Gt,Z,de),Xe===null?Zt=Gt:Xe.sibling=Gt,Xe=Gt);return Ve&&Vs(J,de),Zt}for(Gt=f(Gt);de<rt.length;de++)De=ht(Gt,J,de,rt[de],mt),De!==null&&(e&&De.alternate!==null&&Gt.delete(De.key===null?de:De.key),Z=A(De,Z,de),Xe===null?Zt=De:Xe.sibling=De,Xe=De);return e&&Gt.forEach(function(La){return i(J,La)}),Ve&&Vs(J,de),Zt}function te(J,Z,rt,mt){if(rt==null)throw Error(u(151));for(var Zt=null,Xe=null,Gt=Z,de=Z=0,De=null,qe=rt.next();Gt!==null&&!qe.done;de++,qe=rt.next()){Gt.index>de?(De=Gt,Gt=null):De=Gt.sibling;var La=at(J,Gt,qe.value,mt);if(La===null){Gt===null&&(Gt=De);break}e&&Gt&&La.alternate===null&&i(J,Gt),Z=A(La,Z,de),Xe===null?Zt=La:Xe.sibling=La,Xe=La,Gt=De}if(qe.done)return l(J,Gt),Ve&&Vs(J,de),Zt;if(Gt===null){for(;!qe.done;de++,qe=rt.next())qe=yt(J,qe.value,mt),qe!==null&&(Z=A(qe,Z,de),Xe===null?Zt=qe:Xe.sibling=qe,Xe=qe);return Ve&&Vs(J,de),Zt}for(Gt=f(Gt);!qe.done;de++,qe=rt.next())qe=ht(Gt,J,de,qe.value,mt),qe!==null&&(e&&qe.alternate!==null&&Gt.delete(qe.key===null?de:qe.key),Z=A(qe,Z,de),Xe===null?Zt=qe:Xe.sibling=qe,Xe=qe);return e&&Gt.forEach(function(Dx){return i(J,Dx)}),Ve&&Vs(J,de),Zt}function on(J,Z,rt,mt){if(typeof rt=="object"&&rt!==null&&rt.type===gt&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case et:t:{for(var Zt=rt.key;Z!==null;){if(Z.key===Zt){if(Zt=rt.type,Zt===gt){if(Z.tag===7){l(J,Z.sibling),mt=E(Z,rt.props.children),mt.return=J,J=mt;break t}}else if(Z.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===z&&go(Zt)===Z.type){l(J,Z.sibling),mt=E(Z,rt.props),Ol(mt,rt),mt.return=J,J=mt;break t}l(J,Z);break}else i(J,Z);Z=Z.sibling}rt.type===gt?(mt=lo(rt.props.children,J.mode,mt,rt.key),mt.return=J,J=mt):(mt=Fu(rt.type,rt.key,rt.props,null,J.mode,mt),Ol(mt,rt),mt.return=J,J=mt)}return b(J);case wt:t:{for(Zt=rt.key;Z!==null;){if(Z.key===Zt)if(Z.tag===4&&Z.stateNode.containerInfo===rt.containerInfo&&Z.stateNode.implementation===rt.implementation){l(J,Z.sibling),mt=E(Z,rt.children||[]),mt.return=J,J=mt;break t}else{l(J,Z);break}else i(J,Z);Z=Z.sibling}mt=Bh(rt,J.mode,mt),mt.return=J,J=mt}return b(J);case z:return rt=go(rt),on(J,Z,rt,mt)}if(nt(rt))return Ft(J,Z,rt,mt);if(Y(rt)){if(Zt=Y(rt),typeof Zt!="function")throw Error(u(150));return rt=Zt.call(rt),te(J,Z,rt,mt)}if(typeof rt.then=="function")return on(J,Z,qu(rt),mt);if(rt.$$typeof===bt)return on(J,Z,Hu(J,rt),mt);Qu(J,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Z!==null&&Z.tag===6?(l(J,Z.sibling),mt=E(Z,rt),mt.return=J,J=mt):(l(J,Z),mt=Lh(rt,J.mode,mt),mt.return=J,J=mt),b(J)):l(J,Z)}return function(J,Z,rt,mt){try{Ml=0;var Zt=on(J,Z,rt,mt);return Go=null,Zt}catch(Gt){if(Gt===Ho||Gt===Yu)throw Gt;var Xe=yr(29,Gt,null,J.mode);return Xe.lanes=mt,Xe.return=J,Xe}finally{}}}var po=sd(!0),ad=sd(!1),ya=!1;function qh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,i,l){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(Qe&2)!==0){var E=f.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),f.pending=i,i=Uu(e),H0(e,null,l),i}return ku(e,f,i,l),Uu(e)}function Ll(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var f=i.lanes;f&=e.pendingLanes,l|=f,i.lanes=l,cr(e,l)}}function Zh(e,i){var l=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var E=null,A=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};A===null?E=A=b:A=A.next=b,l=l.next}while(l!==null);A===null?E=A=i:A=A.next=i}else E=A=i;l={baseState:f.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:f.shared,callbacks:f.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var Wh=!1;function Bl(){if(Wh){var e=jo;if(e!==null)throw e}}function Vl(e,i,l,f){Wh=!1;var E=e.updateQueue;ya=!1;var A=E.firstBaseUpdate,b=E.lastBaseUpdate,B=E.shared.pending;if(B!==null){E.shared.pending=null;var H=B,st=H.next;H.next=null,b===null?A=st:b.next=st,b=H;var dt=e.alternate;dt!==null&&(dt=dt.updateQueue,B=dt.lastBaseUpdate,B!==b&&(B===null?dt.firstBaseUpdate=st:B.next=st,dt.lastBaseUpdate=H))}if(A!==null){var yt=E.baseState;b=0,dt=st=H=null,B=A;do{var at=B.lane&-536870913,ht=at!==B.lane;if(ht?(Re&at)===at:(f&at)===at){at!==0&&at===zo&&(Wh=!0),dt!==null&&(dt=dt.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var Ft=e,te=B;at=i;var on=l;switch(te.tag){case 1:if(Ft=te.payload,typeof Ft=="function"){yt=Ft.call(on,yt,at);break t}yt=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=te.payload,at=typeof Ft=="function"?Ft.call(on,yt,at):Ft,at==null)break t;yt=L({},yt,at);break t;case 2:ya=!0}}at=B.callback,at!==null&&(e.flags|=64,ht&&(e.flags|=8192),ht=E.callbacks,ht===null?E.callbacks=[at]:ht.push(at))}else ht={lane:at,tag:B.tag,payload:B.payload,callback:B.callback,next:null},dt===null?(st=dt=ht,H=yt):dt=dt.next=ht,b|=at;if(B=B.next,B===null){if(B=E.shared.pending,B===null)break;ht=B,B=ht.next,ht.next=null,E.lastBaseUpdate=ht,E.shared.pending=null}}while(!0);dt===null&&(H=yt),E.baseState=H,E.firstBaseUpdate=st,E.lastBaseUpdate=dt,A===null&&(E.shared.lanes=0),Ca|=b,e.lanes=b,e.memoizedState=yt}}function od(e,i){if(typeof e!="function")throw Error(u(191,e));e.call(i)}function ld(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)od(l[e],i)}var Yo=W(null),Zu=W(0);function ud(e,i){e=qs,Dt(Zu,e),Dt(Yo,i),qs=e|i.baseLanes}function Kh(){Dt(Zu,qs),Dt(Yo,Yo.current)}function Jh(){qs=Zu.current,ft(Yo),ft(Zu)}var Er=W(null),jr=null;function Aa(e){var i=e.alternate;Dt(Hn,Hn.current&1),Dt(Er,e),jr===null&&(i===null||Yo.current!==null||i.memoizedState!==null)&&(jr=e)}function $h(e){Dt(Hn,Hn.current),Dt(Er,e),jr===null&&(jr=e)}function cd(e){e.tag===22?(Dt(Hn,Hn.current),Dt(Er,e),jr===null&&(jr=e)):_a()}function _a(){Dt(Hn,Hn.current),Dt(Er,Er.current)}function xr(e){ft(Er),jr===e&&(jr=null),ft(Hn)}var Hn=W(0);function Wu(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||a1(l)||o1(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Us=0,he=null,sn=null,qn=null,Ku=!1,Xo=!1,yo=!1,Ju=0,Pl=0,qo=null,_E=0;function Pn(){throw Error(u(321))}function tf(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!g(e[l],i[l]))return!1;return!0}function ef(e,i,l,f,E,A){return Us=A,he=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ot.H=e===null||e.memoizedState===null?qd:yf,yo=!1,A=l(f,E),yo=!1,Xo&&(A=fd(i,l,f,E)),hd(e),A}function hd(e){ot.H=Fl;var i=sn!==null&&sn.next!==null;if(Us=0,qn=sn=he=null,Ku=!1,Pl=0,qo=null,i)throw Error(u(300));e===null||Qn||(e=e.dependencies,e!==null&&ju(e)&&(Qn=!0))}function fd(e,i,l,f){he=e;var E=0;do{if(Xo&&(qo=null),Pl=0,Xo=!1,25<=E)throw Error(u(301));if(E+=1,qn=sn=null,e.updateQueue!=null){var A=e.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}ot.H=Qd,A=i(l,f)}while(Xo);return A}function wE(){var e=ot.H,i=e.useState()[0];return i=typeof i.then=="function"?kl(i):i,e=e.useState()[0],(sn!==null?sn.memoizedState:null)!==e&&(he.flags|=1024),i}function nf(){var e=Ju!==0;return Ju=0,e}function rf(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function sf(e){if(Ku){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ku=!1}Us=0,qn=sn=he=null,Xo=!1,Pl=Ju=0,qo=null}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?he.memoizedState=qn=e:qn=qn.next=e,qn}function Gn(){if(sn===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=sn.next;var i=qn===null?he.memoizedState:qn.next;if(i!==null)qn=i,sn=e;else{if(e===null)throw he.alternate===null?Error(u(467)):Error(u(310));sn=e,e={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},qn===null?he.memoizedState=qn=e:qn=qn.next=e}return qn}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(e){var i=Pl;return Pl+=1,qo===null&&(qo=[]),e=nd(qo,e,i),i=he,(qn===null?i.memoizedState:qn.next)===null&&(i=i.alternate,ot.H=i===null||i.memoizedState===null?qd:yf),e}function tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kl(e);if(e.$$typeof===bt)return Ti(e)}throw Error(u(438,String(e)))}function af(e){var i=null,l=he.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var f=he.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(i={data:f.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=$u(),he.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),f=0;f<e;f++)l[f]=K;return i.index++,l}function Fs(e,i){return typeof i=="function"?i(e):i}function ec(e){var i=Gn();return of(i,sn,e)}function of(e,i,l){var f=e.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=l;var E=e.baseQueue,A=f.pending;if(A!==null){if(E!==null){var b=E.next;E.next=A.next,A.next=b}i.baseQueue=E=A,f.pending=null}if(A=e.baseState,E===null)e.memoizedState=A;else{i=E.next;var B=b=null,H=null,st=i,dt=!1;do{var yt=st.lane&-536870913;if(yt!==st.lane?(Re&yt)===yt:(Us&yt)===yt){var at=st.revertLane;if(at===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),yt===zo&&(dt=!0);else if((Us&at)===at){st=st.next,at===zo&&(dt=!0);continue}else yt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},H===null?(B=H=yt,b=A):H=H.next=yt,he.lanes|=at,Ca|=at;yt=st.action,yo&&l(A,yt),A=st.hasEagerState?st.eagerState:l(A,yt)}else at={lane:yt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},H===null?(B=H=at,b=A):H=H.next=at,he.lanes|=yt,Ca|=yt;st=st.next}while(st!==null&&st!==i);if(H===null?b=A:H.next=B,!g(A,e.memoizedState)&&(Qn=!0,dt&&(l=jo,l!==null)))throw l;e.memoizedState=A,e.baseState=b,e.baseQueue=H,f.lastRenderedState=A}return E===null&&(f.lanes=0),[e.memoizedState,f.dispatch]}function lf(e){var i=Gn(),l=i.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=e;var f=l.dispatch,E=l.pending,A=i.memoizedState;if(E!==null){l.pending=null;var b=E=E.next;do A=e(A,b.action),b=b.next;while(b!==E);g(A,i.memoizedState)||(Qn=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),l.lastRenderedState=A}return[A,f]}function dd(e,i,l){var f=he,E=Gn(),A=Ve;if(A){if(l===void 0)throw Error(u(407));l=l()}else l=i();var b=!g((sn||E).memoizedState,l);if(b&&(E.memoizedState=l,Qn=!0),E=E.queue,hf(pd.bind(null,f,E,e),[e]),E.getSnapshot!==i||b||qn!==null&&qn.memoizedState.tag&1){if(f.flags|=2048,Qo(9,{destroy:void 0},md.bind(null,f,E,l,i),null),hn===null)throw Error(u(349));A||(Us&127)!==0||gd(f,i,l)}return l}function gd(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=he.updateQueue,i===null?(i=$u(),he.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function md(e,i,l,f){i.value=l,i.getSnapshot=f,yd(i)&&Ed(e)}function pd(e,i,l){return l(function(){yd(i)&&Ed(e)})}function yd(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!g(e,l)}catch{return!0}}function Ed(e){var i=oo(e,2);i!==null&&ir(i,e,2)}function uf(e){var i=Xi();if(typeof e=="function"){var l=e;if(e=l(),yo){Ge(!0);try{l()}finally{Ge(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},i}function xd(e,i,l,f){return e.baseState=l,of(e,sn,typeof f=="function"?f:Fs)}function TE(e,i,l,f,E){if(rc(e))throw Error(u(485));if(e=i.action,e!==null){var A={payload:E,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};ot.T!==null?l(!0):A.isTransition=!1,f(A),l=i.pending,l===null?(A.next=i.pending=A,Ad(i,A)):(A.next=l.next,i.pending=l.next=A)}}function Ad(e,i){var l=i.action,f=i.payload,E=e.state;if(i.isTransition){var A=ot.T,b={};ot.T=b;try{var B=l(E,f),H=ot.S;H!==null&&H(b,B),_d(e,i,B)}catch(st){cf(e,i,st)}finally{A!==null&&b.types!==null&&(A.types=b.types),ot.T=A}}else try{A=l(E,f),_d(e,i,A)}catch(st){cf(e,i,st)}}function _d(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){wd(e,i,f)},function(f){return cf(e,i,f)}):wd(e,i,l)}function wd(e,i,l){i.status="fulfilled",i.value=l,Td(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,Ad(e,l)))}function cf(e,i,l){var f=e.pending;if(e.pending=null,f!==null){f=f.next;do i.status="rejected",i.reason=l,Td(i),i=i.next;while(i!==f)}e.action=null}function Td(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Cd(e,i){return i}function Sd(e,i){if(Ve){var l=hn.formState;if(l!==null){t:{var f=he;if(Ve){if(mn){e:{for(var E=mn,A=zr;E.nodeType!==8;){if(!A){E=null;break e}if(E=Hr(E.nextSibling),E===null){E=null;break e}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){mn=Hr(E.nextSibling),f=E.data==="F!";break t}}ma(f)}f=!1}f&&(i=l[0])}}return l=Xi(),l.memoizedState=l.baseState=i,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:i},l.queue=f,l=Gd.bind(null,he,f),f.dispatch=l,f=uf(!1),A=pf.bind(null,he,!1,f.queue),f=Xi(),E={state:i,dispatch:null,action:e,pending:null},f.queue=E,l=TE.bind(null,he,E,A,l),E.dispatch=l,f.memoizedState=e,[i,l,!1]}function vd(e){var i=Gn();return bd(i,sn,e)}function bd(e,i,l){if(i=of(e,i,Cd)[0],e=ec(Fs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var f=kl(i)}catch(b){throw b===Ho?Yu:b}else f=i;i=Gn();var E=i.queue,A=E.dispatch;return l!==i.memoizedState&&(he.flags|=2048,Qo(9,{destroy:void 0},CE.bind(null,E,l),null)),[f,A,e]}function CE(e,i){e.action=i}function Id(e){var i=Gn(),l=sn;if(l!==null)return bd(i,l,e);Gn(),i=i.memoizedState,l=Gn();var f=l.queue.dispatch;return l.memoizedState=e,[i,f,!1]}function Qo(e,i,l,f){return e={tag:e,create:l,deps:f,inst:i,next:null},i=he.updateQueue,i===null&&(i=$u(),he.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(f=l.next,l.next=e,e.next=f,i.lastEffect=e),e}function Nd(){return Gn().memoizedState}function nc(e,i,l,f){var E=Xi();he.flags|=e,E.memoizedState=Qo(1|i,{destroy:void 0},l,f===void 0?null:f)}function ic(e,i,l,f){var E=Gn();f=f===void 0?null:f;var A=E.memoizedState.inst;sn!==null&&f!==null&&tf(f,sn.memoizedState.deps)?E.memoizedState=Qo(i,A,l,f):(he.flags|=e,E.memoizedState=Qo(1|i,A,l,f))}function Rd(e,i){nc(8390656,8,e,i)}function hf(e,i){ic(2048,8,e,i)}function SE(e){he.flags|=4;var i=he.updateQueue;if(i===null)i=$u(),he.updateQueue=i,i.events=[e];else{var l=i.events;l===null?i.events=[e]:l.push(e)}}function Dd(e){var i=Gn().memoizedState;return SE({ref:i,nextImpl:e}),function(){if((Qe&2)!==0)throw Error(u(440));return i.impl.apply(void 0,arguments)}}function Md(e,i){return ic(4,2,e,i)}function Od(e,i){return ic(4,4,e,i)}function Ld(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Bd(e,i,l){l=l!=null?l.concat([e]):null,ic(4,4,Ld.bind(null,i,e),l)}function ff(){}function Vd(e,i){var l=Gn();i=i===void 0?null:i;var f=l.memoizedState;return i!==null&&tf(i,f[1])?f[0]:(l.memoizedState=[e,i],e)}function Pd(e,i){var l=Gn();i=i===void 0?null:i;var f=l.memoizedState;if(i!==null&&tf(i,f[1]))return f[0];if(f=e(),yo){Ge(!0);try{e()}finally{Ge(!1)}}return l.memoizedState=[f,i],f}function df(e,i,l){return l===void 0||(Us&1073741824)!==0&&(Re&261930)===0?e.memoizedState=i:(e.memoizedState=l,e=kg(),he.lanes|=e,Ca|=e,l)}function kd(e,i,l,f){return g(l,i)?l:Yo.current!==null?(e=df(e,l,f),g(e,i)||(Qn=!0),e):(Us&42)===0||(Us&1073741824)!==0&&(Re&261930)===0?(Qn=!0,e.memoizedState=l):(e=kg(),he.lanes|=e,Ca|=e,i)}function Ud(e,i,l,f,E){var A=pt.p;pt.p=A!==0&&8>A?A:8;var b=ot.T,B={};ot.T=B,pf(e,!1,i,l);try{var H=E(),st=ot.S;if(st!==null&&st(B,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var dt=AE(H,f);Ul(e,i,dt,wr(e))}else Ul(e,i,f,wr(e))}catch(yt){Ul(e,i,{then:function(){},status:"rejected",reason:yt},wr())}finally{pt.p=A,b!==null&&B.types!==null&&(b.types=B.types),ot.T=b}}function vE(){}function gf(e,i,l,f){if(e.tag!==5)throw Error(u(476));var E=Fd(e).queue;Ud(e,E,i,Yt,l===null?vE:function(){return zd(e),l(f)})}function Fd(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Yt,baseState:Yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:Yt},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function zd(e){var i=Fd(e);i.next===null&&(i=e.alternate.memoizedState),Ul(e,i.next.queue,{},wr())}function mf(){return Ti(nu)}function jd(){return Gn().memoizedState}function Hd(){return Gn().memoizedState}function bE(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=wr();e=Ea(l);var f=xa(i,e,l);f!==null&&(ir(f,i,l),Ll(f,i,l)),i={cache:Hh()},e.payload=i;return}i=i.return}}function IE(e,i,l){var f=wr();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},rc(e)?Yd(i,l):(l=Mh(e,i,l,f),l!==null&&(ir(l,e,f),Xd(l,i,f)))}function Gd(e,i,l){var f=wr();Ul(e,i,l,f)}function Ul(e,i,l,f){var E={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(rc(e))Yd(i,E);else{var A=e.alternate;if(e.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var b=i.lastRenderedState,B=A(b,l);if(E.hasEagerState=!0,E.eagerState=B,g(B,b))return ku(e,i,E,0),hn===null&&Pu(),!1}catch{}finally{}if(l=Mh(e,i,E,f),l!==null)return ir(l,e,f),Xd(l,i,f),!0}return!1}function pf(e,i,l,f){if(f={lane:2,revertLane:Qf(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},rc(e)){if(i)throw Error(u(479))}else i=Mh(e,l,f,2),i!==null&&ir(i,e,2)}function rc(e){var i=e.alternate;return e===he||i!==null&&i===he}function Yd(e,i){Xo=Ku=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function Xd(e,i,l){if((l&4194048)!==0){var f=i.lanes;f&=e.pendingLanes,l|=f,i.lanes=l,cr(e,l)}}var Fl={readContext:Ti,use:tc,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Fl.useEffectEvent=Pn;var qd={readContext:Ti,use:tc,useCallback:function(e,i){return Xi().memoizedState=[e,i===void 0?null:i],e},useContext:Ti,useEffect:Rd,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,nc(4194308,4,Ld.bind(null,i,e),l)},useLayoutEffect:function(e,i){return nc(4194308,4,e,i)},useInsertionEffect:function(e,i){nc(4,2,e,i)},useMemo:function(e,i){var l=Xi();i=i===void 0?null:i;var f=e();if(yo){Ge(!0);try{e()}finally{Ge(!1)}}return l.memoizedState=[f,i],f},useReducer:function(e,i,l){var f=Xi();if(l!==void 0){var E=l(i);if(yo){Ge(!0);try{l(i)}finally{Ge(!1)}}}else E=i;return f.memoizedState=f.baseState=E,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:E},f.queue=e,e=e.dispatch=IE.bind(null,he,e),[f.memoizedState,e]},useRef:function(e){var i=Xi();return e={current:e},i.memoizedState=e},useState:function(e){e=uf(e);var i=e.queue,l=Gd.bind(null,he,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:ff,useDeferredValue:function(e,i){var l=Xi();return df(l,e,i)},useTransition:function(){var e=uf(!1);return e=Ud.bind(null,he,e.queue,!0,!1),Xi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var f=he,E=Xi();if(Ve){if(l===void 0)throw Error(u(407));l=l()}else{if(l=i(),hn===null)throw Error(u(349));(Re&127)!==0||gd(f,i,l)}E.memoizedState=l;var A={value:l,getSnapshot:i};return E.queue=A,Rd(pd.bind(null,f,A,e),[e]),f.flags|=2048,Qo(9,{destroy:void 0},md.bind(null,f,A,l,i),null),l},useId:function(){var e=Xi(),i=hn.identifierPrefix;if(Ve){var l=hs,f=cs;l=(f&~(1<<32-ne(f)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Ju++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=_E++,i="_"+i+"r_"+l.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:mf,useFormState:Sd,useActionState:Sd,useOptimistic:function(e){var i=Xi();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=pf.bind(null,he,!0,l),l.dispatch=i,[e,i]},useMemoCache:af,useCacheRefresh:function(){return Xi().memoizedState=bE.bind(null,he)},useEffectEvent:function(e){var i=Xi(),l={impl:e};return i.memoizedState=l,function(){if((Qe&2)!==0)throw Error(u(440));return l.impl.apply(void 0,arguments)}}},yf={readContext:Ti,use:tc,useCallback:Vd,useContext:Ti,useEffect:hf,useImperativeHandle:Bd,useInsertionEffect:Md,useLayoutEffect:Od,useMemo:Pd,useReducer:ec,useRef:Nd,useState:function(){return ec(Fs)},useDebugValue:ff,useDeferredValue:function(e,i){var l=Gn();return kd(l,sn.memoizedState,e,i)},useTransition:function(){var e=ec(Fs)[0],i=Gn().memoizedState;return[typeof e=="boolean"?e:kl(e),i]},useSyncExternalStore:dd,useId:jd,useHostTransitionStatus:mf,useFormState:vd,useActionState:vd,useOptimistic:function(e,i){var l=Gn();return xd(l,sn,e,i)},useMemoCache:af,useCacheRefresh:Hd};yf.useEffectEvent=Dd;var Qd={readContext:Ti,use:tc,useCallback:Vd,useContext:Ti,useEffect:hf,useImperativeHandle:Bd,useInsertionEffect:Md,useLayoutEffect:Od,useMemo:Pd,useReducer:lf,useRef:Nd,useState:function(){return lf(Fs)},useDebugValue:ff,useDeferredValue:function(e,i){var l=Gn();return sn===null?df(l,e,i):kd(l,sn.memoizedState,e,i)},useTransition:function(){var e=lf(Fs)[0],i=Gn().memoizedState;return[typeof e=="boolean"?e:kl(e),i]},useSyncExternalStore:dd,useId:jd,useHostTransitionStatus:mf,useFormState:Id,useActionState:Id,useOptimistic:function(e,i){var l=Gn();return sn!==null?xd(l,sn,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:af,useCacheRefresh:Hd};Qd.useEffectEvent=Dd;function Ef(e,i,l,f){i=e.memoizedState,l=l(f,i),l=l==null?i:L({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var xf={enqueueSetState:function(e,i,l){e=e._reactInternals;var f=wr(),E=Ea(f);E.payload=i,l!=null&&(E.callback=l),i=xa(e,E,f),i!==null&&(ir(i,e,f),Ll(i,e,f))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var f=wr(),E=Ea(f);E.tag=1,E.payload=i,l!=null&&(E.callback=l),i=xa(e,E,f),i!==null&&(ir(i,e,f),Ll(i,e,f))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=wr(),f=Ea(l);f.tag=2,i!=null&&(f.callback=i),i=xa(e,f,l),i!==null&&(ir(i,e,l),Ll(i,e,l))}};function Zd(e,i,l,f,E,A,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,A,b):i.prototype&&i.prototype.isPureReactComponent?!y(l,f)||!y(E,A):!0}function Wd(e,i,l,f){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,f),i.state!==e&&xf.enqueueReplaceState(i,i.state,null)}function Eo(e,i){var l=i;if("ref"in i){l={};for(var f in i)f!=="ref"&&(l[f]=i[f])}if(e=e.defaultProps){l===i&&(l=L({},l));for(var E in e)l[E]===void 0&&(l[E]=e[E])}return l}function Kd(e){Vu(e)}function Jd(e){console.error(e)}function $d(e){Vu(e)}function sc(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(f){setTimeout(function(){throw f})}}function tg(e,i,l){try{var f=e.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Af(e,i,l){return l=Ea(l),l.tag=3,l.payload={element:null},l.callback=function(){sc(e,i)},l}function eg(e){return e=Ea(e),e.tag=3,e}function ng(e,i,l,f){var E=l.type.getDerivedStateFromError;if(typeof E=="function"){var A=f.value;e.payload=function(){return E(A)},e.callback=function(){tg(i,l,f)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){tg(i,l,f),typeof E!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})})}function NE(e,i,l,f,E){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(i=l.alternate,i!==null&&Fo(i,l,E,!0),l=Er.current,l!==null){switch(l.tag){case 31:case 13:return jr===null?yc():l.alternate===null&&kn===0&&(kn=3),l.flags&=-257,l.flags|=65536,l.lanes=E,f===Xu?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([f]):i.add(f),Yf(e,f,E)),!1;case 22:return l.flags|=65536,f===Xu?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([f]):l.add(f)),Yf(e,f,E)),!1}throw Error(u(435,l.tag))}return Yf(e,f,E),yc(),!1}if(Ve)return i=Er.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,f!==kh&&(e=Error(u(422),{cause:f}),Nl(kr(e,l)))):(f!==kh&&(i=Error(u(423),{cause:f}),Nl(kr(i,l))),e=e.current.alternate,e.flags|=65536,E&=-E,e.lanes|=E,f=kr(f,l),E=Af(e.stateNode,f,E),Zh(e,E),kn!==4&&(kn=2)),!1;var A=Error(u(520),{cause:f});if(A=kr(A,l),Ql===null?Ql=[A]:Ql.push(A),kn!==4&&(kn=2),i===null)return!0;f=kr(f,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=E&-E,l.lanes|=e,e=Af(l.stateNode,f,e),Zh(l,e),!1;case 1:if(i=l.type,A=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Sa===null||!Sa.has(A))))return l.flags|=65536,E&=-E,l.lanes|=E,E=eg(E),ng(E,e,l,f),Zh(l,E),!1}l=l.return}while(l!==null);return!1}var _f=Error(u(461)),Qn=!1;function Ci(e,i,l,f){i.child=e===null?ad(i,null,l,f):po(i,e.child,l,f)}function ig(e,i,l,f,E){l=l.render;var A=i.ref;if("ref"in f){var b={};for(var B in f)B!=="ref"&&(b[B]=f[B])}else b=f;return ho(i),f=ef(e,i,l,b,A,E),B=nf(),e!==null&&!Qn?(rf(e,i,E),zs(e,i,E)):(Ve&&B&&Vh(i),i.flags|=1,Ci(e,i,f,E),i.child)}function rg(e,i,l,f,E){if(e===null){var A=l.type;return typeof A=="function"&&!Oh(A)&&A.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=A,sg(e,i,A,f,E)):(e=Fu(l.type,null,f,i,i.mode,E),e.ref=i.ref,e.return=i,i.child=e)}if(A=e.child,!Nf(e,E)){var b=A.memoizedProps;if(l=l.compare,l=l!==null?l:y,l(b,f)&&e.ref===i.ref)return zs(e,i,E)}return i.flags|=1,e=Bs(A,f),e.ref=i.ref,e.return=i,i.child=e}function sg(e,i,l,f,E){if(e!==null){var A=e.memoizedProps;if(y(A,f)&&e.ref===i.ref)if(Qn=!1,i.pendingProps=f=A,Nf(e,E))(e.flags&131072)!==0&&(Qn=!0);else return i.lanes=e.lanes,zs(e,i,E)}return wf(e,i,l,f,E)}function ag(e,i,l,f){var E=f.children,A=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((i.flags&128)!==0){if(A=A!==null?A.baseLanes|l:l,e!==null){for(f=i.child=e.child,E=0;f!==null;)E=E|f.lanes|f.childLanes,f=f.sibling;f=E&~A}else f=0,i.child=null;return og(e,i,A,l,f)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Gu(i,A!==null?A.cachePool:null),A!==null?ud(i,A):Kh(),cd(i);else return f=i.lanes=536870912,og(e,i,A!==null?A.baseLanes|l:l,l,f)}else A!==null?(Gu(i,A.cachePool),ud(i,A),_a(),i.memoizedState=null):(e!==null&&Gu(i,null),Kh(),_a());return Ci(e,i,E,l),i.child}function zl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function og(e,i,l,f,E){var A=Yh();return A=A===null?null:{parent:Xn._currentValue,pool:A},i.memoizedState={baseLanes:l,cachePool:A},e!==null&&Gu(i,null),Kh(),cd(i),e!==null&&Fo(e,i,f,!0),i.childLanes=E,null}function ac(e,i){return i=lc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function lg(e,i,l){return po(i,e.child,null,l),e=ac(i,i.pendingProps),e.flags|=2,xr(i),i.memoizedState=null,e}function RE(e,i,l){var f=i.pendingProps,E=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ve){if(f.mode==="hidden")return e=ac(i,f),i.lanes=536870912,zl(null,e);if($h(i),(e=mn)?(e=Am(e,zr),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:da!==null?{id:cs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},l=Y0(e),l.return=i,i.child=l,wi=i,mn=null)):e=null,e===null)throw ma(i);return i.lanes=536870912,null}return ac(i,f)}var A=e.memoizedState;if(A!==null){var b=A.dehydrated;if($h(i),E)if(i.flags&256)i.flags&=-257,i=lg(e,i,l);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(u(558));else if(Qn||Fo(e,i,l,!1),E=(l&e.childLanes)!==0,Qn||E){if(f=hn,f!==null&&(b=Ts(f,l),b!==0&&b!==A.retryLane))throw A.retryLane=b,oo(e,b),ir(f,e,b),_f;yc(),i=lg(e,i,l)}else e=A.treeContext,mn=Hr(b.nextSibling),wi=i,Ve=!0,ga=null,zr=!1,e!==null&&Q0(i,e),i=ac(i,f),i.flags|=4096;return i}return e=Bs(e.child,{mode:f.mode,children:f.children}),e.ref=i.ref,i.child=e,e.return=i,e}function oc(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(u(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function wf(e,i,l,f,E){return ho(i),l=ef(e,i,l,f,void 0,E),f=nf(),e!==null&&!Qn?(rf(e,i,E),zs(e,i,E)):(Ve&&f&&Vh(i),i.flags|=1,Ci(e,i,l,E),i.child)}function ug(e,i,l,f,E,A){return ho(i),i.updateQueue=null,l=fd(i,f,l,E),hd(e),f=nf(),e!==null&&!Qn?(rf(e,i,A),zs(e,i,A)):(Ve&&f&&Vh(i),i.flags|=1,Ci(e,i,l,A),i.child)}function cg(e,i,l,f,E){if(ho(i),i.stateNode===null){var A=Vo,b=l.contextType;typeof b=="object"&&b!==null&&(A=Ti(b)),A=new l(f,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=xf,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=f,A.state=i.memoizedState,A.refs={},qh(i),b=l.contextType,A.context=typeof b=="object"&&b!==null?Ti(b):Vo,A.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Ef(i,l,b,f),A.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&xf.enqueueReplaceState(A,A.state,null),Vl(i,f,A,E),Bl(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),f=!0}else if(e===null){A=i.stateNode;var B=i.memoizedProps,H=Eo(l,B);A.props=H;var st=A.context,dt=l.contextType;b=Vo,typeof dt=="object"&&dt!==null&&(b=Ti(dt));var yt=l.getDerivedStateFromProps;dt=typeof yt=="function"||typeof A.getSnapshotBeforeUpdate=="function",B=i.pendingProps!==B,dt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B||st!==b)&&Wd(i,A,f,b),ya=!1;var at=i.memoizedState;A.state=at,Vl(i,f,A,E),Bl(),st=i.memoizedState,B||at!==st||ya?(typeof yt=="function"&&(Ef(i,l,yt,f),st=i.memoizedState),(H=ya||Zd(i,l,H,f,at,st,b))?(dt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=st),A.props=f,A.state=st,A.context=b,f=H):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{A=i.stateNode,Qh(e,i),b=i.memoizedProps,dt=Eo(l,b),A.props=dt,yt=i.pendingProps,at=A.context,st=l.contextType,H=Vo,typeof st=="object"&&st!==null&&(H=Ti(st)),B=l.getDerivedStateFromProps,(st=typeof B=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==yt||at!==H)&&Wd(i,A,f,H),ya=!1,at=i.memoizedState,A.state=at,Vl(i,f,A,E),Bl();var ht=i.memoizedState;b!==yt||at!==ht||ya||e!==null&&e.dependencies!==null&&ju(e.dependencies)?(typeof B=="function"&&(Ef(i,l,B,f),ht=i.memoizedState),(dt=ya||Zd(i,l,dt,f,at,ht,H)||e!==null&&e.dependencies!==null&&ju(e.dependencies))?(st||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(f,ht,H),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(f,ht,H)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===e.memoizedProps&&at===e.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&at===e.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=ht),A.props=f,A.state=ht,A.context=H,f=dt):(typeof A.componentDidUpdate!="function"||b===e.memoizedProps&&at===e.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&at===e.memoizedState||(i.flags|=1024),f=!1)}return A=f,oc(e,i),f=(i.flags&128)!==0,A||f?(A=i.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,e!==null&&f?(i.child=po(i,e.child,null,E),i.child=po(i,null,l,E)):Ci(e,i,l,E),i.memoizedState=A.state,e=i.child):e=zs(e,i,E),e}function hg(e,i,l,f){return uo(),i.flags|=256,Ci(e,i,l,f),i.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(e){return{baseLanes:e,cachePool:td()}}function Sf(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=_r),e}function fg(e,i,l){var f=i.pendingProps,E=!1,A=(i.flags&128)!==0,b;if((b=A)||(b=e!==null&&e.memoizedState===null?!1:(Hn.current&2)!==0),b&&(E=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ve){if(E?Aa(i):_a(),(e=mn)?(e=Am(e,zr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:da!==null?{id:cs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},l=Y0(e),l.return=i,i.child=l,wi=i,mn=null)):e=null,e===null)throw ma(i);return o1(e)?i.lanes=32:i.lanes=536870912,null}var B=f.children;return f=f.fallback,E?(_a(),E=i.mode,B=lc({mode:"hidden",children:B},E),f=lo(f,E,l,null),B.return=i,f.return=i,B.sibling=f,i.child=B,f=i.child,f.memoizedState=Cf(l),f.childLanes=Sf(e,b,l),i.memoizedState=Tf,zl(null,f)):(Aa(i),vf(i,B))}var H=e.memoizedState;if(H!==null&&(B=H.dehydrated,B!==null)){if(A)i.flags&256?(Aa(i),i.flags&=-257,i=bf(e,i,l)):i.memoizedState!==null?(_a(),i.child=e.child,i.flags|=128,i=null):(_a(),B=f.fallback,E=i.mode,f=lc({mode:"visible",children:f.children},E),B=lo(B,E,l,null),B.flags|=2,f.return=i,B.return=i,f.sibling=B,i.child=f,po(i,e.child,null,l),f=i.child,f.memoizedState=Cf(l),f.childLanes=Sf(e,b,l),i.memoizedState=Tf,i=zl(null,f));else if(Aa(i),o1(B)){if(b=B.nextSibling&&B.nextSibling.dataset,b)var st=b.dgst;b=st,f=Error(u(419)),f.stack="",f.digest=b,Nl({value:f,source:null,stack:null}),i=bf(e,i,l)}else if(Qn||Fo(e,i,l,!1),b=(l&e.childLanes)!==0,Qn||b){if(b=hn,b!==null&&(f=Ts(b,l),f!==0&&f!==H.retryLane))throw H.retryLane=f,oo(e,f),ir(b,e,f),_f;a1(B)||yc(),i=bf(e,i,l)}else a1(B)?(i.flags|=192,i.child=e.child,i=null):(e=H.treeContext,mn=Hr(B.nextSibling),wi=i,Ve=!0,ga=null,zr=!1,e!==null&&Q0(i,e),i=vf(i,f.children),i.flags|=4096);return i}return E?(_a(),B=f.fallback,E=i.mode,H=e.child,st=H.sibling,f=Bs(H,{mode:"hidden",children:f.children}),f.subtreeFlags=H.subtreeFlags&65011712,st!==null?B=Bs(st,B):(B=lo(B,E,l,null),B.flags|=2),B.return=i,f.return=i,f.sibling=B,i.child=f,zl(null,f),f=i.child,B=e.child.memoizedState,B===null?B=Cf(l):(E=B.cachePool,E!==null?(H=Xn._currentValue,E=E.parent!==H?{parent:H,pool:H}:E):E=td(),B={baseLanes:B.baseLanes|l,cachePool:E}),f.memoizedState=B,f.childLanes=Sf(e,b,l),i.memoizedState=Tf,zl(e.child,f)):(Aa(i),l=e.child,e=l.sibling,l=Bs(l,{mode:"visible",children:f.children}),l.return=i,l.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=l,i.memoizedState=null,l)}function vf(e,i){return i=lc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function lc(e,i){return e=yr(22,e,null,i),e.lanes=0,e}function bf(e,i,l){return po(i,e.child,null,l),e=vf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function dg(e,i,l){e.lanes|=i;var f=e.alternate;f!==null&&(f.lanes|=i),zh(e.return,i,l)}function If(e,i,l,f,E,A){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:E,treeForkCount:A}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=l,b.tailMode=E,b.treeForkCount=A)}function gg(e,i,l){var f=i.pendingProps,E=f.revealOrder,A=f.tail;f=f.children;var b=Hn.current,B=(b&2)!==0;if(B?(b=b&1|2,i.flags|=128):b&=1,Dt(Hn,b),Ci(e,i,f,l),f=Ve?Il:0,!B&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dg(e,l,i);else if(e.tag===19)dg(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(E){case"forwards":for(l=i.child,E=null;l!==null;)e=l.alternate,e!==null&&Wu(e)===null&&(E=l),l=l.sibling;l=E,l===null?(E=i.child,i.child=null):(E=l.sibling,l.sibling=null),If(i,!1,E,l,A,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,E=i.child,i.child=null;E!==null;){if(e=E.alternate,e!==null&&Wu(e)===null){i.child=E;break}e=E.sibling,E.sibling=l,l=E,E=e}If(i,!0,l,null,A,f);break;case"together":If(i,!1,null,null,void 0,f);break;default:i.memoizedState=null}return i.child}function zs(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),Ca|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(Fo(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(u(153));if(i.child!==null){for(e=i.child,l=Bs(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Bs(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function Nf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ju(e)))}function DE(e,i,l){switch(i.tag){case 3:xe(i,i.stateNode.containerInfo),pa(i,Xn,e.memoizedState.cache),uo();break;case 27:case 5:sr(i);break;case 4:xe(i,i.stateNode.containerInfo);break;case 10:pa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,$h(i),null;break;case 13:var f=i.memoizedState;if(f!==null)return f.dehydrated!==null?(Aa(i),i.flags|=128,null):(l&i.child.childLanes)!==0?fg(e,i,l):(Aa(i),e=zs(e,i,l),e!==null?e.sibling:null);Aa(i);break;case 19:var E=(e.flags&128)!==0;if(f=(l&i.childLanes)!==0,f||(Fo(e,i,l,!1),f=(l&i.childLanes)!==0),E){if(f)return gg(e,i,l);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Dt(Hn,Hn.current),f)break;return null;case 22:return i.lanes=0,ag(e,i,l,i.pendingProps);case 24:pa(i,Xn,e.memoizedState.cache)}return zs(e,i,l)}function mg(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)Qn=!0;else{if(!Nf(e,l)&&(i.flags&128)===0)return Qn=!1,DE(e,i,l);Qn=(e.flags&131072)!==0}else Qn=!1,Ve&&(i.flags&1048576)!==0&&q0(i,Il,i.index);switch(i.lanes=0,i.tag){case 16:t:{var f=i.pendingProps;if(e=go(i.elementType),i.type=e,typeof e=="function")Oh(e)?(f=Eo(e,f),i.tag=1,i=cg(null,i,e,f,l)):(i.tag=0,i=wf(null,i,e,f,l));else{if(e!=null){var E=e.$$typeof;if(E===jt){i.tag=11,i=ig(null,i,e,f,l);break t}else if(E===k){i.tag=14,i=rg(null,i,e,f,l);break t}}throw i=Pt(e)||e,Error(u(306,i,""))}}return i;case 0:return wf(e,i,i.type,i.pendingProps,l);case 1:return f=i.type,E=Eo(f,i.pendingProps),cg(e,i,f,E,l);case 3:t:{if(xe(i,i.stateNode.containerInfo),e===null)throw Error(u(387));f=i.pendingProps;var A=i.memoizedState;E=A.element,Qh(e,i),Vl(i,f,null,l);var b=i.memoizedState;if(f=b.cache,pa(i,Xn,f),f!==A.cache&&jh(i,[Xn],l,!0),Bl(),f=b.element,A.isDehydrated)if(A={element:f,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=hg(e,i,f,l);break t}else if(f!==E){E=kr(Error(u(424)),i),Nl(E),i=hg(e,i,f,l);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(mn=Hr(e.firstChild),wi=i,Ve=!0,ga=null,zr=!0,l=ad(i,null,f,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(uo(),f===E){i=zs(e,i,l);break t}Ci(e,i,f,l)}i=i.child}return i;case 26:return oc(e,i),e===null?(l=vm(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ve||(l=i.type,e=i.pendingProps,f=Cc(Nt.current).createElement(l),f[An]=i,f[Fe]=e,Si(f,l,e),_n(f),i.stateNode=f):i.memoizedState=vm(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return sr(i),e===null&&Ve&&(f=i.stateNode=Tm(i.type,i.pendingProps,Nt.current),wi=i,zr=!0,E=mn,Na(i.type)?(l1=E,mn=Hr(f.firstChild)):mn=E),Ci(e,i,i.pendingProps.children,l),oc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ve&&((E=f=mn)&&(f=ox(f,i.type,i.pendingProps,zr),f!==null?(i.stateNode=f,wi=i,mn=Hr(f.firstChild),zr=!1,E=!0):E=!1),E||ma(i)),sr(i),E=i.type,A=i.pendingProps,b=e!==null?e.memoizedProps:null,f=A.children,i1(E,A)?f=null:b!==null&&i1(E,b)&&(i.flags|=32),i.memoizedState!==null&&(E=ef(e,i,wE,null,null,l),nu._currentValue=E),oc(e,i),Ci(e,i,f,l),i.child;case 6:return e===null&&Ve&&((e=l=mn)&&(l=lx(l,i.pendingProps,zr),l!==null?(i.stateNode=l,wi=i,mn=null,e=!0):e=!1),e||ma(i)),null;case 13:return fg(e,i,l);case 4:return xe(i,i.stateNode.containerInfo),f=i.pendingProps,e===null?i.child=po(i,null,f,l):Ci(e,i,f,l),i.child;case 11:return ig(e,i,i.type,i.pendingProps,l);case 7:return Ci(e,i,i.pendingProps,l),i.child;case 8:return Ci(e,i,i.pendingProps.children,l),i.child;case 12:return Ci(e,i,i.pendingProps.children,l),i.child;case 10:return f=i.pendingProps,pa(i,i.type,f.value),Ci(e,i,f.children,l),i.child;case 9:return E=i.type._context,f=i.pendingProps.children,ho(i),E=Ti(E),f=f(E),i.flags|=1,Ci(e,i,f,l),i.child;case 14:return rg(e,i,i.type,i.pendingProps,l);case 15:return sg(e,i,i.type,i.pendingProps,l);case 19:return gg(e,i,l);case 31:return RE(e,i,l);case 22:return ag(e,i,l,i.pendingProps);case 24:return ho(i),f=Ti(Xn),e===null?(E=Yh(),E===null&&(E=hn,A=Hh(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=l),E=A),i.memoizedState={parent:f,cache:E},qh(i),pa(i,Xn,E)):((e.lanes&l)!==0&&(Qh(e,i),Vl(i,null,null,l),Bl()),E=e.memoizedState,A=i.memoizedState,E.parent!==f?(E={parent:f,cache:f},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),pa(i,Xn,f)):(f=A.cache,pa(i,Xn,f),f!==E.cache&&jh(i,[Xn],l,!0))),Ci(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(u(156,i.tag))}function js(e){e.flags|=4}function Rf(e,i,l,f,E){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(E&335544128)===E)if(e.stateNode.complete)e.flags|=8192;else if(jg())e.flags|=8192;else throw mo=Xu,Xh}else e.flags&=-16777217}function pg(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Dm(i))if(jg())e.flags|=8192;else throw mo=Xu,Xh}function uc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?zn():536870912,e.lanes|=i,Jo|=i)}function jl(e,i){if(!Ve)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function pn(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,f=0;if(i)for(var E=e.child;E!==null;)l|=E.lanes|E.childLanes,f|=E.subtreeFlags&65011712,f|=E.flags&65011712,E.return=e,E=E.sibling;else for(E=e.child;E!==null;)l|=E.lanes|E.childLanes,f|=E.subtreeFlags,f|=E.flags,E.return=e,E=E.sibling;return e.subtreeFlags|=f,e.childLanes=l,i}function ME(e,i,l){var f=i.pendingProps;switch(Ph(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(i),null;case 1:return pn(i),null;case 3:return l=i.stateNode,f=null,e!==null&&(f=e.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),ks(Xn),Ze(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Uo(i)?js(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Uh())),pn(i),null;case 26:var E=i.type,A=i.memoizedState;return e===null?(js(i),A!==null?(pn(i),pg(i,A)):(pn(i),Rf(i,E,null,f,l))):A?A!==e.memoizedState?(js(i),pn(i),pg(i,A)):(pn(i),i.flags&=-16777217):(e=e.memoizedProps,e!==f&&js(i),pn(i),Rf(i,E,e,f,l)),null;case 27:if(Fn(i),l=Nt.current,E=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==f&&js(i);else{if(!f){if(i.stateNode===null)throw Error(u(166));return pn(i),null}e=Mt.current,Uo(i)?Z0(i):(e=Tm(E,f,l),i.stateNode=e,js(i))}return pn(i),null;case 5:if(Fn(i),E=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==f&&js(i);else{if(!f){if(i.stateNode===null)throw Error(u(166));return pn(i),null}if(A=Mt.current,Uo(i))Z0(i);else{var b=Cc(Nt.current);switch(A){case 1:A=b.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=b.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=b.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=b.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=b.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?A.multiple=!0:f.size&&(A.size=f.size);break;default:A=typeof f.is=="string"?b.createElement(E,{is:f.is}):b.createElement(E)}}A[An]=i,A[Fe]=f;t:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)A.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break t;for(;b.sibling===null;){if(b.return===null||b.return===i)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=A;t:switch(Si(A,E,f),E){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&js(i)}}return pn(i),Rf(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,l),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==f&&js(i);else{if(typeof f!="string"&&i.stateNode===null)throw Error(u(166));if(e=Nt.current,Uo(i)){if(e=i.stateNode,l=i.memoizedProps,f=null,E=wi,E!==null)switch(E.tag){case 27:case 5:f=E.memoizedProps}e[An]=i,e=!!(e.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||fm(e.nodeValue,l)),e||ma(i,!0)}else e=Cc(e).createTextNode(f),e[An]=i,i.stateNode=e}return pn(i),null;case 31:if(l=i.memoizedState,e===null||e.memoizedState!==null){if(f=Uo(i),l!==null){if(e===null){if(!f)throw Error(u(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[An]=i}else uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pn(i),e=!1}else l=Uh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return i.flags&256?(xr(i),i):(xr(i),null);if((i.flags&128)!==0)throw Error(u(558))}return pn(i),null;case 13:if(f=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(E=Uo(i),f!==null&&f.dehydrated!==null){if(e===null){if(!E)throw Error(u(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(u(317));E[An]=i}else uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pn(i),E=!1}else E=Uh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(xr(i),i):(xr(i),null)}return xr(i),(i.flags&128)!==0?(i.lanes=l,i):(l=f!==null,e=e!==null&&e.memoizedState!==null,l&&(f=i.child,E=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(E=f.alternate.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==E&&(f.flags|=2048)),l!==e&&l&&(i.child.flags|=8192),uc(i,i.updateQueue),pn(i),null);case 4:return Ze(),e===null&&Jf(i.stateNode.containerInfo),pn(i),null;case 10:return ks(i.type),pn(i),null;case 19:if(ft(Hn),f=i.memoizedState,f===null)return pn(i),null;if(E=(i.flags&128)!==0,A=f.rendering,A===null)if(E)jl(f,!1);else{if(kn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(A=Wu(e),A!==null){for(i.flags|=128,jl(f,!1),e=A.updateQueue,i.updateQueue=e,uc(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)G0(l,e),l=l.sibling;return Dt(Hn,Hn.current&1|2),Ve&&Vs(i,f.treeForkCount),i.child}e=e.sibling}f.tail!==null&&dn()>gc&&(i.flags|=128,E=!0,jl(f,!1),i.lanes=4194304)}else{if(!E)if(e=Wu(A),e!==null){if(i.flags|=128,E=!0,e=e.updateQueue,i.updateQueue=e,uc(i,e),jl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!A.alternate&&!Ve)return pn(i),null}else 2*dn()-f.renderingStartTime>gc&&l!==536870912&&(i.flags|=128,E=!0,jl(f,!1),i.lanes=4194304);f.isBackwards?(A.sibling=i.child,i.child=A):(e=f.last,e!==null?e.sibling=A:i.child=A,f.last=A)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=dn(),e.sibling=null,l=Hn.current,Dt(Hn,E?l&1|2:l&1),Ve&&Vs(i,f.treeForkCount),e):(pn(i),null);case 22:case 23:return xr(i),Jh(),f=i.memoizedState!==null,e!==null?e.memoizedState!==null!==f&&(i.flags|=8192):f&&(i.flags|=8192),f?(l&536870912)!==0&&(i.flags&128)===0&&(pn(i),i.subtreeFlags&6&&(i.flags|=8192)):pn(i),l=i.updateQueue,l!==null&&uc(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),f=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==l&&(i.flags|=2048),e!==null&&ft(fo),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ks(Xn),pn(i),null;case 25:return null;case 30:return null}throw Error(u(156,i.tag))}function OE(e,i){switch(Ph(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ks(Xn),Ze(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Fn(i),null;case 31:if(i.memoizedState!==null){if(xr(i),i.alternate===null)throw Error(u(340));uo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(xr(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(u(340));uo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ft(Hn),null;case 4:return Ze(),null;case 10:return ks(i.type),null;case 22:case 23:return xr(i),Jh(),e!==null&&ft(fo),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ks(Xn),null;case 25:return null;default:return null}}function yg(e,i){switch(Ph(i),i.tag){case 3:ks(Xn),Ze();break;case 26:case 27:case 5:Fn(i);break;case 4:Ze();break;case 31:i.memoizedState!==null&&xr(i);break;case 13:xr(i);break;case 19:ft(Hn);break;case 10:ks(i.type);break;case 22:case 23:xr(i),Jh(),e!==null&&ft(fo);break;case 24:ks(Xn)}}function Hl(e,i){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var E=f.next;l=E;do{if((l.tag&e)===e){f=void 0;var A=l.create,b=l.inst;f=A(),b.destroy=f}l=l.next}while(l!==E)}}catch(B){en(i,i.return,B)}}function wa(e,i,l){try{var f=i.updateQueue,E=f!==null?f.lastEffect:null;if(E!==null){var A=E.next;f=A;do{if((f.tag&e)===e){var b=f.inst,B=b.destroy;if(B!==void 0){b.destroy=void 0,E=i;var H=l,st=B;try{st()}catch(dt){en(E,H,dt)}}}f=f.next}while(f!==A)}}catch(dt){en(i,i.return,dt)}}function Eg(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{ld(i,l)}catch(f){en(e,e.return,f)}}}function xg(e,i,l){l.props=Eo(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(f){en(e,i,f)}}function Gl(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var f=e.stateNode;break;case 30:f=e.stateNode;break;default:f=e.stateNode}typeof l=="function"?e.refCleanup=l(f):l.current=f}}catch(E){en(e,i,E)}}function fs(e,i){var l=e.ref,f=e.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(E){en(e,i,E)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(E){en(e,i,E)}else l.current=null}function Ag(e){var i=e.type,l=e.memoizedProps,f=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break t;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(E){en(e,e.return,E)}}function Df(e,i,l){try{var f=e.stateNode;ex(f,e.type,l,i),f[Fe]=i}catch(E){en(e,e.return,E)}}function _g(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Na(e.type)||e.tag===4}function Mf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||_g(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Na(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Of(e,i,l){var f=e.tag;if(f===5||f===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Oi));else if(f!==4&&(f===27&&Na(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(Of(e,i,l),e=e.sibling;e!==null;)Of(e,i,l),e=e.sibling}function cc(e,i,l){var f=e.tag;if(f===5||f===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(f!==4&&(f===27&&Na(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(cc(e,i,l),e=e.sibling;e!==null;)cc(e,i,l),e=e.sibling}function wg(e){var i=e.stateNode,l=e.memoizedProps;try{for(var f=e.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);Si(i,f,l),i[An]=e,i[Fe]=l}catch(A){en(e,e.return,A)}}var Hs=!1,Zn=!1,Lf=!1,Tg=typeof WeakSet=="function"?WeakSet:Set,oi=null;function LE(e,i){if(e=e.containerInfo,e1=Dc,e=D(e),O(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else t:{l=(l=e.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var E=f.anchorOffset,A=f.focusNode;f=f.focusOffset;try{l.nodeType,A.nodeType}catch{l=null;break t}var b=0,B=-1,H=-1,st=0,dt=0,yt=e,at=null;e:for(;;){for(var ht;yt!==l||E!==0&&yt.nodeType!==3||(B=b+E),yt!==A||f!==0&&yt.nodeType!==3||(H=b+f),yt.nodeType===3&&(b+=yt.nodeValue.length),(ht=yt.firstChild)!==null;)at=yt,yt=ht;for(;;){if(yt===e)break e;if(at===l&&++st===E&&(B=b),at===A&&++dt===f&&(H=b),(ht=yt.nextSibling)!==null)break;yt=at,at=yt.parentNode}yt=ht}l=B===-1||H===-1?null:{start:B,end:H}}else l=null}l=l||{start:0,end:0}}else l=null;for(n1={focusedElem:e,selectionRange:l},Dc=!1,oi=i;oi!==null;)if(i=oi,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,oi=e;else for(;oi!==null;){switch(i=oi,A=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)E=e[l],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&A!==null){e=void 0,l=i,E=A.memoizedProps,A=A.memoizedState,f=l.stateNode;try{var Ft=Eo(l.type,E);e=f.getSnapshotBeforeUpdate(Ft,A),f.__reactInternalSnapshotBeforeUpdate=e}catch(te){en(l,l.return,te)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)s1(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":s1(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=i.sibling,e!==null){e.return=i.return,oi=e;break}oi=i.return}}function Cg(e,i,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Ys(e,l),f&4&&Hl(5,l);break;case 1:if(Ys(e,l),f&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(b){en(l,l.return,b)}else{var E=Eo(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(E,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){en(l,l.return,b)}}f&64&&Eg(l),f&512&&Gl(l,l.return);break;case 3:if(Ys(e,l),f&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{ld(e,i)}catch(b){en(l,l.return,b)}}break;case 27:i===null&&f&4&&wg(l);case 26:case 5:Ys(e,l),i===null&&f&4&&Ag(l),f&512&&Gl(l,l.return);break;case 12:Ys(e,l);break;case 31:Ys(e,l),f&4&&bg(e,l);break;case 13:Ys(e,l),f&4&&Ig(e,l),f&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=HE.bind(null,l),ux(e,l))));break;case 22:if(f=l.memoizedState!==null||Hs,!f){i=i!==null&&i.memoizedState!==null||Zn,E=Hs;var A=Zn;Hs=f,(Zn=i)&&!A?Xs(e,l,(l.subtreeFlags&8772)!==0):Ys(e,l),Hs=E,Zn=A}break;case 30:break;default:Ys(e,l)}}function Sg(e){var i=e.alternate;i!==null&&(e.alternate=null,Sg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&yi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var vn=null,$i=!1;function Gs(e,i,l){for(l=l.child;l!==null;)vg(e,i,l),l=l.sibling}function vg(e,i,l){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(He,l)}catch{}switch(l.tag){case 26:Zn||fs(l,i),Gs(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Zn||fs(l,i);var f=vn,E=$i;Na(l.type)&&(vn=l.stateNode,$i=!1),Gs(e,i,l),$l(l.stateNode),vn=f,$i=E;break;case 5:Zn||fs(l,i);case 6:if(f=vn,E=$i,vn=null,Gs(e,i,l),vn=f,$i=E,vn!==null)if($i)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(l.stateNode)}catch(A){en(l,i,A)}else try{vn.removeChild(l.stateNode)}catch(A){en(l,i,A)}break;case 18:vn!==null&&($i?(e=vn,Em(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),al(e)):Em(vn,l.stateNode));break;case 4:f=vn,E=$i,vn=l.stateNode.containerInfo,$i=!0,Gs(e,i,l),vn=f,$i=E;break;case 0:case 11:case 14:case 15:wa(2,l,i),Zn||wa(4,l,i),Gs(e,i,l);break;case 1:Zn||(fs(l,i),f=l.stateNode,typeof f.componentWillUnmount=="function"&&xg(l,i,f)),Gs(e,i,l);break;case 21:Gs(e,i,l);break;case 22:Zn=(f=Zn)||l.memoizedState!==null,Gs(e,i,l),Zn=f;break;default:Gs(e,i,l)}}function bg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{al(e)}catch(l){en(i,i.return,l)}}}function Ig(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{al(e)}catch(l){en(i,i.return,l)}}function BE(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Tg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Tg),i;default:throw Error(u(435,e.tag))}}function hc(e,i){var l=BE(e);i.forEach(function(f){if(!l.has(f)){l.add(f);var E=GE.bind(null,e,f);f.then(E,E)}})}function tr(e,i){var l=i.deletions;if(l!==null)for(var f=0;f<l.length;f++){var E=l[f],A=e,b=i,B=b;t:for(;B!==null;){switch(B.tag){case 27:if(Na(B.type)){vn=B.stateNode,$i=!1;break t}break;case 5:vn=B.stateNode,$i=!1;break t;case 3:case 4:vn=B.stateNode.containerInfo,$i=!0;break t}B=B.return}if(vn===null)throw Error(u(160));vg(A,b,E),vn=null,$i=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ng(i,e),i=i.sibling}var $r=null;function Ng(e,i){var l=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tr(i,e),er(e),f&4&&(wa(3,e,e.return),Hl(3,e),wa(5,e,e.return));break;case 1:tr(i,e),er(e),f&512&&(Zn||l===null||fs(l,l.return)),f&64&&Hs&&(e=e.updateQueue,e!==null&&(f=e.callbacks,f!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var E=$r;if(tr(i,e),er(e),f&512&&(Zn||l===null||fs(l,l.return)),f&4){var A=l!==null?l.memoizedState:null;if(f=e.memoizedState,l===null)if(f===null)if(e.stateNode===null){t:{f=e.type,l=e.memoizedProps,E=E.ownerDocument||E;e:switch(f){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Nr]||A[An]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(f),E.head.insertBefore(A,E.querySelector("head > title"))),Si(A,f,l),A[An]=e,_n(A),f=A;break t;case"link":var b=Nm("link","href",E).get(f+(l.href||""));if(b){for(var B=0;B<b.length;B++)if(A=b[B],A.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&A.getAttribute("rel")===(l.rel==null?null:l.rel)&&A.getAttribute("title")===(l.title==null?null:l.title)&&A.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(B,1);break e}}A=E.createElement(f),Si(A,f,l),E.head.appendChild(A);break;case"meta":if(b=Nm("meta","content",E).get(f+(l.content||""))){for(B=0;B<b.length;B++)if(A=b[B],A.getAttribute("content")===(l.content==null?null:""+l.content)&&A.getAttribute("name")===(l.name==null?null:l.name)&&A.getAttribute("property")===(l.property==null?null:l.property)&&A.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&A.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(B,1);break e}}A=E.createElement(f),Si(A,f,l),E.head.appendChild(A);break;default:throw Error(u(468,f))}A[An]=e,_n(A),f=A}e.stateNode=f}else Rm(E,e.type,e.stateNode);else e.stateNode=Im(E,f,e.memoizedProps);else A!==f?(A===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):A.count--,f===null?Rm(E,e.type,e.stateNode):Im(E,f,e.memoizedProps)):f===null&&e.stateNode!==null&&Df(e,e.memoizedProps,l.memoizedProps)}break;case 27:tr(i,e),er(e),f&512&&(Zn||l===null||fs(l,l.return)),l!==null&&f&4&&Df(e,e.memoizedProps,l.memoizedProps);break;case 5:if(tr(i,e),er(e),f&512&&(Zn||l===null||fs(l,l.return)),e.flags&32){E=e.stateNode;try{Mi(E,"")}catch(Ft){en(e,e.return,Ft)}}f&4&&e.stateNode!=null&&(E=e.memoizedProps,Df(e,E,l!==null?l.memoizedProps:E)),f&1024&&(Lf=!0);break;case 6:if(tr(i,e),er(e),f&4){if(e.stateNode===null)throw Error(u(162));f=e.memoizedProps,l=e.stateNode;try{l.nodeValue=f}catch(Ft){en(e,e.return,Ft)}}break;case 3:if(bc=null,E=$r,$r=Sc(i.containerInfo),tr(i,e),$r=E,er(e),f&4&&l!==null&&l.memoizedState.isDehydrated)try{al(i.containerInfo)}catch(Ft){en(e,e.return,Ft)}Lf&&(Lf=!1,Rg(e));break;case 4:f=$r,$r=Sc(e.stateNode.containerInfo),tr(i,e),er(e),$r=f;break;case 12:tr(i,e),er(e);break;case 31:tr(i,e),er(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,hc(e,f)));break;case 13:tr(i,e),er(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(dc=dn()),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,hc(e,f)));break;case 22:E=e.memoizedState!==null;var H=l!==null&&l.memoizedState!==null,st=Hs,dt=Zn;if(Hs=st||E,Zn=dt||H,tr(i,e),Zn=dt,Hs=st,er(e),f&8192)t:for(i=e.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(l===null||H||Hs||Zn||xo(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){H=l=i;try{if(A=H.stateNode,E)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{B=H.stateNode;var yt=H.memoizedProps.style,at=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;B.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(Ft){en(H,H.return,Ft)}}}else if(i.tag===6){if(l===null){H=i;try{H.stateNode.nodeValue=E?"":H.memoizedProps}catch(Ft){en(H,H.return,Ft)}}}else if(i.tag===18){if(l===null){H=i;try{var ht=H.stateNode;E?xm(ht,!0):xm(H.stateNode,!1)}catch(Ft){en(H,H.return,Ft)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}f&4&&(f=e.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,hc(e,l))));break;case 19:tr(i,e),er(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,hc(e,f)));break;case 30:break;case 21:break;default:tr(i,e),er(e)}}function er(e){var i=e.flags;if(i&2){try{for(var l,f=e.return;f!==null;){if(_g(f)){l=f;break}f=f.return}if(l==null)throw Error(u(160));switch(l.tag){case 27:var E=l.stateNode,A=Mf(e);cc(e,A,E);break;case 5:var b=l.stateNode;l.flags&32&&(Mi(b,""),l.flags&=-33);var B=Mf(e);cc(e,B,b);break;case 3:case 4:var H=l.stateNode.containerInfo,st=Mf(e);Of(e,st,H);break;default:throw Error(u(161))}}catch(dt){en(e,e.return,dt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Rg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Rg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Ys(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cg(e,i.alternate,i),i=i.sibling}function xo(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:wa(4,i,i.return),xo(i);break;case 1:fs(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&xg(i,i.return,l),xo(i);break;case 27:$l(i.stateNode);case 26:case 5:fs(i,i.return),xo(i);break;case 22:i.memoizedState===null&&xo(i);break;case 30:xo(i);break;default:xo(i)}e=e.sibling}}function Xs(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var f=i.alternate,E=e,A=i,b=A.flags;switch(A.tag){case 0:case 11:case 15:Xs(E,A,l),Hl(4,A);break;case 1:if(Xs(E,A,l),f=A,E=f.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(st){en(f,f.return,st)}if(f=A,E=f.updateQueue,E!==null){var B=f.stateNode;try{var H=E.shared.hiddenCallbacks;if(H!==null)for(E.shared.hiddenCallbacks=null,E=0;E<H.length;E++)od(H[E],B)}catch(st){en(f,f.return,st)}}l&&b&64&&Eg(A),Gl(A,A.return);break;case 27:wg(A);case 26:case 5:Xs(E,A,l),l&&f===null&&b&4&&Ag(A),Gl(A,A.return);break;case 12:Xs(E,A,l);break;case 31:Xs(E,A,l),l&&b&4&&bg(E,A);break;case 13:Xs(E,A,l),l&&b&4&&Ig(E,A);break;case 22:A.memoizedState===null&&Xs(E,A,l),Gl(A,A.return);break;case 30:break;default:Xs(E,A,l)}i=i.sibling}}function Bf(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Rl(l))}function Vf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Rl(e))}function ts(e,i,l,f){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dg(e,i,l,f),i=i.sibling}function Dg(e,i,l,f){var E=i.flags;switch(i.tag){case 0:case 11:case 15:ts(e,i,l,f),E&2048&&Hl(9,i);break;case 1:ts(e,i,l,f);break;case 3:ts(e,i,l,f),E&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Rl(e)));break;case 12:if(E&2048){ts(e,i,l,f),e=i.stateNode;try{var A=i.memoizedProps,b=A.id,B=A.onPostCommit;typeof B=="function"&&B(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(H){en(i,i.return,H)}}else ts(e,i,l,f);break;case 31:ts(e,i,l,f);break;case 13:ts(e,i,l,f);break;case 23:break;case 22:A=i.stateNode,b=i.alternate,i.memoizedState!==null?A._visibility&2?ts(e,i,l,f):Yl(e,i):A._visibility&2?ts(e,i,l,f):(A._visibility|=2,Zo(e,i,l,f,(i.subtreeFlags&10256)!==0||!1)),E&2048&&Bf(b,i);break;case 24:ts(e,i,l,f),E&2048&&Vf(i.alternate,i);break;default:ts(e,i,l,f)}}function Zo(e,i,l,f,E){for(E=E&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var A=e,b=i,B=l,H=f,st=b.flags;switch(b.tag){case 0:case 11:case 15:Zo(A,b,B,H,E),Hl(8,b);break;case 23:break;case 22:var dt=b.stateNode;b.memoizedState!==null?dt._visibility&2?Zo(A,b,B,H,E):Yl(A,b):(dt._visibility|=2,Zo(A,b,B,H,E)),E&&st&2048&&Bf(b.alternate,b);break;case 24:Zo(A,b,B,H,E),E&&st&2048&&Vf(b.alternate,b);break;default:Zo(A,b,B,H,E)}i=i.sibling}}function Yl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,f=i,E=f.flags;switch(f.tag){case 22:Yl(l,f),E&2048&&Bf(f.alternate,f);break;case 24:Yl(l,f),E&2048&&Vf(f.alternate,f);break;default:Yl(l,f)}i=i.sibling}}var Xl=8192;function Wo(e,i,l){if(e.subtreeFlags&Xl)for(e=e.child;e!==null;)Mg(e,i,l),e=e.sibling}function Mg(e,i,l){switch(e.tag){case 26:Wo(e,i,l),e.flags&Xl&&e.memoizedState!==null&&_x(l,$r,e.memoizedState,e.memoizedProps);break;case 5:Wo(e,i,l);break;case 3:case 4:var f=$r;$r=Sc(e.stateNode.containerInfo),Wo(e,i,l),$r=f;break;case 22:e.memoizedState===null&&(f=e.alternate,f!==null&&f.memoizedState!==null?(f=Xl,Xl=16777216,Wo(e,i,l),Xl=f):Wo(e,i,l));break;default:Wo(e,i,l)}}function Og(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ql(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var f=i[l];oi=f,Bg(f,e)}Og(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Lg(e),e=e.sibling}function Lg(e){switch(e.tag){case 0:case 11:case 15:ql(e),e.flags&2048&&wa(9,e,e.return);break;case 3:ql(e);break;case 12:ql(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,fc(e)):ql(e);break;default:ql(e)}}function fc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var f=i[l];oi=f,Bg(f,e)}Og(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:wa(8,i,i.return),fc(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,fc(i));break;default:fc(i)}e=e.sibling}}function Bg(e,i){for(;oi!==null;){var l=oi;switch(l.tag){case 0:case 11:case 15:wa(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Rl(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,oi=f;else t:for(l=e;oi!==null;){f=oi;var E=f.sibling,A=f.return;if(Sg(f),f===l){oi=null;break t}if(E!==null){E.return=A,oi=E;break t}oi=A}}}var VE={getCacheForType:function(e){var i=Ti(Xn),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l},cacheSignal:function(){return Ti(Xn).controller.signal}},PE=typeof WeakMap=="function"?WeakMap:Map,Qe=0,hn=null,ve=null,Re=0,tn=0,Ar=null,Ta=!1,Ko=!1,Pf=!1,qs=0,kn=0,Ca=0,Ao=0,kf=0,_r=0,Jo=0,Ql=null,nr=null,Uf=!1,dc=0,Vg=0,gc=1/0,mc=null,Sa=null,ei=0,va=null,$o=null,Qs=0,Ff=0,zf=null,Pg=null,Zl=0,jf=null;function wr(){return(Qe&2)!==0&&Re!==0?Re&-Re:ot.T!==null?Qf():mi()}function kg(){if(_r===0)if((Re&536870912)===0||Ve){var e=pe;pe<<=1,(pe&3932160)===0&&(pe=262144),_r=e}else _r=536870912;return e=Er.current,e!==null&&(e.flags|=32),_r}function ir(e,i,l){(e===hn&&(tn===2||tn===9)||e.cancelPendingCommit!==null)&&(tl(e,0),ba(e,Re,_r,!1)),Ir(e,l),((Qe&2)===0||e!==hn)&&(e===hn&&((Qe&2)===0&&(Ao|=l),kn===4&&ba(e,Re,_r,!1)),ds(e))}function Ug(e,i,l){if((Qe&6)!==0)throw Error(u(327));var f=!l&&(i&127)===0&&(i&e.expiredLanes)===0||In(e,i),E=f?FE(e,i):Gf(e,i,!0),A=f;do{if(E===0){Ko&&!f&&ba(e,i,0,!1);break}else{if(l=e.current.alternate,A&&!kE(l)){E=Gf(e,i,!1),A=!1;continue}if(E===2){if(A=i,e.errorRecoveryDisabledLanes&A)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var B=e;E=Ql;var H=B.current.memoizedState.isDehydrated;if(H&&(tl(B,b).flags|=256),b=Gf(B,b,!1),b!==2){if(Pf&&!H){B.errorRecoveryDisabledLanes|=A,Ao|=A,E=4;break t}A=nr,nr=E,A!==null&&(nr===null?nr=A:nr.push.apply(nr,A))}E=b}if(A=!1,E!==2)continue}}if(E===1){tl(e,0),ba(e,i,0,!0);break}t:{switch(f=e,A=E,A){case 0:case 1:throw Error(u(345));case 4:if((i&4194048)!==i)break;case 6:ba(f,i,_r,!Ta);break t;case 2:nr=null;break;case 3:case 5:break;default:throw Error(u(329))}if((i&62914560)===i&&(E=dc+300-dn(),10<E)){if(ba(f,i,_r,!Ta),ur(f,0,!0)!==0)break t;Qs=i,f.timeoutHandle=pm(Fg.bind(null,f,l,nr,mc,Uf,i,_r,Ao,Jo,Ta,A,"Throttled",-0,0),E);break t}Fg(f,l,nr,mc,Uf,i,_r,Ao,Jo,Ta,A,null,-0,0)}}break}while(!0);ds(e)}function Fg(e,i,l,f,E,A,b,B,H,st,dt,yt,at,ht){if(e.timeoutHandle=-1,yt=i.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oi},Mg(i,A,yt);var Ft=(A&62914560)===A?dc-dn():(A&4194048)===A?Vg-dn():0;if(Ft=wx(yt,Ft),Ft!==null){Qs=A,e.cancelPendingCommit=Ft(Qg.bind(null,e,i,A,l,f,E,b,B,H,dt,yt,null,at,ht)),ba(e,A,b,!st);return}}Qg(e,i,A,l,f,E,b,B,H)}function kE(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var E=l[f],A=E.getSnapshot;E=E.value;try{if(!g(A(),E))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ba(e,i,l,f){i&=~kf,i&=~Ao,e.suspendedLanes|=i,e.pingedLanes&=~i,f&&(e.warmLanes|=i),f=e.expirationTimes;for(var E=i;0<E;){var A=31-ne(E),b=1<<A;f[A]=-1,E&=~b}l!==0&&ws(e,l,i)}function pc(){return(Qe&6)===0?(Wl(0),!1):!0}function Hf(){if(ve!==null){if(tn===0)var e=ve.return;else e=ve,Ps=co=null,sf(e),Go=null,Ml=0,e=ve;for(;e!==null;)yg(e.alternate,e),e=e.return;ve=null}}function tl(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,rx(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Qs=0,Hf(),hn=e,ve=l=Bs(e.current,null),Re=i,tn=0,Ar=null,Ta=!1,Ko=In(e,i),Pf=!1,Jo=_r=kf=Ao=Ca=kn=0,nr=Ql=null,Uf=!1,(i&8)!==0&&(i|=i&32);var f=e.entangledLanes;if(f!==0)for(e=e.entanglements,f&=i;0<f;){var E=31-ne(f),A=1<<E;i|=e[E],f&=~A}return qs=i,Pu(),l}function zg(e,i){he=null,ot.H=Fl,i===Ho||i===Yu?(i=id(),tn=3):i===Xh?(i=id(),tn=4):tn=i===_f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ar=i,ve===null&&(kn=1,sc(e,kr(i,e.current)))}function jg(){var e=Er.current;return e===null?!0:(Re&4194048)===Re?jr===null:(Re&62914560)===Re||(Re&536870912)!==0?e===jr:!1}function Hg(){var e=ot.H;return ot.H=Fl,e===null?Fl:e}function Gg(){var e=ot.A;return ot.A=VE,e}function yc(){kn=4,Ta||(Re&4194048)!==Re&&Er.current!==null||(Ko=!0),(Ca&134217727)===0&&(Ao&134217727)===0||hn===null||ba(hn,Re,_r,!1)}function Gf(e,i,l){var f=Qe;Qe|=2;var E=Hg(),A=Gg();(hn!==e||Re!==i)&&(mc=null,tl(e,i)),i=!1;var b=kn;t:do try{if(tn!==0&&ve!==null){var B=ve,H=Ar;switch(tn){case 8:Hf(),b=6;break t;case 3:case 2:case 9:case 6:Er.current===null&&(i=!0);var st=tn;if(tn=0,Ar=null,el(e,B,H,st),l&&Ko){b=0;break t}break;default:st=tn,tn=0,Ar=null,el(e,B,H,st)}}UE(),b=kn;break}catch(dt){zg(e,dt)}while(!0);return i&&e.shellSuspendCounter++,Ps=co=null,Qe=f,ot.H=E,ot.A=A,ve===null&&(hn=null,Re=0,Pu()),b}function UE(){for(;ve!==null;)Yg(ve)}function FE(e,i){var l=Qe;Qe|=2;var f=Hg(),E=Gg();hn!==e||Re!==i?(mc=null,gc=dn()+500,tl(e,i)):Ko=In(e,i);t:do try{if(tn!==0&&ve!==null){i=ve;var A=Ar;e:switch(tn){case 1:tn=0,Ar=null,el(e,i,A,1);break;case 2:case 9:if(ed(A)){tn=0,Ar=null,Xg(i);break}i=function(){tn!==2&&tn!==9||hn!==e||(tn=7),ds(e)},A.then(i,i);break t;case 3:tn=7;break t;case 4:tn=5;break t;case 7:ed(A)?(tn=0,Ar=null,Xg(i)):(tn=0,Ar=null,el(e,i,A,7));break;case 5:var b=null;switch(ve.tag){case 26:b=ve.memoizedState;case 5:case 27:var B=ve;if(b?Dm(b):B.stateNode.complete){tn=0,Ar=null;var H=B.sibling;if(H!==null)ve=H;else{var st=B.return;st!==null?(ve=st,Ec(st)):ve=null}break e}}tn=0,Ar=null,el(e,i,A,5);break;case 6:tn=0,Ar=null,el(e,i,A,6);break;case 8:Hf(),kn=6;break t;default:throw Error(u(462))}}zE();break}catch(dt){zg(e,dt)}while(!0);return Ps=co=null,ot.H=f,ot.A=E,Qe=l,ve!==null?0:(hn=null,Re=0,Pu(),kn)}function zE(){for(;ve!==null&&!na();)Yg(ve)}function Yg(e){var i=mg(e.alternate,e,qs);e.memoizedProps=e.pendingProps,i===null?Ec(e):ve=i}function Xg(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=ug(l,i,i.pendingProps,i.type,void 0,Re);break;case 11:i=ug(l,i,i.pendingProps,i.type.render,i.ref,Re);break;case 5:sf(i);default:yg(l,i),i=ve=G0(i,qs),i=mg(l,i,qs)}e.memoizedProps=e.pendingProps,i===null?Ec(e):ve=i}function el(e,i,l,f){Ps=co=null,sf(i),Go=null,Ml=0;var E=i.return;try{if(NE(e,E,i,l,Re)){kn=1,sc(e,kr(l,e.current)),ve=null;return}}catch(A){if(E!==null)throw ve=E,A;kn=1,sc(e,kr(l,e.current)),ve=null;return}i.flags&32768?(Ve||f===1?e=!0:Ko||(Re&536870912)!==0?e=!1:(Ta=e=!0,(f===2||f===9||f===3||f===6)&&(f=Er.current,f!==null&&f.tag===13&&(f.flags|=16384))),qg(i,e)):Ec(i)}function Ec(e){var i=e;do{if((i.flags&32768)!==0){qg(i,Ta);return}e=i.return;var l=ME(i.alternate,i,qs);if(l!==null){ve=l;return}if(i=i.sibling,i!==null){ve=i;return}ve=i=e}while(i!==null);kn===0&&(kn=5)}function qg(e,i){do{var l=OE(e.alternate,e);if(l!==null){l.flags&=32767,ve=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){ve=e;return}ve=e=l}while(e!==null);kn=6,ve=null}function Qg(e,i,l,f,E,A,b,B,H){e.cancelPendingCommit=null;do xc();while(ei!==0);if((Qe&6)!==0)throw Error(u(327));if(i!==null){if(i===e.current)throw Error(u(177));if(A=i.lanes|i.childLanes,A|=Dh,qi(e,l,A,b,B,H),e===hn&&(ve=hn=null,Re=0),$o=i,va=e,Qs=l,Ff=A,zf=E,Pg=f,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,YE(fi,function(){return $g(),null})):(e.callbackNode=null,e.callbackPriority=0),f=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||f){f=ot.T,ot.T=null,E=pt.p,pt.p=2,b=Qe,Qe|=4;try{LE(e,i,l)}finally{Qe=b,pt.p=E,ot.T=f}}ei=1,Zg(),Wg(),Kg()}}function Zg(){if(ei===1){ei=0;var e=va,i=$o,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=ot.T,ot.T=null;var f=pt.p;pt.p=2;var E=Qe;Qe|=4;try{Ng(i,e);var A=n1,b=D(e.containerInfo),B=A.focusedElem,H=A.selectionRange;if(b!==B&&B&&B.ownerDocument&&v(B.ownerDocument.documentElement,B)){if(H!==null&&O(B)){var st=H.start,dt=H.end;if(dt===void 0&&(dt=st),"selectionStart"in B)B.selectionStart=st,B.selectionEnd=Math.min(dt,B.value.length);else{var yt=B.ownerDocument||document,at=yt&&yt.defaultView||window;if(at.getSelection){var ht=at.getSelection(),Ft=B.textContent.length,te=Math.min(H.start,Ft),on=H.end===void 0?te:Math.min(H.end,Ft);!ht.extend&&te>on&&(b=on,on=te,te=b);var J=w(B,te),Z=w(B,on);if(J&&Z&&(ht.rangeCount!==1||ht.anchorNode!==J.node||ht.anchorOffset!==J.offset||ht.focusNode!==Z.node||ht.focusOffset!==Z.offset)){var rt=yt.createRange();rt.setStart(J.node,J.offset),ht.removeAllRanges(),te>on?(ht.addRange(rt),ht.extend(Z.node,Z.offset)):(rt.setEnd(Z.node,Z.offset),ht.addRange(rt))}}}}for(yt=[],ht=B;ht=ht.parentNode;)ht.nodeType===1&&yt.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<yt.length;B++){var mt=yt[B];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}Dc=!!e1,n1=e1=null}finally{Qe=E,pt.p=f,ot.T=l}}e.current=i,ei=2}}function Wg(){if(ei===2){ei=0;var e=va,i=$o,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=ot.T,ot.T=null;var f=pt.p;pt.p=2;var E=Qe;Qe|=4;try{Cg(e,i.alternate,i)}finally{Qe=E,pt.p=f,ot.T=l}}ei=3}}function Kg(){if(ei===4||ei===3){ei=0,Za();var e=va,i=$o,l=Qs,f=Pg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ei=5:(ei=0,$o=va=null,Jg(e,e.pendingLanes));var E=e.pendingLanes;if(E===0&&(Sa=null),gi(l),i=i.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(He,i,void 0,(i.current.flags&128)===128)}catch{}if(f!==null){i=ot.T,E=pt.p,pt.p=2,ot.T=null;try{for(var A=e.onRecoverableError,b=0;b<f.length;b++){var B=f[b];A(B.value,{componentStack:B.stack})}}finally{ot.T=i,pt.p=E}}(Qs&3)!==0&&xc(),ds(e),E=e.pendingLanes,(l&261930)!==0&&(E&42)!==0?e===jf?Zl++:(Zl=0,jf=e):Zl=0,Wl(0)}}function Jg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Rl(i)))}function xc(){return Zg(),Wg(),Kg(),$g()}function $g(){if(ei!==5)return!1;var e=va,i=Ff;Ff=0;var l=gi(Qs),f=ot.T,E=pt.p;try{pt.p=32>l?32:l,ot.T=null,l=zf,zf=null;var A=va,b=Qs;if(ei=0,$o=va=null,Qs=0,(Qe&6)!==0)throw Error(u(331));var B=Qe;if(Qe|=4,Lg(A.current),Dg(A,A.current,b,l),Qe=B,Wl(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(He,A)}catch{}return!0}finally{pt.p=E,ot.T=f,Jg(e,i)}}function tm(e,i,l){i=kr(l,i),i=Af(e.stateNode,i,2),e=xa(e,i,2),e!==null&&(Ir(e,2),ds(e))}function en(e,i,l){if(e.tag===3)tm(e,e,l);else for(;i!==null;){if(i.tag===3){tm(i,e,l);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Sa===null||!Sa.has(f))){e=kr(l,e),l=eg(2),f=xa(i,l,2),f!==null&&(ng(l,f,i,e),Ir(f,2),ds(f));break}}i=i.return}}function Yf(e,i,l){var f=e.pingCache;if(f===null){f=e.pingCache=new PE;var E=new Set;f.set(i,E)}else E=f.get(i),E===void 0&&(E=new Set,f.set(i,E));E.has(l)||(Pf=!0,E.add(l),e=jE.bind(null,e,i,l),i.then(e,e))}function jE(e,i,l){var f=e.pingCache;f!==null&&f.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,hn===e&&(Re&l)===l&&(kn===4||kn===3&&(Re&62914560)===Re&&300>dn()-dc?(Qe&2)===0&&tl(e,0):kf|=l,Jo===Re&&(Jo=0)),ds(e)}function em(e,i){i===0&&(i=zn()),e=oo(e,i),e!==null&&(Ir(e,i),ds(e))}function HE(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),em(e,l)}function GE(e,i){var l=0;switch(e.tag){case 31:case 13:var f=e.stateNode,E=e.memoizedState;E!==null&&(l=E.retryLane);break;case 19:f=e.stateNode;break;case 22:f=e.stateNode._retryCache;break;default:throw Error(u(314))}f!==null&&f.delete(i),em(e,l)}function YE(e,i){return xn(e,i)}var Ac=null,nl=null,Xf=!1,_c=!1,qf=!1,Ia=0;function ds(e){e!==nl&&e.next===null&&(nl===null?Ac=nl=e:nl=nl.next=e),_c=!0,Xf||(Xf=!0,qE())}function Wl(e,i){if(!qf&&_c){qf=!0;do for(var l=!1,f=Ac;f!==null;){if(e!==0){var E=f.pendingLanes;if(E===0)var A=0;else{var b=f.suspendedLanes,B=f.pingedLanes;A=(1<<31-ne(42|e)+1)-1,A&=E&~(b&~B),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(l=!0,sm(f,A))}else A=Re,A=ur(f,f===hn?A:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(A&3)===0||In(f,A)||(l=!0,sm(f,A));f=f.next}while(l);qf=!1}}function XE(){nm()}function nm(){_c=Xf=!1;var e=0;Ia!==0&&ix()&&(e=Ia);for(var i=dn(),l=null,f=Ac;f!==null;){var E=f.next,A=im(f,i);A===0?(f.next=null,l===null?Ac=E:l.next=E,E===null&&(nl=l)):(l=f,(e!==0||(A&3)!==0)&&(_c=!0)),f=E}ei!==0&&ei!==5||Wl(e),Ia!==0&&(Ia=0)}function im(e,i){for(var l=e.suspendedLanes,f=e.pingedLanes,E=e.expirationTimes,A=e.pendingLanes&-62914561;0<A;){var b=31-ne(A),B=1<<b,H=E[b];H===-1?((B&l)===0||(B&f)!==0)&&(E[b]=Ka(B,i)):H<=i&&(e.expiredLanes|=B),A&=~B}if(i=hn,l=Re,l=ur(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f=e.callbackNode,l===0||e===i&&(tn===2||tn===9)||e.cancelPendingCommit!==null)return f!==null&&f!==null&&Bt(f),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||In(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(f!==null&&Bt(f),gi(l)){case 2:case 8:l=ia;break;case 32:l=fi;break;case 268435456:l=Wa;break;default:l=fi}return f=rm.bind(null,e),l=xn(l,f),e.callbackPriority=i,e.callbackNode=l,i}return f!==null&&f!==null&&Bt(f),e.callbackPriority=2,e.callbackNode=null,2}function rm(e,i){if(ei!==0&&ei!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(xc()&&e.callbackNode!==l)return null;var f=Re;return f=ur(e,e===hn?f:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f===0?null:(Ug(e,f,i),im(e,dn()),e.callbackNode!=null&&e.callbackNode===l?rm.bind(null,e):null)}function sm(e,i){if(xc())return null;Ug(e,i,!0)}function qE(){sx(function(){(Qe&6)!==0?xn(hi,XE):nm()})}function Qf(){if(Ia===0){var e=zo;e===0&&(e=or,or<<=1,(or&261888)===0&&(or=256)),Ia=e}return Ia}function am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:as(""+e)}function om(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function QE(e,i,l,f,E){if(i==="submit"&&l&&l.stateNode===E){var A=am((E[Fe]||null).action),b=f.submitter;b&&(i=(i=b[Fe]||null)?am(i.formAction):b.getAttribute("formAction"),i!==null&&(A=i,b=null));var B=new gn("action","action",null,f,E);e.push({event:B,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ia!==0){var H=b?om(E,b):new FormData(E);gf(l,{pending:!0,data:H,method:E.method,action:A},null,H)}}else typeof A=="function"&&(B.preventDefault(),H=b?om(E,b):new FormData(E),gf(l,{pending:!0,data:H,method:E.method,action:A},A,H))},currentTarget:E}]})}}for(var Zf=0;Zf<bl.length;Zf++){var Wf=bl[Zf],ZE=Wf.toLowerCase(),WE=Wf[0].toUpperCase()+Wf.slice(1);Jr(ZE,"on"+WE)}Jr(Ji,"onAnimationEnd"),Jr(_i,"onAnimationIteration"),Jr(Je,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(ti,"onTransitionRun"),Jr(Yi,"onTransitionStart"),Jr(fa,"onTransitionCancel"),Jr(Ls,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function lm(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var f=e[l],E=f.event;f=f.listeners;t:{var A=void 0;if(i)for(var b=f.length-1;0<=b;b--){var B=f[b],H=B.instance,st=B.currentTarget;if(B=B.listener,H!==A&&E.isPropagationStopped())break t;A=B,E.currentTarget=st;try{A(E)}catch(dt){Vu(dt)}E.currentTarget=null,A=H}else for(b=0;b<f.length;b++){if(B=f[b],H=B.instance,st=B.currentTarget,B=B.listener,H!==A&&E.isPropagationStopped())break t;A=B,E.currentTarget=st;try{A(E)}catch(dt){Vu(dt)}E.currentTarget=null,A=H}}}}function be(e,i){var l=i[Qr];l===void 0&&(l=i[Qr]=new Set);var f=e+"__bubble";l.has(f)||(um(i,e,2,!1),l.add(f))}function Kf(e,i,l){var f=0;i&&(f|=4),um(l,e,f,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[wc]){e[wc]=!0,Et.forEach(function(l){l!=="selectionchange"&&(KE.has(l)||Kf(l,!1,e),Kf(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[wc]||(i[wc]=!0,Kf("selectionchange",!1,i))}}function um(e,i,l,f){switch(km(i)){case 2:var E=Sx;break;case 8:E=vx;break;default:E=d1}l=E.bind(null,i,l,e),E=void 0,!Ss||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),f?E!==void 0?e.addEventListener(i,l,{capture:!0,passive:E}):e.addEventListener(i,l,!0):E!==void 0?e.addEventListener(i,l,{passive:E}):e.addEventListener(i,l,!1)}function $f(e,i,l,f,E){var A=f;if((i&1)===0&&(i&2)===0&&f!==null)t:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var B=f.stateNode.containerInfo;if(B===E)break;if(b===4)for(b=f.return;b!==null;){var H=b.tag;if((H===3||H===4)&&b.stateNode.containerInfo===E)return;b=b.return}for(;B!==null;){if(b=fn(B),b===null)return;if(H=b.tag,H===5||H===6||H===26||H===27){f=A=b;continue t}B=B.parentNode}}f=f.return}os(function(){var st=A,dt=Zi(l),yt=[];t:{var at=Bu.get(e);if(at!==void 0){var ht=gn,Ft=e;switch(e){case"keypress":if(dr(l)===0)break t;case"keydown":case"keyup":ht=Rs;break;case"focusin":Ft="focus",ht=Is;break;case"focusout":Ft="blur",ht=Is;break;case"beforeblur":case"afterblur":ht=Is;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Pe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=bs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=C;break;case Ji:case _i:case Je:ht=oe;break;case Ls:ht=V;break;case"scroll":case"scrollend":ht=oa;break;case"wheel":ht=ct;break;case"copy":case"cut":case"paste":ht=Ns;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Se;break;case"toggle":case"beforetoggle":ht=re}var te=(i&4)!==0,on=!te&&(e==="scroll"||e==="scrollend"),J=te?at!==null?at+"Capture":null:at;te=[];for(var Z=st,rt;Z!==null;){var mt=Z;if(rt=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||rt===null||J===null||(mt=Kt(Z,J),mt!=null&&te.push(Jl(Z,mt,rt))),on)break;Z=Z.return}0<te.length&&(at=new ht(at,Ft,null,l,dt),yt.push({event:at,listeners:te}))}}if((i&7)===0){t:{if(at=e==="mouseover"||e==="pointerover",ht=e==="mouseout"||e==="pointerout",at&&l!==Cs&&(Ft=l.relatedTarget||l.fromElement)&&(fn(Ft)||Ft[pi]))break t;if((ht||at)&&(at=dt.window===dt?dt:(at=dt.ownerDocument)?at.defaultView||at.parentWindow:window,ht?(Ft=l.relatedTarget||l.toElement,ht=st,Ft=Ft?fn(Ft):null,Ft!==null&&(on=m(Ft),te=Ft.tag,Ft!==on||te!==5&&te!==27&&te!==6)&&(Ft=null)):(ht=null,Ft=st),ht!==Ft)){if(te=Pe,mt="onMouseLeave",J="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(te=Se,mt="onPointerLeave",J="onPointerEnter",Z="pointer"),on=ht==null?at:Ri(ht),rt=Ft==null?at:Ri(Ft),at=new te(mt,Z+"leave",ht,l,dt),at.target=on,at.relatedTarget=rt,mt=null,fn(dt)===st&&(te=new te(J,Z+"enter",Ft,l,dt),te.target=rt,te.relatedTarget=on,mt=te),on=mt,ht&&Ft)e:{for(te=JE,J=ht,Z=Ft,rt=0,mt=J;mt;mt=te(mt))rt++;mt=0;for(var Zt=Z;Zt;Zt=te(Zt))mt++;for(;0<rt-mt;)J=te(J),rt--;for(;0<mt-rt;)Z=te(Z),mt--;for(;rt--;){if(J===Z||Z!==null&&J===Z.alternate){te=J;break e}J=te(J),Z=te(Z)}te=null}else te=null;ht!==null&&cm(yt,at,ht,te,!1),Ft!==null&&on!==null&&cm(yt,on,Ft,te,!0)}}t:{if(at=st?Ri(st):window,ht=at.nodeName&&at.nodeName.toLowerCase(),ht==="select"||ht==="input"&&at.type==="file")var Xe=pr;else if(vl(at))if(Lu)Xe=c;else{Xe=s;var Gt=n}else ht=at.nodeName,!ht||ht.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?st&&We(st.elementType)&&(Xe=pr):Xe=a;if(Xe&&(Xe=Xe(e,st))){mr(yt,Xe,l,dt);break t}Gt&&Gt(e,at,st),e==="focusout"&&st&&at.type==="number"&&st.memoizedProps.value!=null&&U(at,"number",at.value)}switch(Gt=st?Ri(st):window,e){case"focusin":(vl(Gt)||Gt.contentEditable==="true")&&(G=Gt,Q=st,tt=null);break;case"focusout":tt=Q=G=null;break;case"mousedown":ut=!0;break;case"contextmenu":case"mouseup":case"dragend":ut=!1,vt(yt,l,dt);break;case"selectionchange":if(F)break;case"keydown":case"keyup":vt(yt,l,dt)}var de;if(Be)t:{switch(e){case"compositionstart":var De="onCompositionStart";break t;case"compositionend":De="onCompositionEnd";break t;case"compositionupdate":De="onCompositionUpdate";break t}De=void 0}else ha?Ds(e,l)&&(De="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(Br&&l.locale!=="ko"&&(ha||De!=="onCompositionStart"?De==="onCompositionEnd"&&ha&&(de=Zr()):(hr=dt,fr="value"in hr?hr.value:hr.textContent,ha=!0)),Gt=Tc(st,De),0<Gt.length&&(De=new Mr(De,e,null,l,dt),yt.push({event:De,listeners:Gt}),de?De.data=de:(de=Vr(l),de!==null&&(De.data=de)))),(de=Hi?us(e,l):Lo(e,l))&&(De=Tc(st,"onBeforeInput"),0<De.length&&(Gt=new Mr("onBeforeInput","beforeinput",null,l,dt),yt.push({event:Gt,listeners:De}),Gt.data=de)),QE(yt,e,st,l,dt)}lm(yt,i)})}function Jl(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Tc(e,i){for(var l=i+"Capture",f=[];e!==null;){var E=e,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Kt(e,l),E!=null&&f.unshift(Jl(e,E,A)),E=Kt(e,i),E!=null&&f.push(Jl(e,E,A))),e.tag===3)return f;e=e.return}return[]}function JE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cm(e,i,l,f,E){for(var A=i._reactName,b=[];l!==null&&l!==f;){var B=l,H=B.alternate,st=B.stateNode;if(B=B.tag,H!==null&&H===f)break;B!==5&&B!==26&&B!==27||st===null||(H=st,E?(st=Kt(l,A),st!=null&&b.unshift(Jl(l,st,H))):E||(st=Kt(l,A),st!=null&&b.push(Jl(l,st,H)))),l=l.return}b.length!==0&&e.push({event:i,listeners:b})}var $E=/\r\n?/g,tx=/\u0000|\uFFFD/g;function hm(e){return(typeof e=="string"?e:""+e).replace($E,`
`).replace(tx,"")}function fm(e,i){return i=hm(i),hm(e)===i}function an(e,i,l,f,E,A){switch(l){case"children":typeof f=="string"?i==="body"||i==="textarea"&&f===""||Mi(e,f):(typeof f=="number"||typeof f=="bigint")&&i!=="body"&&Mi(e,""+f);break;case"className":xi(e,"class",f);break;case"tabIndex":xi(e,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(e,l,f);break;case"style":Xt(e,f,A);break;case"data":if(i!=="object"){xi(e,"data",f);break}case"src":case"href":if(f===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(l);break}f=as(""+f),e.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(l==="formAction"?(i!=="input"&&an(e,i,"name",E.name,E,null),an(e,i,"formEncType",E.formEncType,E,null),an(e,i,"formMethod",E.formMethod,E,null),an(e,i,"formTarget",E.formTarget,E,null)):(an(e,i,"encType",E.encType,E,null),an(e,i,"method",E.method,E,null),an(e,i,"target",E.target,E,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(l);break}f=as(""+f),e.setAttribute(l,f);break;case"onClick":f!=null&&(e.onclick=Oi);break;case"onScroll":f!=null&&be("scroll",e);break;case"onScrollEnd":f!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(u(61));if(l=f.__html,l!=null){if(E.children!=null)throw Error(u(60));e.innerHTML=l}}break;case"multiple":e.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":e.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){e.removeAttribute("xlink:href");break}l=as(""+f),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(l,""+f):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":f===!0?e.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(l,f):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?e.setAttribute(l,f):e.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?e.removeAttribute(l):e.setAttribute(l,f);break;case"popover":be("beforetoggle",e),be("toggle",e),rs(e,"popover",f);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":rs(e,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=eo.get(l)||l,rs(e,l,f))}}function t1(e,i,l,f,E,A){switch(l){case"style":Xt(e,f,A);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(u(61));if(l=f.__html,l!=null){if(E.children!=null)throw Error(u(60));e.innerHTML=l}}break;case"children":typeof f=="string"?Mi(e,f):(typeof f=="number"||typeof f=="bigint")&&Mi(e,""+f);break;case"onScroll":f!=null&&be("scroll",e);break;case"onScrollEnd":f!=null&&be("scrollend",e);break;case"onClick":f!=null&&(e.onclick=Oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(E=l.endsWith("Capture"),i=l.slice(2,E?l.length-7:void 0),A=e[Fe]||null,A=A!=null?A[l]:null,typeof A=="function"&&e.removeEventListener(i,A,E),typeof f=="function")){typeof A!="function"&&A!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,f,E);break t}l in e?e[l]=f:f===!0?e.setAttribute(l,""):rs(e,l,f)}}}function Si(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var f=!1,E=!1,A;for(A in l)if(l.hasOwnProperty(A)){var b=l[A];if(b!=null)switch(A){case"src":f=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,i));default:an(e,i,A,b,l,null)}}E&&an(e,i,"srcSet",l.srcSet,l,null),f&&an(e,i,"src",l.src,l,null);return;case"input":be("invalid",e);var B=A=b=E=null,H=null,st=null;for(f in l)if(l.hasOwnProperty(f)){var dt=l[f];if(dt!=null)switch(f){case"name":E=dt;break;case"type":b=dt;break;case"checked":H=dt;break;case"defaultChecked":st=dt;break;case"value":A=dt;break;case"defaultValue":B=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(u(137,i));break;default:an(e,i,f,dt,l,null)}}it(e,A,B,H,st,b,E,!1);return;case"select":be("invalid",e),f=b=A=null;for(E in l)if(l.hasOwnProperty(E)&&(B=l[E],B!=null))switch(E){case"value":A=B;break;case"defaultValue":b=B;break;case"multiple":f=B;default:an(e,i,E,B,l,null)}i=A,l=b,e.multiple=!!f,i!=null?Ut(e,!!f,i,!1):l!=null&&Ut(e,!!f,l,!0);return;case"textarea":be("invalid",e),A=E=f=null;for(b in l)if(l.hasOwnProperty(b)&&(B=l[b],B!=null))switch(b){case"value":f=B;break;case"defaultValue":E=B;break;case"children":A=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(u(91));break;default:an(e,i,b,B,l,null)}jn(e,f,E,A);return;case"option":for(H in l)if(l.hasOwnProperty(H)&&(f=l[H],f!=null))switch(H){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:an(e,i,H,f,l,null)}return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(f=0;f<Kl.length;f++)be(Kl[f],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in l)if(l.hasOwnProperty(st)&&(f=l[st],f!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,i));default:an(e,i,st,f,l,null)}return;default:if(We(i)){for(dt in l)l.hasOwnProperty(dt)&&(f=l[dt],f!==void 0&&t1(e,i,dt,f,l,void 0));return}}for(B in l)l.hasOwnProperty(B)&&(f=l[B],f!=null&&an(e,i,B,f,l,null))}function ex(e,i,l,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,b=null,B=null,H=null,st=null,dt=null;for(ht in l){var yt=l[ht];if(l.hasOwnProperty(ht)&&yt!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":H=yt;default:f.hasOwnProperty(ht)||an(e,i,ht,null,f,yt)}}for(var at in f){var ht=f[at];if(yt=l[at],f.hasOwnProperty(at)&&(ht!=null||yt!=null))switch(at){case"type":A=ht;break;case"name":E=ht;break;case"checked":st=ht;break;case"defaultChecked":dt=ht;break;case"value":b=ht;break;case"defaultValue":B=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(u(137,i));break;default:ht!==yt&&an(e,i,at,ht,f,yt)}}Nn(e,b,B,H,st,dt,A,E);return;case"select":ht=b=B=at=null;for(A in l)if(H=l[A],l.hasOwnProperty(A)&&H!=null)switch(A){case"value":break;case"multiple":ht=H;default:f.hasOwnProperty(A)||an(e,i,A,null,f,H)}for(E in f)if(A=f[E],H=l[E],f.hasOwnProperty(E)&&(A!=null||H!=null))switch(E){case"value":at=A;break;case"defaultValue":B=A;break;case"multiple":b=A;default:A!==H&&an(e,i,E,A,f,H)}i=B,l=b,f=ht,at!=null?Ut(e,!!l,at,!1):!!f!=!!l&&(i!=null?Ut(e,!!l,i,!0):Ut(e,!!l,l?[]:"",!1));return;case"textarea":ht=at=null;for(B in l)if(E=l[B],l.hasOwnProperty(B)&&E!=null&&!f.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:an(e,i,B,null,f,E)}for(b in f)if(E=f[b],A=l[b],f.hasOwnProperty(b)&&(E!=null||A!=null))switch(b){case"value":at=E;break;case"defaultValue":ht=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(u(91));break;default:E!==A&&an(e,i,b,E,f,A)}Rn(e,at,ht);return;case"option":for(var Ft in l)if(at=l[Ft],l.hasOwnProperty(Ft)&&at!=null&&!f.hasOwnProperty(Ft))switch(Ft){case"selected":e.selected=!1;break;default:an(e,i,Ft,null,f,at)}for(H in f)if(at=f[H],ht=l[H],f.hasOwnProperty(H)&&at!==ht&&(at!=null||ht!=null))switch(H){case"selected":e.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:an(e,i,H,at,f,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var te in l)at=l[te],l.hasOwnProperty(te)&&at!=null&&!f.hasOwnProperty(te)&&an(e,i,te,null,f,at);for(st in f)if(at=f[st],ht=l[st],f.hasOwnProperty(st)&&at!==ht&&(at!=null||ht!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(u(137,i));break;default:an(e,i,st,at,f,ht)}return;default:if(We(i)){for(var on in l)at=l[on],l.hasOwnProperty(on)&&at!==void 0&&!f.hasOwnProperty(on)&&t1(e,i,on,void 0,f,at);for(dt in f)at=f[dt],ht=l[dt],!f.hasOwnProperty(dt)||at===ht||at===void 0&&ht===void 0||t1(e,i,dt,at,f,ht);return}}for(var J in l)at=l[J],l.hasOwnProperty(J)&&at!=null&&!f.hasOwnProperty(J)&&an(e,i,J,null,f,at);for(yt in f)at=f[yt],ht=l[yt],!f.hasOwnProperty(yt)||at===ht||at==null&&ht==null||an(e,i,yt,at,f,ht)}function dm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var E=l[f],A=E.transferSize,b=E.initiatorType,B=E.duration;if(A&&B&&dm(b)){for(b=0,B=E.responseEnd,f+=1;f<l.length;f++){var H=l[f],st=H.startTime;if(st>B)break;var dt=H.transferSize,yt=H.initiatorType;dt&&dm(yt)&&(H=H.responseEnd,b+=dt*(H<B?1:(B-st)/(H-st)))}if(--f,i+=8*(A+b)/(E.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var e1=null,n1=null;function Cc(e){return e.nodeType===9?e:e.ownerDocument}function gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mm(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function i1(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var r1=null;function ix(){var e=window.event;return e&&e.type==="popstate"?e===r1?!1:(r1=e,!0):(r1=null,!1)}var pm=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,sx=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(e){return ym.resolve(null).then(e).catch(ax)}:pm;function ax(e){setTimeout(function(){throw e})}function Na(e){return e==="head"}function Em(e,i){var l=i,f=0;do{var E=l.nextSibling;if(e.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"||l==="/&"){if(f===0){e.removeChild(E),al(i);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")$l(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,$l(l);for(var A=l.firstChild;A;){var b=A.nextSibling,B=A.nodeName;A[Nr]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&A.rel.toLowerCase()==="stylesheet"||l.removeChild(A),A=b}}else l==="body"&&$l(e.ownerDocument.body);l=E}while(l);al(i)}function xm(e,i){var l=e;e=0;do{var f=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=f}while(l)}function s1(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":s1(l),yi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function ox(e,i,l,f){for(;e.nodeType===1;){var E=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!f&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(f){if(!e[Nr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(A=e.getAttribute("rel"),A==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(A!==E.rel||e.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||e.getAttribute("title")!==(E.title==null?null:E.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(A=e.getAttribute("src"),(A!==(E.src==null?null:E.src)||e.getAttribute("type")!==(E.type==null?null:E.type)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&e.getAttribute("name")===A)return e}else return e;if(e=Hr(e.nextSibling),e===null)break}return null}function lx(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Hr(e.nextSibling),e===null))return null;return e}function Am(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Hr(e.nextSibling),e===null))return null;return e}function a1(e){return e.data==="$?"||e.data==="$~"}function o1(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ux(e,i){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||l.readyState!=="loading")i();else{var f=function(){i(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),e._reactRetry=f}}function Hr(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var l1=null;function _m(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(i===0)return Hr(e.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}e=e.nextSibling}return null}function wm(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return e;i--}else l!=="/$"&&l!=="/&"||i++}e=e.previousSibling}return null}function Tm(e,i,l){switch(i=Cc(l),e){case"html":if(e=i.documentElement,!e)throw Error(u(452));return e;case"head":if(e=i.head,!e)throw Error(u(453));return e;case"body":if(e=i.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function $l(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);yi(e)}var Gr=new Map,Cm=new Set;function Sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zs=pt.d;pt.d={f:cx,r:hx,D:fx,C:dx,L:gx,m:mx,X:yx,S:px,M:Ex};function cx(){var e=Zs.f(),i=pc();return e||i}function hx(e){var i=Te(e);i!==null&&i.tag===5&&i.type==="form"?zd(i):Zs.r(e)}var il=typeof document>"u"?null:document;function Sm(e,i,l){var f=il;if(f&&typeof i=="string"&&i){var E=fe(i);E='link[rel="'+e+'"][href="'+E+'"]',typeof l=="string"&&(E+='[crossorigin="'+l+'"]'),Cm.has(E)||(Cm.add(E),e={rel:e,crossOrigin:l,href:i},f.querySelector(E)===null&&(i=f.createElement("link"),Si(i,"link",e),_n(i),f.head.appendChild(i)))}}function fx(e){Zs.D(e),Sm("dns-prefetch",e,null)}function dx(e,i){Zs.C(e,i),Sm("preconnect",e,i)}function gx(e,i,l){Zs.L(e,i,l);var f=il;if(f&&e&&i){var E='link[rel="preload"][as="'+fe(i)+'"]';i==="image"&&l&&l.imageSrcSet?(E+='[imagesrcset="'+fe(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(E+='[imagesizes="'+fe(l.imageSizes)+'"]')):E+='[href="'+fe(e)+'"]';var A=E;switch(i){case"style":A=rl(e);break;case"script":A=sl(e)}Gr.has(A)||(e=L({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),Gr.set(A,e),f.querySelector(E)!==null||i==="style"&&f.querySelector(tu(A))||i==="script"&&f.querySelector(eu(A))||(i=f.createElement("link"),Si(i,"link",e),_n(i),f.head.appendChild(i)))}}function mx(e,i){Zs.m(e,i);var l=il;if(l&&e){var f=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+fe(f)+'"][href="'+fe(e)+'"]',A=E;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=sl(e)}if(!Gr.has(A)&&(e=L({rel:"modulepreload",href:e},i),Gr.set(A,e),l.querySelector(E)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(eu(A)))return}f=l.createElement("link"),Si(f,"link",e),_n(f),l.head.appendChild(f)}}}function px(e,i,l){Zs.S(e,i,l);var f=il;if(f&&e){var E=$n(f).hoistableStyles,A=rl(e);i=i||"default";var b=E.get(A);if(!b){var B={loading:0,preload:null};if(b=f.querySelector(tu(A)))B.loading=5;else{e=L({rel:"stylesheet",href:e,"data-precedence":i},l),(l=Gr.get(A))&&u1(e,l);var H=b=f.createElement("link");_n(H),Si(H,"link",e),H._p=new Promise(function(st,dt){H.onload=st,H.onerror=dt}),H.addEventListener("load",function(){B.loading|=1}),H.addEventListener("error",function(){B.loading|=2}),B.loading|=4,vc(b,i,f)}b={type:"stylesheet",instance:b,count:1,state:B},E.set(A,b)}}}function yx(e,i){Zs.X(e,i);var l=il;if(l&&e){var f=$n(l).hoistableScripts,E=sl(e),A=f.get(E);A||(A=l.querySelector(eu(E)),A||(e=L({src:e,async:!0},i),(i=Gr.get(E))&&c1(e,i),A=l.createElement("script"),_n(A),Si(A,"link",e),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},f.set(E,A))}}function Ex(e,i){Zs.M(e,i);var l=il;if(l&&e){var f=$n(l).hoistableScripts,E=sl(e),A=f.get(E);A||(A=l.querySelector(eu(E)),A||(e=L({src:e,async:!0,type:"module"},i),(i=Gr.get(E))&&c1(e,i),A=l.createElement("script"),_n(A),Si(A,"link",e),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},f.set(E,A))}}function vm(e,i,l,f){var E=(E=Nt.current)?Sc(E):null;if(!E)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=rl(l.href),l=$n(E).hoistableStyles,f=l.get(i),f||(f={type:"style",instance:null,count:0,state:null},l.set(i,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=rl(l.href);var A=$n(E).hoistableStyles,b=A.get(e);if(b||(E=E.ownerDocument||E,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(e,b),(A=E.querySelector(tu(e)))&&!A._p&&(b.instance=A,b.state.loading=5),Gr.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gr.set(e,l),A||xx(E,e,l,b.state))),i&&f===null)throw Error(u(528,""));return b}if(i&&f!==null)throw Error(u(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=sl(l),l=$n(E).hoistableScripts,f=l.get(i),f||(f={type:"script",instance:null,count:0,state:null},l.set(i,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function rl(e){return'href="'+fe(e)+'"'}function tu(e){return'link[rel="stylesheet"]['+e+"]"}function bm(e){return L({},e,{"data-precedence":e.precedence,precedence:null})}function xx(e,i,l,f){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?f.loading=1:(i=e.createElement("link"),f.preload=i,i.addEventListener("load",function(){return f.loading|=1}),i.addEventListener("error",function(){return f.loading|=2}),Si(i,"link",l),_n(i),e.head.appendChild(i))}function sl(e){return'[src="'+fe(e)+'"]'}function eu(e){return"script[async]"+e}function Im(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var f=e.querySelector('style[data-href~="'+fe(l.href)+'"]');if(f)return i.instance=f,_n(f),f;var E=L({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(e.ownerDocument||e).createElement("style"),_n(f),Si(f,"style",E),vc(f,l.precedence,e),i.instance=f;case"stylesheet":E=rl(l.href);var A=e.querySelector(tu(E));if(A)return i.state.loading|=4,i.instance=A,_n(A),A;f=bm(l),(E=Gr.get(E))&&u1(f,E),A=(e.ownerDocument||e).createElement("link"),_n(A);var b=A;return b._p=new Promise(function(B,H){b.onload=B,b.onerror=H}),Si(A,"link",f),i.state.loading|=4,vc(A,l.precedence,e),i.instance=A;case"script":return A=sl(l.src),(E=e.querySelector(eu(A)))?(i.instance=E,_n(E),E):(f=l,(E=Gr.get(A))&&(f=L({},l),c1(f,E)),e=e.ownerDocument||e,E=e.createElement("script"),_n(E),Si(E,"link",f),e.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(u(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(f=i.instance,i.state.loading|=4,vc(f,l.precedence,e));return i.instance}function vc(e,i,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=f.length?f[f.length-1]:null,A=E,b=0;b<f.length;b++){var B=f[b];if(B.dataset.precedence===i)A=B;else if(A!==E)break}A?A.parentNode.insertBefore(e,A.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function u1(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function c1(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var bc=null;function Nm(e,i,l){if(bc===null){var f=new Map,E=bc=new Map;E.set(l,f)}else E=bc,f=E.get(l),f||(f=new Map,E.set(l,f));if(f.has(e))return f;for(f.set(e,null),l=l.getElementsByTagName(e),E=0;E<l.length;E++){var A=l[E];if(!(A[Nr]||A[An]||e==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(i)||"";b=e+b;var B=f.get(b);B?B.push(A):f.set(b,[A])}}return f}function Rm(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function Ax(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Dm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _x(e,i,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var E=rl(f.href),A=i.querySelector(tu(E));if(A){i=A._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Ic.bind(e),i.then(e,e)),l.state.loading|=4,l.instance=A,_n(A);return}A=i.ownerDocument||i,f=bm(f),(E=Gr.get(E))&&u1(f,E),A=A.createElement("link"),_n(A);var b=A;b._p=new Promise(function(B,H){b.onload=B,b.onerror=H}),Si(A,"link",f),l.instance=A}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Ic.bind(e),i.addEventListener("load",l),i.addEventListener("error",l))}}var h1=0;function wx(e,i){return e.stylesheets&&e.count===0&&Rc(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var f=setTimeout(function(){if(e.stylesheets&&Rc(e,e.stylesheets),e.unsuspend){var A=e.unsuspend;e.unsuspend=null,A()}},6e4+i);0<e.imgBytes&&h1===0&&(h1=62500*nx());var E=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rc(e,e.stylesheets),e.unsuspend)){var A=e.unsuspend;e.unsuspend=null,A()}},(e.imgBytes>h1?50:800)+i);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(f),clearTimeout(E)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Nc=null;function Rc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Nc=new Map,i.forEach(Tx,e),Nc=null,Ic.call(e))}function Tx(e,i){if(!(i.state.loading&4)){var l=Nc.get(e);if(l)var f=l.get(null);else{l=new Map,Nc.set(e,l);for(var E=e.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var b=E[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),f=b)}f&&l.set(null,f)}E=i.instance,b=E.getAttribute("data-precedence"),A=l.get(b)||f,A===f&&l.set(null,E),l.set(b,E),this.count++,f=Ic.bind(this),E.addEventListener("load",f),E.addEventListener("error",f),A?A.parentNode.insertBefore(E,A.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(E,e.firstChild)),i.state.loading|=4}}var nu={$$typeof:bt,Provider:null,Consumer:null,_currentValue:Yt,_currentValue2:Yt,_threadCount:0};function Cx(e,i,l,f,E,A,b,B,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=f,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Mm(e,i,l,f,E,A,b,B,H,st,dt,yt){return e=new Cx(e,i,l,b,H,st,dt,yt,B),i=1,A===!0&&(i|=24),A=yr(3,null,null,i),e.current=A,A.stateNode=e,i=Hh(),i.refCount++,e.pooledCache=i,i.refCount++,A.memoizedState={element:f,isDehydrated:l,cache:i},qh(A),e}function Om(e){return e?(e=Vo,e):Vo}function Lm(e,i,l,f,E,A){E=Om(E),f.context===null?f.context=E:f.pendingContext=E,f=Ea(i),f.payload={element:l},A=A===void 0?null:A,A!==null&&(f.callback=A),l=xa(e,f,i),l!==null&&(ir(l,e,i),Ll(l,e,i))}function Bm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function f1(e,i){Bm(e,i),(e=e.alternate)&&Bm(e,i)}function Vm(e){if(e.tag===13||e.tag===31){var i=oo(e,67108864);i!==null&&ir(i,e,67108864),f1(e,67108864)}}function Pm(e){if(e.tag===13||e.tag===31){var i=wr();i=Bn(i);var l=oo(e,i);l!==null&&ir(l,e,i),f1(e,i)}}var Dc=!0;function Sx(e,i,l,f){var E=ot.T;ot.T=null;var A=pt.p;try{pt.p=2,d1(e,i,l,f)}finally{pt.p=A,ot.T=E}}function vx(e,i,l,f){var E=ot.T;ot.T=null;var A=pt.p;try{pt.p=8,d1(e,i,l,f)}finally{pt.p=A,ot.T=E}}function d1(e,i,l,f){if(Dc){var E=g1(f);if(E===null)$f(e,i,f,Mc,l),Um(e,f);else if(Ix(E,e,i,l,f))f.stopPropagation();else if(Um(e,f),i&4&&-1<bx.indexOf(e)){for(;E!==null;){var A=Te(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=lr(A.pendingLanes);if(b!==0){var B=A;for(B.pendingLanes|=2,B.entangledLanes|=2;b;){var H=1<<31-ne(b);B.entanglements[1]|=H,b&=~H}ds(A),(Qe&6)===0&&(gc=dn()+500,Wl(0))}}break;case 31:case 13:B=oo(A,2),B!==null&&ir(B,A,2),pc(),f1(A,2)}if(A=g1(f),A===null&&$f(e,i,f,Mc,l),A===E)break;E=A}E!==null&&f.stopPropagation()}else $f(e,i,f,null,l)}}function g1(e){return e=Zi(e),m1(e)}var Mc=null;function m1(e){if(Mc=null,e=fn(e),e!==null){var i=m(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=_(i),e!==null)return e;e=null}else if(l===31){if(e=S(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Mc=e,null}function km(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qr()){case hi:return 2;case ia:return 8;case fi:case Jn:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var p1=!1,Ra=null,Da=null,Ma=null,iu=new Map,ru=new Map,Oa=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Um(e,i){switch(e){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":iu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(i.pointerId)}}function su(e,i,l,f,E,A){return e===null||e.nativeEvent!==A?(e={blockedOn:i,domEventName:l,eventSystemFlags:f,nativeEvent:A,targetContainers:[E]},i!==null&&(i=Te(i),i!==null&&Vm(i)),e):(e.eventSystemFlags|=f,i=e.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),e)}function Ix(e,i,l,f,E){switch(i){case"focusin":return Ra=su(Ra,e,i,l,f,E),!0;case"dragenter":return Da=su(Da,e,i,l,f,E),!0;case"mouseover":return Ma=su(Ma,e,i,l,f,E),!0;case"pointerover":var A=E.pointerId;return iu.set(A,su(iu.get(A)||null,e,i,l,f,E)),!0;case"gotpointercapture":return A=E.pointerId,ru.set(A,su(ru.get(A)||null,e,i,l,f,E)),!0}return!1}function Fm(e){var i=fn(e.target);if(i!==null){var l=m(i);if(l!==null){if(i=l.tag,i===13){if(i=_(l),i!==null){e.blockedOn=i,Ot(e.priority,function(){Pm(l)});return}}else if(i===31){if(i=S(l),i!==null){e.blockedOn=i,Ot(e.priority,function(){Pm(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=g1(e.nativeEvent);if(l===null){l=e.nativeEvent;var f=new l.constructor(l.type,l);Cs=f,l.target.dispatchEvent(f),Cs=null}else return i=Te(l),i!==null&&Vm(i),e.blockedOn=l,!1;i.shift()}return!0}function zm(e,i,l){Oc(e)&&l.delete(i)}function Nx(){p1=!1,Ra!==null&&Oc(Ra)&&(Ra=null),Da!==null&&Oc(Da)&&(Da=null),Ma!==null&&Oc(Ma)&&(Ma=null),iu.forEach(zm),ru.forEach(zm)}function Lc(e,i){e.blockedOn===i&&(e.blockedOn=null,p1||(p1=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Nx)))}var Bc=null;function jm(e){Bc!==e&&(Bc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Bc===e&&(Bc=null);for(var i=0;i<e.length;i+=3){var l=e[i],f=e[i+1],E=e[i+2];if(typeof f!="function"){if(m1(f||l)===null)continue;break}var A=Te(l);A!==null&&(e.splice(i,3),i-=3,gf(A,{pending:!0,data:E,method:l.method,action:f},f,E))}}))}function al(e){function i(H){return Lc(H,e)}Ra!==null&&Lc(Ra,e),Da!==null&&Lc(Da,e),Ma!==null&&Lc(Ma,e),iu.forEach(i),ru.forEach(i);for(var l=0;l<Oa.length;l++){var f=Oa[l];f.blockedOn===e&&(f.blockedOn=null)}for(;0<Oa.length&&(l=Oa[0],l.blockedOn===null);)Fm(l),l.blockedOn===null&&Oa.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var E=l[f],A=l[f+1],b=E[Fe]||null;if(typeof A=="function")b||jm(l);else if(b){var B=null;if(A&&A.hasAttribute("formAction")){if(E=A,b=A[Fe]||null)B=b.formAction;else if(m1(E)!==null)continue}else B=b.action;typeof B=="function"?l[f+1]=B:(l.splice(f,3),f-=3),jm(l)}}}function Hm(){function e(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(b){return E=b})},focusReset:"manual",scroll:"manual"})}function i(){E!==null&&(E(),E=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,E=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),E!==null&&(E(),E=null)}}}function y1(e){this._internalRoot=e}Vc.prototype.render=y1.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(u(409));var l=i.current,f=wr();Lm(l,f,e,i,null,null)},Vc.prototype.unmount=y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Lm(e.current,2,null,e,null,null),pc(),i[pi]=null}};function Vc(e){this._internalRoot=e}Vc.prototype.unstable_scheduleHydration=function(e){if(e){var i=mi();e={blockedOn:null,target:e,priority:i};for(var l=0;l<Oa.length&&i!==0&&i<Oa[l].priority;l++);Oa.splice(l,0,e),l===0&&Fm(e)}};var Gm=t.version;if(Gm!=="19.2.3")throw Error(u(527,Gm,"19.2.3"));pt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=T(i),e=e!==null?M(e):null,e=e===null?null:e.stateNode,e};var Rx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ot,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{He=Pc.inject(Rx),Ct=Pc}catch{}}return ou.createRoot=function(e,i){if(!d(e))throw Error(u(299));var l=!1,f="",E=Kd,A=Jd,b=$d;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=Mm(e,1,!1,null,null,l,f,null,E,A,b,Hm),e[pi]=i.current,Jf(e),new y1(i)},ou.hydrateRoot=function(e,i,l){if(!d(e))throw Error(u(299));var f=!1,E="",A=Kd,b=Jd,B=$d,H=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(B=l.onRecoverableError),l.formState!==void 0&&(H=l.formState)),i=Mm(e,1,!0,i,l??null,f,E,H,A,b,B,Hm),i.context=Om(null),l=i.current,f=wr(),f=Bn(f),E=Ea(f),E.callback=null,xa(l,E,f),l=f,i.current.lanes=l,Ir(i,l),ds(i),e[pi]=i.current,Jf(e),new Vc(i)},ou.version="19.2.3",ou}var t2;function jx(){if(t2)return A1.exports;t2=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),A1.exports=zx(),A1.exports}var Hx=jx();const Gx=r0(Hx);var kt;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(kt||(kt={}));var e2=new Map([[kt.QR_CODE,"QR_CODE"],[kt.AZTEC,"AZTEC"],[kt.CODABAR,"CODABAR"],[kt.CODE_39,"CODE_39"],[kt.CODE_93,"CODE_93"],[kt.CODE_128,"CODE_128"],[kt.DATA_MATRIX,"DATA_MATRIX"],[kt.MAXICODE,"MAXICODE"],[kt.ITF,"ITF"],[kt.EAN_13,"EAN_13"],[kt.EAN_8,"EAN_8"],[kt.PDF_417,"PDF_417"],[kt.RSS_14,"RSS_14"],[kt.RSS_EXPANDED,"RSS_EXPANDED"],[kt.UPC_A,"UPC_A"],[kt.UPC_E,"UPC_E"],[kt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),n2;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(n2||(n2={}));function Yx(o){return Object.values(kt).includes(o)}var za;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(za||(za={}));var es=(function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[za.SCAN_TYPE_CAMERA,za.SCAN_TYPE_FILE],o})(),Sp=(function(){function o(t,r){this.format=t,this.formatName=r}return o.prototype.toString=function(){return this.formatName},o.create=function(t){if(!e2.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new o(t,e2.get(t))},o})(),i2=(function(){function o(){}return o.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},o.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},o})(),V1;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(V1||(V1={}));var vp=(function(){function o(){}return o.createFrom=function(t){return{errorMessage:t,type:V1.UNKWOWN_ERROR}},o})(),bp=(function(){function o(t){this.verbose=t}return o.prototype.log=function(t){this.verbose&&console.log(t)},o.prototype.warn=function(t){this.verbose&&console.warn(t)},o.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},o.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},o})();function gs(o){return typeof o>"u"||o===null}function Xx(o,t,r){return o>r?r:o<t?t:o}var hl=(function(){function o(){}return o.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},o.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o})(),nn=(function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(t){return"Last Match: ".concat(t)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o})(),r2=(function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o})(),Ip=(function(){function o(){}return o.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var u=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(d),_=Object.keys(t),S=0,I=_;S<I.length;S++){var T=I[S];if(m.has(T))return r.logError("".concat(T," is not supported videoConstaints."),!0),!1}return!0},o})(),uu={exports:{}},qx=uu.exports,s2;function Qx(){return s2||(s2=1,(function(o,t){(function(r,u){u(t)})(qx,(function(r){function u(R){return R==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,n){R.__proto__=n}||function(R,n){for(var s in n)n.hasOwnProperty(s)&&(R[s]=n[s])};function m(R,n){d(R,n);function s(){this.constructor=R}R.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function _(R,n){var s=Object.setPrototypeOf;s?s(R,n):R.__proto__=n}function S(R,n){n===void 0&&(n=R.constructor);var s=Error.captureStackTrace;s&&s(R,n)}var I=(function(R){m(n,R);function n(s){var a=this.constructor,c=R.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),_(c,a.prototype),S(c),c}return n})(Error);class T extends I{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}T.kind="Exception";class M extends T{}M.kind="ArgumentException";class L extends T{}L.kind="IllegalArgumentException";class X{constructor(n){if(this.binarizer=n,n===null)throw new L("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,s){return this.binarizer.getBlackRow(n,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,s,a,c){const h=this.binarizer.getLuminanceSource().crop(n,s,a,c);return new X(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new X(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new X(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class et extends T{static getChecksumInstance(){return new et}}et.kind="ChecksumException";class wt{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class gt{static arraycopy(n,s,a,c,h){for(;h--;)a[c++]=n[s++]}static currentTimeMillis(){return Date.now()}}class At extends T{}At.kind="IndexOutOfBoundsException";class zt extends At{constructor(n=void 0,s=void 0){super(s),this.index=n,this.message=s}}zt.kind="ArrayIndexOutOfBoundsException";class Lt{static fill(n,s){for(let a=0,c=n.length;a<c;a++)n[a]=s}static fillWithin(n,s,a,c){Lt.rangeCheck(n.length,s,a);for(let h=s;h<a;h++)n[h]=c}static rangeCheck(n,s,a){if(s>a)throw new L("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new zt(s);if(a>n)throw new zt(a)}static asList(...n){return n}static create(n,s,a){return Array.from({length:n}).map(h=>Array.from({length:s}).fill(a))}static createInt32Array(n,s,a){return Array.from({length:n}).map(h=>Int32Array.from({length:s}).fill(a))}static equals(n,s){if(!n||!s||!n.length||!s.length||n.length!==s.length)return!1;for(let a=0,c=n.length;a<c;a++)if(n[a]!==s[a])return!1;return!0}static hashCode(n){if(n===null)return 0;let s=1;for(const a of n)s=31*s+a;return s}static fillUint8Array(n,s){for(let a=0;a!==n.length;a++)n[a]=s}static copyOf(n,s){return n.slice(0,s)}static copyOfUint8Array(n,s){if(n.length<=s){const a=new Uint8Array(s);return a.set(n),a}return n.slice(0,s)}static copyOfRange(n,s,a){const c=a-s,h=new Int32Array(c);return gt.arraycopy(n,s,h,0,c),h}static binarySearch(n,s,a){a===void 0&&(a=Lt.numberComparator);let c=0,h=n.length-1;for(;c<=h;){const g=h+c>>1,y=a(s,n[g]);if(y>0)c=g+1;else if(y<0)h=g-1;else return g}return-c-1}static numberComparator(n,s){return n-s}}class bt{static numberOfTrailingZeros(n){let s;if(n===0)return 32;let a=31;return s=n<<16,s!==0&&(a-=16,n=s),s=n<<8,s!==0&&(a-=8,n=s),s=n<<4,s!==0&&(a-=4,n=s),s=n<<2,s!==0&&(a-=2,n=s),a-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let s=1;return n>>>16||(s+=16,n<<=16),n>>>24||(s+=8,n<<=8),n>>>28||(s+=4,n<<=4),n>>>30||(s+=2,n<<=2),s-=n>>>31,s}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,s){return Math.trunc(n/s)}static parseInt(n,s=void 0){return parseInt(n,s)}}bt.MIN_VALUE_32_BITS=-2147483648,bt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class jt{constructor(n,s){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,s==null?this.bits=jt.makeArray(n):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const s=jt.makeArray(n);gt.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const s=this.size;if(n>=s)return s;const a=this.bits;let c=Math.floor(n/32),h=a[c];h&=~((1<<(n&31))-1);const g=a.length;for(;h===0;){if(++c===g)return s;h=a[c]}const y=c*32+bt.numberOfTrailingZeros(h);return y>s?s:y}getNextUnset(n){const s=this.size;if(n>=s)return s;const a=this.bits;let c=Math.floor(n/32),h=~a[c];h&=~((1<<(n&31))-1);const g=a.length;for(;h===0;){if(++c===g)return s;h=~a[c]}const y=c*32+bt.numberOfTrailingZeros(h);return y>s?s:y}setBulk(n,s){this.bits[Math.floor(n/32)]=s}setRange(n,s){if(s<n||n<0||s>this.size)throw new L;if(s===n)return;s--;const a=Math.floor(n/32),c=Math.floor(s/32),h=this.bits;for(let g=a;g<=c;g++){const y=g>a?0:n&31,w=(2<<(g<c?31:s&31))-(1<<y);h[g]|=w}}clear(){const n=this.bits.length,s=this.bits;for(let a=0;a<n;a++)s[a]=0}isRange(n,s,a){if(s<n||n<0||s>this.size)throw new L;if(s===n)return!0;s--;const c=Math.floor(n/32),h=Math.floor(s/32),g=this.bits;for(let y=c;y<=h;y++){const x=y>c?0:n&31,v=(2<<(y<h?31:s&31))-(1<<x)&4294967295;if((g[y]&v)!==(a?v:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,s){if(s<0||s>32)throw new L("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((n>>a-1&1)===1)}appendBitArray(n){const s=n.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(n.get(a))}xor(n){if(this.size!==n.size)throw new L("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=n.bits[a]}toBytes(n,s,a,c){for(let h=0;h<c;h++){let g=0;for(let y=0;y<8;y++)this.get(n)&&(g|=1<<7-y),n++;s[a+h]=g}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let h=0;h<a;h++){let g=c[h];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,n[s-h]=g}if(this.size!==a*32){const h=a*32-this.size;let g=n[0]>>>h;for(let y=1;y<a;y++){const x=n[y];g|=x<<32-h,n[y-1]=g,g=x>>>h}n[a-1]=g}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof jt))return!1;const s=n;return this.size===s.size&&Lt.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Lt.hashCode(this.bits)}toString(){let n="";for(let s=0,a=this.size;s<a;s++)(s&7)===0&&(n+=" "),n+=this.get(s)?"X":".";return n}clone(){return new jt(this.size,this.bits.slice())}}var Le;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Le||(Le={}));var Ht=Le;class k extends T{static getFormatInstance(){return new k}}k.kind="FormatException";var z;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(z||(z={}));class P{constructor(n,s,a,...c){this.valueIdentifier=n,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,P.VALUE_IDENTIFIER_TO_ECI.set(n,this),P.NAME_TO_ECI.set(a,this);const h=this.values;for(let g=0,y=h.length;g!==y;g++){const x=h[g];P.VALUES_TO_ECI.set(x,this)}for(const g of c)P.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new k("incorect value");const s=P.VALUES_TO_ECI.get(n);if(s===void 0)throw new k("incorect value");return s}static getCharacterSetECIByName(n){const s=P.NAME_TO_ECI.get(n);if(s===void 0)throw new k("incorect value");return s}equals(n){if(!(n instanceof P))return!1;const s=n;return this.getName()===s.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(z.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(z.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(z.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(z.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(z.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(z.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(z.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(z.Big5,28,"Big5"),P.GB18030=new P(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(z.EUC_KR,30,"EUC_KR","EUC-KR");class K extends T{}K.kind="UnsupportedOperationException";class q{static decode(n,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(n,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(n,a):new TextDecoder(a).decode(n)}static shouldDecodeOnFallback(n){return!q.isBrowser()&&n==="ISO-8859-1"}static encode(n,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(n,a):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof P?n:P.getCharacterSetECIByName(n)}static decodeFallback(n,s){const a=this.encodingCharacterSet(s);if(q.isDecodeFallbackSupported(a)){let c="";for(let h=0,g=n.length;h<g;h++){let y=n[h].toString(16);y.length<2&&(y="0"+y),c+="%"+y}return decodeURIComponent(c)}if(a.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new K(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(P.UTF8)||n.equals(P.ISO8859_1)||n.equals(P.ASCII)}static encodeFallback(n){const a=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let h=0;h<a.length;h++)c.push(a[h].charCodeAt(0));return new Uint8Array(c)}}class Y{static castAsNonUtf8Char(n,s=null){const a=s?s.getName():this.ISO88591;return q.decode(new Uint8Array([n]),a)}static guessEncoding(n,s){if(s!=null&&s.get(Ht.CHARACTER_SET)!==void 0)return s.get(Ht.CHARACTER_SET).toString();const a=n.length;let c=!0,h=!0,g=!0,y=0,x=0,w=0,v=0,D=0,O=0,F=0,G=0,Q=0,tt=0,ut=0;const vt=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let St=0;St<a&&(c||h||g);St++){const _t=n[St]&255;g&&(y>0?(_t&128)===0?g=!1:y--:(_t&128)!==0&&((_t&64)===0?g=!1:(y++,(_t&32)===0?x++:(y++,(_t&16)===0?w++:(y++,(_t&8)===0?v++:g=!1))))),c&&(_t>127&&_t<160?c=!1:_t>159&&(_t<192||_t===215||_t===247)&&ut++),h&&(D>0?_t<64||_t===127||_t>252?h=!1:D--:_t===128||_t===160||_t>239?h=!1:_t>160&&_t<224?(O++,G=0,F++,F>Q&&(Q=F)):_t>127?(D++,F=0,G++,G>tt&&(tt=G)):(F=0,G=0))}return g&&y>0&&(g=!1),h&&D>0&&(h=!1),g&&(vt||x+w+v>0)?Y.UTF8:h&&(Y.ASSUME_SHIFT_JIS||Q>=3||tt>=3)?Y.SHIFT_JIS:c&&h?Q===2&&O===2||ut*10>=a?Y.SHIFT_JIS:Y.ISO88591:c?Y.ISO88591:h?Y.SHIFT_JIS:g?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(n,...s){let a=-1;function c(g,y,x,w,v,D){if(g==="%%")return"%";if(s[++a]===void 0)return;g=w?parseInt(w.substr(1)):void 0;let O=v?parseInt(v.substr(1)):void 0,F;switch(D){case"s":F=s[a];break;case"c":F=s[a][0];break;case"f":F=parseFloat(s[a]).toFixed(g);break;case"p":F=parseFloat(s[a]).toPrecision(g);break;case"e":F=parseFloat(s[a]).toExponential(g);break;case"x":F=parseInt(s[a]).toString(O||16);break;case"d":F=parseFloat(parseInt(s[a],O||10).toPrecision(g)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(O);let G=parseInt(x),Q=x&&x[0]+""=="0"?"0":" ";for(;F.length<G;)F=y!==void 0?F+Q:Q+F;return F}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}static getBytes(n,s){return q.encode(n,s)}static getCharCode(n,s=0){return n.charCodeAt(s)}static getCharAt(n){return String.fromCharCode(n)}}Y.SHIFT_JIS=P.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=P.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=P.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class j{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,s,a){for(let c=s;s<s+a;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+1)}substring(n,s){return this.value.substring(n,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+s.length)}}class Pt{constructor(n,s,a,c){if(this.width=n,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=n),this.height=s,n<1||s<1)throw new L("Both dimensions must be greater than 0");a==null&&(a=Math.floor((n+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const s=n.length,a=n[0].length,c=new Pt(a,s);for(let h=0;h<s;h++){const g=n[h];for(let y=0;y<a;y++)g[y]&&c.set(y,h)}return c}static parseFromString(n,s,a){if(n===null)throw new L("stringRepresentation cannot be null");const c=new Array(n.length);let h=0,g=0,y=-1,x=0,w=0;for(;w<n.length;)if(n.charAt(w)===`
`||n.charAt(w)==="\r"){if(h>g){if(y===-1)y=h-g;else if(h-g!==y)throw new L("row lengths do not match");g=h,x++}w++}else if(n.substring(w,w+s.length)===s)w+=s.length,c[h]=!0,h++;else if(n.substring(w,w+a.length)===a)w+=a.length,c[h]=!1,h++;else throw new L("illegal character encountered: "+n.substring(w));if(h>g){if(y===-1)y=h-g;else if(h-g!==y)throw new L("row lengths do not match");x++}const v=new Pt(y,x);for(let D=0;D<h;D++)c[D]&&v.set(Math.floor(D%y),Math.floor(D/y));return v}get(n,s){const a=s*this.rowSize+Math.floor(n/32);return(this.bits[a]>>>(n&31)&1)!==0}set(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]|=1<<(n&31)&4294967295}unset(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]&=~(1<<(n&31)&4294967295)}flip(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new L("input matrix dimensions do not match");const s=new jt(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let h=0,g=this.height;h<g;h++){const y=h*a,x=n.getRow(h,s).getBitArray();for(let w=0;w<a;w++)c[y+w]^=x[w]}}clear(){const n=this.bits,s=n.length;for(let a=0;a<s;a++)n[a]=0}setRegion(n,s,a,c){if(s<0||n<0)throw new L("Left and top must be nonnegative");if(c<1||a<1)throw new L("Height and width must be at least 1");const h=n+a,g=s+c;if(g>this.height||h>this.width)throw new L("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let w=s;w<g;w++){const v=w*y;for(let D=n;D<h;D++)x[v+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(n,s){s==null||s.getSize()<this.width?s=new jt(this.width):s.clear();const a=this.rowSize,c=this.bits,h=n*a;for(let g=0;g<a;g++)s.setBulk(g*32,c[h+g]);return s}setRow(n,s){gt.arraycopy(s.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),s=this.getHeight();let a=new jt(n),c=new jt(n);for(let h=0,g=Math.floor((s+1)/2);h<g;h++)a=this.getRow(h,a),c=this.getRow(s-1-h,c),a.reverse(),c.reverse(),this.setRow(h,c),this.setRow(s-1-h,a)}getEnclosingRectangle(){const n=this.width,s=this.height,a=this.rowSize,c=this.bits;let h=n,g=s,y=-1,x=-1;for(let w=0;w<s;w++)for(let v=0;v<a;v++){const D=c[w*a+v];if(D!==0){if(w<g&&(g=w),w>x&&(x=w),v*32<h){let O=0;for(;(D<<31-O&4294967295)===0;)O++;v*32+O<h&&(h=v*32+O)}if(v*32+31>y){let O=31;for(;!(D>>>O);)O--;v*32+O>y&&(y=v*32+O)}}}return y<h||x<g?null:Int32Array.from([h,g,y-h+1,x-g+1])}getTopLeftOnBit(){const n=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/n;let h=a%n*32;const g=s[a];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return h+=y,Int32Array.from([h,c])}getBottomRightOnBit(){const n=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/n);let h=Math.floor(a%n)*32;const g=s[a];let y=31;for(;!(g>>>y);)y--;return h+=y,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Pt))return!1;const s=n;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Lt.equals(this.bits,s.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+Lt.hashCode(this.bits),n}toString(n="X ",s="  ",a=`
`){return this.buildToString(n,s,a)}buildToString(n,s,a){let c=new j;for(let h=0,g=this.height;h<g;h++){for(let y=0,x=this.width;y<x;y++)c.append(this.get(y,h)?n:s);c.append(a)}return c.toString()}clone(){return new Pt(this.width,this.height,this.rowSize,this.bits.slice())}}class nt extends T{static getNotFoundInstance(){return new nt}}nt.kind="NotFoundException";class ot extends wt{constructor(n){super(n),this.luminances=ot.EMPTY,this.buckets=new Int32Array(ot.LUMINANCE_BUCKETS)}getBlackRow(n,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new jt(c):s.clear(),this.initArrays(c);const h=a.getRow(n,this.luminances),g=this.buckets;for(let x=0;x<c;x++)g[(h[x]&255)>>ot.LUMINANCE_SHIFT]++;const y=ot.estimateBlackPoint(g);if(c<3)for(let x=0;x<c;x++)(h[x]&255)<y&&s.set(x);else{let x=h[0]&255,w=h[1]&255;for(let v=1;v<c-1;v++){const D=h[v+1]&255;(w*4-x-D)/2<y&&s.set(v),x=w,w=D}}return s}getBlackMatrix(){const n=this.getLuminanceSource(),s=n.getWidth(),a=n.getHeight(),c=new Pt(s,a);this.initArrays(s);const h=this.buckets;for(let x=1;x<5;x++){const w=Math.floor(a*x/5),v=n.getRow(w,this.luminances),D=Math.floor(s*4/5);for(let O=Math.floor(s/5);O<D;O++){const F=v[O]&255;h[F>>ot.LUMINANCE_SHIFT]++}}const g=ot.estimateBlackPoint(h),y=n.getMatrix();for(let x=0;x<a;x++){const w=x*s;for(let v=0;v<s;v++)(y[w+v]&255)<g&&c.set(v,x)}return c}createBinarizer(n){return new ot(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const s=this.buckets;for(let a=0;a<ot.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(n){const s=n.length;let a=0,c=0,h=0;for(let v=0;v<s;v++)n[v]>h&&(c=v,h=n[v]),n[v]>a&&(a=n[v]);let g=0,y=0;for(let v=0;v<s;v++){const D=v-c,O=n[v]*D*D;O>y&&(g=v,y=O)}if(c>g){const v=c;c=g,g=v}if(g-c<=s/16)throw new nt;let x=g-1,w=-1;for(let v=g-1;v>c;v--){const D=v-c,O=D*D*(g-v)*(a-n[v]);O>w&&(x=v,w=O)}return x<<ot.LUMINANCE_SHIFT}}ot.LUMINANCE_BITS=5,ot.LUMINANCE_SHIFT=8-ot.LUMINANCE_BITS,ot.LUMINANCE_BUCKETS=1<<ot.LUMINANCE_BITS,ot.EMPTY=Uint8ClampedArray.from([0]);class pt extends ot{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),s=n.getWidth(),a=n.getHeight();if(s>=pt.MINIMUM_DIMENSION&&a>=pt.MINIMUM_DIMENSION){const c=n.getMatrix();let h=s>>pt.BLOCK_SIZE_POWER;(s&pt.BLOCK_SIZE_MASK)!==0&&h++;let g=a>>pt.BLOCK_SIZE_POWER;(a&pt.BLOCK_SIZE_MASK)!==0&&g++;const y=pt.calculateBlackPoints(c,h,g,s,a),x=new Pt(s,a);pt.calculateThresholdForBlock(c,h,g,s,a,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new pt(n)}static calculateThresholdForBlock(n,s,a,c,h,g,y){const x=h-pt.BLOCK_SIZE,w=c-pt.BLOCK_SIZE;for(let v=0;v<a;v++){let D=v<<pt.BLOCK_SIZE_POWER;D>x&&(D=x);const O=pt.cap(v,2,a-3);for(let F=0;F<s;F++){let G=F<<pt.BLOCK_SIZE_POWER;G>w&&(G=w);const Q=pt.cap(F,2,s-3);let tt=0;for(let vt=-2;vt<=2;vt++){const St=g[O+vt];tt+=St[Q-2]+St[Q-1]+St[Q]+St[Q+1]+St[Q+2]}const ut=tt/25;pt.thresholdBlock(n,G,D,ut,c,y)}}}static cap(n,s,a){return n<s?s:n>a?a:n}static thresholdBlock(n,s,a,c,h,g){for(let y=0,x=a*h+s;y<pt.BLOCK_SIZE;y++,x+=h)for(let w=0;w<pt.BLOCK_SIZE;w++)(n[x+w]&255)<=c&&g.set(s+w,a+y)}static calculateBlackPoints(n,s,a,c,h){const g=h-pt.BLOCK_SIZE,y=c-pt.BLOCK_SIZE,x=new Array(a);for(let w=0;w<a;w++){x[w]=new Int32Array(s);let v=w<<pt.BLOCK_SIZE_POWER;v>g&&(v=g);for(let D=0;D<s;D++){let O=D<<pt.BLOCK_SIZE_POWER;O>y&&(O=y);let F=0,G=255,Q=0;for(let ut=0,vt=v*c+O;ut<pt.BLOCK_SIZE;ut++,vt+=c){for(let St=0;St<pt.BLOCK_SIZE;St++){const _t=n[vt+St]&255;F+=_t,_t<G&&(G=_t),_t>Q&&(Q=_t)}if(Q-G>pt.MIN_DYNAMIC_RANGE)for(ut++,vt+=c;ut<pt.BLOCK_SIZE;ut++,vt+=c)for(let St=0;St<pt.BLOCK_SIZE;St++)F+=n[vt+St]&255}let tt=F>>pt.BLOCK_SIZE_POWER*2;if(Q-G<=pt.MIN_DYNAMIC_RANGE&&(tt=G/2,w>0&&D>0)){const ut=(x[w-1][D]+2*x[w][D-1]+x[w-1][D-1])/4;G<ut&&(tt=ut)}x[w][D]=tt}}return x}}pt.BLOCK_SIZE_POWER=3,pt.BLOCK_SIZE=1<<pt.BLOCK_SIZE_POWER,pt.BLOCK_SIZE_MASK=pt.BLOCK_SIZE-1,pt.MINIMUM_DIMENSION=pt.BLOCK_SIZE*5,pt.MIN_DYNAMIC_RANGE=24;class Yt{constructor(n,s){this.width=n,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,s,a,c){throw new K("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new K("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new K("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let s=new j;for(let a=0;a<this.height;a++){const c=this.getRow(a,n);for(let h=0;h<this.width;h++){const g=c[h]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class ce extends Yt{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,s){const a=this.delegate.getRow(n,s),c=this.getWidth();for(let h=0;h<c;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(n[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(n,s,a,c){return new ce(this.delegate.crop(n,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ce(this.delegate.rotateCounterClockwise45())}}class ye extends Yt{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const s=n.getContext("2d").getImageData(0,0,n.width,n.height);return ye.toGrayscaleBuffer(s.data,n.width,n.height)}static toGrayscaleBuffer(n,s,a){const c=new Uint8ClampedArray(s*a);for(let h=0,g=0,y=n.length;h<y;h+=4,g++){let x;if(n[h+3]===0)x=255;else{const v=n[h],D=n[h+1],O=n[h+2];x=306*v+601*D+117*O+512>>10}c[g]=x}return c}getRow(n,s){if(n<0||n>=this.getHeight())throw new L("Requested row is outside the image: "+n);const a=this.getWidth(),c=n*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,s,a,c){return super.crop(n,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=n*ye.DEGREE_TO_RADIANS,h=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*g),x=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*g);return s.width=y,s.height=x,a.translate(y/2,x/2),a.rotate(c),a.drawImage(this.canvas,h/-2,g/-2),this.buffer=ye.makeBufferFromCanvasImageData(s),this}invert(){return new ce(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class W{constructor(n,s,a){this.deviceId=n,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ft=(globalThis||kc||self||window||void 0)&&(globalThis||kc||self||window||void 0).__awaiter||function(R,n,s,a){function c(h){return h instanceof s?h:new s(function(g){g(h)})}return new(s||(s=Promise))(function(h,g){function y(v){try{w(a.next(v))}catch(D){g(D)}}function x(v){try{w(a.throw(v))}catch(D){g(D)}}function w(v){v.done?h(v.value):c(v.value).then(y,x)}w((a=a.apply(R,n||[])).next())})};class Dt{constructor(n,s=500,a){this.reader=n,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ft(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of n){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const h=a.deviceId||a.id,g=a.label||`Video device ${s.length+1}`,y=a.groupId,x={deviceId:h,label:g,kind:c,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return ft(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new W(s.deviceId,s.label))})}findDeviceById(n){return ft(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===n):null})}decodeFromInputVideoDevice(n,s){return ft(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,s)})}decodeOnceFromVideoDevice(n,s){return ft(this,void 0,void 0,function*(){this.reset();let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(n,s){return ft(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(n,s){return ft(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(n,s,a){return ft(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,s,a)})}decodeFromVideoDevice(n,s,a){return ft(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,s,a)})}decodeFromConstraints(n,s,a){return ft(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(n,s,a){return ft(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,s){return ft(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,n),this.videoElement=a,this.stream=n,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(n){return new Promise((s,a)=>this.playVideoOnLoad(n,()=>s()))}playVideoOnLoad(n,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",s),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ft(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,s){const a=document.getElementById(n);if(!a)throw new M(`element with id '${n}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new M(`element with id '${n}' must be an ${s} element`);return a}decodeFromImage(n,s){if(!n&&!s)throw new M("either imageElement with a src set or an url must be provided");return s&&!n?this.decodeFromImageUrl(s):this.decodeFromImageElement(n)}decodeFromVideo(n,s){if(!n&&!s)throw new M("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,s,a){if(n===void 0&&s===void 0)throw new M("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(n,a)}decodeFromImageElement(n){if(!n)throw new M("An image element must be provided.");this.reset();const s=this.prepareImageElement(n);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(n){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(n,s){const a=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(n){if(!n)throw new M("A video element must be provided.");this.reset();const s=this.prepareVideoElement(n);return this.videoElement=s,s}decodeFromImageUrl(n){if(!n)throw new M("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=n,a}decodeFromVideoUrl(n){if(!n)throw new M("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=n,a}decodeFromVideoUrlContinuously(n,s){if(!n)throw new M("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=n,c}_decodeOnLoadImage(n){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(s,a),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ft(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,s){return ft(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,s)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let s;return typeof n>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(s=n),s}prepareVideoElement(n){let s;return!n&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(s=n),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(n,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(h,g)=>{if(this._stopAsyncDecode){g(new nt("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(n);h(y)}catch(y){const x=s&&y instanceof nt,v=(y instanceof et||y instanceof k)&&a;if(x||v)return setTimeout(c,this._timeBetweenDecodingAttempts,h,g);g(y)}};return new Promise((h,g)=>c(h,g))}decodeContinuously(n,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const h=c instanceof et||c instanceof k,g=c instanceof nt;(h||g)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(n){const s=this.createBinaryBitmap(n);return this.decodeBitmap(s)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,s,a){s||(s={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(n,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const s=this.getCaptureCanvas(n),a=new ye(s),c=new pt(a);return new X(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const s=this.createCaptureCanvas(n);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(a=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(a=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,s){try{n.srcObject=s}catch{n.src=URL.createObjectURL(s)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Mt{constructor(n,s,a=s==null?0:8*s.length,c,h,g=gt.currentTimeMillis()){this.text=n,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=h,this.timestamp=g,this.text=n,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=h,this.resultMetadata=null,g==null?this.timestamp=gt.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,s)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const s=this.resultPoints;if(s===null)this.resultPoints=n;else if(n!==null&&n.length>0){const a=new Array(s.length+n.length);gt.arraycopy(s,0,a,0,s.length),gt.arraycopy(n,0,a,s.length,n.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ee;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ee||(ee={}));var Nt=ee,Ee;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var xe=Ee;class Ze{constructor(n,s,a,c,h=-1,g=-1){this.rawBytes=n,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=g,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class sr{exp(n){return this.expTable[n]}log(n){if(n===0)throw new L;return this.logTable[n]}static addOrSubtract(n,s){return n^s}}class Fn{constructor(n,s){if(s.length===0)throw new L;this.field=n;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),gt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(n===1){a=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];a=sr.addOrSubtract(a,x)}return a}a=s[0];const c=s.length,h=this.field;for(let g=1;g<c;g++)a=sr.addOrSubtract(h.multiply(n,a),s[g]);return a}addOrSubtract(n){if(!this.field.equals(n.field))throw new L("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,a=n.coefficients;if(s.length>a.length){const g=s;s=a,a=g}let c=new Int32Array(a.length);const h=a.length-s.length;gt.arraycopy(a,0,c,0,h);for(let g=h;g<a.length;g++)c[g]=sr.addOrSubtract(s[g-h],a[g]);return new Fn(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new L("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=n.coefficients,h=c.length,g=new Int32Array(a+h-1),y=this.field;for(let x=0;x<a;x++){const w=s[x];for(let v=0;v<h;v++)g[x+v]=sr.addOrSubtract(g[x+v],y.multiply(w,c[v]))}return new Fn(y,g)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),h=this.coefficients;for(let g=0;g<s;g++)c[g]=a.multiply(h[g],n);return new Fn(a,c)}multiplyByMonomial(n,s){if(n<0)throw new L;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,h=new Int32Array(c+n),g=this.field;for(let y=0;y<c;y++)h[y]=g.multiply(a[y],s);return new Fn(g,h)}divide(n){if(!this.field.equals(n.field))throw new L("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new L("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const h=n.getCoefficient(n.getDegree()),g=s.inverse(h);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const y=c.getDegree()-n.getDegree(),x=s.multiply(c.getCoefficient(c.getDegree()),g),w=n.multiplyByMonomial(y,x),v=s.buildMonomial(y,x);a=a.addOrSubtract(v),c=c.addOrSubtract(w)}return[a,c]}toString(){let n="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(n+=" - ",a=-a):n.length>0&&(n+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}s!==0&&(s===1?n+="x":(n+="x^",n+=s))}}return n}}class Xr extends T{}Xr.kind="ArithmeticException";class Ae extends sr{constructor(n,s,a){super(),this.primitive=n,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let h=1;for(let y=0;y<s;y++)c[y]=h,h*=2,h>=s&&(h^=n,h&=s-1);this.expTable=c;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[c[y]]=y;this.logTable=g,this.zero=new Fn(this,Int32Array.from([0])),this.one=new Fn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new L;if(s===0)return this.zero;const a=new Int32Array(n+1);return a[0]=s,new Fn(this,a)}inverse(n){if(n===0)throw new Xr;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+bt.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class ci extends T{}ci.kind="ReedSolomonException";class Ni extends T{}Ni.kind="IllegalStateException";class ar{constructor(n){this.field=n}decode(n,s){const a=this.field,c=new Fn(a,n),h=new Int32Array(s);let g=!0;for(let F=0;F<s;F++){const G=c.evaluateAt(a.exp(F+a.getGeneratorBase()));h[h.length-1-F]=G,G!==0&&(g=!1)}if(g)return;const y=new Fn(a,h),x=this.runEuclideanAlgorithm(a.buildMonomial(s,1),y,s),w=x[0],v=x[1],D=this.findErrorLocations(w),O=this.findErrorMagnitudes(v,D);for(let F=0;F<D.length;F++){const G=n.length-1-a.log(D[F]);if(G<0)throw new ci("Bad error location");n[G]=Ae.addOrSubtract(n[G],O[F])}}runEuclideanAlgorithm(n,s,a){if(n.getDegree()<s.getDegree()){const F=n;n=s,s=F}const c=this.field;let h=n,g=s,y=c.getZero(),x=c.getOne();for(;g.getDegree()>=(a/2|0);){let F=h,G=y;if(h=g,y=x,h.isZero())throw new ci("r_{i-1} was zero");g=F;let Q=c.getZero();const tt=h.getCoefficient(h.getDegree()),ut=c.inverse(tt);for(;g.getDegree()>=h.getDegree()&&!g.isZero();){const vt=g.getDegree()-h.getDegree(),St=c.multiply(g.getCoefficient(g.getDegree()),ut);Q=Q.addOrSubtract(c.buildMonomial(vt,St)),g=g.addOrSubtract(h.multiplyByMonomial(vt,St))}if(x=Q.multiply(y).addOrSubtract(G),g.getDegree()>=h.getDegree())throw new Ni("Division algorithm failed to reduce polynomial?")}const w=x.getCoefficient(0);if(w===0)throw new ci("sigmaTilde(0) was zero");const v=c.inverse(w),D=x.multiplyScalar(v),O=g.multiplyScalar(v);return[D,O]}findErrorLocations(n){const s=n.getDegree();if(s===1)return Int32Array.from([n.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const h=this.field;for(let g=1;g<h.getSize()&&c<s;g++)n.evaluateAt(g)===0&&(a[c]=h.inverse(g),c++);if(c!==s)throw new ci("Error locator degree does not match number of roots");return a}findErrorMagnitudes(n,s){const a=s.length,c=new Int32Array(a),h=this.field;for(let g=0;g<a;g++){const y=h.inverse(s[g]);let x=1;for(let w=0;w<a;w++)if(g!==w){const v=h.multiply(s[w],y),D=(v&1)===0?v|1:v&-2;x=h.multiply(x,D)}c[g]=h.multiply(n.evaluateAt(y),h.inverse(x)),h.getGeneratorBase()!==0&&(c[g]=h.multiply(c[g],y))}return c}}var bn;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(bn||(bn={}));class je{decode(n){this.ddata=n;let s=n.getBits(),a=this.extractBits(s),c=this.correctBits(a),h=je.convertBoolArrayToByteArray(c),g=je.getEncodedData(c),y=new Ze(h,g,null,null);return y.setNumBits(c.length),y}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let s=n.length,a=bn.UPPER,c=bn.UPPER,h="",g=0;for(;g<s;)if(c===bn.BINARY){if(s-g<5)break;let y=je.readCode(n,g,5);if(g+=5,y===0){if(s-g<11)break;y=je.readCode(n,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const w=je.readCode(n,g,8);h+=Y.castAsNonUtf8Char(w),g+=8}c=a}else{let y=c===bn.DIGIT?4:5;if(s-g<y)break;let x=je.readCode(n,g,y);g+=y;let w=je.getCharacter(c,x);w.startsWith("CTRL_")?(a=c,c=je.getTable(w.charAt(5)),w.charAt(6)==="L"&&(a=c)):(h+=w,c=a)}return h}static getTable(n){switch(n){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;case"U":default:return bn.UPPER}}static getCharacter(n,s){switch(n){case bn.UPPER:return je.UPPER_TABLE[s];case bn.LOWER:return je.LOWER_TABLE[s];case bn.MIXED:return je.MIXED_TABLE[s];case bn.PUNCT:return je.PUNCT_TABLE[s];case bn.DIGIT:return je.DIGIT_TABLE[s];default:throw new Ni("Bad table")}}correctBits(n){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Ae.AZTEC_DATA_10):(a=12,s=Ae.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=n.length/a;if(h<c)throw new k;let g=n.length%a,y=new Int32Array(h);for(let O=0;O<h;O++,g+=a)y[O]=je.readCode(n,g,a);try{new ar(s).decode(y,h-c)}catch(O){throw new k(O)}let x=(1<<a)-1,w=0;for(let O=0;O<c;O++){let F=y[O];if(F===0||F===x)throw new k;(F===1||F===x-1)&&w++}let v=new Array(c*a-w),D=0;for(let O=0;O<c;O++){let F=y[O];if(F===1||F===x-1)v.fill(F>1,D,D+a-1),D+=a-1;else for(let G=a-1;G>=0;--G)v[D++]=(F&1<<G)!==0}return v}extractBits(n){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,h=new Int32Array(c),g=new Array(this.totalBitsInLayer(a,s));if(s)for(let y=0;y<h.length;y++)h[y]=y;else{let y=c+1+2*bt.truncDivision(bt.truncDivision(c,2)-1,15),x=c/2,w=bt.truncDivision(y,2);for(let v=0;v<x;v++){let D=v+bt.truncDivision(v,15);h[x-v-1]=w-D-1,h[x+v]=w+D+1}}for(let y=0,x=0;y<a;y++){let w=(a-y)*4+(s?9:12),v=y*2,D=c-1-v;for(let O=0;O<w;O++){let F=O*2;for(let G=0;G<2;G++)g[x+F+G]=n.get(h[v+G],h[v+O]),g[x+2*w+F+G]=n.get(h[v+O],h[D-G]),g[x+4*w+F+G]=n.get(h[D-G],h[D-O]),g[x+6*w+F+G]=n.get(h[D-O],h[v+G])}x+=w*8}return g}static readCode(n,s,a){let c=0;for(let h=s;h<s+a;h++)c<<=1,n[h]&&(c|=1);return c}static readByte(n,s){let a=n.length-s;return a>=8?je.readCode(n,s,8):je.readCode(n,s,a)<<8-a}static convertBoolArrayToByteArray(n){let s=new Uint8Array((n.length+7)/8);for(let a=0;a<s.length;a++)s[a]=je.readByte(n,8*a);return s}totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Wt{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,s,a,c){const h=n-a,g=s-c;return Math.sqrt(h*h+g*g)}static sum(n){let s=0;for(let a=0,c=n.length;a!==c;a++){const h=n[a];s+=h}return s}}class xn{static floatToIntBits(n){return n}}xn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Bt{constructor(n,s){this.x=n,this.y=s}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Bt){const s=n;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*xn.floatToIntBits(this.x)+xn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const s=this.distance(n[0],n[1]),a=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let h,g,y;if(a>=s&&a>=c?(g=n[0],h=n[1],y=n[2]):c>=a&&c>=s?(g=n[1],h=n[0],y=n[2]):(g=n[2],h=n[0],y=n[1]),this.crossProductZ(h,g,y)<0){const x=h;h=y,y=x}n[0]=h,n[1]=g,n[2]=y}static distance(n,s){return Wt.distance(n.x,n.y,s.x,s.y)}static crossProductZ(n,s,a){const c=s.x,h=s.y;return(a.x-c)*(n.y-h)-(a.y-h)*(n.x-c)}}class na{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Za extends na{constructor(n,s,a,c,h){super(n,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dn{constructor(n,s,a,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),s==null&&(s=dn.INIT_SIZE),a==null&&(a=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const h=s/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new nt}detect(){let n=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,h=!1,g=!0,y=!1,x=!1,w=!1,v=!1,D=!1;const O=this.width,F=this.height;for(;g;){g=!1;let G=!0;for(;(G||!x)&&s<O;)G=this.containsBlackPoint(a,c,s,!1),G?(s++,g=!0,x=!0):x||s++;if(s>=O){h=!0;break}let Q=!0;for(;(Q||!w)&&c<F;)Q=this.containsBlackPoint(n,s,c,!0),Q?(c++,g=!0,w=!0):w||c++;if(c>=F){h=!0;break}let tt=!0;for(;(tt||!v)&&n>=0;)tt=this.containsBlackPoint(a,c,n,!1),tt?(n--,g=!0,v=!0):v||n--;if(n<0){h=!0;break}let ut=!0;for(;(ut||!D)&&a>=0;)ut=this.containsBlackPoint(n,s,a,!0),ut?(a--,g=!0,D=!0):D||a--;if(a<0){h=!0;break}g&&(y=!0)}if(!h&&y){const G=s-n;let Q=null;for(let St=1;Q===null&&St<G;St++)Q=this.getBlackPointOnSegment(n,c-St,n+St,c);if(Q==null)throw new nt;let tt=null;for(let St=1;tt===null&&St<G;St++)tt=this.getBlackPointOnSegment(n,a+St,n+St,a);if(tt==null)throw new nt;let ut=null;for(let St=1;ut===null&&St<G;St++)ut=this.getBlackPointOnSegment(s,a+St,s-St,a);if(ut==null)throw new nt;let vt=null;for(let St=1;vt===null&&St<G;St++)vt=this.getBlackPointOnSegment(s,c-St,s-St,c);if(vt==null)throw new nt;return this.centerEdges(vt,Q,ut,tt)}else throw new nt}getBlackPointOnSegment(n,s,a,c){const h=Wt.round(Wt.distance(n,s,a,c)),g=(a-n)/h,y=(c-s)/h,x=this.image;for(let w=0;w<h;w++){const v=Wt.round(n+w*g),D=Wt.round(s+w*y);if(x.get(v,D))return new Bt(v,D)}return null}centerEdges(n,s,a,c){const h=n.getX(),g=n.getY(),y=s.getX(),x=s.getY(),w=a.getX(),v=a.getY(),D=c.getX(),O=c.getY(),F=dn.CORR;return h<this.width/2?[new Bt(D-F,O+F),new Bt(y+F,x+F),new Bt(w-F,v-F),new Bt(h+F,g-F)]:[new Bt(D+F,O+F),new Bt(y+F,x-F),new Bt(w-F,v+F),new Bt(h-F,g-F)]}containsBlackPoint(n,s,a,c){const h=this.image;if(c){for(let g=n;g<=s;g++)if(h.get(g,a))return!0}else for(let g=n;g<=s;g++)if(h.get(a,g))return!0;return!1}}dn.INIT_SIZE=10,dn.CORR=1;class qr{static checkAndNudgePoints(n,s){const a=n.getWidth(),c=n.getHeight();let h=!0;for(let g=0;g<s.length&&h;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>a||x<-1||x>c)throw new nt;h=!1,y===-1?(s[g]=0,h=!0):y===a&&(s[g]=a-1,h=!0),x===-1?(s[g+1]=0,h=!0):x===c&&(s[g+1]=c-1,h=!0)}h=!0;for(let g=s.length-2;g>=0&&h;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>a||x<-1||x>c)throw new nt;h=!1,y===-1?(s[g]=0,h=!0):y===a&&(s[g]=a-1,h=!0),x===-1?(s[g+1]=0,h=!0):x===c&&(s[g+1]=c-1,h=!0)}}}class hi{constructor(n,s,a,c,h,g,y,x,w){this.a11=n,this.a21=s,this.a31=a,this.a12=c,this.a22=h,this.a32=g,this.a13=y,this.a23=x,this.a33=w}static quadrilateralToQuadrilateral(n,s,a,c,h,g,y,x,w,v,D,O,F,G,Q,tt){const ut=hi.quadrilateralToSquare(n,s,a,c,h,g,y,x);return hi.squareToQuadrilateral(w,v,D,O,F,G,Q,tt).times(ut)}transformPoints(n){const s=n.length,a=this.a11,c=this.a12,h=this.a13,g=this.a21,y=this.a22,x=this.a23,w=this.a31,v=this.a32,D=this.a33;for(let O=0;O<s;O+=2){const F=n[O],G=n[O+1],Q=h*F+x*G+D;n[O]=(a*F+g*G+w)/Q,n[O+1]=(c*F+y*G+v)/Q}}transformPointsWithValues(n,s){const a=this.a11,c=this.a12,h=this.a13,g=this.a21,y=this.a22,x=this.a23,w=this.a31,v=this.a32,D=this.a33,O=n.length;for(let F=0;F<O;F++){const G=n[F],Q=s[F],tt=h*G+x*Q+D;n[F]=(a*G+g*Q+w)/tt,s[F]=(c*G+y*Q+v)/tt}}static squareToQuadrilateral(n,s,a,c,h,g,y,x){const w=n-a+h-y,v=s-c+g-x;if(w===0&&v===0)return new hi(a-n,h-a,n,c-s,g-c,s,0,0,1);{const D=a-h,O=y-h,F=c-g,G=x-g,Q=D*G-O*F,tt=(w*G-O*v)/Q,ut=(D*v-w*F)/Q;return new hi(a-n+tt*a,y-n+ut*y,n,c-s+tt*c,x-s+ut*x,s,tt,ut,1)}}static quadrilateralToSquare(n,s,a,c,h,g,y,x){return hi.squareToQuadrilateral(n,s,a,c,h,g,y,x).buildAdjoint()}buildAdjoint(){return new hi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new hi(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class ia extends qr{sampleGrid(n,s,a,c,h,g,y,x,w,v,D,O,F,G,Q,tt,ut,vt,St){const _t=hi.quadrilateralToQuadrilateral(c,h,g,y,x,w,v,D,O,F,G,Q,tt,ut,vt,St);return this.sampleGridWithTransform(n,s,a,_t)}sampleGridWithTransform(n,s,a,c){if(s<=0||a<=0)throw new nt;const h=new Pt(s,a),g=new Float32Array(2*s);for(let y=0;y<a;y++){const x=g.length,w=y+.5;for(let v=0;v<x;v+=2)g[v]=v/2+.5,g[v+1]=w;c.transformPoints(g),qr.checkAndNudgePoints(n,g);try{for(let v=0;v<x;v+=2)n.get(Math.floor(g[v]),Math.floor(g[v+1]))&&h.set(v/2,y)}catch{throw new nt}}return h}}class fi{static setGridSampler(n){fi.gridSampler=n}static getInstance(){return fi.gridSampler}}fi.gridSampler=new ia;class Jn{constructor(n,s){this.x=n,this.y=s}toResultPoint(){return new Bt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Wa{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(n){let g=a[0];a[0]=a[2],a[2]=g}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new Za(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new nt;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(n[0],n[1],s),this.sampleLine(n[1],n[2],s),this.sampleLine(n[2],n[3],s),this.sampleLine(n[3],n[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let g=0;g<4;g++){let y=a[(this.shift+g)%4];this.compact?(c<<=7,c+=y>>1&127):(c<<=10,c+=(y>>2&992)+(y>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(n,s){let a=0;n.forEach((c,h,g)=>{let y=(c>>s-2<<1)+(c&1);a=(a<<3)+y}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(bt.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new nt}getCorrectedParameterData(n,s){let a,c;s?(a=7,c=2):(a=10,c=4);let h=a-c,g=new Int32Array(a);for(let x=a-1;x>=0;--x)g[x]=n&15,n>>=4;try{new ar(Ae.AZTEC_PARAM).decode(g,h)}catch{throw new nt}let y=0;for(let x=0;x<c;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(n){let s=n,a=n,c=n,h=n,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(s,g,1,-1),O=this.getFirstDifferent(a,g,1,1),F=this.getFirstDifferent(c,g,-1,1),G=this.getFirstDifferent(h,g,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(G,D)*this.nbCenterLayers/(this.distancePoint(h,s)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(D,O,F,G))break}s=D,a=O,c=F,h=G,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new nt;this.compact=this.nbCenterLayers===5;let y=new Bt(s.getX()+.5,s.getY()-.5),x=new Bt(a.getX()+.5,a.getY()+.5),w=new Bt(c.getX()-.5,c.getY()+.5),v=new Bt(h.getX()-.5,h.getY()-.5);return this.expandSquare([y,x,w,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,s,a,c;try{let y=new dn(this.image).detect();n=y[0],s=y[1],a=y[2],c=y[3]}catch{let x=this.image.getWidth()/2,w=this.image.getHeight()/2;n=this.getFirstDifferent(new Jn(x+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Jn(x+7,w+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Jn(x-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jn(x-7,w-7),!1,-1,-1).toResultPoint()}let h=Wt.round((n.getX()+c.getX()+s.getX()+a.getX())/4),g=Wt.round((n.getY()+c.getY()+s.getY()+a.getY())/4);try{let y=new dn(this.image,15,h,g).detect();n=y[0],s=y[1],a=y[2],c=y[3]}catch{n=this.getFirstDifferent(new Jn(h+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Jn(h+7,g+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Jn(h-7,g+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jn(h-7,g-7),!1,-1,-1).toResultPoint()}return h=Wt.round((n.getX()+c.getX()+s.getX()+a.getX())/4),g=Wt.round((n.getY()+c.getY()+s.getY()+a.getY())/4),new Jn(h,g)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,s,a,c,h){let g=fi.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,w=y/2+this.nbCenterLayers;return g.sampleGrid(n,y,y,x,x,w,x,w,w,x,w,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(n,s,a){let c=0,h=this.distanceResultPoint(n,s),g=h/a,y=n.getX(),x=n.getY(),w=g*(s.getX()-n.getX())/h,v=g*(s.getY()-n.getY())/h;for(let D=0;D<a;D++)this.image.get(Wt.round(y+D*w),Wt.round(x+D*v))&&(c|=1<<a-D-1);return c}isWhiteOrBlackRectangle(n,s,a,c){let h=3;n=new Jn(n.getX()-h,n.getY()+h),s=new Jn(s.getX()-h,s.getY()-h),a=new Jn(a.getX()+h,a.getY()-h),c=new Jn(c.getX()+h,c.getY()+h);let g=this.getColor(c,n);if(g===0)return!1;let y=this.getColor(n,s);return y!==g||(y=this.getColor(s,a),y!==g)?!1:(y=this.getColor(a,c),y===g)}getColor(n,s){let a=this.distancePoint(n,s),c=(s.getX()-n.getX())/a,h=(s.getY()-n.getY())/a,g=0,y=n.getX(),x=n.getY(),w=this.image.get(n.getX(),n.getY()),v=Math.ceil(a);for(let O=0;O<v;O++)y+=c,x+=h,this.image.get(Wt.round(y),Wt.round(x))!==w&&g++;let D=g/a;return D>.1&&D<.9?0:D<=.1===w?1:-1}getFirstDifferent(n,s,a,c){let h=n.getX()+a,g=n.getY()+c;for(;this.isValid(h,g)&&this.image.get(h,g)===s;)h+=a,g+=c;for(h-=a,g-=c;this.isValid(h,g)&&this.image.get(h,g)===s;)h+=a;for(h-=a;this.isValid(h,g)&&this.image.get(h,g)===s;)g+=c;return g-=c,new Jn(h,g)}expandSquare(n,s,a){let c=a/(2*s),h=n[0].getX()-n[2].getX(),g=n[0].getY()-n[2].getY(),y=(n[0].getX()+n[2].getX())/2,x=(n[0].getY()+n[2].getY())/2,w=new Bt(y+c*h,x+c*g),v=new Bt(y-c*h,x-c*g);h=n[1].getX()-n[3].getX(),g=n[1].getY()-n[3].getY(),y=(n[1].getX()+n[3].getX())/2,x=(n[1].getY()+n[3].getY())/2;let D=new Bt(y+c*h,x+c*g),O=new Bt(y-c*h,x-c*g);return[w,D,v,O]}isValid(n,s){return n>=0&&n<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(n){let s=Wt.round(n.getX()),a=Wt.round(n.getY());return this.isValid(s,a)}distancePoint(n,s){return Wt.distance(n.getX(),n.getY(),s.getX(),s.getY())}distanceResultPoint(n,s){return Wt.distance(n.getX(),n.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(bt.truncDivision(this.nbLayers-4,8)+1)+15}}class _s{decode(n,s=null){let a=null,c=new Wa(n.getBlackMatrix()),h=null,g=null;try{let v=c.detectMirror(!1);h=v.getPoints(),this.reportFoundResultPoints(s,h),g=new je().decode(v)}catch(v){a=v}if(g==null)try{let v=c.detectMirror(!0);h=v.getPoints(),this.reportFoundResultPoints(s,h),g=new je().decode(v)}catch(v){throw a??v}let y=new Mt(g.getText(),g.getRawBytes(),g.getNumBits(),h,Nt.AZTEC,gt.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(xe.BYTE_SEGMENTS,x);let w=g.getECLevel();return w!=null&&y.putMetadata(xe.ERROR_CORRECTION_LEVEL,w),y}reportFoundResultPoints(n,s){if(n!=null){let a=n.get(Ht.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,h,g)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Ro extends Dt{constructor(n=500){super(new _s,n)}}class He{decode(n,s){try{return this.doDecode(n,s)}catch{if(s&&s.get(Ht.TRY_HARDER)===!0&&n.isRotateSupported()){const h=n.rotateCounterClockwise(),g=this.doDecode(h,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(xe.ORIENTATION)===!0&&(x=x+y.get(xe.ORIENTATION)%360),g.putMetadata(xe.ORIENTATION,x);const w=g.getResultPoints();if(w!==null){const v=h.getHeight();for(let D=0;D<w.length;D++)w[D]=new Bt(v-w[D].getY()-1,w[D].getX())}return g}else throw new nt}}reset(){}doDecode(n,s){const a=n.getWidth(),c=n.getHeight();let h=new jt(a);const g=s&&s.get(Ht.TRY_HARDER)===!0,y=Math.max(1,c>>(g?8:5));let x;g?x=c:x=15;const w=Math.trunc(c/2);for(let v=0;v<x;v++){const D=Math.trunc((v+1)/2),O=(v&1)===0,F=w+y*(O?D:-D);if(F<0||F>=c)break;try{h=n.getBlackRow(F,h)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(h.reverse(),s&&s.get(Ht.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;s.forEach((tt,ut)=>Q.set(ut,tt)),Q.delete(Ht.NEED_RESULT_POINT_CALLBACK),s=Q}try{const Q=this.decodeRow(F,h,s);if(G===1){Q.putMetadata(xe.ORIENTATION,180);const tt=Q.getResultPoints();tt!==null&&(tt[0]=new Bt(a-tt[0].getX()-1,tt[0].getY()),tt[1]=new Bt(a-tt[1].getX()-1,tt[1].getY()))}return Q}catch{}}}throw new nt}static recordPattern(n,s,a){const c=a.length;for(let w=0;w<c;w++)a[w]=0;const h=n.getSize();if(s>=h)throw new nt;let g=!n.get(s),y=0,x=s;for(;x<h;){if(n.get(x)!==g)a[y]++;else{if(++y===c)break;a[y]=1,g=!g}x++}if(!(y===c||y===c-1&&x===h))throw new nt}static recordPatternInReverse(n,s,a){let c=a.length,h=n.get(s);for(;s>0&&c>=0;)n.get(--s)!==h&&(c--,h=!h);if(c>=0)throw new nt;He.recordPattern(n,s+1,a)}static patternMatchVariance(n,s,a){const c=n.length;let h=0,g=0;for(let w=0;w<c;w++)h+=n[w],g+=s[w];if(h<g)return Number.POSITIVE_INFINITY;const y=h/g;a*=y;let x=0;for(let w=0;w<c;w++){const v=n[w],D=s[w]*y,O=v>D?v-D:D-v;if(O>a)return Number.POSITIVE_INFINITY;x+=O}return x/h}}class Ct extends He{static findStartPattern(n){const s=n.getSize(),a=n.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),g=a,y=!1;const x=6;for(let w=a;w<s;w++)if(n.get(w)!==y)h[c]++;else{if(c===x-1){let v=Ct.MAX_AVG_VARIANCE,D=-1;for(let O=Ct.CODE_START_A;O<=Ct.CODE_START_C;O++){const F=He.patternMatchVariance(h,Ct.CODE_PATTERNS[O],Ct.MAX_INDIVIDUAL_VARIANCE);F<v&&(v=F,D=O)}if(D>=0&&n.isRange(Math.max(0,g-(w-g)/2),g,!1))return Int32Array.from([g,w,D]);g+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,y=!y}throw new nt}static decodeCode(n,s,a){He.recordPattern(n,a,s);let c=Ct.MAX_AVG_VARIANCE,h=-1;for(let g=0;g<Ct.CODE_PATTERNS.length;g++){const y=Ct.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,Ct.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,h=g)}if(h>=0)return h;throw new nt}decodeRow(n,s,a){const c=a&&a.get(Ht.ASSUME_GS1)===!0,h=Ct.findStartPattern(s),g=h[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let w;switch(g){case Ct.CODE_START_A:w=Ct.CODE_CODE_A;break;case Ct.CODE_START_B:w=Ct.CODE_CODE_B;break;case Ct.CODE_START_C:w=Ct.CODE_CODE_C;break;default:throw new k}let v=!1,D=!1,O="",F=h[0],G=h[1];const Q=Int32Array.from([0,0,0,0,0,0]);let tt=0,ut=0,vt=g,St=0,_t=!0,me=!1,se=!1;for(;!v;){const Ls=D;switch(D=!1,tt=ut,ut=Ct.decodeCode(s,Q,G),x[y++]=ut,ut!==Ct.CODE_STOP&&(_t=!0),ut!==Ct.CODE_STOP&&(St++,vt+=St*ut),F=G,G+=Q.reduce((Bu,bl)=>Bu+bl,0),ut){case Ct.CODE_START_A:case Ct.CODE_START_B:case Ct.CODE_START_C:throw new k}switch(w){case Ct.CODE_CODE_A:if(ut<64)se===me?O+=String.fromCharCode(32+ut):O+=String.fromCharCode(32+ut+128),se=!1;else if(ut<96)se===me?O+=String.fromCharCode(ut-64):O+=String.fromCharCode(ut+64),se=!1;else switch(ut!==Ct.CODE_STOP&&(_t=!1),ut){case Ct.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case Ct.CODE_FNC_2:case Ct.CODE_FNC_3:break;case Ct.CODE_FNC_4_A:!me&&se?(me=!0,se=!1):me&&se?(me=!1,se=!1):se=!0;break;case Ct.CODE_SHIFT:D=!0,w=Ct.CODE_CODE_B;break;case Ct.CODE_CODE_B:w=Ct.CODE_CODE_B;break;case Ct.CODE_CODE_C:w=Ct.CODE_CODE_C;break;case Ct.CODE_STOP:v=!0;break}break;case Ct.CODE_CODE_B:if(ut<96)se===me?O+=String.fromCharCode(32+ut):O+=String.fromCharCode(32+ut+128),se=!1;else switch(ut!==Ct.CODE_STOP&&(_t=!1),ut){case Ct.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case Ct.CODE_FNC_2:case Ct.CODE_FNC_3:break;case Ct.CODE_FNC_4_B:!me&&se?(me=!0,se=!1):me&&se?(me=!1,se=!1):se=!0;break;case Ct.CODE_SHIFT:D=!0,w=Ct.CODE_CODE_A;break;case Ct.CODE_CODE_A:w=Ct.CODE_CODE_A;break;case Ct.CODE_CODE_C:w=Ct.CODE_CODE_C;break;case Ct.CODE_STOP:v=!0;break}break;case Ct.CODE_CODE_C:if(ut<100)ut<10&&(O+="0"),O+=ut;else switch(ut!==Ct.CODE_STOP&&(_t=!1),ut){case Ct.CODE_FNC_1:c&&(O.length===0?O+="]C1":O+="");break;case Ct.CODE_CODE_A:w=Ct.CODE_CODE_A;break;case Ct.CODE_CODE_B:w=Ct.CODE_CODE_B;break;case Ct.CODE_STOP:v=!0;break}break}Ls&&(w=w===Ct.CODE_CODE_A?Ct.CODE_CODE_B:Ct.CODE_CODE_A)}const Vn=G-F;if(G=s.getNextUnset(G),!s.isRange(G,Math.min(s.getSize(),G+(G-F)/2),!1))throw new nt;if(vt-=St*tt,vt%103!==tt)throw new et;const Ji=O.length;if(Ji===0)throw new nt;Ji>0&&_t&&(w===Ct.CODE_CODE_C?O=O.substring(0,Ji-2):O=O.substring(0,Ji-1));const _i=(h[1]+h[0])/2,Je=F+Vn/2,ti=x.length,Yi=new Uint8Array(ti);for(let Ls=0;Ls<ti;Ls++)Yi[Ls]=x[Ls];const fa=[new Bt(_i,n),new Bt(Je,n)];return new Mt(O,Yi,0,fa,Nt.CODE_128,new Date().getTime())}}Ct.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ct.MAX_AVG_VARIANCE=.25,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.CODE_SHIFT=98,Ct.CODE_CODE_C=99,Ct.CODE_CODE_B=100,Ct.CODE_CODE_A=101,Ct.CODE_FNC_1=102,Ct.CODE_FNC_2=97,Ct.CODE_FNC_3=96,Ct.CODE_FNC_4_A=101,Ct.CODE_FNC_4_B=100,Ct.CODE_START_A=103,Ct.CODE_START_B=104,Ct.CODE_START_C=105,Ct.CODE_STOP=106;class Ge extends He{constructor(n=!1,s=!1){super(),this.usingCheckDigit=n,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=Ge.findAsteriskPattern(s,c),g=s.getNextSet(h[1]),y=s.getSize(),x,w;do{Ge.recordPattern(s,g,c);let Q=Ge.toNarrowWidePattern(c);if(Q<0)throw new nt;x=Ge.patternToChar(Q),this.decodeRowResult+=x,w=g;for(let tt of c)g+=tt;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let Q of c)v+=Q;let D=g-w-v;if(g!==y&&D*2<v)throw new nt;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,tt=0;for(let ut=0;ut<Q;ut++)tt+=Ge.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ut));if(this.decodeRowResult.charAt(Q)!==Ge.ALPHABET_STRING.charAt(tt%43))throw new et;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new nt;let O;this.extendedMode?O=Ge.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;let F=(h[1]+h[0])/2,G=w+v/2;return new Mt(O,null,0,[new Bt(F,n),new Bt(G,n)],Nt.CODE_39,new Date().getTime())}static findAsteriskPattern(n,s){let a=n.getSize(),c=n.getNextSet(0),h=0,g=c,y=!1,x=s.length;for(let w=c;w<a;w++)if(n.get(w)!==y)s[h]++;else{if(h===x-1){if(this.toNarrowWidePattern(s)===Ge.ASTERISK_ENCODING&&n.isRange(Math.max(0,g-Math.floor((w-g)/2)),g,!1))return[g,w];g+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,y=!y}throw new nt}static toNarrowWidePattern(n){let s=n.length,a=0,c;do{let h=2147483647;for(let x of n)x<h&&x>a&&(h=x);a=h,c=0;let g=0,y=0;for(let x=0;x<s;x++){let w=n[x];w>a&&(y|=1<<s-1-x,c++,g+=w)}if(c===3){for(let x=0;x<s&&c>0;x++){let w=n[x];if(w>a&&(c--,w*2>=g))return-1}return y}}while(c>3);return-1}static patternToChar(n){for(let s=0;s<Ge.CHARACTER_ENCODINGS.length;s++)if(Ge.CHARACTER_ENCODINGS[s]===n)return Ge.ALPHABET_STRING.charAt(s);if(n===Ge.ASTERISK_ENCODING)return"*";throw new nt}static decodeExtended(n){let s=n.length,a="";for(let c=0;c<s;c++){let h=n.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let g=n.charAt(c+1),y="\0";switch(h){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new k;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new k;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new k;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new k;break}a+=y,c++}else a+=h}return a}}Ge.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ge.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ge.ASTERISK_ENCODING=148;class ne extends He{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,s,a){let c=this.decodeStart(s),h=this.decodeEnd(s),g=new j;ne.decodeMiddle(s,c[1],h[0],g);let y=g.toString(),x=null;a!=null&&(x=a.get(Ht.ALLOWED_LENGTHS)),x==null&&(x=ne.DEFAULT_ALLOWED_LENGTHS);let w=y.length,v=!1,D=0;for(let G of x){if(w===G){v=!0;break}G>D&&(D=G)}if(!v&&w>D&&(v=!0),!v)throw new k;const O=[new Bt(c[1],n),new Bt(h[0],n)];return new Mt(y,null,0,O,Nt.ITF,new Date().getTime())}static decodeMiddle(n,s,a,c){let h=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(h.fill(0),g.fill(0),y.fill(0);s<a;){He.recordPattern(n,s,h);for(let w=0;w<5;w++){let v=2*w;g[w]=h[v],y[w]=h[v+1]}let x=ne.decodeDigit(g);c.append(x.toString()),x=this.decodeDigit(y),c.append(x.toString()),h.forEach(function(w){s+=w})}}decodeStart(n){let s=ne.skipWhiteSpace(n),a=ne.findGuardPattern(n,s,ne.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(n,a[0]),a}validateQuietZone(n,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!n.get(c);c--)a--;if(a!==0)throw new nt}static skipWhiteSpace(n){const s=n.getSize(),a=n.getNextSet(0);if(a===s)throw new nt;return a}decodeEnd(n){n.reverse();try{let s=ne.skipWhiteSpace(n),a;try{a=ne.findGuardPattern(n,s,ne.END_PATTERN_REVERSED[0])}catch(h){h instanceof nt&&(a=ne.findGuardPattern(n,s,ne.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,a[0]);let c=a[0];return a[0]=n.getSize()-a[1],a[1]=n.getSize()-c,a}finally{n.reverse()}}static findGuardPattern(n,s,a){let c=a.length,h=new Int32Array(c),g=n.getSize(),y=!1,x=0,w=s;h.fill(0);for(let v=s;v<g;v++)if(n.get(v)!==y)h[x]++;else{if(x===c-1){if(He.patternMatchVariance(h,a,ne.MAX_INDIVIDUAL_VARIANCE)<ne.MAX_AVG_VARIANCE)return[w,v];w+=h[0]+h[1],gt.arraycopy(h,2,h,0,x-1),h[x-1]=0,h[x]=0,x--}else x++;h[x]=1,y=!y}throw new nt}static decodeDigit(n){let s=ne.MAX_AVG_VARIANCE,a=-1,c=ne.PATTERNS.length;for(let h=0;h<c;h++){let g=ne.PATTERNS[h],y=He.patternMatchVariance(n,g,ne.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,a=h):y===s&&(a=-1)}if(a>=0)return a%10;throw new nt}}ne.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ne.MAX_AVG_VARIANCE=.38,ne.MAX_INDIVIDUAL_VARIANCE=.5,ne.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ne.START_PATTERN=Int32Array.from([1,1,1,1]),ne.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ln extends He{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let s=!1,a,c=0,h=Int32Array.from([0,0,0]);for(;!s;){h=Int32Array.from([0,0,0]),a=ln.findGuardPattern(n,c,!1,this.START_END_PATTERN,h);let g=a[0];c=a[1];let y=g-(c-g);y>=0&&(s=n.isRange(y,g,!1))}return a}static checkChecksum(n){return ln.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let a=parseInt(n.charAt(s-1),10);return ln.getStandardUPCEANChecksum(n.substring(0,s-1))===a}static getStandardUPCEANChecksum(n){let s=n.length,a=0;for(let c=s-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new k;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new k;a+=h}return(1e3-a)%10}static decodeEnd(n,s){return ln.findGuardPattern(n,s,!1,ln.START_END_PATTERN,new Int32Array(ln.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,s,a,c){return this.findGuardPattern(n,s,a,c,new Int32Array(c.length))}static findGuardPattern(n,s,a,c,h){let g=n.getSize();s=a?n.getNextUnset(s):n.getNextSet(s);let y=0,x=s,w=c.length,v=a;for(let D=s;D<g;D++)if(n.get(D)!==v)h[y]++;else{if(y===w-1){if(He.patternMatchVariance(h,c,ln.MAX_INDIVIDUAL_VARIANCE)<ln.MAX_AVG_VARIANCE)return Int32Array.from([x,D]);x+=h[0]+h[1];let O=h.slice(2,h.length-1);for(let F=0;F<y-1;F++)h[F]=O[F];h[y-1]=0,h[y]=0,y--}else y++;h[y]=1,v=!v}throw new nt}static decodeDigit(n,s,a,c){this.recordPattern(n,a,s);let h=this.MAX_AVG_VARIANCE,g=-1,y=c.length;for(let x=0;x<y;x++){let w=c[x],v=He.patternMatchVariance(s,w,ln.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,g=x)}if(g>=0)return g;throw new nt}}ln.MAX_AVG_VARIANCE=.48,ln.MAX_INDIVIDUAL_VARIANCE=.7,ln.START_END_PATTERN=Int32Array.from([1,1,1]),ln.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ln.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ln.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class br{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),g=c.toString(),y=br.parseExtensionString(g),x=[new Bt((a[0]+a[1])/2,n),new Bt(h,n)],w=new Mt(g,null,0,x,Nt.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&w.putAllMetadata(y),w}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),g=s[1],y=0;for(let w=0;w<5&&g<h;w++){let v=ln.decodeDigit(n,c,g,ln.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let D of c)g+=D;v>=10&&(y|=1<<4-w),w!==4&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(a.length!==5)throw new nt;let x=this.determineCheckDigit(y);if(br.extensionChecksum(a.toString())!==x)throw new nt;return g}static extensionChecksum(n){let s=n.length,a=0;for(let c=s-2;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(n){for(let s=0;s<10;s++)if(n===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new nt}static parseExtensionString(n){if(n.length!==5)return null;let s=br.parseExtension5String(n);return s==null?null:new Map([[xe.SUGGESTED_PRICE,s]])}static parseExtension5String(n){let s;switch(n.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(n.substring(1)),c=(a/100).toString(),h=a%100,g=h<10?"0"+h:h.toString();return s+c+"."+g}}class ra{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),g=c.toString(),y=ra.parseExtensionString(g),x=[new Bt((a[0]+a[1])/2,n),new Bt(h,n)],w=new Mt(g,null,0,x,Nt.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&w.putAllMetadata(y),w}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<h;x++){let w=ln.decodeDigit(n,c,g,ln.L_AND_G_PATTERNS);a+=String.fromCharCode(48+w%10);for(let v of c)g+=v;w>=10&&(y|=1<<1-x),x!==1&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(a.length!==2)throw new nt;if(parseInt(a.toString())%4!==y)throw new nt;return g}static parseExtensionString(n){return n.length!==2?null:new Map([[xe.ISSUE_NUMBER,parseInt(n)]])}}class or{static decodeRow(n,s,a){let c=ln.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new br().decodeRow(n,s,c)}catch{return new ra().decodeRow(n,s,c)}}}or.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pe extends ln{constructor(){super(),this.decodeRowStringBuffer="",pe.L_AND_G_PATTERNS=pe.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let s=pe.L_PATTERNS[n-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];pe.L_AND_G_PATTERNS[n]=a}}decodeRow(n,s,a){let c=pe.findStartGuardPattern(s),h=a==null?null:a.get(Ht.NEED_RESULT_POINT_CALLBACK);if(h!=null){const _t=new Bt((c[0]+c[1])/2,n);h.foundPossibleResultPoint(_t)}let g=this.decodeMiddle(s,c,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(h!=null){const _t=new Bt(y,n);h.foundPossibleResultPoint(_t)}let w=this.decodeEnd(s,y);if(h!=null){const _t=new Bt((w[0]+w[1])/2,n);h.foundPossibleResultPoint(_t)}let v=w[1],D=v+(v-w[0]);if(D>=s.getSize()||!s.isRange(v,D,!1))throw new nt;let O=x.toString();if(O.length<8)throw new k;if(!pe.checkChecksum(O))throw new et;let F=(c[1]+c[0])/2,G=(w[1]+w[0])/2,Q=this.getBarcodeFormat(),tt=[new Bt(F,n),new Bt(G,n)],ut=new Mt(O,null,0,tt,Q,new Date().getTime()),vt=0;try{let _t=or.decodeRow(n,s,w[1]);ut.putMetadata(xe.UPC_EAN_EXTENSION,_t.getText()),ut.putAllMetadata(_t.getResultMetadata()),ut.addResultPoints(_t.getResultPoints()),vt=_t.getText().length}catch{}let St=a==null?null:a.get(Ht.ALLOWED_EAN_EXTENSIONS);if(St!=null){let _t=!1;for(let me in St)if(vt.toString()===me){_t=!0;break}if(!_t)throw new nt}return ut}decodeEnd(n,s){return pe.findGuardPattern(n,s,!1,pe.START_END_PATTERN,new Int32Array(pe.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return pe.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let a=parseInt(n.charAt(s-1),10);return pe.getStandardUPCEANChecksum(n.substring(0,s-1))===a}static getStandardUPCEANChecksum(n){let s=n.length,a=0;for(let c=s-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new k;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new k;a+=h}return(1e3-a)%10}}class rn extends pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),g=s[1],y=0;for(let w=0;w<6&&g<h;w++){let v=pe.decodeDigit(n,c,g,pe.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let D of c)g+=D;v>=10&&(y|=1<<5-w)}a=rn.determineFirstDigit(a,y),g=pe.findGuardPattern(n,g,!0,pe.MIDDLE_PATTERN,new Int32Array(pe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&g<h;w++){let v=pe.decodeDigit(n,c,g,pe.L_PATTERNS);a+=String.fromCharCode(48+v);for(let D of c)g+=D}return{rowOffset:g,resultString:a}}getBarcodeFormat(){return Nt.EAN_13}static determineFirstDigit(n,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return n=String.fromCharCode(48+a)+n,n;throw new nt}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class lr extends pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),g=s[1];for(let x=0;x<4&&g<h;x++){let w=pe.decodeDigit(n,c,g,pe.L_PATTERNS);a+=String.fromCharCode(48+w);for(let v of c)g+=v}g=pe.findGuardPattern(n,g,!0,pe.MIDDLE_PATTERN,new Int32Array(pe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<h;x++){let w=pe.decodeDigit(n,c,g,pe.L_PATTERNS);a+=String.fromCharCode(48+w);for(let v of c)g+=v}return{rowOffset:g,resultString:a}}getBarcodeFormat(){return Nt.EAN_8}}class ur extends pe{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return Nt.UPC_A}decode(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,a))}decodeMiddle(n,s,a){return this.ean13Reader.decodeMiddle(n,s,a)}maybeReturnResult(n){let s=n.getText();if(s.charAt(0)==="0"){let a=new Mt(s.substring(1),null,null,n.getResultPoints(),Nt.UPC_A);return n.getResultMetadata()!=null&&a.putAllMetadata(n.getResultMetadata()),a}else throw new nt}reset(){this.ean13Reader.reset()}}class In extends pe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,s,a){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=n.getSize();let g=s[1],y=0;for(let w=0;w<6&&g<h;w++){const v=In.decodeDigit(n,c,g,In.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let D of c)g+=D;v>=10&&(y|=1<<5-w)}let x=In.determineNumSysAndCheckDigit(a,y);return{rowOffset:g,resultString:x}}decodeEnd(n,s){return In.findGuardPatternWithoutCounters(n,s,!0,In.MIDDLE_END_PATTERN)}checkChecksum(n){return pe.checkChecksum(In.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let h=String.fromCharCode(48+a),g=String.fromCharCode(48+c);return h+n+g}throw nt.getNotFoundInstance()}getBarcodeFormat(){return Nt.UPC_E}static convertUPCEtoUPCA(n){const s=n.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new j;a.append(n.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return n.length>=8&&a.append(n.charAt(7)),a.toString()}}In.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),In.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ka extends He{constructor(n){super();let s=n==null?null:n.get(Ht.POSSIBLE_FORMATS),a=[];u(s)?(a.push(new rn),a.push(new ur),a.push(new lr),a.push(new In)):(s.indexOf(Nt.EAN_13)>-1&&a.push(new rn),s.indexOf(Nt.UPC_A)>-1&&a.push(new ur),s.indexOf(Nt.EAN_8)>-1&&a.push(new lr),s.indexOf(Nt.UPC_E)>-1&&a.push(new In)),this.readers=a}decodeRow(n,s,a){for(let c of this.readers)try{const h=c.decodeRow(n,s,a),g=h.getBarcodeFormat()===Nt.EAN_13&&h.getText().charAt(0)==="0",y=a==null?null:a.get(Ht.POSSIBLE_FORMATS),x=y==null||y.includes(Nt.UPC_A);if(g&&x){const w=h.getRawBytes(),v=new Mt(h.getText().substring(1),w,w?w.length:null,h.getResultPoints(),Nt.UPC_A);return v.putAllMetadata(h.getResultMetadata()),v}return h}catch{}throw new nt}reset(){for(let n of this.readers)n.reset()}}class zn extends He{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,s){for(let a=0;a<s.length;a++)if(He.patternMatchVariance(n,s[a],zn.MAX_INDIVIDUAL_VARIANCE)<zn.MAX_AVG_VARIANCE)return a;throw new nt}static count(n){return Wt.sum(new Int32Array(n))}static increment(n,s){let a=0,c=s[0];for(let h=1;h<n.length;h++)s[h]>c&&(c=s[h],a=h);n[a]++}static decrement(n,s){let a=0,c=s[0];for(let h=1;h<n.length;h++)s[h]<c&&(c=s[h],a=h);n[a]--}static isFinderPattern(n){let s=n[0]+n[1],a=s+n[2]+n[3],c=s/a;if(c>=zn.MIN_FINDER_PATTERN_RATIO&&c<=zn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of n)y>g&&(g=y),y<h&&(h=y);return g<10*h}return!1}}zn.MAX_AVG_VARIANCE=.2,zn.MAX_INDIVIDUAL_VARIANCE=.45,zn.MIN_FINDER_PATTERN_RATIO=9.5/12,zn.MAX_FINDER_PATTERN_RATIO=12.5/14;class di{constructor(n,s){this.value=n,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof di))return!1;const s=n;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ir{constructor(n,s,a,c,h){this.value=n,this.startEnd=s,this.value=n,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Bt(a,h)),this.resultPoints.push(new Bt(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ir))return!1;const s=n;return this.value===s.value}hashCode(){return this.value}}class qi{constructor(){}static getRSSvalue(n,s,a){let c=0;for(let x of n)c+=x;let h=0,g=0,y=n.length;for(let x=0;x<y-1;x++){let w;for(w=1,g|=1<<x;w<n[x];w++,g&=~(1<<x)){let v=qi.combins(c-w-1,y-x-2);if(a&&g===0&&c-w-(y-x-1)>=y-x-1&&(v-=qi.combins(c-w-(y-x),y-x-2)),y-x-1>1){let D=0;for(let O=c-w-(y-x-2);O>s;O--)D+=qi.combins(c-w-O-1,y-x-3);v-=D*(y-1-x)}else c-w>s&&v--;h+=v}c-=w}return h}static combins(n,s){let a,c;n-s>s?(c=s,a=n-s):(c=n-s,a=s);let h=1,g=1;for(let y=n;y>a;y--)h*=y,g<=c&&(h/=g,g++);for(;g<=c;)h/=g,g++;return h}}class ws{static buildBitArray(n){let s=n.length*2-1;n[n.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new jt(a),h=0,y=n[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&c.set(h),h++;for(let x=1;x<n.length;++x){let w=n[x],v=w.getLeftChar().getValue();for(let D=11;D>=0;--D)(v&1<<D)!=0&&c.set(h),h++;if(w.getRightChar()!=null){let D=w.getRightChar().getValue();for(let O=11;O>=0;--O)(D&1<<O)!=0&&c.set(h),h++}}return c}}class cr{constructor(n,s){s?this.decodedInformation=null:(this.finished=n,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ts{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Bn extends Ts{constructor(n,s){super(n),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Bn.FNC1}}Bn.FNC1="$";class gi extends Ts{constructor(n,s,a){super(n),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class mi extends Ts{constructor(n,s,a){if(super(n),s<0||s>10||a<0||a>10)throw new k;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===mi.FNC1}isSecondDigitFNC1(){return this.secondDigit===mi.FNC1}isAnyFNC1(){return this.firstDigit===mi.FNC1||this.secondDigit===mi.FNC1}}mi.FNC1=10;class Ot{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new nt;let s=n.substring(0,2);for(let h of Ot.TWO_DIGIT_DATA_LENGTH)if(h[0]===s)return h[1]===Ot.VARIABLE_LENGTH?Ot.processVariableAI(2,h[2],n):Ot.processFixedAI(2,h[1],n);if(n.length<3)throw new nt;let a=n.substring(0,3);for(let h of Ot.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Ot.VARIABLE_LENGTH?Ot.processVariableAI(3,h[2],n):Ot.processFixedAI(3,h[1],n);for(let h of Ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Ot.VARIABLE_LENGTH?Ot.processVariableAI(4,h[2],n):Ot.processFixedAI(4,h[1],n);if(n.length<4)throw new nt;let c=n.substring(0,4);for(let h of Ot.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===Ot.VARIABLE_LENGTH?Ot.processVariableAI(4,h[2],n):Ot.processFixedAI(4,h[1],n);throw new nt}static processFixedAI(n,s,a){if(a.length<n)throw new nt;let c=a.substring(0,n);if(a.length<n+s)throw new nt;let h=a.substring(n,n+s),g=a.substring(n+s),y="("+c+")"+h,x=Ot.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(n,s,a){let c=a.substring(0,n),h;a.length<n+s?h=a.length:h=n+s;let g=a.substring(n,h),y=a.substring(h),x="("+c+")"+g,w=Ot.parseFieldsInGeneralPurpose(y);return w==null?x:x+w}}Ot.VARIABLE_LENGTH=[],Ot.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ot.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ot.VARIABLE_LENGTH,20],["22",Ot.VARIABLE_LENGTH,29],["30",Ot.VARIABLE_LENGTH,8],["37",Ot.VARIABLE_LENGTH,8],["90",Ot.VARIABLE_LENGTH,30],["91",Ot.VARIABLE_LENGTH,30],["92",Ot.VARIABLE_LENGTH,30],["93",Ot.VARIABLE_LENGTH,30],["94",Ot.VARIABLE_LENGTH,30],["95",Ot.VARIABLE_LENGTH,30],["96",Ot.VARIABLE_LENGTH,30],["97",Ot.VARIABLE_LENGTH,3],["98",Ot.VARIABLE_LENGTH,30],["99",Ot.VARIABLE_LENGTH,30]],Ot.THREE_DIGIT_DATA_LENGTH=[["240",Ot.VARIABLE_LENGTH,30],["241",Ot.VARIABLE_LENGTH,30],["242",Ot.VARIABLE_LENGTH,6],["250",Ot.VARIABLE_LENGTH,30],["251",Ot.VARIABLE_LENGTH,30],["253",Ot.VARIABLE_LENGTH,17],["254",Ot.VARIABLE_LENGTH,20],["400",Ot.VARIABLE_LENGTH,30],["401",Ot.VARIABLE_LENGTH,30],["402",17],["403",Ot.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ot.VARIABLE_LENGTH,20],["421",Ot.VARIABLE_LENGTH,15],["422",3],["423",Ot.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ot.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ot.VARIABLE_LENGTH,15],["391",Ot.VARIABLE_LENGTH,18],["392",Ot.VARIABLE_LENGTH,15],["393",Ot.VARIABLE_LENGTH,18],["703",Ot.VARIABLE_LENGTH,30]],Ot.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ot.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ot.VARIABLE_LENGTH,20],["8003",Ot.VARIABLE_LENGTH,30],["8004",Ot.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ot.VARIABLE_LENGTH,30],["8008",Ot.VARIABLE_LENGTH,12],["8018",18],["8020",Ot.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ot.VARIABLE_LENGTH,70],["8200",Ot.VARIABLE_LENGTH,70]];class ri{constructor(n){this.buffer=new j,this.information=n}decodeAllCodes(n,s){let a=s,c=null;do{let h=this.decodeGeneralPurposeField(a,c),g=Ot.parseFieldsInGeneralPurpose(h.getNewString());if(g!=null&&n.append(g),h.isRemaining()?c=""+h.getRemainingValue():c=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let s=n;s<n+3;++s)if(this.information.get(s))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(n,4);return h===0?new mi(this.information.getSize(),mi.FNC1,mi.FNC1):new mi(this.information.getSize(),h-1,mi.FNC1)}let s=this.extractNumericValueFromBitArray(n,7),a=(s-8)/11,c=(s-8)%11;return new mi(n+7,a,c)}extractNumericValueFromBitArray(n,s){return ri.extractNumericValueFromBitArray(this.information,n,s)}static extractNumericValueFromBitArray(n,s,a){let c=0;for(let h=0;h<a;++h)n.get(s+h)&&(c|=1<<a-h-1);return c}decodeGeneralPurposeField(n,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(n);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new gi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new gi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),n=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),n=s.isFinished()):(s=this.parseNumericBlock(),n=s.isFinished()),!(a!==this.current.getPosition())&&!n)break}while(!n);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let s;return n.isSecondDigitFNC1()?s=new gi(this.current.getPosition(),this.buffer.toString()):s=new gi(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new cr(!0,s)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let s=new gi(this.current.getPosition(),this.buffer.toString());return new cr(!0,s)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new gi(this.current.getPosition(),this.buffer.toString());return new cr(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new gi(this.current.getPosition(),this.buffer.toString());return new cr(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new Bn(n+5,Bn.FNC1);if(s>=5&&s<15)return new Bn(n+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<90)return new Bn(n+7,""+(a+1));if(a>=90&&a<116)return new Bn(n+7,""+(a+7));let c=this.extractNumericValueFromBitArray(n,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new k}return new Bn(n+8,h)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,6);return a>=16&&a<63}decodeAlphanumeric(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new Bn(n+5,Bn.FNC1);if(s>=5&&s<15)return new Bn(n+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(n,6);if(a>=32&&a<58)return new Bn(n+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Ni("Decoding invalid alphanumeric value: "+a)}return new Bn(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<5&&s+n<this.information.getSize();++s)if(s===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+s))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let s=n;s<n+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<4&&s+n<this.information.getSize();++s)if(this.information.get(n+s))return!1;return!0}}class An{constructor(n){this.information=n,this.generalDecoder=new ri(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Fe extends An{constructor(n){super(n)}encodeCompressedGtin(n,s){n.append("(01)");let a=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,a)}encodeCompressedGtinWithoutAI(n,s,a){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);h/100===0&&n.append("0"),h/10===0&&n.append("0"),n.append(h)}Fe.appendCheckDigit(n,a)}static appendCheckDigit(n,s){let a=0;for(let c=0;c<13;c++){let h=n.charAt(c+s).charCodeAt(0)-48;a+=(c&1)===0?3*h:h}a=10-a%10,a===10&&(a=0),n.append(a)}}Fe.GTIN_SIZE=40;class pi extends Fe{constructor(n){super(n)}parseInformation(){let n=new j;n.append("(01)");let s=n.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(pi.HEADER_SIZE,4);return n.append(a),this.encodeCompressedGtinWithoutAI(n,pi.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,pi.HEADER_SIZE+44)}}pi.HEADER_SIZE=4;class Qr extends An{constructor(n){super(n)}parseInformation(){let n=new j;return this.getGeneralDecoder().decodeAllCodes(n,Qr.HEADER_SIZE)}}Qr.HEADER_SIZE=5;class sa extends Fe{constructor(n){super(n)}encodeCompressedWeight(n,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(n,c);let h=this.checkWeight(c),g=1e5;for(let y=0;y<5;++y)h/g===0&&n.append("0"),g/=10;n.append(h)}}class Fi extends sa{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Fi.HEADER_SIZE+sa.GTIN_SIZE+Fi.WEIGHT_SIZE)throw new nt;let n=new j;return this.encodeCompressedGtin(n,Fi.HEADER_SIZE),this.encodeCompressedWeight(n,Fi.HEADER_SIZE+sa.GTIN_SIZE,Fi.WEIGHT_SIZE),n.toString()}}Fi.HEADER_SIZE=5,Fi.WEIGHT_SIZE=15;class Do extends Fi{constructor(n){super(n)}addWeightCode(n,s){n.append("(3103)")}checkWeight(n){return n}}class Nr extends Fi{constructor(n){super(n)}addWeightCode(n,s){s<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class yi extends Fe{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<yi.HEADER_SIZE+Fe.GTIN_SIZE)throw new nt;let n=new j;this.encodeCompressedGtin(n,yi.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yi.HEADER_SIZE+Fe.GTIN_SIZE,yi.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(yi.HEADER_SIZE+Fe.GTIN_SIZE+yi.LAST_DIGIT_SIZE,null);return n.append(a.getNewString()),n.toString()}}yi.HEADER_SIZE=8,yi.LAST_DIGIT_SIZE=2;class fn extends Fe{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<fn.HEADER_SIZE+Fe.GTIN_SIZE)throw new nt;let n=new j;this.encodeCompressedGtin(n,fn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+Fe.GTIN_SIZE,fn.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+Fe.GTIN_SIZE+fn.LAST_DIGIT_SIZE,fn.FIRST_THREE_DIGITS_SIZE);a/100==0&&n.append("0"),a/10==0&&n.append("0"),n.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(fn.HEADER_SIZE+Fe.GTIN_SIZE+fn.LAST_DIGIT_SIZE+fn.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}fn.HEADER_SIZE=8,fn.LAST_DIGIT_SIZE=2,fn.FIRST_THREE_DIGITS_SIZE=10;class Te extends sa{constructor(n,s,a){super(n),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Te.HEADER_SIZE+Te.GTIN_SIZE+Te.WEIGHT_SIZE+Te.DATE_SIZE)throw new nt;let n=new j;return this.encodeCompressedGtin(n,Te.HEADER_SIZE),this.encodeCompressedWeight(n,Te.HEADER_SIZE+Te.GTIN_SIZE,Te.WEIGHT_SIZE),this.encodeCompressedDate(n,Te.HEADER_SIZE+Te.GTIN_SIZE+Te.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Te.DATE_SIZE);if(a==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=a%32;a/=32;let h=a%12+1;a/=12;let g=a;g/10==0&&n.append("0"),n.append(g),h/10==0&&n.append("0"),n.append(h),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")}checkWeight(n){return n%1e5}}Te.HEADER_SIZE=8,Te.WEIGHT_SIZE=20,Te.DATE_SIZE=16;function Ri(R){try{if(R.get(1))return new pi(R);if(!R.get(2))return new Qr(R);switch(ri.extractNumericValueFromBitArray(R,1,4)){case 4:return new Do(R);case 5:return new Nr(R)}switch(ri.extractNumericValueFromBitArray(R,1,5)){case 12:return new yi(R);case 13:return new fn(R)}switch(ri.extractNumericValueFromBitArray(R,1,7)){case 56:return new Te(R,"310","11");case 57:return new Te(R,"320","11");case 58:return new Te(R,"310","13");case 59:return new Te(R,"320","13");case 60:return new Te(R,"310","15");case 61:return new Te(R,"320","15");case 62:return new Te(R,"310","17");case 63:return new Te(R,"320","17")}}catch(n){throw console.log(n),new Ni("unknown decoder: "+R)}}class $n{constructor(n,s,a,c){this.leftchar=n,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,s){return n instanceof $n?$n.equalsOrNull(n.leftchar,s.leftchar)&&$n.equalsOrNull(n.rightchar,s.rightchar)&&$n.equalsOrNull(n.finderpattern,s.finderpattern):!1}static equalsOrNull(n,s){return n===null?s===null:$n.equals(n,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class _n{constructor(n,s,a){this.pairs=n,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,s){return n instanceof _n?this.checkEqualitity(n,s)&&n.wasReversed===s.wasReversed:!1}checkEqualitity(n,s){if(!n||!s)return;let a;return n.forEach((c,h)=>{s.forEach(g=>{c.getLeftChar().getValue()===g.getLeftChar().getValue()&&c.getRightChar().getValue()===g.getRightChar().getValue()&&c.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(a=!0)})}),a}}class Et extends zn{constructor(n){super(...arguments),this.pairs=new Array(Et.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,s,a){this.pairs.length=0,this.startFromEven=!1;try{return Et.constructResult(this.decodeRow2pairs(n,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,Et.constructResult(this.decodeRow2pairs(n,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(h){if(h instanceof nt){if(!this.pairs.length)throw new nt;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new nt}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return n&&(this.rows=this.rows.reverse()),s}checkRows(n,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let g of n)this.pairs.push(g.getPairs());if(this.pairs.push(c.getPairs()),!Et.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(n);h.push(c);try{return this.checkRows(h,a+1)}catch(g){this.verbose&&console.log(g)}}throw new nt}static isValidSequence(n){for(let s of Et.FINDER_PATTERN_SEQUENCES){if(n.length>s.length)continue;let a=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(n,s){let a=0,c=!1,h=!1;for(;a<this.rows.length;){let g=this.rows[a];if(g.getRowNumber()>n){h=g.isEquivalent(this.pairs);break}c=g.isEquivalent(this.pairs),a++}h||c||Et.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new _n(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,s){for(let a of s)if(a.getPairs().length!==n.length){for(let c of a.getPairs())for(let h of n)if($n.equals(c,h))break}}static isPartialRow(n,s){for(let a of s){let c=!0;for(let h of n){let g=!1;for(let y of a.getPairs())if(h.equals(y)){g=!0;break}if(!g){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let s=ws.buildBitArray(n),c=Ri(s).parseInformation(),h=n[0].getFinderPattern().getResultPoints(),g=n[n.length-1].getFinderPattern().getResultPoints(),y=[h[0],h[1],g[0],g[1]];return new Mt(c,null,null,y,Nt.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),s=n.getLeftChar(),a=n.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),h=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);c+=x.getLeftChar().getChecksumPortion(),h++;let w=x.getRightChar();w!=null&&(c+=w.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==s.getValue()}static getNextSecondBar(n,s){let a;return n.get(s)?(a=n.getNextUnset(s),a=n.getNextSet(a)):(a=n.getNextSet(s),a=n.getNextUnset(a)),a}retrieveNextPair(n,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let h,g=!0,y=-1;do this.findNextPair(n,s,y),h=this.parseFoundFinderPattern(n,a,c),h==null?y=Et.getNextSecondBar(n,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(n,h,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new nt;let w;try{w=this.decodeDataCharacter(n,h,c,!1)}catch(v){w=null,this.verbose&&console.log(v)}return new $n(x,w,h,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),g;a>=0?g=a:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<h&&(x=!n.get(g),!!x);)g++;let w=0,v=g;for(let D=g;D<h;D++)if(n.get(D)!=x)c[w]++;else{if(w==3){if(y&&Et.reverseCounters(c),Et.isFinderPattern(c)){this.startEnd[0]=v,this.startEnd[1]=D;return}y&&Et.reverseCounters(c),v+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,x=!x}throw new nt}static reverseCounters(n){let s=n.length;for(let a=0;a<s/2;++a){let c=n[a];n[a]=n[s-a-1],n[s-a-1]=c}}parseFoundFinderPattern(n,s,a){let c,h,g;if(a){let w=this.startEnd[0]-1;for(;w>=0&&!n.get(w);)w--;w++,c=this.startEnd[0]-w,h=w,g=this.startEnd[1]}else h=this.startEnd[0],g=n.getNextUnset(this.startEnd[1]+1),c=g-this.startEnd[1];let y=this.getDecodeFinderCounters();gt.arraycopy(y,0,y,1,y.length-1),y[0]=c;let x;try{x=this.parseFinderValue(y,Et.FINDER_PATTERNS)}catch{return null}return new Ir(x,[h,g],h,g,s)}decodeDataCharacter(n,s,a,c){let h=this.getDataCharacterCounters();for(let Je=0;Je<h.length;Je++)h[Je]=0;if(c)Et.recordPatternInReverse(n,s.getStartEnd()[0],h);else{Et.recordPattern(n,s.getStartEnd()[1],h);for(let Je=0,ti=h.length-1;Je<ti;Je++,ti--){let Yi=h[Je];h[Je]=h[ti],h[ti]=Yi}}let g=17,y=Wt.sum(new Int32Array(h))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new nt;let w=this.getOddCounts(),v=this.getEvenCounts(),D=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let Je=0;Je<h.length;Je++){let ti=1*h[Je]/y,Yi=ti+.5;if(Yi<1){if(ti<.3)throw new nt;Yi=1}else if(Yi>8){if(ti>8.7)throw new nt;Yi=8}let fa=Je/2;(Je&1)==0?(w[fa]=Yi,D[fa]=ti-Yi):(v[fa]=Yi,O[fa]=ti-Yi)}this.adjustOddEvenCounts(g);let F=4*s.getValue()+(a?0:2)+(c?0:1)-1,G=0,Q=0;for(let Je=w.length-1;Je>=0;Je--){if(Et.isNotA1left(s,a,c)){let ti=Et.WEIGHTS[F][2*Je];Q+=w[Je]*ti}G+=w[Je]}let tt=0;for(let Je=v.length-1;Je>=0;Je--)if(Et.isNotA1left(s,a,c)){let ti=Et.WEIGHTS[F][2*Je+1];tt+=v[Je]*ti}let ut=Q+tt;if((G&1)!=0||G>13||G<4)throw new nt;let vt=(13-G)/2,St=Et.SYMBOL_WIDEST[vt],_t=9-St,me=qi.getRSSvalue(w,St,!0),se=qi.getRSSvalue(v,_t,!1),Vn=Et.EVEN_TOTAL_SUBSET[vt],Ji=Et.GSUM[vt],_i=me*Vn+se+Ji;return new di(_i,ut)}static isNotA1left(n,s,a){return!(n.getValue()==0&&s&&a)}adjustOddEvenCounts(n){let s=Wt.sum(new Int32Array(this.getOddCounts())),a=Wt.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;s>13?h=!0:s<4&&(c=!0);let g=!1,y=!1;a>13?y=!0:a<4&&(g=!0);let x=s+a-n,w=(s&1)==1,v=(a&1)==0;if(x==1)if(w){if(v)throw new nt;h=!0}else{if(!v)throw new nt;y=!0}else if(x==-1)if(w){if(v)throw new nt;c=!0}else{if(!v)throw new nt;g=!0}else if(x==0){if(w){if(!v)throw new nt;s<a?(c=!0,y=!0):(h=!0,g=!0)}else if(v)throw new nt}else throw new nt;if(c){if(h)throw new nt;Et.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Et.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new nt;Et.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Et.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.SYMBOL_WIDEST=[7,5,4,3,1],Et.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Et.GSUM=[0,348,1388,2948,3988],Et.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Et.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Et.FINDER_PAT_A=0,Et.FINDER_PAT_B=1,Et.FINDER_PAT_C=2,Et.FINDER_PAT_D=3,Et.FINDER_PAT_E=4,Et.FINDER_PAT_F=5,Et.FINDER_PATTERN_SEQUENCES=[[Et.FINDER_PAT_A,Et.FINDER_PAT_A],[Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B],[Et.FINDER_PAT_A,Et.FINDER_PAT_C,Et.FINDER_PAT_B,Et.FINDER_PAT_D],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_C],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_D,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_D],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_E],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F]],Et.MAX_PAIRS=11;class Ja extends di{constructor(n,s,a){super(n,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ze extends zn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,s,a){const c=this.decodePair(s,!1,n,a);ze.addOrTally(this.possibleLeftPairs,c),s.reverse();let h=this.decodePair(s,!0,n,a);ze.addOrTally(this.possibleRightPairs,h),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&ze.checkChecksum(g,y))return ze.constructResult(g,y)}throw new nt}static addOrTally(n,s){if(s==null)return;let a=!1;for(let c of n)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||n.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,s){let a=4537077*n.getValue()+s.getValue(),c=new String(a).toString(),h=new j;for(let w=13-c.length;w>0;w--)h.append("0");h.append(c);let g=0;for(let w=0;w<13;w++){let v=h.charAt(w).charCodeAt(0)-48;g+=(w&1)===0?3*v:v}g=10-g%10,g===10&&(g=0),h.append(g.toString());let y=n.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new Mt(h.toString(),null,0,[y[0],y[1],x[0],x[1]],Nt.RSS_14,new Date().getTime())}static checkChecksum(n,s){let a=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(n,s,a,c){try{let h=this.findFinderPattern(n,s),g=this.parseFoundFinderPattern(n,a,s,h),y=c==null?null:c.get(Ht.NEED_RESULT_POINT_CALLBACK);if(y!=null){let v=(h[0]+h[1])/2;s&&(v=n.getSize()-1-v),y.foundPossibleResultPoint(new Bt(v,a))}let x=this.decodeDataCharacter(n,g,!0),w=this.decodeDataCharacter(n,g,!1);return new Ja(1597*x.getValue()+w.getValue(),x.getChecksumPortion()+4*w.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(n,s,a){let c=this.getDataCharacterCounters();for(let tt=0;tt<c.length;tt++)c[tt]=0;if(a)He.recordPatternInReverse(n,s.getStartEnd()[0],c);else{He.recordPattern(n,s.getStartEnd()[1]+1,c);for(let tt=0,ut=c.length-1;tt<ut;tt++,ut--){let vt=c[tt];c[tt]=c[ut],c[ut]=vt}}let h=a?16:15,g=Wt.sum(new Int32Array(c))/h,y=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let tt=0;tt<c.length;tt++){let ut=c[tt]/g,vt=Math.floor(ut+.5);vt<1?vt=1:vt>8&&(vt=8);let St=Math.floor(tt/2);(tt&1)===0?(y[St]=vt,w[St]=ut-vt):(x[St]=vt,v[St]=ut-vt)}this.adjustOddEvenCounts(a,h);let D=0,O=0;for(let tt=y.length-1;tt>=0;tt--)O*=9,O+=y[tt],D+=y[tt];let F=0,G=0;for(let tt=x.length-1;tt>=0;tt--)F*=9,F+=x[tt],G+=x[tt];let Q=O+3*F;if(a){if((D&1)!==0||D>12||D<4)throw new nt;let tt=(12-D)/2,ut=ze.OUTSIDE_ODD_WIDEST[tt],vt=9-ut,St=qi.getRSSvalue(y,ut,!1),_t=qi.getRSSvalue(x,vt,!0),me=ze.OUTSIDE_EVEN_TOTAL_SUBSET[tt],se=ze.OUTSIDE_GSUM[tt];return new di(St*me+_t+se,Q)}else{if((G&1)!==0||G>10||G<4)throw new nt;let tt=(10-G)/2,ut=ze.INSIDE_ODD_WIDEST[tt],vt=9-ut,St=qi.getRSSvalue(y,ut,!0),_t=qi.getRSSvalue(x,vt,!1),me=ze.INSIDE_ODD_TOTAL_SUBSET[tt],se=ze.INSIDE_GSUM[tt];return new di(_t*me+St+se,Q)}}findFinderPattern(n,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=n.getSize(),h=!1,g=0;for(;g<c&&(h=!n.get(g),s!==h);)g++;let y=0,x=g;for(let w=g;w<c;w++)if(n.get(w)!==h)a[y]++;else{if(y===3){if(zn.isFinderPattern(a))return[x,w];x+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,h=!h}throw new nt}parseFoundFinderPattern(n,s,a,c){let h=n.get(c[0]),g=c[0]-1;for(;g>=0&&h!==n.get(g);)g--;g++;const y=c[0]-g,x=this.getDecodeFinderCounters(),w=new Int32Array(x.length);gt.arraycopy(x,0,w,1,x.length-1),w[0]=y;const v=this.parseFinderValue(w,ze.FINDER_PATTERNS);let D=g,O=c[1];return a&&(D=n.getSize()-1-D,O=n.getSize()-1-O),new Ir(v,[g,c[1]],D,O,s)}adjustOddEvenCounts(n,s){let a=Wt.sum(new Int32Array(this.getOddCounts())),c=Wt.sum(new Int32Array(this.getEvenCounts())),h=!1,g=!1,y=!1,x=!1;n?(a>12?g=!0:a<4&&(h=!0),c>12?x=!0:c<4&&(y=!0)):(a>11?g=!0:a<5&&(h=!0),c>10?x=!0:c<4&&(y=!0));let w=a+c-s,v=(a&1)===(n?1:0),D=(c&1)===1;if(w===1)if(v){if(D)throw new nt;g=!0}else{if(!D)throw new nt;x=!0}else if(w===-1)if(v){if(D)throw new nt;h=!0}else{if(!D)throw new nt;y=!0}else if(w===0){if(v){if(!D)throw new nt;a<c?(h=!0,x=!0):(g=!0,y=!0)}else if(D)throw new nt}else throw new nt;if(h){if(g)throw new nt;zn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&zn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new nt;zn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&zn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ze.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ze.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ze.OUTSIDE_GSUM=[0,161,961,2015,2715],ze.INSIDE_GSUM=[0,336,1036,1516],ze.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ze.INSIDE_ODD_WIDEST=[2,4,6,8],ze.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ei extends He{constructor(n,s){super(),this.readers=[],this.verbose=s===!0;const a=n?n.get(Ht.POSSIBLE_FORMATS):null,c=n&&n.get(Ht.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Nt.EAN_13)||a.includes(Nt.UPC_A)||a.includes(Nt.EAN_8)||a.includes(Nt.UPC_E))&&this.readers.push(new Ka(n)),a.includes(Nt.CODE_39)&&this.readers.push(new Ge(c)),a.includes(Nt.CODE_128)&&this.readers.push(new Ct),a.includes(Nt.ITF)&&this.readers.push(new ne),a.includes(Nt.RSS_14)&&this.readers.push(new ze),a.includes(Nt.RSS_EXPANDED)&&this.readers.push(new Et(this.verbose))):(this.readers.push(new Ka(n)),this.readers.push(new Ge),this.readers.push(new Ka(n)),this.readers.push(new Ct),this.readers.push(new ne),this.readers.push(new ze),this.readers.push(new Et(this.verbose)))}decodeRow(n,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,s,a)}catch{}throw new nt}reset(){this.readers.forEach(n=>n.reset())}}class $a extends Dt{constructor(n=500,s){super(new Ei(s),n,s)}}class Ie{constructor(n,s,a){this.ecCodewords=n,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ce{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(n,s,a,c,h,g){this.versionNumber=n,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),w=g.getECBlocks();for(let v of w)y+=v.getCount()*(v.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,s){if((n&1)!==0||(s&1)!==0)throw new k;for(let a of ge.VERSIONS)if(a.symbolSizeRows===n&&a.symbolSizeColumns===s)return a;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new ge(1,10,10,8,8,new Ie(5,new Ce(1,3))),new ge(2,12,12,10,10,new Ie(7,new Ce(1,5))),new ge(3,14,14,12,12,new Ie(10,new Ce(1,8))),new ge(4,16,16,14,14,new Ie(12,new Ce(1,12))),new ge(5,18,18,16,16,new Ie(14,new Ce(1,18))),new ge(6,20,20,18,18,new Ie(18,new Ce(1,22))),new ge(7,22,22,20,20,new Ie(20,new Ce(1,30))),new ge(8,24,24,22,22,new Ie(24,new Ce(1,36))),new ge(9,26,26,24,24,new Ie(28,new Ce(1,44))),new ge(10,32,32,14,14,new Ie(36,new Ce(1,62))),new ge(11,36,36,16,16,new Ie(42,new Ce(1,86))),new ge(12,40,40,18,18,new Ie(48,new Ce(1,114))),new ge(13,44,44,20,20,new Ie(56,new Ce(1,144))),new ge(14,48,48,22,22,new Ie(68,new Ce(1,174))),new ge(15,52,52,24,24,new Ie(42,new Ce(2,102))),new ge(16,64,64,14,14,new Ie(56,new Ce(2,140))),new ge(17,72,72,16,16,new Ie(36,new Ce(4,92))),new ge(18,80,80,18,18,new Ie(48,new Ce(4,114))),new ge(19,88,88,20,20,new Ie(56,new Ce(4,144))),new ge(20,96,96,22,22,new Ie(68,new Ce(4,174))),new ge(21,104,104,24,24,new Ie(56,new Ce(6,136))),new ge(22,120,120,18,18,new Ie(68,new Ce(6,175))),new ge(23,132,132,20,20,new Ie(62,new Ce(8,163))),new ge(24,144,144,22,22,new Ie(62,new Ce(8,156),new Ce(2,155))),new ge(25,8,18,6,16,new Ie(7,new Ce(1,5))),new ge(26,8,32,6,14,new Ie(11,new Ce(1,10))),new ge(27,12,26,10,24,new Ie(14,new Ce(1,16))),new ge(28,12,36,10,16,new Ie(18,new Ce(1,22))),new ge(29,16,36,14,16,new Ie(24,new Ce(1,32))),new ge(30,16,48,14,22,new Ie(28,new Ce(1,49)))]}}ge.VERSIONS=ge.buildVersions();class rs{constructor(n){const s=n.getHeight();if(s<8||s>144||(s&1)!==0)throw new k;this.version=rs.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Pt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const s=n.getHeight(),a=n.getWidth();return ge.getVersionForDimensions(s,a)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const h=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,w=!1,v=!1;do if(a===h&&c===0&&!y)n[s++]=this.readCorner1(h,g)&255,a-=2,c+=2,y=!0;else if(a===h-2&&c===0&&(g&3)!==0&&!x)n[s++]=this.readCorner2(h,g)&255,a-=2,c+=2,x=!0;else if(a===h+4&&c===2&&(g&7)===0&&!w)n[s++]=this.readCorner3(h,g)&255,a-=2,c+=2,w=!0;else if(a===h-2&&c===0&&(g&7)===4&&!v)n[s++]=this.readCorner4(h,g)&255,a-=2,c+=2,v=!0;else{do a<h&&c>=0&&!this.readMappingMatrix.get(c,a)&&(n[s++]=this.readUtah(a,c,h,g)&255),a-=2,c+=2;while(a>=0&&c<g);a+=1,c+=3;do a>=0&&c<g&&!this.readMappingMatrix.get(c,a)&&(n[s++]=this.readUtah(a,c,h,g)&255),a+=2,c-=2;while(a<h&&c>=0);a+=3,c+=1}while(a<h||c<g);if(s!==this.version.getTotalCodewords())throw new k;return n}readModule(n,s,a,c){return n<0&&(n+=a,s+=4-(a+4&7)),s<0&&(s+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(s,n),this.mappingBitMatrix.get(s,n)}readUtah(n,s,a,c){let h=0;return this.readModule(n-2,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n-2,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s,a,c)&&(h|=1),h<<=1,this.readModule(n,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n,s,a,c)&&(h|=1),h}readCorner1(n,s){let a=0;return this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,1,n,s)&&(a|=1),a<<=1,this.readModule(n-1,2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(2,s-1,n,s)&&(a|=1),a<<=1,this.readModule(3,s-1,n,s)&&(a|=1),a}readCorner2(n,s){let a=0;return this.readModule(n-3,0,n,s)&&(a|=1),a<<=1,this.readModule(n-2,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(0,s-4,n,s)&&(a|=1),a<<=1,this.readModule(0,s-3,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a}readCorner3(n,s){let a=0;return this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(0,s-3,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-3,n,s)&&(a|=1),a<<=1,this.readModule(1,s-2,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a}readCorner4(n,s){let a=0;return this.readModule(n-3,0,n,s)&&(a|=1),a<<=1,this.readModule(n-2,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(2,s-1,n,s)&&(a|=1),a<<=1,this.readModule(3,s-1,n,s)&&(a|=1),a}extractDataRegion(n){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(n.getHeight()!==s)throw new L("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),g=s/c|0,y=a/h|0,x=g*c,w=y*h,v=new Pt(w,x);for(let D=0;D<g;++D){const O=D*c;for(let F=0;F<y;++F){const G=F*h;for(let Q=0;Q<c;++Q){const tt=D*(c+2)+1+Q,ut=O+Q;for(let vt=0;vt<h;++vt){const St=F*(h+2)+1+vt;if(n.get(St,tt)){const _t=G+vt;v.set(_t,ut)}}}}}return v}}class xi{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s){const a=s.getECBlocks();let c=0;const h=a.getECBlocks();for(let Q of h)c+=Q.getCount();const g=new Array(c);let y=0;for(let Q of h)for(let tt=0;tt<Q.getCount();tt++){const ut=Q.getDataCodewords(),vt=a.getECCodewords()+ut;g[y++]=new xi(ut,new Uint8Array(vt))}const w=g[0].codewords.length-a.getECCodewords(),v=w-1;let D=0;for(let Q=0;Q<v;Q++)for(let tt=0;tt<y;tt++)g[tt].codewords[Q]=n[D++];const O=s.getVersionNumber()===24,F=O?8:y;for(let Q=0;Q<F;Q++)g[Q].codewords[w-1]=n[D++];const G=g[0].codewords.length;for(let Q=w;Q<G;Q++)for(let tt=0;tt<y;tt++){const ut=O?(tt+8)%y:tt,vt=O&&ut>7?Q-1:Q;g[ut].codewords[vt]=n[D++]}if(D!==n.length)throw new L;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wn{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new L(""+n);let s=0,a=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(a>0){const g=8-a,y=n<g?n:g,x=g-y,w=255>>8-y<<x;s=(h[c]&w)>>x,n-=y,a+=y,a===8&&(a=0,c++)}if(n>0){for(;n>=8;)s=s<<8|h[c]&255,c++,n-=8;if(n>0){const g=8-n,y=255>>g<<g;s=s<<n|(h[c]&y)>>g,a+=n}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var _e;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(_e||(_e={}));class Ai{static decode(n){const s=new wn(n),a=new j,c=new j,h=new Array;let g=_e.ASCII_ENCODE;do if(g===_e.ASCII_ENCODE)g=this.decodeAsciiSegment(s,a,c);else{switch(g){case _e.C40_ENCODE:this.decodeC40Segment(s,a);break;case _e.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case _e.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case _e.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case _e.BASE256_ENCODE:this.decodeBase256Segment(s,a,h);break;default:throw new k}g=_e.ASCII_ENCODE}while(g!==_e.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Ze(n,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(n,s,a){let c=!1;do{let h=n.readBits(8);if(h===0)throw new k;if(h<=128)return c&&(h+=128),s.append(String.fromCharCode(h-1)),_e.ASCII_ENCODE;if(h===129)return _e.PAD_ENCODE;if(h<=229){const g=h-130;g<10&&s.append("0"),s.append(""+g)}else switch(h){case 230:return _e.C40_ENCODE;case 231:return _e.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return _e.ANSIX12_ENCODE;case 239:return _e.TEXT_ENCODE;case 240:return _e.EDIFACT_ENCODE;case 241:break;default:if(h!==254||n.available()!==0)throw new k;break}}while(n.available()>0);return _e.ASCII_ENCODE}static decodeC40Segment(n,s){let a=!1;const c=[];let h=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),c);for(let y=0;y<3;y++){const x=c[y];switch(h){case 0:if(x<3)h=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[x];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new k;break;case 1:a?(s.append(String.fromCharCode(x+128)),a=!1):s.append(String.fromCharCode(x)),h=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[x];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(x){case 27:s.append("");break;case 30:a=!0;break;default:throw new k}h=0;break;case 3:a?(s.append(String.fromCharCode(x+224)),a=!1):s.append(String.fromCharCode(x+96)),h=0;break;default:throw new k}}}while(n.available()>0)}static decodeTextSegment(n,s){let a=!1,c=[],h=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),c);for(let y=0;y<3;y++){const x=c[y];switch(h){case 0:if(x<3)h=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[x];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new k;break;case 1:a?(s.append(String.fromCharCode(x+128)),a=!1):s.append(String.fromCharCode(x)),h=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[x];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(x){case 27:s.append("");break;case 30:a=!0;break;default:throw new k}h=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[x];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w),h=0}else throw new k;break;default:throw new k}}}while(n.available()>0)}static decodeAnsiX12Segment(n,s){const a=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let h=0;h<3;h++){const g=a[h];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new k;break}}}while(n.available()>0)}static parseTwoBytes(n,s,a){let c=(n<<8)+s-1,h=Math.floor(c/1600);a[0]=h,c-=h*1600,h=Math.floor(c/40),a[1]=h,a[2]=c-h*40}static decodeEdifactSegment(n,s){do{if(n.available()<=16)return;for(let a=0;a<4;a++){let c=n.readBits(6);if(c===31){const h=8-n.getBitOffset();h!==8&&n.readBits(h);return}(c&32)===0&&(c|=64),s.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,s,a){let c=1+n.getByteOffset();const h=this.unrandomize255State(n.readBits(8),c++);let g;if(h===0?g=n.available()/8|0:h<250?g=h:g=250*(h-249)+this.unrandomize255State(n.readBits(8),c++),g<0)throw new k;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(n.available()<8)throw new k;y[x]=this.unrandomize255State(n.readBits(8),c++)}a.push(y);try{s.append(q.decode(y,Y.ISO88591))}catch(x){throw new Ni("Platform does not support required encoding: "+x.message)}}static unrandomize255State(n,s){const a=149*s%255+1,c=n-a;return c>=0?c:c+256}}Ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ai.TEXT_SHIFT2_SET_CHARS=Ai.C40_SHIFT2_SET_CHARS,Ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class to{constructor(){this.rsDecoder=new ar(Ae.DATA_MATRIX_FIELD_256)}decode(n){const s=new rs(n),a=s.getVersion(),c=s.readCodewords(),h=xi.getDataBlocks(c,a);let g=0;for(let w of h)g+=w.getNumDataCodewords();const y=new Uint8Array(g),x=h.length;for(let w=0;w<x;w++){const v=h[w],D=v.getCodewords(),O=v.getNumDataCodewords();this.correctErrors(D,O);for(let F=0;F<O;F++)y[F*x+w]=D[F]}return Ai.decode(y)}correctErrors(n,s){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-s)}catch{throw new et}for(let c=0;c<s;c++)n[c]=a[c]}}class $t{constructor(n){this.image=n,this.rectangleDetector=new dn(this.image)}detect(){const n=this.rectangleDetector.detect();let s=this.detectSolid1(n);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new nt;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],h=s[2],g=s[3];let y=this.transitionsBetween(a,g)+1,x=this.transitionsBetween(h,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let w=$t.sampleGrid(this.image,a,c,h,g,y,x);return new na(w,[a,c,h,g])}static shiftPoint(n,s,a){let c=(s.getX()-n.getX())/(a+1),h=(s.getY()-n.getY())/(a+1);return new Bt(n.getX()+c,n.getY()+h)}static moveAway(n,s,a){let c=n.getX(),h=n.getY();return c<s?c-=1:c+=1,h<a?h-=1:h+=1,new Bt(c,h)}detectSolid1(n){let s=n[0],a=n[1],c=n[3],h=n[2],g=this.transitionsBetween(s,a),y=this.transitionsBetween(a,c),x=this.transitionsBetween(c,h),w=this.transitionsBetween(h,s),v=g,D=[h,s,a,c];return v>y&&(v=y,D[0]=s,D[1]=a,D[2]=c,D[3]=h),v>x&&(v=x,D[0]=a,D[1]=c,D[2]=h,D[3]=s),v>w&&(D[0]=c,D[1]=h,D[2]=s,D[3]=a),D}detectSolid2(n){let s=n[0],a=n[1],c=n[2],h=n[3],g=this.transitionsBetween(s,h),y=$t.shiftPoint(a,c,(g+1)*4),x=$t.shiftPoint(c,a,(g+1)*4),w=this.transitionsBetween(y,s),v=this.transitionsBetween(x,h);return w<v?(n[0]=s,n[1]=a,n[2]=c,n[3]=h):(n[0]=a,n[1]=c,n[2]=h,n[3]=s),n}correctTopRight(n){let s=n[0],a=n[1],c=n[2],h=n[3],g=this.transitionsBetween(s,h),y=this.transitionsBetween(a,h),x=$t.shiftPoint(s,a,(y+1)*4),w=$t.shiftPoint(c,a,(g+1)*4);g=this.transitionsBetween(x,h),y=this.transitionsBetween(w,h);let v=new Bt(h.getX()+(c.getX()-a.getX())/(g+1),h.getY()+(c.getY()-a.getY())/(g+1)),D=new Bt(h.getX()+(s.getX()-a.getX())/(y+1),h.getY()+(s.getY()-a.getY())/(y+1));if(!this.isValid(v))return this.isValid(D)?D:null;if(!this.isValid(D))return v;let O=this.transitionsBetween(x,v)+this.transitionsBetween(w,v),F=this.transitionsBetween(x,D)+this.transitionsBetween(w,D);return O>F?v:D}shiftToModuleCenter(n){let s=n[0],a=n[1],c=n[2],h=n[3],g=this.transitionsBetween(s,h)+1,y=this.transitionsBetween(c,h)+1,x=$t.shiftPoint(s,a,y*4),w=$t.shiftPoint(c,a,g*4);g=this.transitionsBetween(x,h)+1,y=this.transitionsBetween(w,h)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let v=(s.getX()+a.getX()+c.getX()+h.getX())/4,D=(s.getY()+a.getY()+c.getY()+h.getY())/4;s=$t.moveAway(s,v,D),a=$t.moveAway(a,v,D),c=$t.moveAway(c,v,D),h=$t.moveAway(h,v,D);let O,F;return x=$t.shiftPoint(s,a,y*4),x=$t.shiftPoint(x,h,g*4),O=$t.shiftPoint(a,s,y*4),O=$t.shiftPoint(O,c,g*4),w=$t.shiftPoint(c,h,y*4),w=$t.shiftPoint(w,a,g*4),F=$t.shiftPoint(h,c,y*4),F=$t.shiftPoint(F,s,g*4),[x,O,w,F]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,s,a,c,h,g,y){return fi.getInstance().sampleGrid(n,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),h.getX(),h.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(n,s){let a=Math.trunc(n.getX()),c=Math.trunc(n.getY()),h=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-c)>Math.abs(h-a);if(y){let Q=a;a=c,c=Q,Q=h,h=g,g=Q}let x=Math.abs(h-a),w=Math.abs(g-c),v=-x/2,D=c<g?1:-1,O=a<h?1:-1,F=0,G=this.image.get(y?c:a,y?a:c);for(let Q=a,tt=c;Q!==h;Q+=O){let ut=this.image.get(y?tt:Q,y?Q:tt);if(ut!==G&&(F++,G=ut),v+=w,v>0){if(tt===g)break;tt+=D,v-=x}}return F}}class Di{constructor(){this.decoder=new to}decode(n,s=null){let a,c;if(s!=null&&s.has(Ht.PURE_BARCODE)){const w=Di.extractPureBits(n.getBlackMatrix());a=this.decoder.decode(w),c=Di.NO_POINTS}else{const w=new $t(n.getBlackMatrix()).detect();a=this.decoder.decode(w.getBits()),c=w.getPoints()}const h=a.getRawBytes(),g=new Mt(a.getText(),h,8*h.length,c,Nt.DATA_MATRIX,gt.currentTimeMillis()),y=a.getByteSegments();y!=null&&g.putMetadata(xe.BYTE_SEGMENTS,y);const x=a.getECLevel();return x!=null&&g.putMetadata(xe.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(s==null||a==null)throw new nt;const c=this.moduleSize(s,n);let h=s[1];const g=a[1];let y=s[0];const w=(a[0]-y+1)/c,v=(g-h+1)/c;if(w<=0||v<=0)throw new nt;const D=c/2;h+=D,y+=D;const O=new Pt(w,v);for(let F=0;F<v;F++){const G=h+F*c;for(let Q=0;Q<w;Q++)n.get(y+Q*c,G)&&O.set(Q,F)}return O}static moduleSize(n,s){const a=s.getWidth();let c=n[0];const h=n[1];for(;c<a&&s.get(c,h);)c++;if(c===a)throw new nt;const g=c-n[0];if(g===0)throw new nt;return g}}Di.NO_POINTS=[];class Rr extends Dt{constructor(n=500){super(new Di,n)}}var Qi;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(Qi||(Qi={}));class fe{constructor(n,s,a){this.value=n,this.stringValue=s,this.bits=a,fe.FOR_BITS.set(a,this),fe.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return fe.L;case"M":return fe.M;case"Q":return fe.Q;case"H":return fe.H;default:throw new M(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof fe))return!1;const s=n;return this.value===s.value}static forBits(n){if(n<0||n>=fe.FOR_BITS.size)throw new L;return fe.FOR_BITS.get(n)}}fe.FOR_BITS=new Map,fe.FOR_VALUE=new Map,fe.L=new fe(Qi.L,"L",1),fe.M=new fe(Qi.M,"M",0),fe.Q=new fe(Qi.Q,"Q",3),fe.H=new fe(Qi.H,"H",2);class Nn{constructor(n){this.errorCorrectionLevel=fe.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,s){return bt.bitCount(n^s)}static decodeFormatInformation(n,s){const a=Nn.doDecodeFormatInformation(n,s);return a!==null?a:Nn.doDecodeFormatInformation(n^Nn.FORMAT_INFO_MASK_QR,s^Nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const h of Nn.FORMAT_INFO_DECODE_LOOKUP){const g=h[0];if(g===n||g===s)return new Nn(h[1]);let y=Nn.numBitsDiffering(n,g);y<a&&(c=h[1],a=y),n!==s&&(y=Nn.numBitsDiffering(s,g),y<a&&(c=h[1],a=y))}return a<=3?new Nn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Nn))return!1;const s=n;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Nn.FORMAT_INFO_MASK_QR=21522,Nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class it{constructor(n,...s){this.ecCodewordsPerBlock=n,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const s=this.ecBlocks;for(const a of s)n+=a.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ut{constructor(n,s,...a){this.versionNumber=n,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const h=a[0].getECCodewordsPerBlock(),g=a[0].getECBlocks();for(const y of g)c+=y.getCount()*(y.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new k;try{return this.getVersionForNumber((n-17)/4)}catch{throw new k}}static getVersionForNumber(n){if(n<1||n>40)throw new L;return Ut.VERSIONS[n-1]}static decodeVersionInformation(n){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Ut.VERSION_DECODE_INFO.length;c++){const h=Ut.VERSION_DECODE_INFO[c];if(h===n)return Ut.getVersionForNumber(c+7);const g=Nn.numBitsDiffering(n,h);g<s&&(a=c+7,s=g)}return s<=3?Ut.getVersionForNumber(a):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),s=new Pt(n);s.setRegion(0,0,9,9),s.setRegion(n-8,0,8,9),s.setRegion(0,n-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const h=this.alignmentPatternCenters[c]-2;for(let g=0;g<a;g++)c===0&&(g===0||g===a-1)||c===a-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,h,5,5)}return s.setRegion(6,9,1,n-17),s.setRegion(9,6,n-17,1),this.versionNumber>6&&(s.setRegion(n-11,0,3,6),s.setRegion(0,n-11,6,3)),s}toString(){return""+this.versionNumber}}Ut.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ut.VERSIONS=[new Ut(1,new Int32Array(0),new it(7,new U(1,19)),new it(10,new U(1,16)),new it(13,new U(1,13)),new it(17,new U(1,9))),new Ut(2,Int32Array.from([6,18]),new it(10,new U(1,34)),new it(16,new U(1,28)),new it(22,new U(1,22)),new it(28,new U(1,16))),new Ut(3,Int32Array.from([6,22]),new it(15,new U(1,55)),new it(26,new U(1,44)),new it(18,new U(2,17)),new it(22,new U(2,13))),new Ut(4,Int32Array.from([6,26]),new it(20,new U(1,80)),new it(18,new U(2,32)),new it(26,new U(2,24)),new it(16,new U(4,9))),new Ut(5,Int32Array.from([6,30]),new it(26,new U(1,108)),new it(24,new U(2,43)),new it(18,new U(2,15),new U(2,16)),new it(22,new U(2,11),new U(2,12))),new Ut(6,Int32Array.from([6,34]),new it(18,new U(2,68)),new it(16,new U(4,27)),new it(24,new U(4,19)),new it(28,new U(4,15))),new Ut(7,Int32Array.from([6,22,38]),new it(20,new U(2,78)),new it(18,new U(4,31)),new it(18,new U(2,14),new U(4,15)),new it(26,new U(4,13),new U(1,14))),new Ut(8,Int32Array.from([6,24,42]),new it(24,new U(2,97)),new it(22,new U(2,38),new U(2,39)),new it(22,new U(4,18),new U(2,19)),new it(26,new U(4,14),new U(2,15))),new Ut(9,Int32Array.from([6,26,46]),new it(30,new U(2,116)),new it(22,new U(3,36),new U(2,37)),new it(20,new U(4,16),new U(4,17)),new it(24,new U(4,12),new U(4,13))),new Ut(10,Int32Array.from([6,28,50]),new it(18,new U(2,68),new U(2,69)),new it(26,new U(4,43),new U(1,44)),new it(24,new U(6,19),new U(2,20)),new it(28,new U(6,15),new U(2,16))),new Ut(11,Int32Array.from([6,30,54]),new it(20,new U(4,81)),new it(30,new U(1,50),new U(4,51)),new it(28,new U(4,22),new U(4,23)),new it(24,new U(3,12),new U(8,13))),new Ut(12,Int32Array.from([6,32,58]),new it(24,new U(2,92),new U(2,93)),new it(22,new U(6,36),new U(2,37)),new it(26,new U(4,20),new U(6,21)),new it(28,new U(7,14),new U(4,15))),new Ut(13,Int32Array.from([6,34,62]),new it(26,new U(4,107)),new it(22,new U(8,37),new U(1,38)),new it(24,new U(8,20),new U(4,21)),new it(22,new U(12,11),new U(4,12))),new Ut(14,Int32Array.from([6,26,46,66]),new it(30,new U(3,115),new U(1,116)),new it(24,new U(4,40),new U(5,41)),new it(20,new U(11,16),new U(5,17)),new it(24,new U(11,12),new U(5,13))),new Ut(15,Int32Array.from([6,26,48,70]),new it(22,new U(5,87),new U(1,88)),new it(24,new U(5,41),new U(5,42)),new it(30,new U(5,24),new U(7,25)),new it(24,new U(11,12),new U(7,13))),new Ut(16,Int32Array.from([6,26,50,74]),new it(24,new U(5,98),new U(1,99)),new it(28,new U(7,45),new U(3,46)),new it(24,new U(15,19),new U(2,20)),new it(30,new U(3,15),new U(13,16))),new Ut(17,Int32Array.from([6,30,54,78]),new it(28,new U(1,107),new U(5,108)),new it(28,new U(10,46),new U(1,47)),new it(28,new U(1,22),new U(15,23)),new it(28,new U(2,14),new U(17,15))),new Ut(18,Int32Array.from([6,30,56,82]),new it(30,new U(5,120),new U(1,121)),new it(26,new U(9,43),new U(4,44)),new it(28,new U(17,22),new U(1,23)),new it(28,new U(2,14),new U(19,15))),new Ut(19,Int32Array.from([6,30,58,86]),new it(28,new U(3,113),new U(4,114)),new it(26,new U(3,44),new U(11,45)),new it(26,new U(17,21),new U(4,22)),new it(26,new U(9,13),new U(16,14))),new Ut(20,Int32Array.from([6,34,62,90]),new it(28,new U(3,107),new U(5,108)),new it(26,new U(3,41),new U(13,42)),new it(30,new U(15,24),new U(5,25)),new it(28,new U(15,15),new U(10,16))),new Ut(21,Int32Array.from([6,28,50,72,94]),new it(28,new U(4,116),new U(4,117)),new it(26,new U(17,42)),new it(28,new U(17,22),new U(6,23)),new it(30,new U(19,16),new U(6,17))),new Ut(22,Int32Array.from([6,26,50,74,98]),new it(28,new U(2,111),new U(7,112)),new it(28,new U(17,46)),new it(30,new U(7,24),new U(16,25)),new it(24,new U(34,13))),new Ut(23,Int32Array.from([6,30,54,78,102]),new it(30,new U(4,121),new U(5,122)),new it(28,new U(4,47),new U(14,48)),new it(30,new U(11,24),new U(14,25)),new it(30,new U(16,15),new U(14,16))),new Ut(24,Int32Array.from([6,28,54,80,106]),new it(30,new U(6,117),new U(4,118)),new it(28,new U(6,45),new U(14,46)),new it(30,new U(11,24),new U(16,25)),new it(30,new U(30,16),new U(2,17))),new Ut(25,Int32Array.from([6,32,58,84,110]),new it(26,new U(8,106),new U(4,107)),new it(28,new U(8,47),new U(13,48)),new it(30,new U(7,24),new U(22,25)),new it(30,new U(22,15),new U(13,16))),new Ut(26,Int32Array.from([6,30,58,86,114]),new it(28,new U(10,114),new U(2,115)),new it(28,new U(19,46),new U(4,47)),new it(28,new U(28,22),new U(6,23)),new it(30,new U(33,16),new U(4,17))),new Ut(27,Int32Array.from([6,34,62,90,118]),new it(30,new U(8,122),new U(4,123)),new it(28,new U(22,45),new U(3,46)),new it(30,new U(8,23),new U(26,24)),new it(30,new U(12,15),new U(28,16))),new Ut(28,Int32Array.from([6,26,50,74,98,122]),new it(30,new U(3,117),new U(10,118)),new it(28,new U(3,45),new U(23,46)),new it(30,new U(4,24),new U(31,25)),new it(30,new U(11,15),new U(31,16))),new Ut(29,Int32Array.from([6,30,54,78,102,126]),new it(30,new U(7,116),new U(7,117)),new it(28,new U(21,45),new U(7,46)),new it(30,new U(1,23),new U(37,24)),new it(30,new U(19,15),new U(26,16))),new Ut(30,Int32Array.from([6,26,52,78,104,130]),new it(30,new U(5,115),new U(10,116)),new it(28,new U(19,47),new U(10,48)),new it(30,new U(15,24),new U(25,25)),new it(30,new U(23,15),new U(25,16))),new Ut(31,Int32Array.from([6,30,56,82,108,134]),new it(30,new U(13,115),new U(3,116)),new it(28,new U(2,46),new U(29,47)),new it(30,new U(42,24),new U(1,25)),new it(30,new U(23,15),new U(28,16))),new Ut(32,Int32Array.from([6,34,60,86,112,138]),new it(30,new U(17,115)),new it(28,new U(10,46),new U(23,47)),new it(30,new U(10,24),new U(35,25)),new it(30,new U(19,15),new U(35,16))),new Ut(33,Int32Array.from([6,30,58,86,114,142]),new it(30,new U(17,115),new U(1,116)),new it(28,new U(14,46),new U(21,47)),new it(30,new U(29,24),new U(19,25)),new it(30,new U(11,15),new U(46,16))),new Ut(34,Int32Array.from([6,34,62,90,118,146]),new it(30,new U(13,115),new U(6,116)),new it(28,new U(14,46),new U(23,47)),new it(30,new U(44,24),new U(7,25)),new it(30,new U(59,16),new U(1,17))),new Ut(35,Int32Array.from([6,30,54,78,102,126,150]),new it(30,new U(12,121),new U(7,122)),new it(28,new U(12,47),new U(26,48)),new it(30,new U(39,24),new U(14,25)),new it(30,new U(22,15),new U(41,16))),new Ut(36,Int32Array.from([6,24,50,76,102,128,154]),new it(30,new U(6,121),new U(14,122)),new it(28,new U(6,47),new U(34,48)),new it(30,new U(46,24),new U(10,25)),new it(30,new U(2,15),new U(64,16))),new Ut(37,Int32Array.from([6,28,54,80,106,132,158]),new it(30,new U(17,122),new U(4,123)),new it(28,new U(29,46),new U(14,47)),new it(30,new U(49,24),new U(10,25)),new it(30,new U(24,15),new U(46,16))),new Ut(38,Int32Array.from([6,32,58,84,110,136,162]),new it(30,new U(4,122),new U(18,123)),new it(28,new U(13,46),new U(32,47)),new it(30,new U(48,24),new U(14,25)),new it(30,new U(42,15),new U(32,16))),new Ut(39,Int32Array.from([6,26,54,82,110,138,166]),new it(30,new U(20,117),new U(4,118)),new it(28,new U(40,47),new U(7,48)),new it(30,new U(43,24),new U(22,25)),new it(30,new U(10,15),new U(67,16))),new Ut(40,Int32Array.from([6,30,58,86,114,142,170]),new it(30,new U(19,118),new U(6,119)),new it(28,new U(18,47),new U(31,48)),new it(30,new U(34,24),new U(34,25)),new it(30,new U(20,15),new U(61,16)))];var Rn;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class jn{constructor(n,s){this.value=n,this.isMasked=s}unmaskBitMatrix(n,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&n.flip(c,a)}}jn.values=new Map([[Rn.DATA_MASK_000,new jn(Rn.DATA_MASK_000,(R,n)=>(R+n&1)===0)],[Rn.DATA_MASK_001,new jn(Rn.DATA_MASK_001,(R,n)=>(R&1)===0)],[Rn.DATA_MASK_010,new jn(Rn.DATA_MASK_010,(R,n)=>n%3===0)],[Rn.DATA_MASK_011,new jn(Rn.DATA_MASK_011,(R,n)=>(R+n)%3===0)],[Rn.DATA_MASK_100,new jn(Rn.DATA_MASK_100,(R,n)=>(Math.floor(R/2)+Math.floor(n/3)&1)===0)],[Rn.DATA_MASK_101,new jn(Rn.DATA_MASK_101,(R,n)=>R*n%6===0)],[Rn.DATA_MASK_110,new jn(Rn.DATA_MASK_110,(R,n)=>R*n%6<3)],[Rn.DATA_MASK_111,new jn(Rn.DATA_MASK_111,(R,n)=>(R+n+R*n%3&1)===0)]]);class Mi{constructor(n){const s=n.getHeight();if(s<21||(s&3)!==1)throw new k;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let h=0;h<6;h++)n=this.copyBit(h,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let h=5;h>=0;h--)n=this.copyBit(8,h,n);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let h=s-1;h>=c;h--)a=this.copyBit(8,h,a);for(let h=s-8;h<s;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=Nn.decodeFormatInformation(n,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),s=Math.floor((n-17)/4);if(s<=6)return Ut.getVersionForNumber(s);let a=0;const c=n-11;for(let g=5;g>=0;g--)for(let y=n-9;y>=c;y--)a=this.copyBit(y,g,a);let h=Ut.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;a=0;for(let g=5;g>=0;g--)for(let y=n-9;y>=c;y--)a=this.copyBit(g,y,a);if(h=Ut.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;throw new k}copyBit(n,s,a){return(this.isMirror?this.bitMatrix.get(s,n):this.bitMatrix.get(n,s))?a<<1|1:a<<1}readCodewords(){const n=this.readFormatInformation(),s=this.readVersion(),a=jn.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const h=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,w=0,v=0;for(let D=c-1;D>0;D-=2){D===6&&D--;for(let O=0;O<c;O++){const F=g?c-1-O:O;for(let G=0;G<2;G++)h.get(D-G,F)||(v++,w<<=1,this.bitMatrix.get(D-G,F)&&(w|=1),v===8&&(y[x++]=w,v=0,w=0))}g=!g}if(x!==s.getTotalCodewords())throw new k;return y}remask(){if(this.parsedFormatInfo===null)return;const n=jn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,s)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let s=0,a=n.getWidth();s<a;s++)for(let c=s+1,h=n.getHeight();c<h;c++)n.get(s,c)!==n.get(c,s)&&(n.flip(c,s),n.flip(s,c))}}class aa{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s,a){if(n.length!==s.getTotalCodewords())throw new L;const c=s.getECBlocksForLevel(a);let h=0;const g=c.getECBlocks();for(const G of g)h+=G.getCount();const y=new Array(h);let x=0;for(const G of g)for(let Q=0;Q<G.getCount();Q++){const tt=G.getDataCodewords(),ut=c.getECCodewordsPerBlock()+tt;y[x++]=new aa(tt,new Uint8Array(ut))}const w=y[0].codewords.length;let v=y.length-1;for(;v>=0&&y[v].codewords.length!==w;)v--;v++;const D=w-c.getECCodewordsPerBlock();let O=0;for(let G=0;G<D;G++)for(let Q=0;Q<x;Q++)y[Q].codewords[G]=n[O++];for(let G=v;G<x;G++)y[G].codewords[D]=n[O++];const F=y[0].codewords.length;for(let G=D;G<F;G++)for(let Q=0;Q<x;Q++){const tt=Q<v?G:G+1;y[Q].codewords[tt]=n[O++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var si;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(si||(si={}));class Xt{constructor(n,s,a,c){this.value=n,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Xt.FOR_BITS.set(c,this),Xt.FOR_VALUE.set(n,this)}static forBits(n){const s=Xt.FOR_BITS.get(n);if(s===void 0)throw new L;return s}getCharacterCountBits(n){const s=n.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Xt))return!1;const s=n;return this.value===s.value}toString(){return this.stringValue}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.TERMINATOR=new Xt(si.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xt.NUMERIC=new Xt(si.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xt.ALPHANUMERIC=new Xt(si.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xt.STRUCTURED_APPEND=new Xt(si.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xt.BYTE=new Xt(si.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xt.ECI=new Xt(si.ECI,"ECI",Int32Array.from([0,0,0]),7),Xt.KANJI=new Xt(si.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xt.FNC1_FIRST_POSITION=new Xt(si.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xt.FNC1_SECOND_POSITION=new Xt(si.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xt.HANZI=new Xt(si.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class We{static decode(n,s,a,c){const h=new wn(n);let g=new j;const y=new Array;let x=-1,w=-1;try{let v=null,D=!1,O;do{if(h.available()<4)O=Xt.TERMINATOR;else{const F=h.readBits(4);O=Xt.forBits(F)}switch(O){case Xt.TERMINATOR:break;case Xt.FNC1_FIRST_POSITION:case Xt.FNC1_SECOND_POSITION:D=!0;break;case Xt.STRUCTURED_APPEND:if(h.available()<16)throw new k;x=h.readBits(8),w=h.readBits(8);break;case Xt.ECI:const F=We.parseECIValue(h);if(v=P.getCharacterSetECIByValue(F),v===null)throw new k;break;case Xt.HANZI:const G=h.readBits(4),Q=h.readBits(O.getCharacterCountBits(s));G===We.GB2312_SUBSET&&We.decodeHanziSegment(h,g,Q);break;default:const tt=h.readBits(O.getCharacterCountBits(s));switch(O){case Xt.NUMERIC:We.decodeNumericSegment(h,g,tt);break;case Xt.ALPHANUMERIC:We.decodeAlphanumericSegment(h,g,tt,D);break;case Xt.BYTE:We.decodeByteSegment(h,g,tt,v,y,c);break;case Xt.KANJI:We.decodeKanjiSegment(h,g,tt);break;default:throw new k}break}}while(O!==Xt.TERMINATOR)}catch{throw new k}return new Ze(n,g.toString(),y.length===0?null:y,a===null?null:a.toString(),x,w)}static decodeHanziSegment(n,s,a){if(a*13>n.available())throw new k;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const g=n.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,c[h]=y>>8&255,c[h+1]=y&255,h+=2,a--}try{s.append(q.decode(c,Y.GB2312))}catch(g){throw new k(g)}}static decodeKanjiSegment(n,s,a){if(a*13>n.available())throw new k;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const g=n.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,c[h]=y>>8,c[h+1]=y,h+=2,a--}try{s.append(q.decode(c,Y.SHIFT_JIS))}catch(g){throw new k(g)}}static decodeByteSegment(n,s,a,c,h,g){if(8*a>n.available())throw new k;const y=new Uint8Array(a);for(let w=0;w<a;w++)y[w]=n.readBits(8);let x;c===null?x=Y.guessEncoding(y,g):x=c.getName();try{s.append(q.decode(y,x))}catch(w){throw new k(w)}h.push(y)}static toAlphaNumericChar(n){if(n>=We.ALPHANUMERIC_CHARS.length)throw new k;return We.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,s,a,c){const h=s.length();for(;a>1;){if(n.available()<11)throw new k;const g=n.readBits(11);s.append(We.toAlphaNumericChar(Math.floor(g/45))),s.append(We.toAlphaNumericChar(g%45)),a-=2}if(a===1){if(n.available()<6)throw new k;s.append(We.toAlphaNumericChar(n.readBits(6)))}if(c)for(let g=h;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(n,s,a){for(;a>=3;){if(n.available()<10)throw new k;const c=n.readBits(10);if(c>=1e3)throw new k;s.append(We.toAlphaNumericChar(Math.floor(c/100))),s.append(We.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(We.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(n.available()<7)throw new k;const c=n.readBits(7);if(c>=100)throw new k;s.append(We.toAlphaNumericChar(Math.floor(c/10))),s.append(We.toAlphaNumericChar(c%10))}else if(a===1){if(n.available()<4)throw new k;const c=n.readBits(4);if(c>=10)throw new k;s.append(We.toAlphaNumericChar(c))}}static parseECIValue(n){const s=n.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const a=n.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=n.readBits(16);return(s&31)<<16&4294967295|a}throw new k}}We.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",We.GB2312_SUBSET=1;class eo{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const s=n[0];n[0]=n[2],n[2]=s}}class ss{constructor(){this.rsDecoder=new ar(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(n,s){return this.decodeBitMatrix(Pt.parseFromBooleanArray(n),s)}decodeBitMatrix(n,s){const a=new Mi(n);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(h){c=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,s);return h.setOther(new eo(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(n,s){const a=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),h=n.readCodewords(),g=aa.getDataBlocks(h,a,c);let y=0;for(const v of g)y+=v.getNumDataCodewords();const x=new Uint8Array(y);let w=0;for(const v of g){const D=v.getCodewords(),O=v.getNumDataCodewords();this.correctErrors(D,O);for(let F=0;F<O;F++)x[w++]=D[F]}return We.decode(x,a,c,s)}correctErrors(n,s){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-s)}catch{throw new et}for(let c=0;c<s;c++)n[c]=a[c]}}class as extends Bt{constructor(n,s,a){super(n,s),this.estimatedModuleSize=a}aboutEquals(n,s,a){if(Math.abs(s-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,s,a){const c=(this.getX()+s)/2,h=(this.getY()+n)/2,g=(this.estimatedModuleSize+a)/2;return new as(c,h,g)}}class Oi{constructor(n,s,a,c,h,g,y){this.image=n,this.startX=s,this.startY=a,this.width=c,this.height=h,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,s=this.height,a=this.width,c=n+a,h=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const w=h+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let v=n;for(;v<c&&!y.get(v,w);)v++;let D=0;for(;v<c;){if(y.get(v,w))if(D===1)g[1]++;else if(D===2){if(this.foundPatternCross(g)){const O=this.handlePossibleCenter(g,w,v);if(O!==null)return O}g[0]=g[2],g[1]=1,g[2]=0,D=1}else g[++D]++;else D===1&&D++,g[D]++;v++}if(this.foundPatternCross(g)){const O=this.handlePossibleCenter(g,w,c);if(O!==null)return O}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new nt}static centerFromEnd(n,s){return s-n[2]-n[1]/2}foundPatternCross(n){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-n[c])>=a)return!1;return!0}crossCheckVertical(n,s,a,c){const h=this.image,g=h.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=n;for(;x>=0&&h.get(s,x)&&y[1]<=a;)y[1]++,x--;if(x<0||y[1]>a)return NaN;for(;x>=0&&!h.get(s,x)&&y[0]<=a;)y[0]++,x--;if(y[0]>a)return NaN;for(x=n+1;x<g&&h.get(s,x)&&y[1]<=a;)y[1]++,x++;if(x===g||y[1]>a)return NaN;for(;x<g&&!h.get(s,x)&&y[2]<=a;)y[2]++,x++;if(y[2]>a)return NaN;const w=y[0]+y[1]+y[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(y)?Oi.centerFromEnd(y,x):NaN}handlePossibleCenter(n,s,a){const c=n[0]+n[1]+n[2],h=Oi.centerFromEnd(n,a),g=this.crossCheckVertical(s,h,2*n[1],c);if(!isNaN(g)){const y=(n[0]+n[1]+n[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(y,g,h))return w.combineEstimate(g,h,y);const x=new as(h,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Cs extends Bt{constructor(n,s,a,c){super(n,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,s,a){if(Math.abs(s-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,s,a){const c=this.count+1,h=(this.count*this.getX()+s)/c,g=(this.count*this.getY()+n)/c,y=(this.count*this.estimatedModuleSize+a)/c;return new Cs(h,g,y,c)}}class Zi{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class un{constructor(n,s){this.image=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const s=n!=null&&n.get(Ht.TRY_HARDER)!==void 0,a=n!=null&&n.get(Ht.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),g=c.getWidth();let y=Math.floor(3*h/(4*un.MAX_MODULES));(y<un.MIN_SKIP||s)&&(y=un.MIN_SKIP);let x=!1;const w=new Int32Array(5);for(let D=y-1;D<h&&!x;D+=y){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let O=0;for(let F=0;F<g;F++)if(c.get(F,D))(O&1)===1&&O++,w[O]++;else if((O&1)===0)if(O===4)if(un.foundPatternCross(w)){if(this.handlePossibleCenter(w,D,F,a)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>w[2]&&(D+=Q-w[2]-y,F=g-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,O=3;continue}O=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,O=3;else w[++O]++;else w[O]++;un.foundPatternCross(w)&&this.handlePossibleCenter(w,D,g,a)===!0&&(y=w[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Bt.orderBestPatterns(v),new Zi(v)}static centerFromEnd(n,s){return s-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let s=0;for(let h=0;h<5;h++){const g=n[h];if(g===0)return!1;s+=g}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-n[0])<c&&Math.abs(a-n[1])<c&&Math.abs(3*a-n[2])<3*c&&Math.abs(a-n[3])<c&&Math.abs(a-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,s,a,c){const h=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;n>=g&&s>=g&&y.get(s-g,n-g);)h[2]++,g++;if(n<g||s<g)return!1;for(;n>=g&&s>=g&&!y.get(s-g,n-g)&&h[1]<=a;)h[1]++,g++;if(n<g||s<g||h[1]>a)return!1;for(;n>=g&&s>=g&&y.get(s-g,n-g)&&h[0]<=a;)h[0]++,g++;if(h[0]>a)return!1;const x=y.getHeight(),w=y.getWidth();for(g=1;n+g<x&&s+g<w&&y.get(s+g,n+g);)h[2]++,g++;if(n+g>=x||s+g>=w)return!1;for(;n+g<x&&s+g<w&&!y.get(s+g,n+g)&&h[3]<a;)h[3]++,g++;if(n+g>=x||s+g>=w||h[3]>=a)return!1;for(;n+g<x&&s+g<w&&y.get(s+g,n+g)&&h[4]<a;)h[4]++,g++;if(h[4]>=a)return!1;const v=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(v-c)<2*c&&un.foundPatternCross(h)}crossCheckVertical(n,s,a,c){const h=this.image,g=h.getHeight(),y=this.getCrossCheckStateCount();let x=n;for(;x>=0&&h.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!h.get(s,x)&&y[1]<=a;)y[1]++,x--;if(x<0||y[1]>a)return NaN;for(;x>=0&&h.get(s,x)&&y[0]<=a;)y[0]++,x--;if(y[0]>a)return NaN;for(x=n+1;x<g&&h.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!h.get(s,x)&&y[3]<a;)y[3]++,x++;if(x===g||y[3]>=a)return NaN;for(;x<g&&h.get(s,x)&&y[4]<a;)y[4]++,x++;if(y[4]>=a)return NaN;const w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-c)>=2*c?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}crossCheckHorizontal(n,s,a,c){const h=this.image,g=h.getWidth(),y=this.getCrossCheckStateCount();let x=n;for(;x>=0&&h.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!h.get(x,s)&&y[1]<=a;)y[1]++,x--;if(x<0||y[1]>a)return NaN;for(;x>=0&&h.get(x,s)&&y[0]<=a;)y[0]++,x--;if(y[0]>a)return NaN;for(x=n+1;x<g&&h.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!h.get(x,s)&&y[3]<a;)y[3]++,x++;if(x===g||y[3]>=a)return NaN;for(;x<g&&h.get(x,s)&&y[4]<a;)y[4]++,x++;if(y[4]>=a)return NaN;const w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-c)>=c?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}handlePossibleCenter(n,s,a,c){const h=n[0]+n[1]+n[2]+n[3]+n[4];let g=un.centerFromEnd(n,a),y=this.crossCheckVertical(s,Math.floor(g),n[2],h);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),n[2],h),!isNaN(g)&&(!c||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),n[2],h)))){const x=h/7;let w=!1;const v=this.possibleCenters;for(let D=0,O=v.length;D<O;D++){const F=v[D];if(F.aboutEquals(x,y,g)){v[D]=F.combineEstimate(y,g,x),w=!0;break}}if(!w){const D=new Cs(g,y,x);v.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=un.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,s=0;const a=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=un.CENTER_QUORUM&&(n++,s+=g.getEstimatedModuleSize());if(n<3)return!1;const c=s/a;let h=0;for(const g of this.possibleCenters)h+=Math.abs(g.getEstimatedModuleSize()-c);return h<=.05*s}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new nt;const s=this.possibleCenters;let a;if(n>3){let c=0,h=0;for(const x of this.possibleCenters){const w=x.getEstimatedModuleSize();c+=w,h+=w*w}a=c/n;let g=Math.sqrt(h/n-a*a);s.sort((x,w)=>{const v=Math.abs(w.getEstimatedModuleSize()-a),D=Math.abs(x.getEstimatedModuleSize()-a);return v<D?-1:v>D?1:0});const y=Math.max(.2*a,g);for(let x=0;x<s.length&&s.length>3;x++){const w=s[x];Math.abs(w.getEstimatedModuleSize()-a)>y&&(s.splice(x,1),x--)}}if(s.length>3){let c=0;for(const h of s)c+=h.getEstimatedModuleSize();a=c/s.length,s.sort((h,g)=>{if(g.getCount()===h.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-a),x=Math.abs(h.getEstimatedModuleSize()-a);return y<x?1:y>x?-1:0}else return g.getCount()-h.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}un.CENTER_QUORUM=2,un.MIN_SKIP=3,un.MAX_MODULES=57;class Li{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(Ht.NEED_RESULT_POINT_CALLBACK);const a=new un(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(a)}processFinderPatternInfo(n){const s=n.getTopLeft(),a=n.getTopRight(),c=n.getBottomLeft(),h=this.calculateModuleSize(s,a,c);if(h<1)throw new nt("No pattern found in proccess finder.");const g=Li.computeDimension(s,a,c,h),y=Ut.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let w=null;if(y.getAlignmentPatternCenters().length>0){const F=a.getX()-s.getX()+c.getX(),G=a.getY()-s.getY()+c.getY(),Q=1-3/x,tt=Math.floor(s.getX()+Q*(F-s.getX())),ut=Math.floor(s.getY()+Q*(G-s.getY()));for(let vt=4;vt<=16;vt<<=1)try{w=this.findAlignmentInRegion(h,tt,ut,vt);break}catch(St){if(!(St instanceof nt))throw St}}const v=Li.createTransform(s,a,c,w,g),D=Li.sampleGrid(this.image,v,g);let O;return w===null?O=[c,s,a]:O=[c,s,a,w],new na(D,O)}static createTransform(n,s,a,c,h){const g=h-3.5;let y,x,w,v;return c!==null?(y=c.getX(),x=c.getY(),w=g-3,v=w):(y=s.getX()-n.getX()+a.getX(),x=s.getY()-n.getY()+a.getY(),w=g,v=g),hi.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,w,v,3.5,g,n.getX(),n.getY(),s.getX(),s.getY(),y,x,a.getX(),a.getY())}static sampleGrid(n,s,a){return fi.getInstance().sampleGridWithTransform(n,a,a,s)}static computeDimension(n,s,a,c){const h=Wt.round(Bt.distance(n,s)/c),g=Wt.round(Bt.distance(n,a)/c);let y=Math.floor((h+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new nt("Dimensions could be not found.")}return y}calculateModuleSize(n,s,a){return(this.calculateModuleSizeOneWay(n,s)+this.calculateModuleSizeOneWay(n,a))/2}calculateModuleSizeOneWay(n,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,s,a,c){let h=this.sizeOfBlackWhiteBlackRun(n,s,a,c),g=1,y=n-(a-n);y<0?(g=n/(n-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-n)/(y-n),y=this.image.getWidth()-1);let x=Math.floor(s-(c-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(n+(y-n)*g),h+=this.sizeOfBlackWhiteBlackRun(n,s,y,x),h-1}sizeOfBlackWhiteBlackRun(n,s,a,c){const h=Math.abs(c-s)>Math.abs(a-n);if(h){let F=n;n=s,s=F,F=a,a=c,c=F}const g=Math.abs(a-n),y=Math.abs(c-s);let x=-g/2;const w=n<a?1:-1,v=s<c?1:-1;let D=0;const O=a+w;for(let F=n,G=s;F!==O;F+=w){const Q=h?G:F,tt=h?F:G;if(D===1===this.image.get(Q,tt)){if(D===2)return Wt.distance(F,G,n,s);D++}if(x+=y,x>0){if(G===c)break;G+=v,x-=g}}return D===2?Wt.distance(a+w,c,n,s):NaN}findAlignmentInRegion(n,s,a,c){const h=Math.floor(c*n),g=Math.max(0,s-h),y=Math.min(this.image.getWidth()-1,s+h);if(y-g<n*3)throw new nt("Alignment top exceeds estimated module size.");const x=Math.max(0,a-h),w=Math.min(this.image.getHeight()-1,a+h);if(w-x<n*3)throw new nt("Alignment bottom exceeds estimated module size.");return new Oi(this.image,g,x,y-g,w-x,n,this.resultPointCallback).find()}}class Bi{constructor(){this.decoder=new ss}getDecoder(){return this.decoder}decode(n,s){let a,c;if(s!=null&&s.get(Ht.PURE_BARCODE)!==void 0){const x=Bi.extractPureBits(n.getBlackMatrix());a=this.decoder.decodeBitMatrix(x,s),c=Bi.NO_POINTS}else{const x=new Li(n.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(x.getBits(),s),c=x.getPoints()}a.getOther()instanceof eo&&a.getOther().applyMirroredCorrection(c);const h=new Mt(a.getText(),a.getRawBytes(),void 0,c,Nt.QR_CODE,void 0),g=a.getByteSegments();g!==null&&h.putMetadata(xe.BYTE_SEGMENTS,g);const y=a.getECLevel();return y!==null&&h.putMetadata(xe.ERROR_CORRECTION_LEVEL,y),a.hasStructuredAppend()&&(h.putMetadata(xe.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(xe.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(s===null||a===null)throw new nt;const c=this.moduleSize(s,n);let h=s[1],g=a[1],y=s[0],x=a[0];if(y>=x||h>=g)throw new nt;if(g-h!==x-y&&(x=y+(g-h),x>=n.getWidth()))throw new nt;const w=Math.round((x-y+1)/c),v=Math.round((g-h+1)/c);if(w<=0||v<=0)throw new nt;if(v!==w)throw new nt;const D=Math.floor(c/2);h+=D,y+=D;const O=y+Math.floor((w-1)*c)-x;if(O>0){if(O>D)throw new nt;y-=O}const F=h+Math.floor((v-1)*c)-g;if(F>0){if(F>D)throw new nt;h-=F}const G=new Pt(w,v);for(let Q=0;Q<v;Q++){const tt=h+Math.floor(Q*c);for(let ut=0;ut<w;ut++)n.get(y+Math.floor(ut*c),tt)&&G.set(ut,Q)}return G}static moduleSize(n,s){const a=s.getHeight(),c=s.getWidth();let h=n[0],g=n[1],y=!0,x=0;for(;h<c&&g<a;){if(y!==s.get(h,g)){if(++x===5)break;y=!y}h++,g++}if(h===c||g===a)throw new nt;return(h-n[0])/7}}Bi.NO_POINTS=new Array;class Qt{PDF417Common(){}static getBitCountSum(n){return Wt.sum(n)}static toIntArray(n){if(n==null||!n.length)return Qt.EMPTY_INT_ARRAY;const s=new Int32Array(n.length);let a=0;for(const c of n)s[a++]=c;return s}static getCodeword(n){const s=Lt.binarySearch(Qt.SYMBOL_TABLE,n&262143);return s<0?-1:(Qt.CODEWORD_TABLE[s]-1)%Qt.NUMBER_OF_CODEWORDS}}Qt.NUMBER_OF_CODEWORDS=929,Qt.MAX_CODEWORDS_IN_BARCODE=Qt.NUMBER_OF_CODEWORDS-1,Qt.MIN_ROWS_IN_BARCODE=3,Qt.MAX_ROWS_IN_BARCODE=90,Qt.MODULES_IN_CODEWORD=17,Qt.MODULES_IN_STOP_PATTERN=18,Qt.BARS_IN_MODULE=8,Qt.EMPTY_INT_ARRAY=new Int32Array([]),Qt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class os{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Kt{static detectMultiple(n,s,a){let c=n.getBlackMatrix(),h=Kt.detect(a,c);return h.length||(c=c.clone(),c.rotate180(),h=Kt.detect(a,c)),new os(c,h)}static detect(n,s){const a=new Array;let c=0,h=0,g=!1;for(;c<s.getHeight();){const y=Kt.findVertices(s,c,h);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,h=0;for(const x of a)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=Kt.ROW_STEP;continue}if(g=!0,a.push(y),!n)break;y[2]!=null?(h=Math.trunc(y[2].getX()),c=Math.trunc(y[2].getY())):(h=Math.trunc(y[4].getX()),c=Math.trunc(y[4].getY()))}return a}static findVertices(n,s,a){const c=n.getHeight(),h=n.getWidth(),g=new Array(8);return Kt.copyToResult(g,Kt.findRowsWithPattern(n,c,h,s,a,Kt.START_PATTERN),Kt.INDEXES_START_PATTERN),g[4]!=null&&(a=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),Kt.copyToResult(g,Kt.findRowsWithPattern(n,c,h,s,a,Kt.STOP_PATTERN),Kt.INDEXES_STOP_PATTERN),g}static copyToResult(n,s,a){for(let c=0;c<a.length;c++)n[a[c]]=s[c]}static findRowsWithPattern(n,s,a,c,h,g){const y=new Array(4);let x=!1;const w=new Int32Array(g.length);for(;c<s;c+=Kt.ROW_STEP){let D=Kt.findGuardPattern(n,h,c,a,!1,g,w);if(D!=null){for(;c>0;){const O=Kt.findGuardPattern(n,h,--c,a,!1,g,w);if(O!=null)D=O;else{c++;break}}y[0]=new Bt(D[0],c),y[1]=new Bt(D[1],c),x=!0;break}}let v=c+1;if(x){let D=0,O=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;v<s;v++){const F=Kt.findGuardPattern(n,O[0],v,a,!1,g,w);if(F!=null&&Math.abs(O[0]-F[0])<Kt.MAX_PATTERN_DRIFT&&Math.abs(O[1]-F[1])<Kt.MAX_PATTERN_DRIFT)O=F,D=0;else{if(D>Kt.SKIPPED_ROW_COUNT_MAX)break;D++}}v-=D+1,y[2]=new Bt(O[0],v),y[3]=new Bt(O[1],v)}return v-c<Kt.BARCODE_MIN_HEIGHT&&Lt.fill(y,null),y}static findGuardPattern(n,s,a,c,h,g,y){Lt.fillWithin(y,0,y.length,0);let x=s,w=0;for(;n.get(x,a)&&x>0&&w++<Kt.MAX_PIXEL_DRIFT;)x--;let v=x,D=0,O=g.length;for(let F=h;v<c;v++)if(n.get(v,a)!==F)y[D]++;else{if(D===O-1){if(Kt.patternMatchVariance(y,g,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return new Int32Array([x,v]);x+=y[0]+y[1],gt.arraycopy(y,2,y,0,D-1),y[D-1]=0,y[D]=0,D--}else D++;y[D]=1,F=!F}return D===O-1&&Kt.patternMatchVariance(y,g,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE?new Int32Array([x,v-1]):null}static patternMatchVariance(n,s,a){let c=n.length,h=0,g=0;for(let w=0;w<c;w++)h+=n[w],g+=s[w];if(h<g)return 1/0;let y=h/g;a*=y;let x=0;for(let w=0;w<c;w++){let v=n[w],D=s[w]*y,O=v>D?v-D:D-v;if(O>a)return 1/0;x+=O}return x/h}}Kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Kt.MAX_AVG_VARIANCE=.42,Kt.MAX_INDIVIDUAL_VARIANCE=.8,Kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Kt.MAX_PIXEL_DRIFT=3,Kt.MAX_PATTERN_DRIFT=5,Kt.SKIPPED_ROW_COUNT_MAX=25,Kt.ROW_STEP=5,Kt.BARCODE_MIN_HEIGHT=10;class Ke{constructor(n,s){if(s.length===0)throw new L;this.field=n;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),gt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(n,s),this.coefficients[c]);return s}add(n){if(!this.field.equals(n.field))throw new L("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,a=n.coefficients;if(s.length>a.length){let g=s;s=a,a=g}let c=new Int32Array(a.length),h=a.length-s.length;gt.arraycopy(a,0,c,0,h);for(let g=h;g<a.length;g++)c[g]=this.field.add(s[g-h],a[g]);return new Ke(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new L("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Ke?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new L("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Ke(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=n.coefficients,h=c.length,g=new Int32Array(a+h-1);for(let y=0;y<a;y++){let x=s[y];for(let w=0;w<h;w++)g[y+w]=this.field.add(g[y+w],this.field.multiply(x,c[w]))}return new Ke(this.field,g)}negative(){let n=this.coefficients.length,s=new Int32Array(n);for(let a=0;a<n;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Ke(this.field,s)}multiplyScalar(n){if(n===0)return new Ke(this.field,new Int32Array([0]));if(n===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],n);return new Ke(this.field,a)}multiplyByMonomial(n,s){if(n<0)throw new L;if(s===0)return new Ke(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+n);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],s);return new Ke(this.field,c)}toString(){let n=new j;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(n.append(" - "),a=-a):n.length()>0&&n.append(" + "),(s===0||a!==1)&&n.append(a),s!==0&&(s===1?n.append("x"):(n.append("x^"),n.append(s))))}return n.toString()}}class Ss{add(n,s){return(n+s)%this.modulus}subtract(n,s){return(this.modulus+n-s)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new L;return this.logTable[n]}inverse(n){if(n===0)throw new Xr;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Ye extends Ss{constructor(n,s){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let a=1;for(let c=0;c<n;c++)this.expTable[c]=a,a=a*s%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Ke(this,new Int32Array([0])),this.one=new Ke(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new L;if(s===0)return this.zero;let a=new Int32Array(n+1);return a[0]=s,new Ke(this,a)}}Ye.PDF417_GF=new Ye(Qt.NUMBER_OF_CODEWORDS,3);class hr{constructor(){this.field=Ye.PDF417_GF}decode(n,s,a){let c=new Ke(this.field,n),h=new Int32Array(s),g=!1;for(let G=s;G>0;G--){let Q=c.evaluateAt(this.field.exp(G));h[s-G]=Q,Q!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(a!=null)for(const G of a){let Q=this.field.exp(n.length-1-G),tt=new Ke(this.field,new Int32Array([this.field.subtract(0,Q),1]));y=y.multiply(tt)}let x=new Ke(this.field,h),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),v=w[0],D=w[1],O=this.findErrorLocations(v),F=this.findErrorMagnitudes(D,v,O);for(let G=0;G<O.length;G++){let Q=n.length-1-this.field.log(O[G]);if(Q<0)throw et.getChecksumInstance();n[Q]=this.field.subtract(n[Q],F[G])}return O.length}runEuclideanAlgorithm(n,s,a){if(n.getDegree()<s.getDegree()){let O=n;n=s,s=O}let c=n,h=s,g=this.field.getZero(),y=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let O=c,F=g;if(c=h,g=y,c.isZero())throw et.getChecksumInstance();h=O;let G=this.field.getZero(),Q=c.getCoefficient(c.getDegree()),tt=this.field.inverse(Q);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let ut=h.getDegree()-c.getDegree(),vt=this.field.multiply(h.getCoefficient(h.getDegree()),tt);G=G.add(this.field.buildMonomial(ut,vt)),h=h.subtract(c.multiplyByMonomial(ut,vt))}y=G.multiply(g).subtract(F).negative()}let x=y.getCoefficient(0);if(x===0)throw et.getChecksumInstance();let w=this.field.inverse(x),v=y.multiply(w),D=h.multiply(w);return[v,D]}findErrorLocations(n){let s=n.getDegree(),a=new Int32Array(s),c=0;for(let h=1;h<this.field.getSize()&&c<s;h++)n.evaluateAt(h)===0&&(a[c]=this.field.inverse(h),c++);if(c!==s)throw et.getChecksumInstance();return a}findErrorMagnitudes(n,s,a){let c=s.getDegree(),h=new Int32Array(c);for(let w=1;w<=c;w++)h[c-w]=this.field.multiply(w,s.getCoefficient(w));let g=new Ke(this.field,h),y=a.length,x=new Int32Array(y);for(let w=0;w<y;w++){let v=this.field.inverse(a[w]),D=this.field.subtract(0,n.evaluateAt(v)),O=this.field.inverse(g.evaluateAt(v));x[w]=this.field.multiply(D,O)}return x}}class fr{constructor(n,s,a,c,h){n instanceof fr?this.constructor_2(n):this.constructor_1(n,s,a,c,h)}constructor_1(n,s,a,c,h){const g=s==null||a==null,y=c==null||h==null;if(g&&y)throw new nt;g?(s=new Bt(0,c.getY()),a=new Bt(0,h.getY())):y&&(c=new Bt(n.getWidth()-1,s.getY()),h=new Bt(n.getWidth()-1,a.getY())),this.image=n,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,s){return n==null?s:s==null?n:new fr(n.image,n.topLeft,n.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(n,s,a){let c=this.topLeft,h=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(n>0){let x=a?this.topLeft:this.topRight,w=Math.trunc(x.getY()-n);w<0&&(w=0);let v=new Bt(x.getX(),w);a?c=v:g=v}if(s>0){let x=a?this.bottomLeft:this.bottomRight,w=Math.trunc(x.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let v=new Bt(x.getX(),w);a?h=v:y=v}return new fr(this.image,c,h,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class vs{constructor(n,s,a,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zr{constructor(){this.buffer=""}static form(n,s){let a=-1;function c(g,y,x,w,v,D){if(g==="%%")return"%";if(s[++a]===void 0)return;g=w?parseInt(w.substr(1)):void 0;let O=v?parseInt(v.substr(1)):void 0,F;switch(D){case"s":F=s[a];break;case"c":F=s[a][0];break;case"f":F=parseFloat(s[a]).toFixed(g);break;case"p":F=parseFloat(s[a]).toPrecision(g);break;case"e":F=parseFloat(s[a]).toExponential(g);break;case"x":F=parseInt(s[a]).toString(O||16);break;case"d":F=parseFloat(parseInt(s[a],O||10).toPrecision(g)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(O);let G=parseInt(x),Q=x&&x[0]+""=="0"?"0":" ";for(;F.length<G;)F=y!==void 0?F+Q:Q+F;return F}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}format(n,...s){this.buffer+=Zr.form(n,s)}toString(){return this.buffer}}class dr{constructor(n){this.boundingBox=new fr(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let s=this.getCodeword(n);if(s!=null)return s;for(let a=1;a<dr.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(n)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(n)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,s){this.codewords[this.imageRowToCodewordIndex(n)]=s}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Zr;let s=0;for(const a of this.codewords){if(a==null){n.format("%3d:    |   %n",s++);continue}n.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return n.toString()}}dr.MAX_NEARBY_DISTANCE=5;class zi{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let s=this.values.get(n);s==null&&(s=0),s++,this.values.set(n,s)}getValue(){let n=-1,s=new Array;for(const[a,c]of this.values.entries()){const h={getKey:()=>a,getValue:()=>c};h.getValue()>n?(n=h.getValue(),s=[],s.push(h.getKey())):h.getValue()===n&&s.push(h.getKey())}return Qt.toIntArray(s)}getConfidence(n){return this.values.get(n)}}class Wi extends dr{constructor(n,s){super(n),this._isLeft=s}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=-1,w=1,v=0;for(let D=g;D<y;D++){if(s[D]==null)continue;let O=s[D],F=O.getRowNumber()-x;if(F===0)v++;else if(F===1)w=Math.max(w,v),v=1,x=O.getRowNumber();else if(F<0||O.getRowNumber()>=n.getRowCount()||F>D)s[D]=null;else{let G;w>2?G=(w-2)*F:G=F;let Q=G>=D;for(let tt=1;tt<=G&&!Q;tt++)Q=s[D-tt]!=null;Q?s[D]=null:(x=O.getRowNumber(),v=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let s=new Int32Array(n.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(n){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),y=this.getCodewords(),x=-1;for(let w=h;w<g;w++){if(y[w]==null)continue;let v=y[w];v.setRowNumberAsRowIndicatorColumn();let D=v.getRowNumber()-x;D===0||(D===1?x=v.getRowNumber():v.getRowNumber()>=n.getRowCount()?y[w]=null:x=v.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),s=new zi,a=new zi,c=new zi,h=new zi;for(let y of n){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,w=y.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:a.setValue(x*3+1);break;case 1:h.setValue(x/3),c.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Qt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Qt.MAX_ROWS_IN_BARCODE)return null;let g=new vs(s.getValue()[0],a.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(n,g),g}removeIncorrectCodewords(n,s){for(let a=0;a<n.length;a++){let c=n[a];if(n[a]==null)continue;let h=c.getValue()%30,g=c.getRowNumber();if(g>s.getRowCount()){n[a]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:h*3+1!==s.getRowCountUpperPart()&&(n[a]=null);break;case 1:(Math.trunc(h/3)!==s.getErrorCorrectionLevel()||h%3!==s.getRowCountLowerPart())&&(n[a]=null);break;case 2:h+1!==s.getColumnCount()&&(n[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Dn{constructor(n,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Qt.MAX_CODEWORDS_IN_BARCODE,s;do s=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<n.length;a++)if(n[a]!=null&&s[a]!=null&&n[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[a];h!=null&&(h.setRowNumber(n[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let g=this.barcodeColumnCount+1;g>0&&h<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[a];y!=null&&(h=Dn.adjustRowNumberIfValid(c,h,y),y.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let g=1;g<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[a];y!=null&&(h=Dn.adjustRowNumberIfValid(c,h,y),y.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(n)?(a.setRowNumber(n),s=0):++s),s}adjustRowNumbers(n,s,a){if(!this.detectionResultColumns[n-1])return;let c=a[s],h=this.detectionResultColumns[n-1].getCodewords(),g=h;this.detectionResultColumns[n+1]!=null&&(g=this.detectionResultColumns[n+1].getCodewords());let y=new Array(14);y[2]=h[s],y[3]=g[s],s>0&&(y[0]=a[s-1],y[4]=h[s-1],y[5]=g[s-1]),s>1&&(y[8]=a[s-2],y[10]=h[s-2],y[11]=g[s-2]),s<a.length-1&&(y[1]=a[s+1],y[6]=h[s+1],y[7]=g[s+1]),s<a.length-2&&(y[9]=a[s+2],y[12]=h[s+2],y[13]=g[s+2]);for(let x of y)if(Dn.adjustRowNumber(c,x))return}static adjustRowNumber(n,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===n.getBucket()?(n.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,s){this.detectionResultColumns[n]=s}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Zr;for(let a=0;a<n.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[a];if(h==null){s.format("    |   ");continue}s.format(" %3d|%3d",h.getRowNumber(),h.getValue())}s.format("%n")}return s.toString()}}class ji{constructor(n,s,a,c){this.rowNumber=ji.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==ji.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}ji.BARCODE_ROW_UNKNOWN=-1;class gn{static initialize(){for(let n=0;n<Qt.SYMBOL_TABLE.length;n++){let s=Qt.SYMBOL_TABLE[n],a=s&1;for(let c=0;c<Qt.BARS_IN_MODULE;c++){let h=0;for(;(s&1)===a;)h+=1,s>>=1;a=s&1,gn.RATIOS_TABLE[n]||(gn.RATIOS_TABLE[n]=new Array(Qt.BARS_IN_MODULE)),gn.RATIOS_TABLE[n][Qt.BARS_IN_MODULE-c-1]=Math.fround(h/Qt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let s=gn.getDecodedCodewordValue(gn.sampleBitCounts(n));return s!==-1?s:gn.getClosestDecodedValue(n)}static sampleBitCounts(n){let s=Wt.sum(n),a=new Int32Array(Qt.BARS_IN_MODULE),c=0,h=0;for(let g=0;g<Qt.MODULES_IN_CODEWORD;g++){let y=s/(2*Qt.MODULES_IN_CODEWORD)+g*s/Qt.MODULES_IN_CODEWORD;h+n[c]<=y&&(h+=n[c],c++),a[c]++}return a}static getDecodedCodewordValue(n){let s=gn.getBitValue(n);return Qt.getCodeword(s)===-1?-1:s}static getBitValue(n){let s=0;for(let a=0;a<n.length;a++)for(let c=0;c<n[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(n){let s=Wt.sum(n),a=new Array(Qt.BARS_IN_MODULE);if(s>1)for(let g=0;g<a.length;g++)a[g]=Math.fround(n[g]/s);let c=xn.MAX_VALUE,h=-1;this.bSymbolTableReady||gn.initialize();for(let g=0;g<gn.RATIOS_TABLE.length;g++){let y=0,x=gn.RATIOS_TABLE[g];for(let w=0;w<Qt.BARS_IN_MODULE;w++){let v=Math.fround(x[w]-a[w]);if(y+=Math.fround(v*v),y>=c)break}y<c&&(c=y,h=Qt.SYMBOL_TABLE[g])}return h}}gn.bSymbolTableReady=!1,gn.RATIOS_TABLE=new Array(Qt.SYMBOL_TABLE.length).map(R=>new Array(Qt.BARS_IN_MODULE));class Wr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class oa{static parseLong(n,s=void 0){return parseInt(n,s)}}class Kr extends T{}Kr.kind="NullPointerException";class la{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,s,a){if(n==null)throw new Kr;if(s<0||s>n.length||a<0||s+a>n.length||s+a<0)throw new At;if(a===0)return;for(let c=0;c<a;c++)this.write(n[s+c])}flush(){}close(){}}class Dr extends T{}class ua extends la{constructor(n=32){if(super(),this.count=0,n<0)throw new L("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let a=this.buf.length<<1;if(a-n<0&&(a=n),a<0){if(n<0)throw new Dr;a=bt.MAX_VALUE}this.buf=Lt.copyOfUint8Array(this.buf,a)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,s,a){if(s<0||s>n.length||a<0||s+a-n.length>0)throw new At;this.ensureCapacity(this.count+a),gt.arraycopy(n,s,this.buf,this.count,a),this.count+=a}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Lt.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Pe;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pe||(Pe={}));function ls(){if(typeof window<"u")return window.BigInt||null;if(typeof kc<"u")return kc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let bs;function gr(R){if(typeof bs>"u"&&(bs=ls()),bs===null)throw new Error("BigInt is not supported!");return bs(R)}function Is(){let R=[];R[0]=gr(1);let n=gr(900);R[1]=n;for(let s=2;s<16;s++)R[s]=R[s-1]*n;return R}class lt{static decode(n,s){let a=new j(""),c=P.ISO8859_1;a.enableDecoding(c);let h=1,g=n[h++],y=new Wr;for(;h<n[0];){switch(g){case lt.TEXT_COMPACTION_MODE_LATCH:h=lt.textCompaction(n,h,a);break;case lt.BYTE_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH_6:h=lt.byteCompaction(g,n,c,h,a);break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[h++]);break;case lt.NUMERIC_COMPACTION_MODE_LATCH:h=lt.numericCompaction(n,h,a);break;case lt.ECI_CHARSET:P.getCharacterSetECIByValue(n[h++]);break;case lt.ECI_GENERAL_PURPOSE:h+=2;break;case lt.ECI_USER_DEFINED:h++;break;case lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=lt.decodeMacroBlock(n,h,y);break;case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case lt.MACRO_PDF417_TERMINATOR:throw new k;default:h--,h=lt.textCompaction(n,h,a);break}if(h<n.length)g=n[h++];else throw k.getFormatInstance()}if(a.length()===0)throw k.getFormatInstance();let x=new Ze(null,a.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(n,s,a){if(s+lt.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw k.getFormatInstance();let c=new Int32Array(lt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<lt.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)c[y]=n[s];a.setSegmentIndex(bt.parseInt(lt.decodeBase900toBase10(c,lt.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new j;s=lt.textCompaction(n,s,h),a.setFileId(h.toString());let g=-1;for(n[s]===lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<n[0];)switch(n[s]){case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,n[s]){case lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new j;s=lt.textCompaction(n,s+1,y),a.setFileName(y.toString());break;case lt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new j;s=lt.textCompaction(n,s+1,x),a.setSender(x.toString());break;case lt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new j;s=lt.textCompaction(n,s+1,w),a.setAddressee(w.toString());break;case lt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new j;s=lt.numericCompaction(n,s+1,v),a.setSegmentCount(bt.parseInt(v.toString()));break;case lt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new j;s=lt.numericCompaction(n,s+1,D),a.setTimestamp(oa.parseLong(D.toString()));break;case lt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let O=new j;s=lt.numericCompaction(n,s+1,O),a.setChecksum(bt.parseInt(O.toString()));break;case lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new j;s=lt.numericCompaction(n,s+1,F),a.setFileSize(oa.parseLong(F.toString()));break;default:throw k.getFormatInstance()}break;case lt.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(g!==-1){let y=s-g;a.isLastSegment()&&y--,a.setOptionalData(Lt.copyOfRange(n,g,g+y))}return s}static textCompaction(n,s,a){let c=new Int32Array((n[0]-s)*2),h=new Int32Array((n[0]-s)*2),g=0,y=!1;for(;s<n[0]&&!y;){let x=n[s++];if(x<lt.TEXT_COMPACTION_MODE_LATCH)c[g]=x/30,c[g+1]=x%30,g+=2;else switch(x){case lt.TEXT_COMPACTION_MODE_LATCH:c[g++]=lt.TEXT_COMPACTION_MODE_LATCH;break;case lt.BYTE_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH_6:case lt.NUMERIC_COMPACTION_MODE_LATCH:case lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case lt.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[g]=lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=n[s++],h[g]=x,g++;break}}return lt.decodeTextCompaction(c,h,g,a),s}static decodeTextCompaction(n,s,a,c){let h=Pe.ALPHA,g=Pe.ALPHA,y=0;for(;y<a;){let x=n[y],w="";switch(h){case Pe.ALPHA:if(x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case lt.LL:h=Pe.LOWER;break;case lt.ML:h=Pe.MIXED;break;case lt.PS:g=h,h=Pe.PUNCT_SHIFT;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[y]);break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break;case Pe.LOWER:if(x<26)w=String.fromCharCode(97+x);else switch(x){case 26:w=" ";break;case lt.AS:g=h,h=Pe.ALPHA_SHIFT;break;case lt.ML:h=Pe.MIXED;break;case lt.PS:g=h,h=Pe.PUNCT_SHIFT;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[y]);break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break;case Pe.MIXED:if(x<lt.PL)w=lt.MIXED_CHARS[x];else switch(x){case lt.PL:h=Pe.PUNCT;break;case 26:w=" ";break;case lt.LL:h=Pe.LOWER;break;case lt.AL:h=Pe.ALPHA;break;case lt.PS:g=h,h=Pe.PUNCT_SHIFT;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[y]);break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break;case Pe.PUNCT:if(x<lt.PAL)w=lt.PUNCT_CHARS[x];else switch(x){case lt.PAL:h=Pe.ALPHA;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[y]);break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break;case Pe.ALPHA_SHIFT:if(h=g,x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break;case Pe.PUNCT_SHIFT:if(h=g,x<lt.PAL)w=lt.PUNCT_CHARS[x];else switch(x){case lt.PAL:h=Pe.ALPHA;break;case lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[y]);break;case lt.TEXT_COMPACTION_MODE_LATCH:h=Pe.ALPHA;break}break}w!==""&&c.append(w),y++}}static byteCompaction(n,s,a,c,h){let g=new ua,y=0,x=0,w=!1;switch(n){case lt.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),D=s[c++];for(;c<s[0]&&!w;)switch(v[y++]=D,x=900*x+D,D=s[c++],D){case lt.TEXT_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH:case lt.NUMERIC_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH_6:case lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case lt.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(y%5===0&&y>0){for(let O=0;O<6;++O)g.write(Number(gr(x)>>gr(8*(5-O))));x=0,y=0}break}c===s[0]&&D<lt.TEXT_COMPACTION_MODE_LATCH&&(v[y++]=D);for(let O=0;O<y;O++)g.write(v[O]);break;case lt.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let O=s[c++];if(O<lt.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+O;else switch(O){case lt.TEXT_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH:case lt.NUMERIC_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH_6:case lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case lt.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(y%5===0&&y>0){for(let F=0;F<6;++F)g.write(Number(gr(x)>>gr(8*(5-F))));x=0,y=0}}break}return h.append(q.decode(g.toByteArray(),a)),c}static numericCompaction(n,s,a){let c=0,h=!1,g=new Int32Array(lt.MAX_NUMERIC_CODEWORDS);for(;s<n[0]&&!h;){let y=n[s++];if(s===n[0]&&(h=!0),y<lt.TEXT_COMPACTION_MODE_LATCH)g[c]=y,c++;else switch(y){case lt.TEXT_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH:case lt.BYTE_COMPACTION_MODE_LATCH_6:case lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case lt.MACRO_PDF417_TERMINATOR:s--,h=!0;break}(c%lt.MAX_NUMERIC_CODEWORDS===0||y===lt.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(a.append(lt.decodeBase900toBase10(g,c)),c=0)}return s}static decodeBase900toBase10(n,s){let a=gr(0);for(let h=0;h<s;h++)a+=lt.EXP900[s-h-1]*gr(n[h]);let c=a.toString();if(c.charAt(0)!=="1")throw new k;return c.substring(1)}}lt.TEXT_COMPACTION_MODE_LATCH=900,lt.BYTE_COMPACTION_MODE_LATCH=901,lt.NUMERIC_COMPACTION_MODE_LATCH=902,lt.BYTE_COMPACTION_MODE_LATCH_6=924,lt.ECI_USER_DEFINED=925,lt.ECI_GENERAL_PURPOSE=926,lt.ECI_CHARSET=927,lt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,lt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,lt.MACRO_PDF417_TERMINATOR=922,lt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,lt.MAX_NUMERIC_CODEWORDS=15,lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,lt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,lt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,lt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,lt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,lt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,lt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,lt.PL=25,lt.LL=27,lt.AS=27,lt.ML=28,lt.AL=28,lt.PS=29,lt.PAL=29,lt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,lt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",lt.EXP900=ls()?Is():[],lt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class oe{constructor(){}static decode(n,s,a,c,h,g,y){let x=new fr(n,s,a,c,h),w=null,v=null,D;for(let G=!0;;G=!1){if(s!=null&&(w=oe.getRowIndicatorColumn(n,x,s,!0,g,y)),c!=null&&(v=oe.getRowIndicatorColumn(n,x,c,!1,g,y)),D=oe.merge(w,v),D==null)throw nt.getNotFoundInstance();let Q=D.getBoundingBox();if(G&&Q!=null&&(Q.getMinY()<x.getMinY()||Q.getMaxY()>x.getMaxY()))x=Q;else break}D.setBoundingBox(x);let O=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,w),D.setDetectionResultColumn(O,v);let F=w!=null;for(let G=1;G<=O;G++){let Q=F?G:O-G;if(D.getDetectionResultColumn(Q)!==void 0)continue;let tt;Q===0||Q===O?tt=new Wi(x,Q===0):tt=new dr(x),D.setDetectionResultColumn(Q,tt);let ut=-1,vt=ut;for(let St=x.getMinY();St<=x.getMaxY();St++){if(ut=oe.getStartColumn(D,Q,St,F),ut<0||ut>x.getMaxX()){if(vt===-1)continue;ut=vt}let _t=oe.detectCodeword(n,x.getMinX(),x.getMaxX(),F,ut,St,g,y);_t!=null&&(tt.setCodeword(St,_t),vt=ut,g=Math.min(g,_t.getWidth()),y=Math.max(y,_t.getWidth()))}}return oe.createDecoderResult(D)}static merge(n,s){if(n==null&&s==null)return null;let a=oe.getBarcodeMetadata(n,s);if(a==null)return null;let c=fr.merge(oe.adjustBoundingBox(n),oe.adjustBoundingBox(s));return new Dn(a,c)}static adjustBoundingBox(n){if(n==null)return null;let s=n.getRowHeights();if(s==null)return null;let a=oe.getMax(s),c=0;for(let y of s)if(c+=a-y,y>0)break;let h=n.getCodewords();for(let y=0;c>0&&h[y]==null;y++)c--;let g=0;for(let y=s.length-1;y>=0&&(g+=a-s[y],!(s[y]>0));y--);for(let y=h.length-1;g>0&&h[y]==null;y--)g--;return n.getBoundingBox().addMissingRows(c,g,n.isLeft())}static getMax(n){let s=-1;for(let a of n)s=Math.max(s,a);return s}static getBarcodeMetadata(n,s){let a;if(n==null||(a=n.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(n,s,a,c,h,g){let y=new Wi(s,c);for(let x=0;x<2;x++){let w=x===0?1:-1,v=Math.trunc(Math.trunc(a.getX()));for(let D=Math.trunc(Math.trunc(a.getY()));D<=s.getMaxY()&&D>=s.getMinY();D+=w){let O=oe.detectCodeword(n,0,n.getWidth(),c,v,D,h,g);O!=null&&(y.setCodeword(D,O),c?v=O.getStartX():v=O.getEndX())}}return y}static adjustCodewordCount(n,s){let a=s[0][1],c=a.getValue(),h=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-oe.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(h<1||h>Qt.MAX_CODEWORDS_IN_BARCODE)throw nt.getNotFoundInstance();a.setValue(h)}else c[0]!==h&&a.setValue(h)}static createDecoderResult(n){let s=oe.createBarcodeMatrix(n);oe.adjustCodewordCount(n,s);let a=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),h=[],g=new Array;for(let x=0;x<n.getBarcodeRowCount();x++)for(let w=0;w<n.getBarcodeColumnCount();w++){let v=s[x][w+1].getValue(),D=x*n.getBarcodeColumnCount()+w;v.length===0?a.push(D):v.length===1?c[D]=v[0]:(g.push(D),h.push(v))}let y=new Array(h.length);for(let x=0;x<y.length;x++)y[x]=h[x];return oe.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,Qt.toIntArray(a),Qt.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(n,s,a,c,h){let g=new Int32Array(c.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[c[x]]=h[x][g[x]];try{return oe.decodeCodewords(s,n,a)}catch(x){if(!(x instanceof et))throw x}if(g.length===0)throw et.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<h[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw et.getChecksumInstance()}throw et.getChecksumInstance()}static createBarcodeMatrix(n){let s=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let h=0;h<s[c].length;h++)s[c][h]=new zi;let a=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][a].setValue(h.getValue())}}}a++}return s}static isValidBarcodeColumn(n,s){return s>=0&&s<=n.getBarcodeColumnCount()+1}static getStartColumn(n,s,a,c){let h=c?1:-1,g=null;if(oe.isValidBarcodeColumn(n,s-h)&&(g=n.getDetectionResultColumn(s-h).getCodeword(a)),g!=null)return c?g.getEndX():g.getStartX();if(g=n.getDetectionResultColumn(s).getCodewordNearby(a),g!=null)return c?g.getStartX():g.getEndX();if(oe.isValidBarcodeColumn(n,s-h)&&(g=n.getDetectionResultColumn(s-h).getCodewordNearby(a)),g!=null)return c?g.getEndX():g.getStartX();let y=0;for(;oe.isValidBarcodeColumn(n,s-h);){s-=h;for(let x of n.getDetectionResultColumn(s).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+h*y*(x.getEndX()-x.getStartX());y++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,s,a,c,h,g,y,x){h=oe.adjustCodewordStartColumn(n,s,a,c,h,g);let w=oe.getModuleBitCount(n,s,a,c,h,g);if(w==null)return null;let v,D=Wt.sum(w);if(c)v=h+D;else{for(let G=0;G<w.length/2;G++){let Q=w[G];w[G]=w[w.length-1-G],w[w.length-1-G]=Q}v=h,h=v-D}if(!oe.checkCodewordSkew(D,y,x))return null;let O=gn.getDecodedValue(w),F=Qt.getCodeword(O);return F===-1?null:new ji(h,v,oe.getCodewordBucketNumber(O),F)}static getModuleBitCount(n,s,a,c,h,g){let y=h,x=new Int32Array(8),w=0,v=c?1:-1,D=c;for(;(c?y<a:y>=s)&&w<x.length;)n.get(y,g)===D?(x[w]++,y+=v):(w++,D=!D);return w===x.length||y===(c?a:s)&&w===x.length-1?x:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,s,a,c,h,g){let y=h,x=c?-1:1;for(let w=0;w<2;w++){for(;(c?y>=s:y<a)&&c===n.get(y,g);){if(Math.abs(h-y)>oe.CODEWORD_SKEW_SIZE)return h;y+=x}x=-x,c=!c}return y}static checkCodewordSkew(n,s,a){return s-oe.CODEWORD_SKEW_SIZE<=n&&n<=a+oe.CODEWORD_SKEW_SIZE}static decodeCodewords(n,s,a){if(n.length===0)throw k.getFormatInstance();let c=1<<s+1,h=oe.correctErrors(n,a,c);oe.verifyCodewordCount(n,c);let g=lt.decode(n,""+s);return g.setErrorsCorrected(h),g.setErasures(a.length),g}static correctErrors(n,s,a){if(s!=null&&s.length>a/2+oe.MAX_ERRORS||a<0||a>oe.MAX_EC_CODEWORDS)throw et.getChecksumInstance();return oe.errorCorrection.decode(n,a,s)}static verifyCodewordCount(n,s){if(n.length<4)throw k.getFormatInstance();let a=n[0];if(a>n.length)throw k.getFormatInstance();if(a===0)if(s<n.length)n[0]=n.length-s;else throw k.getFormatInstance()}static getBitCountForCodeword(n){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((n&1)!==a&&(a=n&1,c--,c<0));)s[c]++,n>>=1;return s}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return oe.getCodewordBucketNumber(oe.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let s=new Zr;for(let a=0;a<n.length;a++){s.format("Row %2d: ",a);for(let c=0;c<n[a].length;c++){let h=n[a][c];h.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}s.format("%n")}return s.toString()}}oe.CODEWORD_SKEW_SIZE=2,oe.MAX_ERRORS=3,oe.MAX_EC_CODEWORDS=512,oe.errorCorrection=new hr;class Tn{decode(n,s=null){let a=Tn.decode(n,s,!1);if(a==null||a.length===0||a[0]==null)throw nt.getNotFoundInstance();return a[0]}decodeMultiple(n,s=null){try{return Tn.decode(n,s,!0)}catch(a){throw a instanceof k||a instanceof et?nt.getNotFoundInstance():a}}static decode(n,s,a){const c=new Array,h=Kt.detectMultiple(n,s,a);for(const g of h.getPoints()){const y=oe.decode(h.getBits(),g[4],g[5],g[6],g[7],Tn.getMinCodewordWidth(g),Tn.getMaxCodewordWidth(g)),x=new Mt(y.getText(),y.getRawBytes(),void 0,g,Nt.PDF_417);x.putMetadata(xe.ERROR_CORRECTION_LEVEL,y.getECLevel());const w=y.getOther();w!=null&&x.putMetadata(xe.PDF417_EXTRA_METADATA,w),c.push(x)}return c.map(g=>g)}static getMaxWidth(n,s){return n==null||s==null?0:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMinWidth(n,s){return n==null||s==null?bt.MAX_VALUE:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Tn.getMaxWidth(n[0],n[4]),Tn.getMaxWidth(n[6],n[2])*Qt.MODULES_IN_CODEWORD/Qt.MODULES_IN_STOP_PATTERN),Math.max(Tn.getMaxWidth(n[1],n[5]),Tn.getMaxWidth(n[7],n[3])*Qt.MODULES_IN_CODEWORD/Qt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Tn.getMinWidth(n[0],n[4]),Tn.getMinWidth(n[6],n[2])*Qt.MODULES_IN_CODEWORD/Qt.MODULES_IN_STOP_PATTERN),Math.min(Tn.getMinWidth(n[1],n[5]),Tn.getMinWidth(n[7],n[3])*Qt.MODULES_IN_CODEWORD/Qt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ns extends T{}Ns.kind="ReaderException";class no{constructor(n,s){this.verbose=n===!0,s&&this.setHints(s)}decode(n,s){return s&&this.setHints(s),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const s=!u(n)&&n.get(Ht.TRY_HARDER)===!0,a=u(n)?null:n.get(Ht.POSSIBLE_FORMATS),c=new Array;if(!u(a)){const h=a.some(g=>g===Nt.UPC_A||g===Nt.UPC_E||g===Nt.EAN_13||g===Nt.EAN_8||g===Nt.CODABAR||g===Nt.CODE_39||g===Nt.CODE_93||g===Nt.CODE_128||g===Nt.ITF||g===Nt.RSS_14||g===Nt.RSS_EXPANDED);h&&!s&&c.push(new Ei(n,this.verbose)),a.includes(Nt.QR_CODE)&&c.push(new Bi),a.includes(Nt.DATA_MATRIX)&&c.push(new Di),a.includes(Nt.AZTEC)&&c.push(new _s),a.includes(Nt.PDF_417)&&c.push(new Tn),h&&s&&c.push(new Ei(n,this.verbose))}c.length===0&&(s||c.push(new Ei(n,this.verbose)),c.push(new Bi),c.push(new Di),c.push(new _s),c.push(new Tn),s&&c.push(new Ei(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Ns("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(n,this.hints)}catch(a){if(a instanceof Ns)continue}throw new nt("No MultiFormat Readers were able to detect the code.")}}class Mr extends Dt{constructor(n=null,s=500){const a=new no;a.setHints(n),super(a,s)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Mo extends Dt{constructor(n=500){super(new Tn,n)}}class Oo extends Dt{constructor(n=500){super(new Bi,n)}}var ca;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(ca||(ca={}));var Cn=ca;class Or{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Fn(n,Int32Array.from([1])))}buildGenerator(n){const s=this.cachedGenerators;if(n>=s.length){let a=s[s.length-1];const c=this.field;for(let h=s.length;h<=n;h++){const g=a.multiply(new Fn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));s.push(g),a=g}}return s[n]}encode(n,s){if(s===0)throw new L("No error correction bytes");const a=n.length-s;if(a<=0)throw new L("No data bytes provided");const c=this.buildGenerator(s),h=new Int32Array(a);gt.arraycopy(n,0,h,0,a);let g=new Fn(this.field,h);g=g.multiplyByMonomial(s,1);const x=g.divide(c)[1].getCoefficients(),w=s-x.length;for(let v=0;v<w;v++)n[a+v]=0;gt.arraycopy(x,0,n,a+w,x.length)}}class we{constructor(){}static applyMaskPenaltyRule1(n){return we.applyMaskPenaltyRule1Internal(n,!0)+we.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let g=0;g<h-1;g++){const y=a[g];for(let x=0;x<c-1;x++){const w=y[x];w===y[x+1]&&w===a[g+1][x]&&w===a[g+1][x+1]&&s++}}return we.N2*s}static applyMaskPenaltyRule3(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let g=0;g<h;g++)for(let y=0;y<c;y++){const x=a[g];y+6<c&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(we.isWhiteHorizontal(x,y-4,y)||we.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<h&&a[g][y]===1&&a[g+1][y]===0&&a[g+2][y]===1&&a[g+3][y]===1&&a[g+4][y]===1&&a[g+5][y]===0&&a[g+6][y]===1&&(we.isWhiteVertical(a,y,g-4,g)||we.isWhiteVertical(a,y,g+7,g+11))&&s++}return s*we.N3}static isWhiteHorizontal(n,s,a){s=Math.max(s,0),a=Math.min(a,n.length);for(let c=s;c<a;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,s,a,c){a=Math.max(a,0),c=Math.min(c,n.length);for(let h=a;h<c;h++)if(n[h][s]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let x=0;x<h;x++){const w=a[x];for(let v=0;v<c;v++)w[v]===1&&s++}const g=n.getHeight()*n.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*we.N4}static getDataMaskBit(n,s,a){let c,h;switch(n){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:h=a*s,c=(h&1)+h%3;break;case 6:h=a*s,c=(h&1)+h%3&1;break;case 7:h=a*s,c=h%3+(a+s&1)&1;break;default:throw new L("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,s){let a=0;const c=s?n.getHeight():n.getWidth(),h=s?n.getWidth():n.getHeight(),g=n.getArray();for(let y=0;y<c;y++){let x=0,w=-1;for(let v=0;v<h;v++){const D=s?g[y][v]:g[v][y];D===w?x++:(x>=5&&(a+=we.N1+(x-5)),x=1,w=D)}x>=5&&(a+=we.N1+(x-5))}return a}}we.N1=3,we.N2=3,we.N3=40,we.N4=10;class Rs{constructor(n,s){this.width=n,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(n);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(n,s){return this.bytes[s][n]}getArray(){return this.bytes}setNumber(n,s,a){this.bytes[s][n]=a}setBoolean(n,s,a){this.bytes[s][n]=a?1:0}clear(n){for(const s of this.bytes)Lt.fill(s,n)}equals(n){if(!(n instanceof Rs))return!1;const s=n;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a],g=s.bytes[a];for(let y=0,x=this.width;y<x;++y)if(h[y]!==g[y])return!1}return!0}toString(){const n=new j;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let h=0,g=this.width;h<g;++h)switch(c[h]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Lr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new j;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Lr.NUM_MASK_PATTERNS}}Lr.NUM_MASK_PATTERNS=8;class Se extends T{}Se.kind="WriterException";class p{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,s,a,c,h){p.clearMatrix(h),p.embedBasicPatterns(a,h),p.embedTypeInfo(s,c,h),p.maybeEmbedVersionInfo(a,h),p.embedDataBits(n,c,h)}static embedBasicPatterns(n,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(n,s),p.embedTimingPatterns(s)}static embedTypeInfo(n,s,a){const c=new jt;p.makeTypeInfoBits(n,s,c);for(let h=0,g=c.getSize();h<g;++h){const y=c.get(c.getSize()-1-h),x=p.TYPE_INFO_COORDINATES[h],w=x[0],v=x[1];if(a.setBoolean(w,v,y),h<8){const D=a.getWidth()-h-1;a.setBoolean(D,8,y)}else{const O=a.getHeight()-7+(h-8);a.setBoolean(8,O,y)}}}static maybeEmbedVersionInfo(n,s){if(n.getVersionNumber()<7)return;const a=new jt;p.makeVersionInfoBits(n,a);let c=17;for(let h=0;h<6;++h)for(let g=0;g<3;++g){const y=a.get(c);c--,s.setBoolean(h,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,h,y)}}static embedDataBits(n,s,a){let c=0,h=-1,g=a.getWidth()-1,y=a.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<a.getHeight();){for(let x=0;x<2;++x){const w=g-x;if(!p.isEmpty(a.get(w,y)))continue;let v;c<n.getSize()?(v=n.get(c),++c):v=!1,s!==255&&we.getDataMaskBit(s,w,y)&&(v=!v),a.setBoolean(w,y,v)}y+=h}h=-h,y+=h,g-=2}if(c!==n.getSize())throw new Se("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-bt.numberOfLeadingZeros(n)}static calculateBCHCode(n,s){if(s===0)throw new L("0 polynomial");const a=p.findMSBSet(s);for(n<<=a-1;p.findMSBSet(n)>=a;)n^=s<<p.findMSBSet(n)-a;return n}static makeTypeInfoBits(n,s,a){if(!Lr.isValidMaskPattern(s))throw new Se("Invalid mask pattern");const c=n.getBits()<<3|s;a.appendBits(c,5);const h=p.calculateBCHCode(c,p.TYPE_INFO_POLY);a.appendBits(h,10);const g=new jt;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),a.xor(g),a.getSize()!==15)throw new Se("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(n,s){s.appendBits(n.getVersionNumber(),6);const a=p.calculateBCHCode(n.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new Se("should not happen but we got: "+s.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let s=8;s<n.getWidth()-8;++s){const a=(s+1)%2;p.isEmpty(n.get(s,6))&&n.setNumber(s,6,a),p.isEmpty(n.get(6,s))&&n.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Se;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,s,a){for(let c=0;c<8;++c){if(!p.isEmpty(a.get(n+c,s)))throw new Se;a.setNumber(n+c,s,0)}}static embedVerticalSeparationPattern(n,s,a){for(let c=0;c<7;++c){if(!p.isEmpty(a.get(n,s+c)))throw new Se;a.setNumber(n,s+c,0)}}static embedPositionAdjustmentPattern(n,s,a){for(let c=0;c<5;++c){const h=p.POSITION_ADJUSTMENT_PATTERN[c];for(let g=0;g<5;++g)a.setNumber(n+g,s+c,h[g])}}static embedPositionDetectionPattern(n,s,a){for(let c=0;c<7;++c){const h=p.POSITION_DETECTION_PATTERN[c];for(let g=0;g<7;++g)a.setNumber(n+g,s+c,h[g])}}static embedPositionDetectionPatternsAndSeparators(n){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,n),p.embedPositionDetectionPattern(n.getWidth()-s,0,n),p.embedPositionDetectionPattern(0,n.getWidth()-s,n);const a=8;p.embedHorizontalSeparationPattern(0,a-1,n),p.embedHorizontalSeparationPattern(n.getWidth()-a,a-1,n),p.embedHorizontalSeparationPattern(0,n.getWidth()-a,n);const c=7;p.embedVerticalSeparationPattern(c,0,n),p.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),p.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,s){if(n.getVersionNumber()<2)return;const a=n.getVersionNumber()-1,c=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,g=c.length;h!==g;h++){const y=c[h];if(y>=0)for(let x=0;x!==g;x++){const w=c[x];w>=0&&p.isEmpty(s.get(w,y))&&p.embedPositionAdjustmentPattern(w-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class C{constructor(n,s){this.dataBytes=n,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(n){return we.applyMaskPenaltyRule1(n)+we.applyMaskPenaltyRule2(n)+we.applyMaskPenaltyRule3(n)+we.applyMaskPenaltyRule4(n)}static encode(n,s,a=null){let c=N.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(Cn.CHARACTER_SET)!==void 0;h&&(c=a.get(Cn.CHARACTER_SET).toString());const g=this.chooseMode(n,c),y=new jt;if(g===Xt.BYTE&&(h||N.DEFAULT_BYTE_MODE_ENCODING!==c)){const St=P.getCharacterSetECIByName(c);St!==void 0&&this.appendECI(St,y)}this.appendModeInfo(g,y);const x=new jt;this.appendBytes(n,g,x,c);let w;if(a!==null&&a.get(Cn.QR_VERSION)!==void 0){const St=Number.parseInt(a.get(Cn.QR_VERSION).toString(),10);w=Ut.getVersionForNumber(St);const _t=this.calculateBitsNeeded(g,y,x,w);if(!this.willFit(_t,w,s))throw new Se("Data too big for requested version")}else w=this.recommendVersion(s,g,y,x);const v=new jt;v.appendBitArray(y);const D=g===Xt.BYTE?x.getSizeInBytes():n.length;this.appendLengthInfo(D,w,g,v),v.appendBitArray(x);const O=w.getECBlocksForLevel(s),F=w.getTotalCodewords()-O.getTotalECCodewords();this.terminateBits(F,v);const G=this.interleaveWithECBytes(v,w.getTotalCodewords(),F,O.getNumBlocks()),Q=new Lr;Q.setECLevel(s),Q.setMode(g),Q.setVersion(w);const tt=w.getDimensionForVersion(),ut=new Rs(tt,tt),vt=this.chooseMaskPattern(G,s,w,ut);return Q.setMaskPattern(vt),p.buildMatrix(G,s,w,vt,ut),Q.setMatrix(ut),Q}static recommendVersion(n,s,a,c){const h=this.calculateBitsNeeded(s,a,c,Ut.getVersionForNumber(1)),g=this.chooseVersion(h,n),y=this.calculateBitsNeeded(s,a,c,g);return this.chooseVersion(y,n)}static calculateBitsNeeded(n,s,a,c){return s.getSize()+n.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(n){return n<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,s=null){if(P.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(n))return Xt.KANJI;let a=!1,c=!1;for(let h=0,g=n.length;h<g;++h){const y=n.charAt(h);if(N.isDigit(y))a=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)c=!0;else return Xt.BYTE}return c?Xt.ALPHANUMERIC:a?Xt.NUMERIC:Xt.BYTE}static isOnlyDoubleByteKanji(n){let s;try{s=q.encode(n,P.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const h=s[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(n,s,a,c){let h=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Lr.NUM_MASK_PATTERNS;y++){p.buildMatrix(n,s,a,y,c);let x=this.calculateMaskPenalty(c);x<h&&(h=x,g=y)}return g}static chooseVersion(n,s){for(let a=1;a<=40;a++){const c=Ut.getVersionForNumber(a);if(N.willFit(n,c,s))return c}throw new Se("Data too big")}static willFit(n,s,a){const c=s.getTotalCodewords(),g=s.getECBlocksForLevel(a).getTotalECCodewords(),y=c-g,x=(n+7)/8;return y>=x}static terminateBits(n,s){const a=n*8;if(s.getSize()>a)throw new Se("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let g=0;g<4&&s.getSize()<a;++g)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let g=c;g<8;g++)s.appendBit(!1);const h=n-s.getSizeInBytes();for(let g=0;g<h;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==a)throw new Se("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,s,a,c,h,g){if(c>=a)throw new Se("Block ID too large");const y=n%a,x=a-y,w=Math.floor(n/a),v=w+1,D=Math.floor(s/a),O=D+1,F=w-D,G=v-O;if(F!==G)throw new Se("EC bytes mismatch");if(a!==x+y)throw new Se("RS blocks mismatch");if(n!==(D+F)*x+(O+G)*y)throw new Se("Total bytes mismatch");c<x?(h[0]=D,g[0]=F):(h[0]=O,g[0]=G)}static interleaveWithECBytes(n,s,a,c){if(n.getSizeInBytes()!==a)throw new Se("Number of bits and data bytes does not match");let h=0,g=0,y=0;const x=new Array;for(let v=0;v<c;++v){const D=new Int32Array(1),O=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(s,a,c,v,D,O);const F=D[0],G=new Uint8Array(F);n.toBytes(8*h,G,0,F);const Q=N.generateECBytes(G,O[0]);x.push(new C(G,Q)),g=Math.max(g,F),y=Math.max(y,Q.length),h+=D[0]}if(a!==h)throw new Se("Data bytes does not match offset");const w=new jt;for(let v=0;v<g;++v)for(const D of x){const O=D.getDataBytes();v<O.length&&w.appendBits(O[v],8)}for(let v=0;v<y;++v)for(const D of x){const O=D.getErrorCorrectionBytes();v<O.length&&w.appendBits(O[v],8)}if(s!==w.getSizeInBytes())throw new Se("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(n,s){const a=n.length,c=new Int32Array(a+s);for(let g=0;g<a;g++)c[g]=n[g]&255;new Or(Ae.QR_CODE_FIELD_256).encode(c,s);const h=new Uint8Array(s);for(let g=0;g<s;g++)h[g]=c[a+g];return h}static appendModeInfo(n,s){s.appendBits(n.getBits(),4)}static appendLengthInfo(n,s,a,c){const h=a.getCharacterCountBits(s);if(n>=1<<h)throw new Se(n+" is bigger than "+((1<<h)-1));c.appendBits(n,h)}static appendBytes(n,s,a,c){switch(s){case Xt.NUMERIC:N.appendNumericBytes(n,a);break;case Xt.ALPHANUMERIC:N.appendAlphanumericBytes(n,a);break;case Xt.BYTE:N.append8BitBytes(n,a,c);break;case Xt.KANJI:N.appendKanjiBytes(n,a);break;default:throw new Se("Invalid mode: "+s)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const s=N.getDigit(n);return s>=0&&s<=9}static appendNumericBytes(n,s){const a=n.length;let c=0;for(;c<a;){const h=N.getDigit(n.charAt(c));if(c+2<a){const g=N.getDigit(n.charAt(c+1)),y=N.getDigit(n.charAt(c+2));s.appendBits(h*100+g*10+y,10),c+=3}else if(c+1<a){const g=N.getDigit(n.charAt(c+1));s.appendBits(h*10+g,7),c+=2}else s.appendBits(h,4),c++}}static appendAlphanumericBytes(n,s){const a=n.length;let c=0;for(;c<a;){const h=N.getAlphanumericCode(n.charCodeAt(c));if(h===-1)throw new Se;if(c+1<a){const g=N.getAlphanumericCode(n.charCodeAt(c+1));if(g===-1)throw new Se;s.appendBits(h*45+g,11),c+=2}else s.appendBits(h,6),c++}}static append8BitBytes(n,s,a){let c;try{c=q.encode(n,a)}catch(h){throw new Se(h)}for(let h=0,g=c.length;h!==g;h++){const y=c[h];s.appendBits(y,8)}}static appendKanjiBytes(n,s){let a;try{a=q.encode(n,P.SJIS)}catch(h){throw new Se(h)}const c=a.length;for(let h=0;h<c;h+=2){const g=a[h]&255,y=a[h+1]&255,x=g<<8&4294967295|y;let w=-1;if(x>=33088&&x<=40956?w=x-33088:x>=57408&&x<=60351&&(w=x-49472),w===-1)throw new Se("Invalid byte sequence");const v=(w>>8)*192+(w&255);s.appendBits(v,13)}}static appendECI(n,s){s.appendBits(Xt.ECI.getBits(),4),s.appendBits(n.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class V{write(n,s,a,c=null){if(n.length===0)throw new L("Found empty contents");if(s<0||a<0)throw new L("Requested dimensions are too small: "+s+"x"+a);let h=fe.L,g=V.QUIET_ZONE_SIZE;c!==null&&(c.get(Cn.ERROR_CORRECTION)!==void 0&&(h=fe.fromString(c.get(Cn.ERROR_CORRECTION).toString())),c.get(Cn.MARGIN)!==void 0&&(g=Number.parseInt(c.get(Cn.MARGIN).toString(),10)));const y=N.encode(n,h,c);return this.renderResult(y,s,a,g)}writeToDom(n,s,a,c,h=null){typeof n=="string"&&(n=document.querySelector(n));const g=this.write(s,a,c,h);n&&n.appendChild(g)}renderResult(n,s,a,c){const h=n.getMatrix();if(h===null)throw new Ni;const g=h.getWidth(),y=h.getHeight(),x=g+c*2,w=y+c*2,v=Math.max(s,x),D=Math.max(a,w),O=Math.min(Math.floor(v/x),Math.floor(D/w)),F=Math.floor((v-g*O)/2),G=Math.floor((D-y*O)/2),Q=this.createSVGElement(v,D);for(let tt=0,ut=G;tt<y;tt++,ut+=O)for(let vt=0,St=F;vt<g;vt++,St+=O)if(h.get(vt,tt)===1){const _t=this.createSvgRectElement(St,ut,O,O);Q.appendChild(_t)}return Q}createSVGElement(n,s){const a=document.createElementNS(V.SVG_NS,"svg");return a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(n,s,a,c){const h=document.createElementNS(V.SVG_NS,"rect");return h.setAttributeNS(null,"x",n.toString()),h.setAttributeNS(null,"y",s.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}V.QUIET_ZONE_SIZE=4,V.SVG_NS="http://www.w3.org/2000/svg";class ${encode(n,s,a,c,h){if(n.length===0)throw new L("Found empty contents");if(s!==Nt.QR_CODE)throw new L("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new L(`Requested dimensions are too small: ${a}x${c}`);let g=fe.L,y=$.QUIET_ZONE_SIZE;h!==null&&(h.get(Cn.ERROR_CORRECTION)!==void 0&&(g=fe.fromString(h.get(Cn.ERROR_CORRECTION).toString())),h.get(Cn.MARGIN)!==void 0&&(y=Number.parseInt(h.get(Cn.MARGIN).toString(),10)));const x=N.encode(n,g,h);return $.renderResult(x,a,c,y)}static renderResult(n,s,a,c){const h=n.getMatrix();if(h===null)throw new Ni;const g=h.getWidth(),y=h.getHeight(),x=g+c*2,w=y+c*2,v=Math.max(s,x),D=Math.max(a,w),O=Math.min(Math.floor(v/x),Math.floor(D/w)),F=Math.floor((v-g*O)/2),G=Math.floor((D-y*O)/2),Q=new Pt(v,D);for(let tt=0,ut=G;tt<y;tt++,ut+=O)for(let vt=0,St=F;vt<g;vt++,St+=O)h.get(vt,tt)===1&&Q.setRegion(St,ut,O,O);return Q}}$.QUIET_ZONE_SIZE=4;class ct{encode(n,s,a,c,h){let g;switch(s){case Nt.QR_CODE:g=new $;break;default:throw new L("No encoder available for format "+s)}return g.encode(n,s,a,c,h)}}class It extends Yt{constructor(n,s,a,c,h,g,y,x){if(super(g,y),this.yuvData=n,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=h,c+g>s||h+y>a)throw new L("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(n,s){if(n<0||n>=this.getHeight())throw new L("Requested row is outside the image: "+n);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return gt.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=n*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return gt.arraycopy(this.yuvData,h,c,0,a),c;for(let g=0;g<s;g++){const y=g*n;gt.arraycopy(this.yuvData,h,c,y,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,s,a,c){return new It(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,a,c,!1)}renderThumbnail(){const n=this.getWidth()/It.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/It.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(n*s),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*n;for(let x=0;x<n;x++){const w=c[h+x*It.THUMBNAIL_SCALE_FACTOR]&255;a[y+x]=4278190080|w*65793}h+=this.dataWidth*It.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/It.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/It.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,s){const a=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<s;c++,h+=this.dataWidth){const g=h+n/2;for(let y=h,x=h+n-1;y<g;y++,x--){const w=a[y];a[y]=a[x],a[x]=w}}}invert(){return new ce(this)}}It.THUMBNAIL_SCALE_FACTOR=2;class re extends Yt{constructor(n,s,a,c,h,g,y){if(super(s,a),this.dataWidth=c,this.dataHeight=h,this.left=g,this.top=y,n.BYTES_PER_ELEMENT===4){const x=s*a,w=new Uint8ClampedArray(x);for(let v=0;v<x;v++){const D=n[v],O=D>>16&255,F=D>>7&510,G=D&255;w[v]=(O+F+G)/4&255}this.luminances=w}else this.luminances=n;if(c===void 0&&(this.dataWidth=s),h===void 0&&(this.dataHeight=a),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new L("Crop rectangle does not fit within image data.")}getRow(n,s){if(n<0||n>=this.getHeight())throw new L("Requested row is outside the image: "+n);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return gt.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=n*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return gt.arraycopy(this.luminances,h,c,0,a),c;for(let g=0;g<s;g++){const y=g*n;gt.arraycopy(this.luminances,h,c,y,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,s,a,c){return new re(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+n,this.top+s)}invert(){return new ce(this)}}class Sn extends P{static forName(n){return this.getCharacterSetECIByName(n)}}class Be{}Be.ISO_8859_1=P.ISO8859_1;class cn{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Hi{static singletonList(n){return[n]}static min(n,s){return n.sort(s)[0]}}class Br{constructor(n){this.previous=n}getPrevious(){return this.previous}}class ai extends Br{constructor(n,s,a){super(n),this.value=s,this.bitCount=a}appendTo(n,s){n.appendBits(this.value,this.bitCount)}add(n,s){return new ai(this,n,s)}addBinaryShift(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ai(this,n,s)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+bt.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Gi extends ai{constructor(n,s,a){super(n,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(n,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):a===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(n,s){return new Gi(this,n,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ds(R,n,s){return new Gi(R,n,s)}function Vr(R,n,s){return new ai(R,n,s)}const ha=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],us=0,Lo=1,Ki=2,vl=3,mr=4,io=new ai(null,0,0),Ms=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Rh(R){for(let n of R)Lt.fill(n,-1);return R[us][mr]=0,R[Lo][mr]=0,R[Lo][us]=28,R[vl][mr]=0,R[Ki][mr]=0,R[Ki][us]=15,R}const ro=Rh(Lt.createInt32Array(6,6));class pr{constructor(n,s,a,c){this.token=n,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,s){let a=this.bitCount,c=this.token;if(n!==this.mode){let g=Ms[this.mode][n];c=Vr(c,g&65535,g>>16),a+=g>>16}let h=n===Ki?4:5;return c=Vr(c,s,h),new pr(c,n,0,a+h)}shiftAndAppend(n,s){let a=this.token,c=this.mode===Ki?4:5;return a=Vr(a,ro[this.mode][n],c),a=Vr(a,s,5),new pr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===mr||this.mode===Ki){let y=Ms[a][us];s=Vr(s,y&65535,y>>16),c+=y>>16,a=us}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new pr(s,a,this.binaryShiftByteCount+1,c+h);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(n+1)),g}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Ds(s,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new pr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let s=this.bitCount+(Ms[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?s+=pr.calculateBinaryShiftCost(n)-pr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(s+=10),s<=n.bitCount}toBitArray(n){let s=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new jt;for(const c of s)c.appendTo(a,n);return a}toString(){return Y.format("%s bits=%d bytes=%d",ha[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}pr.INITIAL_STATE=new pr(io,us,0,0);function Lu(R){const n=Y.getCharCode(" "),s=Y.getCharCode("."),a=Y.getCharCode(",");R[us][n]=1;const c=Y.getCharCode("Z"),h=Y.getCharCode("A");for(let O=h;O<=c;O++)R[us][O]=O-h+2;R[Lo][n]=1;const g=Y.getCharCode("z"),y=Y.getCharCode("a");for(let O=y;O<=g;O++)R[Lo][O]=O-y+2;R[Ki][n]=1;const x=Y.getCharCode("9"),w=Y.getCharCode("0");for(let O=w;O<=x;O++)R[Ki][O]=O-w+2;R[Ki][a]=12,R[Ki][s]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let O=0;O<v.length;O++)R[vl][Y.getCharCode(v[O])]=O;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let O=0;O<D.length;O++)Y.getCharCode(D[O])>0&&(R[mr][Y.getCharCode(D[O])]=O);return R}const so=Lu(Lt.createInt32Array(5,256));class Os{constructor(n){this.text=n}encode(){const n=Y.getCharCode(" "),s=Y.getCharCode(`
`);let a=Hi.singletonList(pr.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let g,y=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case Y.getCharCode("\r"):g=y===s?2:0;break;case Y.getCharCode("."):g=y===n?3:0;break;case Y.getCharCode(","):g=y===n?4:0;break;case Y.getCharCode(":"):g=y===n?5:0;break;default:g=0}g>0?(a=Os.updateStateListForPair(a,h,g),h++):a=this.updateStateListForChar(a,h)}return Hi.min(a,(h,g)=>h.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,s){const a=[];for(let c of n)this.updateStateForChar(c,s,a);return Os.simplifyStates(a)}updateStateForChar(n,s,a){let c=this.text[s]&255,h=so[n.getMode()][c]>0,g=null;for(let y=0;y<=mr;y++){let x=so[y][c];if(x>0){if(g==null&&(g=n.endBinaryShift(s)),!h||y===n.getMode()||y===Ki){const w=g.latchAndAppend(y,x);a.push(w)}if(!h&&ro[n.getMode()][y]>=0){const w=g.shiftAndAppend(y,x);a.push(w)}}}if(n.getBinaryShiftByteCount()>0||so[n.getMode()][c]===0){let y=n.addBinaryShiftChar(s);a.push(y)}}static updateStateListForPair(n,s,a){const c=[];for(let h of n)this.updateStateForPair(h,s,a,c);return this.simplifyStates(c)}static updateStateForPair(n,s,a,c){let h=n.endBinaryShift(s);if(c.push(h.latchAndAppend(mr,a)),n.getMode()!==mr&&c.push(h.shiftAndAppend(mr,a)),a===3||a===4){let g=h.latchAndAppend(Ki,16-a).latchAndAppend(Ki,1);c.push(g)}if(n.getBinaryShiftByteCount()>0){let g=n.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(g)}}static simplifyStates(n){let s=[];for(const a of n){let c=!0;for(const h of s){if(h.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(h)&&(s=s.filter(g=>g!==h))}c&&s.push(a)}return s}}class Ne{constructor(){}static encodeBytes(n){return Ne.encode(n,Ne.DEFAULT_EC_PERCENT,Ne.DEFAULT_AZTEC_LAYERS)}static encode(n,s,a){let c=new Os(n).encode(),h=bt.truncDivision(c.getSize()*s,100)+11,g=c.getSize()+h,y,x,w,v,D;if(a!==Ne.DEFAULT_AZTEC_LAYERS){if(y=a<0,x=Math.abs(a),x>(y?Ne.MAX_NB_BITS_COMPACT:Ne.MAX_NB_BITS))throw new L(Y.format("Illegal value %s for layers",a));w=Ne.totalBitsInLayer(x,y),v=Ne.WORD_SIZE[x];let _t=w-w%v;if(D=Ne.stuffBits(c,v),D.getSize()+h>_t)throw new L("Data to large for user specified layer");if(y&&D.getSize()>v*64)throw new L("Data to large for user specified layer")}else{v=0,D=null;for(let _t=0;;_t++){if(_t>Ne.MAX_NB_BITS)throw new L("Data too large for an Aztec code");if(y=_t<=3,x=y?_t+1:_t,w=Ne.totalBitsInLayer(x,y),g>w)continue;(D==null||v!==Ne.WORD_SIZE[x])&&(v=Ne.WORD_SIZE[x],D=Ne.stuffBits(c,v));let me=w-w%v;if(!(y&&D.getSize()>v*64)&&D.getSize()+h<=me)break}}let O=Ne.generateCheckWords(D,w,v),F=D.getSize()/v,G=Ne.generateModeMessage(y,x,F),Q=(y?11:14)+x*4,tt=new Int32Array(Q),ut;if(y){ut=Q;for(let _t=0;_t<tt.length;_t++)tt[_t]=_t}else{ut=Q+1+2*bt.truncDivision(bt.truncDivision(Q,2)-1,15);let _t=bt.truncDivision(Q,2),me=bt.truncDivision(ut,2);for(let se=0;se<_t;se++){let Vn=se+bt.truncDivision(se,15);tt[_t-se-1]=me-Vn-1,tt[_t+se]=me+Vn+1}}let vt=new Pt(ut);for(let _t=0,me=0;_t<x;_t++){let se=(x-_t)*4+(y?9:12);for(let Vn=0;Vn<se;Vn++){let Ji=Vn*2;for(let _i=0;_i<2;_i++)O.get(me+Ji+_i)&&vt.set(tt[_t*2+_i],tt[_t*2+Vn]),O.get(me+se*2+Ji+_i)&&vt.set(tt[_t*2+Vn],tt[Q-1-_t*2-_i]),O.get(me+se*4+Ji+_i)&&vt.set(tt[Q-1-_t*2-_i],tt[Q-1-_t*2-Vn]),O.get(me+se*6+Ji+_i)&&vt.set(tt[Q-1-_t*2-Vn],tt[_t*2+_i])}me+=se*8}if(Ne.drawModeMessage(vt,y,ut,G),y)Ne.drawBullsEye(vt,bt.truncDivision(ut,2),5);else{Ne.drawBullsEye(vt,bt.truncDivision(ut,2),7);for(let _t=0,me=0;_t<bt.truncDivision(Q,2)-1;_t+=15,me+=16)for(let se=bt.truncDivision(ut,2)&1;se<ut;se+=2)vt.set(bt.truncDivision(ut,2)-me,se),vt.set(bt.truncDivision(ut,2)+me,se),vt.set(se,bt.truncDivision(ut,2)-me),vt.set(se,bt.truncDivision(ut,2)+me)}let St=new cn;return St.setCompact(y),St.setSize(ut),St.setLayers(x),St.setCodeWords(F),St.setMatrix(vt),St}static drawBullsEye(n,s,a){for(let c=0;c<a;c+=2)for(let h=s-c;h<=s+c;h++)n.set(h,s-c),n.set(h,s+c),n.set(s-c,h),n.set(s+c,h);n.set(s-a,s-a),n.set(s-a+1,s-a),n.set(s-a,s-a+1),n.set(s+a,s-a),n.set(s+a,s-a+1),n.set(s+a,s+a-1)}static generateModeMessage(n,s,a){let c=new jt;return n?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=Ne.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=Ne.generateCheckWords(c,40,4)),c}static drawModeMessage(n,s,a,c){let h=bt.truncDivision(a,2);if(s)for(let g=0;g<7;g++){let y=h-3+g;c.get(g)&&n.set(y,h-5),c.get(g+7)&&n.set(h+5,y),c.get(20-g)&&n.set(y,h+5),c.get(27-g)&&n.set(h-5,y)}else for(let g=0;g<10;g++){let y=h-5+g+bt.truncDivision(g,5);c.get(g)&&n.set(y,h-7),c.get(g+10)&&n.set(h+7,y),c.get(29-g)&&n.set(y,h+7),c.get(39-g)&&n.set(h-7,y)}}static generateCheckWords(n,s,a){let c=n.getSize()/a,h=new Or(Ne.getGF(a)),g=bt.truncDivision(s,a),y=Ne.bitsToWords(n,a,g);h.encode(y,g-c);let x=s%a,w=new jt;w.appendBits(0,x);for(const v of Array.from(y))w.appendBits(v,a);return w}static bitsToWords(n,s,a){let c=new Int32Array(a),h,g;for(h=0,g=n.getSize()/s;h<g;h++){let y=0;for(let x=0;x<s;x++)y|=n.get(h*s+x)?1<<s-x-1:0;c[h]=y}return c}static getGF(n){switch(n){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new L("Unsupported word size "+n)}}static stuffBits(n,s){let a=new jt,c=n.getSize(),h=(1<<s)-2;for(let g=0;g<c;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=c||n.get(g+x))&&(y|=1<<s-1-x);(y&h)===h?(a.appendBits(y&h,s),g--):(y&h)===0?(a.appendBits(y|1,s),g--):a.appendBits(y,s)}return a}static totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}Ne.DEFAULT_EC_PERCENT=33,Ne.DEFAULT_AZTEC_LAYERS=0,Ne.MAX_NB_BITS=32,Ne.MAX_NB_BITS_COMPACT=4,Ne.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ao{encode(n,s,a,c){return this.encodeWithHints(n,s,a,c,null)}encodeWithHints(n,s,a,c,h){let g=Be.ISO_8859_1,y=Ne.DEFAULT_EC_PERCENT,x=Ne.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Cn.CHARACTER_SET)&&(g=Sn.forName(h.get(Cn.CHARACTER_SET).toString())),h.has(Cn.ERROR_CORRECTION)&&(y=bt.parseInt(h.get(Cn.ERROR_CORRECTION).toString())),h.has(Cn.AZTEC_LAYERS)&&(x=bt.parseInt(h.get(Cn.AZTEC_LAYERS).toString()))),ao.encodeLayers(n,s,a,c,g,y,x)}static encodeLayers(n,s,a,c,h,g,y){if(s!==Nt.AZTEC)throw new L("Can only encode AZTEC, but got "+s);let x=Ne.encode(Y.getBytes(n,h),g,y);return ao.renderResult(x,a,c)}static renderResult(n,s,a){let c=n.getMatrix();if(c==null)throw new Ni;let h=c.getWidth(),g=c.getHeight(),y=Math.max(s,h),x=Math.max(a,g),w=Math.min(y/h,x/g),v=(y-h*w)/2,D=(x-g*w)/2,O=new Pt(y,x);for(let F=0,G=D;F<g;F++,G+=w)for(let Q=0,tt=v;Q<h;Q++,tt+=w)c.get(Q,F)&&O.setRegion(tt,G,w,w);return O}}r.AbstractExpandedDecoder=An,r.ArgumentException=M,r.ArithmeticException=Xr,r.AztecCode=cn,r.AztecCodeReader=_s,r.AztecCodeWriter=ao,r.AztecDecoder=je,r.AztecDetector=Wa,r.AztecDetectorResult=Za,r.AztecEncoder=Ne,r.AztecHighLevelEncoder=Os,r.AztecPoint=Jn,r.BarcodeFormat=Nt,r.Binarizer=wt,r.BinaryBitmap=X,r.BitArray=jt,r.BitMatrix=Pt,r.BitSource=wn,r.BrowserAztecCodeReader=Ro,r.BrowserBarcodeReader=$a,r.BrowserCodeReader=Dt,r.BrowserDatamatrixCodeReader=Rr,r.BrowserMultiFormatReader=Mr,r.BrowserPDF417Reader=Mo,r.BrowserQRCodeReader=Oo,r.BrowserQRCodeSvgWriter=V,r.CharacterSetECI=P,r.ChecksumException=et,r.Code128Reader=Ct,r.Code39Reader=Ge,r.DataMatrixDecodedBitStreamParser=Ai,r.DataMatrixReader=Di,r.DecodeHintType=Ht,r.DecoderResult=Ze,r.DefaultGridSampler=ia,r.DetectorResult=na,r.EAN13Reader=rn,r.EncodeHintType=Cn,r.Exception=T,r.FormatException=k,r.GenericGF=Ae,r.GenericGFPoly=Fn,r.GlobalHistogramBinarizer=ot,r.GridSampler=qr,r.GridSamplerInstance=fi,r.HTMLCanvasElementLuminanceSource=ye,r.HybridBinarizer=pt,r.ITFReader=ne,r.IllegalArgumentException=L,r.IllegalStateException=Ni,r.InvertedLuminanceSource=ce,r.LuminanceSource=Yt,r.MathUtils=Wt,r.MultiFormatOneDReader=Ei,r.MultiFormatReader=no,r.MultiFormatWriter=ct,r.NotFoundException=nt,r.OneDReader=He,r.PDF417DecodedBitStreamParser=lt,r.PDF417DecoderErrorCorrection=hr,r.PDF417Reader=Tn,r.PDF417ResultMetadata=Wr,r.PerspectiveTransform=hi,r.PlanarYUVLuminanceSource=It,r.QRCodeByteMatrix=Rs,r.QRCodeDataMask=jn,r.QRCodeDecodedBitStreamParser=We,r.QRCodeDecoderErrorCorrectionLevel=fe,r.QRCodeDecoderFormatInformation=Nn,r.QRCodeEncoder=N,r.QRCodeEncoderQRCode=Lr,r.QRCodeMaskUtil=we,r.QRCodeMatrixUtil=p,r.QRCodeMode=Xt,r.QRCodeReader=Bi,r.QRCodeVersion=Ut,r.QRCodeWriter=$,r.RGBLuminanceSource=re,r.RSS14Reader=ze,r.RSSExpandedReader=Et,r.ReaderException=Ns,r.ReedSolomonDecoder=ar,r.ReedSolomonEncoder=Or,r.ReedSolomonException=ci,r.Result=Mt,r.ResultMetadataType=xe,r.ResultPoint=Bt,r.StringUtils=Y,r.UnsupportedOperationException=K,r.VideoInputDevice=W,r.WhiteRectangleDetector=dn,r.WriterException=Se,r.ZXingArrays=Lt,r.ZXingCharset=Sn,r.ZXingInteger=bt,r.ZXingStandardCharsets=Be,r.ZXingStringBuilder=j,r.ZXingStringEncoding=q,r.ZXingSystem=gt,r.createAbstractExpandedDecoder=Ri,Object.defineProperty(r,"__esModule",{value:!0})}))})(uu,uu.exports)),uu.exports}var yn=Qx();const Zx=r0(yn),Wx=Mx({__proto__:null,default:Zx},[yn]);var a2=(function(){function o(t,r,u){if(this.formatMap=new Map([[kt.QR_CODE,yn.BarcodeFormat.QR_CODE],[kt.AZTEC,yn.BarcodeFormat.AZTEC],[kt.CODABAR,yn.BarcodeFormat.CODABAR],[kt.CODE_39,yn.BarcodeFormat.CODE_39],[kt.CODE_93,yn.BarcodeFormat.CODE_93],[kt.CODE_128,yn.BarcodeFormat.CODE_128],[kt.DATA_MATRIX,yn.BarcodeFormat.DATA_MATRIX],[kt.MAXICODE,yn.BarcodeFormat.MAXICODE],[kt.ITF,yn.BarcodeFormat.ITF],[kt.EAN_13,yn.BarcodeFormat.EAN_13],[kt.EAN_8,yn.BarcodeFormat.EAN_8],[kt.PDF_417,yn.BarcodeFormat.PDF_417],[kt.RSS_14,yn.BarcodeFormat.RSS_14],[kt.RSS_EXPANDED,yn.BarcodeFormat.RSS_EXPANDED],[kt.UPC_A,yn.BarcodeFormat.UPC_A],[kt.UPC_E,yn.BarcodeFormat.UPC_E],[kt.UPC_EAN_EXTENSION,yn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Wx)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=u;var d=this.createZXingFormats(t),m=new Map;m.set(yn.DecodeHintType.POSSIBLE_FORMATS,d),m.set(yn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return o.prototype.decodeAsync=function(t){var r=this;return new Promise(function(u,d){try{u(r.decode(t))}catch(m){d(m)}})},o.prototype.decode=function(t){var r=new yn.MultiFormatReader(this.verbose,this.hints),u=new yn.HTMLCanvasElementLuminanceSource(t),d=new yn.BinaryBitmap(new yn.HybridBinarizer(u)),m=r.decode(d);return{text:m.text,format:Sp.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,u,d){t.set(r,u)}),t},o.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},o.prototype.createZXingFormats=function(t){for(var r=[],u=0,d=t;u<d.length;u++){var m=d[u];this.formatMap.has(m)?r.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return r},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o})(),Kx=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},Jx=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},o2=(function(){function o(t,r,u){if(this.formatMap=new Map([[kt.QR_CODE,"qr_code"],[kt.AZTEC,"aztec"],[kt.CODABAR,"codabar"],[kt.CODE_39,"code_39"],[kt.CODE_93,"code_93"],[kt.CODE_128,"code_128"],[kt.DATA_MATRIX,"data_matrix"],[kt.ITF,"itf"],[kt.EAN_13,"ean_13"],[kt.EAN_8,"ean_8"],[kt.PDF_417,"pdf417"],[kt.UPC_A,"upc_a"],[kt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=u;var d=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},o.prototype.decodeAsync=function(t){return Kx(this,void 0,void 0,function(){var r,u;return Jx(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=d.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(r),[2,{text:u.rawValue,format:Sp.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(t){for(var r=null,u=0,d=0,m=t;d<m.length;d++){var _=m[d],S=_.boundingBox.width*_.boundingBox.height;S>u&&(u=S,r=_)}if(!r)throw"No largest barcode found";return r},o.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],u=0,d=t;u<d.length;u++){var m=d[u];this.formatMap.has(m)?r.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},o.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},o.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,u,d){t.set(r,u)}),t},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o})(),l2=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},u2=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},$x=(function(){function o(t,r,u,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,r&&o2.isSupported()?(this.primaryDecoder=new o2(t,u,d),this.secondaryDecoder=new a2(t,u,d)):this.primaryDecoder=new a2(t,u,d)}return o.prototype.decodeAsync=function(t){return l2(this,void 0,void 0,function(){var r;return u2(this,function(u){switch(u.label){case 0:r=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(t){return l2(this,void 0,void 0,function(){var r,u;return u2(this,function(d){switch(d.label){case 0:r=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,d.sent()];case 3:if(u=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw u;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,u=this.executionResults;r<u.length;r++){var d=u[r];t+=d}var m=t/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o})(),a0=(function(){var o=function(t,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])},o(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");o(t,r);function u(){this.constructor=t}t.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}})(),Wc=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},Kc=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Np=(function(){function o(t,r){this.name=t,this.track=r}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(t){var r={};r[this.name]=t;var u={advanced:[r]};return this.track.applyConstraints(u)},o.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},o})(),tA=(function(o){a0(t,o);function t(r,u){return o.call(this,r,u)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var u={};u[this.name]=r;var d={advanced:[u]};return this.track.applyConstraints(d)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),u=r[this.name];return{min:u.min,max:u.max,step:u.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(Np),eA=(function(o){a0(t,o);function t(r){return o.call(this,"zoom",r)||this}return t})(tA),nA=(function(o){a0(t,o);function t(r){return o.call(this,"torch",r)||this}return t})(Np),iA=(function(){function o(t){this.track=t}return o.prototype.zoomFeature=function(){return new eA(this.track)},o.prototype.torchFeature=function(){return new nA(this.track)},o})(),rA=(function(){function o(t,r,u){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return o.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},o.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var u=t.surface.clientWidth,d=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(u,d),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(t,r,u,d){return Wc(this,void 0,void 0,function(){var m,_;return Kc(this,function(S){switch(S.label){case 0:return m=new o(t,r,d),u.aspectRatio?(_={aspectRatio:u.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:S.sent(),S.label=2;case 2:return m.setupSurface(),[2,m]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(t){this.failIfClosed();var r=this,u=function(){setTimeout(t,200),r.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(t){return Wc(this,void 0,void 0,function(){return Kc(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,u){var d=t.mediaStream.getVideoTracks(),m=d.length,_=0;t.mediaStream.getVideoTracks().forEach(function(S){t.mediaStream.removeTrack(S),S.stop(),++_,_>=m&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},o.prototype.getCapabilities=function(){return new iA(this.getFirstTrackOrFail())},o})(),sA=(function(){function o(t){this.mediaStream=t}return o.prototype.render=function(t,r,u){return Wc(this,void 0,void 0,function(){return Kc(this,function(d){return[2,rA.create(t,this.mediaStream,r,u)]})})},o.create=function(t){return Wc(this,void 0,void 0,function(){var r,u;return Kc(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return u=d.sent(),[2,new o(u)]}})})},o})(),c2=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},h2=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},aA=(function(){function o(){}return o.failIfNotSupported=function(){return c2(this,void 0,void 0,function(){return h2(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(t){return c2(this,void 0,void 0,function(){return h2(this,function(r){return[2,sA.create(t)]})})},o})(),oA=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},lA=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},uA=(function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var t=hl.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(t=hl.insecureContextCameraQueryError()),Promise.reject(t)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},o.getCamerasFromMediaDevices=function(){return oA(this,void 0,void 0,function(){var t,r,u,d,m,_,S;return lA(this,function(I){switch(I.label){case 0:return t=function(T){for(var M=T.getVideoTracks(),L=0,X=M;L<X.length;L++){var et=X[L];et.enabled=!1,et.stop(),T.removeTrack(et)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=I.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=I.sent(),d=[],m=0,_=u;m<_.length;m++)S=_[m],S.kind==="videoinput"&&d.push({id:S.deviceId,label:S.label});return t(r),[2,d]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var u=function(m){for(var _=[],S=0,I=m;S<I.length;S++){var T=I[S];T.kind==="video"&&_.push({id:T.id,label:T.label})}t(_)},d=MediaStreamTrack;d.getSources(u)})},o})(),Un;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(Un||(Un={}));var cA=(function(){function o(){this.state=Un.NOT_STARTED,this.onGoingTransactionNewState=Un.UNKNOWN}return o.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},o.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Un.UNKNOWN,this.directTransition(t)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Un.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Un.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(t){switch(this.state){case Un.UNKNOWN:throw"Transition from unknown is not allowed";case Un.NOT_STARTED:this.failIfNewStateIs(t,[Un.PAUSED]);break;case Un.SCANNING:break;case Un.PAUSED:break}},o.prototype.failIfNewStateIs=function(t,r){for(var u=0,d=r;u<d.length;u++){var m=d[u];if(t===m)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},o})(),hA=(function(){function o(t){this.stateManager=t}return o.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},o.prototype.directTransition=function(t){this.stateManager.directTransition(t)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===Un.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==Un.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Un.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===Un.PAUSED},o})(),fA=(function(){function o(){}return o.create=function(){return new hA(new cA)},o})(),dA=(function(){var o=function(t,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])},o(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");o(t,r);function u(){this.constructor=t}t.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}})(),Tr=(function(o){dA(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(es),gA=(function(){function o(t,r){this.logger=r,this.fps=Tr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Tr.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ip.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!gs(this.qrbox)},o.create=function(t,r){return new o(t,r)},o})(),f2=(function(){function o(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var u;typeof r=="boolean"?this.verbose=r===!0:r&&(u=r,this.verbose=u.verbose===!0,u.experimentalFeatures),this.logger=new bp(this.verbose),this.qrcode=new $x(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(u),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=fA.create()}return o.prototype.start=function(t,r,u,d){var m=this;if(!t)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;d?_=d:_=this.verbose?this.logger.log:function(){};var S=gA.create(r,this.logger);this.clearElement();var I=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?I=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var T=I,M=document.getElementById(this.elementId);M.clientWidth?M.clientWidth:Tr.DEFAULT_WIDTH,M.style.position="relative",this.shouldScan=!0,this.element=M;var L=this,X=this.stateManagerProxy.startTransition(Un.SCANNING);return new Promise(function(et,wt){var gt=T?S.videoConstraints:L.createVideoConstraints(t);if(!gt){X.cancel(),wt("videoConstraints should be defined");return}var At={};(!T||S.aspectRatio)&&(At.aspectRatio=S.aspectRatio);var zt={onRenderSurfaceReady:function(Lt,bt){L.setupUi(Lt,bt,S),L.isScanning=!0,L.foreverScan(S,u,_)}};aA.failIfNotSupported().then(function(Lt){Lt.create(gt).then(function(bt){return bt.render(m.element,At,zt).then(function(jt){L.renderedCamera=jt,X.execute(),et(null)}).catch(function(jt){X.cancel(),wt(jt)})}).catch(function(bt){X.cancel(),wt(hl.errorGettingUserMedia(bt))})}).catch(function(Lt){X.cancel(),wt(hl.cameraStreamingNotSupported())})})},o.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Un.PAUSED),this.showPausedState(),(gs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Un.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Un.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(t.element){var m=document.getElementById(Tr.SHADED_REGION_ELEMENT_ID);m&&t.element.removeChild(m)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),u(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),r.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(u){return u.decodedText})},o.prototype.scanFileV2=function(t,r){var u=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(gs(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,m){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(t);var _=new Image;_.onload=function(){var S=_.width,I=_.height,T=document.getElementById(u.elementId),M=T.clientWidth?T.clientWidth:Tr.DEFAULT_WIDTH,L=Math.max(T.clientHeight?T.clientHeight:I,Tr.FILE_SCAN_MIN_HEIGHT),X=u.computeCanvasDrawConfig(S,I,M,L);if(r){var et=u.createCanvasElement(M,L,"qr-canvas-visible");et.style.display="inline-block",T.appendChild(et);var wt=et.getContext("2d");if(!wt)throw"Unable to get 2d context from canvas";wt.canvas.width=M,wt.canvas.height=L,wt.drawImage(_,0,0,S,I,X.x,X.y,X.width,X.height)}var gt=Tr.FILE_SCAN_HIDDEN_CANVAS_PADDING,At=Math.max(_.width,X.width),zt=Math.max(_.height,X.height),Lt=At+2*gt,bt=zt+2*gt,jt=u.createCanvasElement(Lt,bt);T.appendChild(jt);var Le=jt.getContext("2d");if(!Le)throw"Unable to get 2d context from canvas";Le.canvas.width=Lt,Le.canvas.height=bt,Le.drawImage(_,0,0,S,I,gt,gt,At,zt);try{u.qrcode.decodeRobustlyAsync(jt).then(function(Ht){d(i2.createFromQrcodeResult(Ht))}).catch(m)}catch(Ht){m("QR code parse error, error = ".concat(Ht))}},_.onerror=m,_.onabort=m,_.onstalled=m,_.onsuspend=m,_.src=URL.createObjectURL(t)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return uA.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(t){if(t){if(!Ip.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(t){var r=[kt.QR_CODE,kt.AZTEC,kt.CODABAR,kt.CODE_39,kt.CODE_93,kt.CODE_128,kt.DATA_MATRIX,kt.MAXICODE,kt.ITF,kt.EAN_13,kt.EAN_8,kt.PDF_417,kt.RSS_14,kt.RSS_EXPANDED,kt.UPC_A,kt.UPC_E,kt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],d=0,m=t.formatsToSupport;d<m.length;d++){var _=m[d];Yx(_)?u.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},o.prototype.getUseBarCodeDetectorIfSupported=function(t){if(gs(t))return!0;if(!gs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(gs(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return gs(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(t,r,u){var d=this,m=u.qrbox;this.validateQrboxConfig(m);var _=this.toQrdimensions(t,r,m),S=function(T){if(T<Tr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Tr.MIN_QR_BOX_SIZE,"px.")},I=function(T){return T>t&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),T=t),T};S(_.width),S(_.height),_.width=I(_.width)},o.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(t,r,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(t,r)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return u},o.prototype.setupUi=function(t,r,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,u);var d=gs(u.qrbox)?{width:t,height:r}:u.qrbox;this.validateQrboxConfig(d);var m=this.toQrdimensions(t,r,d);m.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=u.isShadedBoxEnabled()&&m.height<=r,S={x:0,y:0,width:t,height:r},I=_?this.getShadedRegionBounds(t,r,m):S,T=this.createCanvasElement(I.width,I.height),M={willReadFrequently:!0},L=T.getContext("2d",M);L.canvas.width=I.width,L.canvas.height=I.height,this.element.append(T),_&&this.possiblyInsertShadingElement(this.element,t,r,m),this.createScannerPausedUiElement(this.element),this.qrRegion=I,this.context=L,this.canvasElement=T},o.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=hl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},o.prototype.scanContext=function(t,r){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return t(d.text,i2.createFromQrcodeResult(d)),u.possiblyUpdateShaders(!0),!0}).catch(function(d){u.possiblyUpdateShaders(!1);var m=hl.codeParseError(d);return r(m,vp.createFrom(m)),!1})},o.prototype.foreverScan=function(t,r,u){var d=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),_=m.videoWidth/m.clientWidth,S=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var I=this.qrRegion.width*_,T=this.qrRegion.height*S,M=this.qrRegion.x*_,L=this.qrRegion.y*S;this.context.drawImage(m,M,L,I,T,0,0,this.qrRegion.width,this.qrRegion.height);var X=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(t,r,u)},d.getTimeoutFps(t.fps))};this.scanContext(r,u).then(function(et){!et&&t.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(r,u).finally(function(){X()})):X()}).catch(function(et){d.logger.logError("Error happend while scanning context",et),X()})}},o.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",u="deviceId",d={user:!0,environment:!0},m="exact",_=function(wt){if(wt in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(wt,"'")},S=Object.keys(t);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var I=Object.keys(t)[0];if(I!==r&&I!==u)throw"Only '".concat(r,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(I===r){var T=t.facingMode;if(typeof T=="string"){if(_(T))return{facingMode:T}}else if(typeof T=="object")if(m in T){if(_(T["".concat(m)]))return{facingMode:{exact:T["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var M=typeof T;throw"Invalid type of 'facingMode' = ".concat(M)}}else{var L=t.deviceId;if(typeof L=="string")return{deviceId:L};if(typeof L=="object"){if(m in L)return{deviceId:{exact:L["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var X=typeof L;throw"Invalid type of 'deviceId' = ".concat(X)}}}var et=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(et)},o.prototype.computeCanvasDrawConfig=function(t,r,u,d){if(t<=u&&r<=d){var m=(u-t)/2,_=(d-r)/2;return{x:m,y:_,width:t,height:r}}else{var S=t,I=r;return t>u&&(r=u/t*r,t=u),r>d&&(t=d/r*t,r=d),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(I)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,u,d)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},o.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Tr.BORDER_SHADER_MATCH_COLOR:Tr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(t,r,u){var d=t,m=r,_=document.createElement("canvas");return _.style.width="".concat(d,"px"),_.style.height="".concat(m,"px"),_.style.display="none",_.id=gs(u)?"qr-canvas":u,_},o.prototype.getShadedRegionBounds=function(t,r,u){if(u.width>t||u.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-u.width)/2,y:(r-u.height)/2,width:u.width,height:u.height}},o.prototype.possiblyInsertShadingElement=function(t,r,u,d){if(!(r-d.width<1||u-d.height<1)){var m=document.createElement("div");m.style.position="absolute";var _=(r-d.width)/2,S=(u-d.height)/2;if(m.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Tr.SHADED_REGION_ELEMENT_ID),r-d.width<11||u-d.height<11)this.hasBorderShaders=!1;else{var I=5,T=40;this.insertShaderBorders(m,T,I,-I,null,0,!0),this.insertShaderBorders(m,T,I,-I,null,0,!1),this.insertShaderBorders(m,T,I,null,-I,0,!0),this.insertShaderBorders(m,T,I,null,-I,0,!1),this.insertShaderBorders(m,I,T+I,-I,null,-I,!0),this.insertShaderBorders(m,I,T+I,null,-I,-I,!0),this.insertShaderBorders(m,I,T+I,-I,null,-I,!1),this.insertShaderBorders(m,I,T+I,null,-I,-I,!1),this.hasBorderShaders=!0}t.append(m)}},o.prototype.insertShaderBorders=function(t,r,u,d,m,_,S){var I=document.createElement("div");I.style.position="absolute",I.style.backgroundColor=Tr.BORDER_SHADER_DEFAULT_COLOR,I.style.width="".concat(r,"px"),I.style.height="".concat(u,"px"),d!==null&&(I.style.top="".concat(d,"px")),m!==null&&(I.style.bottom="".concat(m,"px")),S?I.style.left="".concat(_,"px"):I.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(I),t.appendChild(I)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(t){return 1e3/t},o})(),o0="data:image/svg+xml;base64,",mA=o0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",pA=o0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",d2=o0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",yA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",g2=(function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o})(),EA=(function(){function o(){this.data=g2.createDefault();var t=localStorage.getItem(o.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},o.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=g2.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o})(),xA=(function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=r2.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var u=document.createElement("br"),d=document.createElement("br");this.infoDiv.appendChild(u),this.infoDiv.appendChild(d);var m=document.createElement("a");m.innerText=r2.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),t.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o})(),AA=(function(){function o(t,r){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=r,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(t){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=d2,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(u){return r.onHoverIn()},this.infoIcon.onmouseout=function(u){return r.onHoverOut()},this.infoIcon.onclick=function(u){return r.onClick()},t.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=yA,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=d2,this.infoIcon.style.opacity="0.6")},o})(),_A=(function(){function o(){var t=this;this.infoDiv=new xA,this.infoIcon=new AA(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return o.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},o})(),wA=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},TA=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},m2=(function(){function o(){}return o.hasPermissions=function(){return wA(this,void 0,void 0,function(){var t,r,u,d;return TA(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=m.sent(),r=0,u=t;r<u.length;r++)if(d=u[r],d.kind==="videoinput"&&d.label)return[2,!0];return[2,!1]}})})},o})(),Ba=(function(){function o(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var u=r[t];if(o.isCameraScanType(u))return!0}return!1},o.isCameraScanType=function(t){return t===za.SCAN_TYPE_CAMERA},o.isFileScanType=function(t){return t===za.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return es.DEFAULT_SUPPORTED_SCAN_TYPE;var r=es.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var u=0,d=t;u<d.length;u++){var m=d[u];if(!es.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return t},o})(),Sr=(function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o})(),Ws=(function(){function o(){}return o.createElement=function(t,r){var u=document.createElement(t);return u.id=r,u.classList.add(Sr.ALL_ELEMENT_CLASS),t==="button"&&u.setAttribute("type","button"),u},o})(),Rp=function(o,t,r,u){function d(m){return m instanceof r?m:new r(function(_){_(m)})}return new(r||(r=Promise))(function(m,_){function S(M){try{T(u.next(M))}catch(L){_(L)}}function I(M){try{T(u.throw(M))}catch(L){_(L)}}function T(M){M.done?m(M.value):d(M.value).then(S,I)}T((u=u.apply(o,t||[])).next())})},Dp=function(o,t){var r={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},u,d,m,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(T){return function(M){return I([T,M])}}function I(T){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(r=0)),r;)try{if(u=1,d&&(m=T[0]&2?d.return:T[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,T[1])).done)return m;switch(d=0,m&&(T=[T[0]&2,m.value]),T[0]){case 0:case 1:m=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,d=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(m=r.trys,!(m=m.length>0&&m[m.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!m||T[1]>m[0]&&T[1]<m[3])){r.label=T[1];break}if(T[0]===6&&r.label<m[1]){r.label=m[1],m=T;break}if(m&&r.label<m[2]){r.label=m[2],r.ops.push(T);break}m[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(o,r)}catch(M){T=[6,M],d=0}finally{u=m=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},p2=(function(){function o(t,r,u){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=r,this.onTorchActionFailureCallback=u}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return Rp(this,void 0,void 0,function(){var t,r;return Dp(this,function(u){switch(u.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return u.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return r=u.sent(),this.propagateFailure(t,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(t,r){t===r?(this.buttonController.setText(r?nn.torchOffButton():nn.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},o.prototype.propagateFailure=function(t,r){var u=t?nn.torchOnFailedMessage():nn.torchOffFailedMessage();r&&(u+="; Error = "+r),this.onTorchActionFailureCallback(u)},o.prototype.reset=function(){this.isTorchOn=!1},o})(),CA=(function(){function o(t,r){this.onTorchActionFailureCallback=r,this.torchButton=Ws.createElement("button",Sr.TORCH_BUTTON_ID),this.torchController=new p2(t,this,r)}return o.prototype.render=function(t,r){var u=this;this.torchButton.innerText=nn.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var d=this;this.torchButton.addEventListener("click",function(m){return Rp(u,void 0,void 0,function(){return Dp(this,function(_){switch(_.label){case 0:return[4,d.torchController.flipState()];case 1:return _.sent(),d.torchController.isTorchEnabled()?(d.torchButton.classList.remove(Sr.TORCH_BUTTON_CLASS_TORCH_OFF),d.torchButton.classList.add(Sr.TORCH_BUTTON_CLASS_TORCH_ON)):(d.torchButton.classList.remove(Sr.TORCH_BUTTON_CLASS_TORCH_ON),d.torchButton.classList.add(Sr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(t){this.torchController=new p2(t,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(t){this.torchButton.innerText=t},o.prototype.reset=function(){this.torchButton.innerText=nn.torchOnButton(),this.torchController.reset()},o.create=function(t,r,u,d){var m=new o(r,d);return m.render(t,u),m},o})(),SA=(function(){function o(t,r,u){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",t.appendChild(this.fileBasedScanRegion);var d=document.createElement("label");d.setAttribute("for",this.getFileScanInputId()),d.style.display="inline-block",this.fileBasedScanRegion.appendChild(d),this.fileSelectionButton=Ws.createElement("button",Sr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(S){d.click()}),d.append(this.fileSelectionButton),this.fileScanInput=Ws.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",d.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(S){if(!(S==null||S.target==null)){var I=S.target;if(!(I.files&&I.files.length===0)){var T=I.files,M=T[0],L=M.name;m.setImageNameToButton(L),u(M)}}});var _=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(_),this.fileBasedScanRegion.addEventListener("dragenter",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(S){S.stopPropagation(),S.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var I=S.dataTransfer;if(I){var T=I.files;if(!T||T.length===0)return;for(var M=!1,L=0;L<T.length;++L){var X=T.item(L);if(X){var et=/image.*/;if(X.type.match(et)){M=!0;var wt=X.name;m.setImageNameToButton(wt),u(X),_.innerText=nn.dragAndDropMessage();break}}}M||(_.innerText=nn.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=nn.dragAndDropMessage(),t.style.fontWeight="400",t},o.prototype.setImageNameToButton=function(t){var r=20;if(t.length>r){var u=t.substring(0,8),d=t.length,m=t.substring(d-8,d);t="".concat(u,"....").concat(m)}var _=nn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=_},o.prototype.setInitialValueToButton=function(){var t=nn.fileSelectionChooseImage()+" - "+nn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(t,r,u){var d=new o(t,r,u);return d},o})(),vA=(function(){function o(t){this.selectElement=Ws.createElement("select",Sr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return o.prototype.render=function(t){var r=document.createElement("span");r.style.marginRight="10px";var u=this.cameras.length;if(u===0)throw new Error("No cameras found");if(u===1)r.style.display="none";else{var d=nn.selectCamera();r.innerText="".concat(d," (").concat(this.cameras.length,")  ")}for(var m=1,_=0,S=this.cameras;_<S.length;_++){var I=S[_],T=I.id,M=I.label==null?T:I.label;(!M||M==="")&&(M=[nn.anonymousCameraPrefix(),m++].join(" "));var L=document.createElement("option");L.value=T,L.innerText=M,this.options.push(L),this.selectElement.appendChild(L)}r.appendChild(this.selectElement),t.appendChild(r)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(t){for(var r=0,u=this.options;r<u.length;r++){var d=u[r];if(d.value===t)return!0}return!1},o.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(t,r){var u=new o(r);return u.render(t),u},o})(),bA=(function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ws.createElement("input",Sr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(t,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var u=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(u),this.rangeText.style.marginRight="10px";var d=this;this.rangeInput.addEventListener("input",function(){return d.onValueChange()}),this.rangeInput.addEventListener("change",function(){return d.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var t=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(t,r,u,d){this.rangeInput.min=t.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=d.toString(),this.rangeInput.value=u.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(t,r){var u=new o;return u.render(t,r),u},o})(),Cr;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Cr||(Cr={}));function IA(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function NA(o,t){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:t}}var RA=(function(){function o(t,r,u){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(r),this.verbose=u===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ba(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new bp(this.verbose),this.persistedDataManager=new EA,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(t,r){var u=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,_){if(t)t(m,_);else{if(u.lastMatchFound===m)return;u.lastMatchFound=m,u.setHeaderMessage(nn.lastMatch(m),Cr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,_){r&&r(m,_)};var d=document.getElementById(this.elementId);if(!d)throw"HTML Element with id=".concat(this.elementId," not found");d.innerHTML="",this.createBasicLayout(d),this.html5Qrcode=new f2(this.getScanRegionId(),NA(this.config,this.verbose))},o.prototype.pause=function(t){(gs(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var t=this,r=function(){var u=document.getElementById(t.elementId);u&&(u.innerHTML="",t.resetBasicLayout(u))};return this.html5Qrcode?new Promise(function(u,d){if(!t.html5Qrcode){u();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(m){if(!t.html5Qrcode){u();return}t.html5Qrcode.clear(),r(),u()}).catch(function(m){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",m),d(m)}):(t.html5Qrcode.clear(),r(),u())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(t){return t?(t.fps||(t.fps=es.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!es.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=es.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=es.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:es.SCAN_DEFAULT_FPS,rememberLastUsedCamera:es.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:es.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var r=document.createElement("div"),u=this.getScanRegionId();r.id=u,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",t.appendChild(r),Ba.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var d=document.createElement("div"),m=this.getDashboardId();d.id=m,d.style.width="100%",t.appendChild(d),this.setupInitialDashboard(d)},o.prototype.resetBasicLayout=function(t){t.style.border="none"},o.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(t){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",t.appendChild(r);var u=new _A;u.renderInto(r);var d=document.createElement("div");d.id=this.getHeaderMessageContainerId(),d.style.display="none",d.style.textAlign="center",d.style.fontSize="14px",d.style.padding="2px 10px",d.style.margin="4px",d.style.borderTop="1px solid #f6f6f6",r.appendChild(d)},o.prototype.createSection=function(t){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",t.appendChild(r)},o.prototype.createCameraListUi=function(t,r,u){var d=this;d.showHideScanTypeSwapLink(!1),d.setHeaderMessage(nn.cameraPermissionRequesting());var m=function(){u||d.createPermissionButton(t,r)};f2.getCameras().then(function(_){d.persistedDataManager.setHasPermission(!0),d.showHideScanTypeSwapLink(!0),d.resetHeaderMessage(),_&&_.length>0?(t.removeChild(r),d.renderCameraSelection(_)):(d.setHeaderMessage(nn.noCameraFound(),Cr.STATUS_WARNING),m())}).catch(function(_){d.persistedDataManager.setHasPermission(!1),u?u.disabled=!1:m(),d.setHeaderMessage(_,Cr.STATUS_WARNING),d.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(t,r){var u=this,d=Ws.createElement("button",this.getCameraPermissionButtonId());d.innerText=nn.cameraPermissionTitle(),d.addEventListener("click",function(){d.disabled=!0,u.createCameraListUi(t,r,d)}),r.appendChild(d)},o.prototype.createPermissionsUi=function(t,r){var u=this;if(Ba.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){m2.hasPermissions().then(function(d){d?u.createCameraListUi(t,r):(u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(t,r))}).catch(function(d){u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(t,r)});return}this.createPermissionButton(t,r)},o.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");t.appendChild(r);var u=document.createElement("div");u.id=this.getDashboardSectionCameraScanRegionId(),u.style.display=Ba.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(u);var d=document.createElement("div");d.style.textAlign="center",u.appendChild(d),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(u,d),this.renderFileScanUi(r)},o.prototype.renderFileScanUi=function(t){var r=Ba.isFileScanType(this.currentScanType),u=this,d=function(m){if(!u.html5Qrcode)throw"html5Qrcode not defined";Ba.isFileScanType(u.currentScanType)&&(u.setHeaderMessage(nn.loadingImage()),u.html5Qrcode.scanFileV2(m,!0).then(function(_){u.resetHeaderMessage(),u.qrCodeSuccessCallback(_.decodedText,_)}).catch(function(_){u.setHeaderMessage(_,Cr.STATUS_WARNING),u.qrCodeErrorCallback(_,vp.createFrom(_))}))};this.fileSelectionUi=SA.create(t,r,d)},o.prototype.renderCameraSelection=function(t){var r=this,u=this,d=document.getElementById(this.getDashboardSectionCameraScanRegionId());d.style.textAlign="center";var m=bA.create(d,!1),_=function(gt){var At=gt.zoomFeature();if(At.isSupported()){m.setOnCameraZoomValueChangeCallback(function(Lt){At.apply(Lt)});var zt=1;r.config.defaultZoomValueIfSupported&&(zt=r.config.defaultZoomValueIfSupported),zt=Xx(zt,At.min(),At.max()),m.setValues(At.min(),At.max(),zt,At.step()),m.show()}},S=vA.create(d,t),I=document.createElement("span"),T=Ws.createElement("button",Sr.CAMERA_START_BUTTON_ID);T.innerText=nn.scanButtonStartScanningText(),I.appendChild(T);var M=Ws.createElement("button",Sr.CAMERA_STOP_BUTTON_ID);M.innerText=nn.scanButtonStopScanningText(),M.style.display="none",M.disabled=!0,I.appendChild(M);var L,X=function(gt){if(!gt.torchFeature().isSupported()){L&&L.hide();return}L?L.updateTorchCapability(gt.torchFeature()):L=CA.create(I,gt.torchFeature(),{display:"none",marginLeft:"5px"},function(At){u.setHeaderMessage(At,Cr.STATUS_WARNING)}),L.show()};d.appendChild(I);var et=function(gt){gt||(T.style.display="none"),T.innerText=nn.scanButtonStartScanningText(),T.style.opacity="1",T.disabled=!1,gt&&(T.style.display="inline-block")};if(T.addEventListener("click",function(gt){T.innerText=nn.scanButtonScanningStarting(),S.disable(),T.disabled=!0,T.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!1),u.resetHeaderMessage();var At=S.getValue();u.persistedDataManager.setLastUsedCameraId(At),u.html5Qrcode.start(At,IA(u.config),u.qrCodeSuccessCallback,u.qrCodeErrorCallback).then(function(zt){M.disabled=!1,M.style.display="inline-block",et(!1);var Lt=u.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&X(Lt),r.config.showZoomSliderIfSupported===!0&&_(Lt)}).catch(function(zt){u.showHideScanTypeSwapLink(!0),S.enable(),et(!0),u.setHeaderMessage(zt,Cr.STATUS_WARNING)})}),S.hasSingleItem()&&T.click(),M.addEventListener("click",function(gt){if(!u.html5Qrcode)throw"html5Qrcode not defined";M.disabled=!0,u.html5Qrcode.stop().then(function(At){r.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!0),S.enable(),T.disabled=!1,M.style.display="none",T.style.display="inline-block",L&&(L.reset(),L.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),u.insertCameraScanImageToScanRegion()}).catch(function(At){M.disabled=!1,u.setHeaderMessage(At,Cr.STATUS_WARNING)})}),u.persistedDataManager.getLastUsedCameraId()){var wt=u.persistedDataManager.getLastUsedCameraId();S.hasValue(wt)?(S.setValue(wt),T.click()):u.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var t=this,r=nn.textIfCameraScanSelected(),u=nn.textIfFileScanSelected(),d=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var _=Ws.createElement("span",this.getDashboardSectionSwapLinkId());_.style.textDecoration="underline",_.style.cursor="pointer",_.innerText=Ba.isCameraScanType(this.currentScanType)?r:u,_.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ba.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),_.innerText=u,t.currentScanType=za.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),_.innerText=r,t.currentScanType=za.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),m.appendChild(_),d.appendChild(m)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){m2.hasPermissions().then(function(u){if(u){var d=document.getElementById(r.getCameraPermissionButtonId());if(!d)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";d.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(u){r.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},o.prototype.setHeaderMessage=function(t,r){r||(r=Cr.STATUS_DEFAULT);var u=this.getHeaderMessageDiv();switch(u.innerText=t,u.style.display="block",r){case Cr.STATUS_SUCCESS:u.style.background="rgba(106, 175, 80, 0.26)",u.style.color="#477735";break;case Cr.STATUS_WARNING:u.style.background="rgba(203, 36, 49, 0.14)",u.style.color="#cb2431";break;case Cr.STATUS_DEFAULT:default:u.style.background="rgba(0, 0, 0, 0)",u.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(u){r.innerHTML="<br>",r.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=mA,this.cameraScanImage.alt=nn.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(u){r.innerHTML="<br>",r.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=pA,this.fileScanImage.alt=nn.fileScanAltText()},o.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return Sr.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return Sr.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o})();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MA=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,u)=>u?u.toUpperCase():r.toLowerCase()),y2=o=>{const t=MA(o);return t.charAt(0).toUpperCase()+t.slice(1)},Mp=(...o)=>o.filter((t,r,u)=>!!t&&t.trim()!==""&&u.indexOf(t)===r).join(" ").trim(),OA=o=>{for(const t in o)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Mn.forwardRef(({color:o="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:u,className:d="",children:m,iconNode:_,...S},I)=>Mn.createElement("svg",{ref:I,...LA,width:t,height:t,stroke:o,strokeWidth:u?Number(r)*24/Number(t):r,className:Mp("lucide",d),...!m&&!OA(S)&&{"aria-hidden":"true"},...S},[..._.map(([T,M])=>Mn.createElement(T,M)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=(o,t)=>{const r=Mn.forwardRef(({className:u,...d},m)=>Mn.createElement(BA,{ref:m,iconNode:t,className:Mp(`lucide-${DA(y2(o))}`,`lucide-${o}`,u),...d}));return r.displayName=y2(o),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],PA=ea("activity",VA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]],UA=ea("bluetooth",kA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zA=ea("download",FA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],HA=ea("power",jA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],YA=ea("qr-code",GA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qA=ea("refresh-cw",XA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ZA=ea("triangle-alert",QA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],KA=ea("wifi",WA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$A=ea("zap",JA),t_=()=>{};var E2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=function(o){const t=[];let r=0;for(let u=0;u<o.length;u++){let d=o.charCodeAt(u);d<128?t[r++]=d:d<2048?(t[r++]=d>>6|192,t[r++]=d&63|128):(d&64512)===55296&&u+1<o.length&&(o.charCodeAt(u+1)&64512)===56320?(d=65536+((d&1023)<<10)+(o.charCodeAt(++u)&1023),t[r++]=d>>18|240,t[r++]=d>>12&63|128,t[r++]=d>>6&63|128,t[r++]=d&63|128):(t[r++]=d>>12|224,t[r++]=d>>6&63|128,t[r++]=d&63|128)}return t},e_=function(o){const t=[];let r=0,u=0;for(;r<o.length;){const d=o[r++];if(d<128)t[u++]=String.fromCharCode(d);else if(d>191&&d<224){const m=o[r++];t[u++]=String.fromCharCode((d&31)<<6|m&63)}else if(d>239&&d<365){const m=o[r++],_=o[r++],S=o[r++],I=((d&7)<<18|(m&63)<<12|(_&63)<<6|S&63)-65536;t[u++]=String.fromCharCode(55296+(I>>10)),t[u++]=String.fromCharCode(56320+(I&1023))}else{const m=o[r++],_=o[r++];t[u++]=String.fromCharCode((d&15)<<12|(m&63)<<6|_&63)}}return t.join("")},Lp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(o,t){if(!Array.isArray(o))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let d=0;d<o.length;d+=3){const m=o[d],_=d+1<o.length,S=_?o[d+1]:0,I=d+2<o.length,T=I?o[d+2]:0,M=m>>2,L=(m&3)<<4|S>>4;let X=(S&15)<<2|T>>6,et=T&63;I||(et=64,_||(X=64)),u.push(r[M],r[L],r[X],r[et])}return u.join("")},encodeString(o,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(o):this.encodeByteArray(Op(o),t)},decodeString(o,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(o):e_(this.decodeStringToByteArray(o,t))},decodeStringToByteArray(o,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let d=0;d<o.length;){const m=r[o.charAt(d++)],S=d<o.length?r[o.charAt(d)]:0;++d;const T=d<o.length?r[o.charAt(d)]:64;++d;const L=d<o.length?r[o.charAt(d)]:64;if(++d,m==null||S==null||T==null||L==null)throw new n_;const X=m<<2|S>>4;if(u.push(X),T!==64){const et=S<<4&240|T>>2;if(u.push(et),L!==64){const wt=T<<6&192|L;u.push(wt)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let o=0;o<this.ENCODED_VALS.length;o++)this.byteToCharMap_[o]=this.ENCODED_VALS.charAt(o),this.charToByteMap_[this.byteToCharMap_[o]]=o,this.byteToCharMapWebSafe_[o]=this.ENCODED_VALS_WEBSAFE.charAt(o),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[o]]=o,o>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(o)]=o,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(o)]=o)}}};class n_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i_=function(o){const t=Op(o);return Lp.encodeByteArray(t,!0)},Jc=function(o){return i_(o).replace(/\./g,"")},r_=function(o){try{return Lp.decodeString(o,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=()=>s_().__FIREBASE_DEFAULTS__,o_=()=>{if(typeof process>"u"||typeof E2>"u")return;const o=E2.__FIREBASE_DEFAULTS__;if(o)return JSON.parse(o)},l_=()=>{if(typeof document>"u")return;let o;try{o=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=o&&r_(o[1]);return t&&JSON.parse(t)},l0=()=>{try{return t_()||a_()||o_()||l_()}catch(o){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${o}`);return}},u_=o=>{var t,r;return(r=(t=l0())==null?void 0:t.emulatorHosts)==null?void 0:r[o]},c_=o=>{const t=u_(o);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const u=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),u]:[t.substring(0,r),u]},Bp=()=>{var o;return(o=l0())==null?void 0:o.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,u)=>{r?this.reject(r):this.resolve(u),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(o){try{return(o.startsWith("http://")||o.startsWith("https://")?new URL(o).hostname:o).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f_(o){return(await fetch(o,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(o,t){if(o.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},u=t||"demo-project",d=o.iat||0,m=o.sub||o.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _={iss:`https://securetoken.google.com/${u}`,aud:u,iat:d,exp:d+3600,auth_time:d,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...o};return[Jc(JSON.stringify(r)),Jc(JSON.stringify(_)),""].join(".")}const gu={};function g_(){const o={prod:[],emulator:[]};for(const t of Object.keys(gu))gu[t]?o.emulator.push(t):o.prod.push(t);return o}function m_(o){let t=document.getElementById(o),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",o),r=!0),{created:r,element:t}}let x2=!1;function p_(o,t){if(typeof window>"u"||typeof document>"u"||!u0(window.location.host)||gu[o]===t||gu[o]||x2)return;gu[o]=t;function r(X){return`__firebase__banner__${X}`}const u="__firebase__banner",m=g_().prod.length>0;function _(){const X=document.getElementById(u);X&&X.remove()}function S(X){X.style.display="flex",X.style.background="#7faaf0",X.style.position="fixed",X.style.bottom="5px",X.style.left="5px",X.style.padding=".5em",X.style.borderRadius="5px",X.style.alignItems="center"}function I(X,et){X.setAttribute("width","24"),X.setAttribute("id",et),X.setAttribute("height","24"),X.setAttribute("viewBox","0 0 24 24"),X.setAttribute("fill","none"),X.style.marginLeft="-6px"}function T(){const X=document.createElement("span");return X.style.cursor="pointer",X.style.marginLeft="16px",X.style.fontSize="24px",X.innerHTML=" &times;",X.onclick=()=>{x2=!0,_()},X}function M(X,et){X.setAttribute("id",et),X.innerText="Learn more",X.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",X.setAttribute("target","__blank"),X.style.paddingLeft="5px",X.style.textDecoration="underline"}function L(){const X=m_(u),et=r("text"),wt=document.getElementById(et)||document.createElement("span"),gt=r("learnmore"),At=document.getElementById(gt)||document.createElement("a"),zt=r("preprendIcon"),Lt=document.getElementById(zt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(X.created){const bt=X.element;S(bt),M(At,gt);const jt=T();I(Lt,zt),bt.append(Lt,wt,At,jt),document.body.appendChild(bt)}m?(wt.innerText="Preview backend disconnected.",Lt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Lt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,wt.innerText="Preview backend running in this workspace."),wt.setAttribute("id",et)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",L):L()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E_(){var t;const o=(t=l0())==null?void 0:t.forceEnvironment;if(o==="node")return!0;if(o==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x_(){return!E_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A_(){try{return typeof indexedDB=="object"}catch{return!1}}function __(){return new Promise((o,t)=>{try{let r=!0;const u="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(u);d.onsuccess=()=>{d.result.close(),r||self.indexedDB.deleteDatabase(u),o(!0)},d.onupgradeneeded=()=>{r=!1},d.onerror=()=>{var m;t(((m=d.error)==null?void 0:m.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="FirebaseError";class _l extends Error{constructor(t,r,u){super(r),this.code=t,this.customData=u,this.name=w_,Object.setPrototypeOf(this,_l.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vp.prototype.create)}}class Vp{constructor(t,r,u){this.service=t,this.serviceName=r,this.errors=u}create(t,...r){const u=r[0]||{},d=`${this.service}/${t}`,m=this.errors[t],_=m?T_(m,u):"Error",S=`${this.serviceName}: ${_} (${d}).`;return new _l(d,S,u)}}function T_(o,t){return o.replace(C_,(r,u)=>{const d=t[u];return d!=null?String(d):`<${u}?>`})}const C_=/\{\$([^}]+)}/g;function $c(o,t){if(o===t)return!0;const r=Object.keys(o),u=Object.keys(t);for(const d of r){if(!u.includes(d))return!1;const m=o[d],_=t[d];if(A2(m)&&A2(_)){if(!$c(m,_))return!1}else if(m!==_)return!1}for(const d of u)if(!r.includes(d))return!1;return!0}function A2(o){return o!==null&&typeof o=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(o){return o&&o._delegate?o._delegate:o}class Au{constructor(t,r,u){this.name=t,this.instanceFactory=r,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const u=new h_;if(this.instancesDeferred.set(r,u),this.isInitialized(r)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:r});d&&u.resolve(d)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(d){if(u)return null;throw d}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(b_(t))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[r,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(r);try{const m=this.getOrInitializeService({instanceIdentifier:d});u.resolve(m)}catch{}}}}clearInstance(t=_o){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_o){return this.instances.has(t)}getOptions(t=_o){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(`${this.name}(${u}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const d=this.getOrInitializeService({instanceIdentifier:u,options:r});for(const[m,_]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(m);u===S&&_.resolve(d)}return d}onInit(t,r){const u=this.normalizeInstanceIdentifier(r),d=this.onInitCallbacks.get(u)??new Set;d.add(t),this.onInitCallbacks.set(u,d);const m=this.instances.get(u);return m&&t(m,u),()=>{d.delete(t)}}invokeOnInitCallbacks(t,r){const u=this.onInitCallbacks.get(r);if(u)for(const d of u)try{d(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let u=this.instances.get(t);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:v_(t),options:r}),this.instances.set(t,u),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(u,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,u)}catch{}return u||null}normalizeInstanceIdentifier(t=_o){return this.component?this.component.multipleInstances?t:_o:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function v_(o){return o===_o?void 0:o}function b_(o){return o.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new S_(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"})(Ue||(Ue={}));const N_={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},R_=Ue.INFO,D_={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},M_=(o,t,...r)=>{if(t<o.logLevel)return;const u=new Date().toISOString(),d=D_[t];if(d)console[d](`[${u}]  ${o.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Pp{constructor(t){this.name=t,this._logLevel=R_,this._logHandler=M_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ue))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?N_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...t),this._logHandler(this,Ue.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...t),this._logHandler(this,Ue.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...t),this._logHandler(this,Ue.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...t),this._logHandler(this,Ue.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...t),this._logHandler(this,Ue.ERROR,...t)}}const O_=(o,t)=>t.some(r=>o instanceof r);let _2,w2;function L_(){return _2||(_2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B_(){return w2||(w2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kp=new WeakMap,P1=new WeakMap,Up=new WeakMap,C1=new WeakMap,c0=new WeakMap;function V_(o){const t=new Promise((r,u)=>{const d=()=>{o.removeEventListener("success",m),o.removeEventListener("error",_)},m=()=>{r(Pa(o.result)),d()},_=()=>{u(o.error),d()};o.addEventListener("success",m),o.addEventListener("error",_)});return t.then(r=>{r instanceof IDBCursor&&kp.set(r,o)}).catch(()=>{}),c0.set(t,o),t}function P_(o){if(P1.has(o))return;const t=new Promise((r,u)=>{const d=()=>{o.removeEventListener("complete",m),o.removeEventListener("error",_),o.removeEventListener("abort",_)},m=()=>{r(),d()},_=()=>{u(o.error||new DOMException("AbortError","AbortError")),d()};o.addEventListener("complete",m),o.addEventListener("error",_),o.addEventListener("abort",_)});P1.set(o,t)}let k1={get(o,t,r){if(o instanceof IDBTransaction){if(t==="done")return P1.get(o);if(t==="objectStoreNames")return o.objectStoreNames||Up.get(o);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Pa(o[t])},set(o,t,r){return o[t]=r,!0},has(o,t){return o instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in o}};function k_(o){k1=o(k1)}function U_(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const u=o.call(S1(this),t,...r);return Up.set(u,t.sort?t.sort():[t]),Pa(u)}:B_().includes(o)?function(...t){return o.apply(S1(this),t),Pa(kp.get(this))}:function(...t){return Pa(o.apply(S1(this),t))}}function F_(o){return typeof o=="function"?U_(o):(o instanceof IDBTransaction&&P_(o),O_(o,L_())?new Proxy(o,k1):o)}function Pa(o){if(o instanceof IDBRequest)return V_(o);if(C1.has(o))return C1.get(o);const t=F_(o);return t!==o&&(C1.set(o,t),c0.set(t,o)),t}const S1=o=>c0.get(o);function z_(o,t,{blocked:r,upgrade:u,blocking:d,terminated:m}={}){const _=indexedDB.open(o,t),S=Pa(_);return u&&_.addEventListener("upgradeneeded",I=>{u(Pa(_.result),I.oldVersion,I.newVersion,Pa(_.transaction),I)}),r&&_.addEventListener("blocked",I=>r(I.oldVersion,I.newVersion,I)),S.then(I=>{m&&I.addEventListener("close",()=>m()),d&&I.addEventListener("versionchange",T=>d(T.oldVersion,T.newVersion,T))}).catch(()=>{}),S}const j_=["get","getKey","getAll","getAllKeys","count"],H_=["put","add","delete","clear"],v1=new Map;function T2(o,t){if(!(o instanceof IDBDatabase&&!(t in o)&&typeof t=="string"))return;if(v1.get(t))return v1.get(t);const r=t.replace(/FromIndex$/,""),u=t!==r,d=H_.includes(r);if(!(r in(u?IDBIndex:IDBObjectStore).prototype)||!(d||j_.includes(r)))return;const m=async function(_,...S){const I=this.transaction(_,d?"readwrite":"readonly");let T=I.store;return u&&(T=T.index(S.shift())),(await Promise.all([T[r](...S),d&&I.done]))[0]};return v1.set(t,m),m}k_(o=>({...o,get:(t,r,u)=>T2(t,r)||o.get(t,r,u),has:(t,r)=>!!T2(t,r)||o.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Y_(r)){const u=r.getImmediate();return`${u.library}/${u.version}`}else return null}).filter(r=>r).join(" ")}}function Y_(o){const t=o.getComponent();return(t==null?void 0:t.type)==="VERSION"}const U1="@firebase/app",C2="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Pp("@firebase/app"),X_="@firebase/app-compat",q_="@firebase/analytics-compat",Q_="@firebase/analytics",Z_="@firebase/app-check-compat",W_="@firebase/app-check",K_="@firebase/auth",J_="@firebase/auth-compat",$_="@firebase/database",t3="@firebase/data-connect",e3="@firebase/database-compat",n3="@firebase/functions",i3="@firebase/functions-compat",r3="@firebase/installations",s3="@firebase/installations-compat",a3="@firebase/messaging",o3="@firebase/messaging-compat",l3="@firebase/performance",u3="@firebase/performance-compat",c3="@firebase/remote-config",h3="@firebase/remote-config-compat",f3="@firebase/storage",d3="@firebase/storage-compat",g3="@firebase/firestore",m3="@firebase/ai",p3="@firebase/firestore-compat",y3="firebase",E3="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="[DEFAULT]",x3={[U1]:"fire-core",[X_]:"fire-core-compat",[Q_]:"fire-analytics",[q_]:"fire-analytics-compat",[W_]:"fire-app-check",[Z_]:"fire-app-check-compat",[K_]:"fire-auth",[J_]:"fire-auth-compat",[$_]:"fire-rtdb",[t3]:"fire-data-connect",[e3]:"fire-rtdb-compat",[n3]:"fire-fn",[i3]:"fire-fn-compat",[r3]:"fire-iid",[s3]:"fire-iid-compat",[a3]:"fire-fcm",[o3]:"fire-fcm-compat",[l3]:"fire-perf",[u3]:"fire-perf-compat",[c3]:"fire-rc",[h3]:"fire-rc-compat",[f3]:"fire-gcs",[d3]:"fire-gcs-compat",[g3]:"fire-fst",[p3]:"fire-fst-compat",[m3]:"fire-vertex","fire-js":"fire-js",[y3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,A3=new Map,z1=new Map;function S2(o,t){try{o.container.addComponent(t)}catch(r){Js.debug(`Component ${t.name} failed to register with FirebaseApp ${o.name}`,r)}}function eh(o){const t=o.name;if(z1.has(t))return Js.debug(`There were multiple attempts to register component ${t}.`),!1;z1.set(t,o);for(const r of th.values())S2(r,o);for(const r of A3.values())S2(r,o);return!0}function _3(o,t){const r=o.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),o.container.getProvider(t)}function w3(o){return o==null?!1:o.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new Vp("app","Firebase",T3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(t,r,u){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=u,this.container.addComponent(new Au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=E3;function Fp(o,t={}){let r=o;typeof t!="object"&&(t={name:t});const u={name:F1,automaticDataCollectionEnabled:!0,...t},d=u.name;if(typeof d!="string"||!d)throw ka.create("bad-app-name",{appName:String(d)});if(r||(r=Bp()),!r)throw ka.create("no-options");const m=th.get(d);if(m){if($c(r,m.options)&&$c(u,m.config))return m;throw ka.create("duplicate-app",{appName:d})}const _=new I_(d);for(const I of z1.values())_.addComponent(I);const S=new C3(r,u,_);return th.set(d,S),S}function v3(o=F1){const t=th.get(o);if(!t&&o===F1&&Bp())return Fp();if(!t)throw ka.create("no-app",{appName:o});return t}function fl(o,t,r){let u=x3[o]??o;r&&(u+=`-${r}`);const d=u.match(/\s|\//),m=t.match(/\s|\//);if(d||m){const _=[`Unable to register library "${u}" with version "${t}":`];d&&_.push(`library name "${u}" contains illegal characters (whitespace or "/")`),d&&m&&_.push("and"),m&&_.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Js.warn(_.join(" "));return}eh(new Au(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="firebase-heartbeat-database",I3=1,_u="firebase-heartbeat-store";let b1=null;function zp(){return b1||(b1=z_(b3,I3,{upgrade:(o,t)=>{switch(t){case 0:try{o.createObjectStore(_u)}catch(r){console.warn(r)}}}}).catch(o=>{throw ka.create("idb-open",{originalErrorMessage:o.message})})),b1}async function N3(o){try{const r=(await zp()).transaction(_u),u=await r.objectStore(_u).get(jp(o));return await r.done,u}catch(t){if(t instanceof _l)Js.warn(t.message);else{const r=ka.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Js.warn(r.message)}}}async function v2(o,t){try{const u=(await zp()).transaction(_u,"readwrite");await u.objectStore(_u).put(t,jp(o)),await u.done}catch(r){if(r instanceof _l)Js.warn(r.message);else{const u=ka.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Js.warn(u.message)}}}function jp(o){return`${o.name}!${o.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=1024,D3=30;class M3{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new L3(r),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){var t,r;try{const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=b2();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(_=>_.date===m))return;if(this._heartbeatsCache.heartbeats.push({date:m,agent:d}),this._heartbeatsCache.heartbeats.length>D3){const _=B3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(_,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(u){Js.warn(u)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=b2(),{heartbeatsToSend:u,unsentEntries:d}=O3(this._heartbeatsCache.heartbeats),m=Jc(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=r,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}catch(r){return Js.warn(r),""}}}function b2(){return new Date().toISOString().substring(0,10)}function O3(o,t=R3){const r=[];let u=o.slice();for(const d of o){const m=r.find(_=>_.agent===d.agent);if(m){if(m.dates.push(d.date),I2(r)>t){m.dates.pop();break}}else if(r.push({agent:d.agent,dates:[d.date]}),I2(r)>t){r.pop();break}u=u.slice(1)}return{heartbeatsToSend:r,unsentEntries:u}}class L3{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A_()?__().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await N3(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const u=await this.read();return v2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const u=await this.read();return v2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function I2(o){return Jc(JSON.stringify({version:2,heartbeats:o})).length}function B3(o){if(o.length===0)return-1;let t=0,r=o[0].date;for(let u=1;u<o.length;u++)o[u].date<r&&(r=o[u].date,t=u);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(o){eh(new Au("platform-logger",t=>new G_(t),"PRIVATE")),eh(new Au("heartbeat",t=>new M3(t),"PRIVATE")),fl(U1,C2,o),fl(U1,C2,"esm2020"),fl("fire-js","")}V3("");var P3="firebase",k3="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fl(P3,k3,"app");var N2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ua,Hp;(function(){var o;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,z){function P(){}P.prototype=z.prototype,k.F=z.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(K,q,Y){for(var j=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)j[Pt-2]=arguments[Pt];return z.prototype[q].apply(K,j)}}function r(){this.blockSize=-1}function u(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(u,r),u.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function d(k,z,P){P||(P=0);const K=Array(16);if(typeof z=="string")for(var q=0;q<16;++q)K[q]=z.charCodeAt(P++)|z.charCodeAt(P++)<<8|z.charCodeAt(P++)<<16|z.charCodeAt(P++)<<24;else for(q=0;q<16;++q)K[q]=z[P++]|z[P++]<<8|z[P++]<<16|z[P++]<<24;z=k.g[0],P=k.g[1],q=k.g[2];let Y=k.g[3],j;j=z+(Y^P&(q^Y))+K[0]+3614090360&4294967295,z=P+(j<<7&4294967295|j>>>25),j=Y+(q^z&(P^q))+K[1]+3905402710&4294967295,Y=z+(j<<12&4294967295|j>>>20),j=q+(P^Y&(z^P))+K[2]+606105819&4294967295,q=Y+(j<<17&4294967295|j>>>15),j=P+(z^q&(Y^z))+K[3]+3250441966&4294967295,P=q+(j<<22&4294967295|j>>>10),j=z+(Y^P&(q^Y))+K[4]+4118548399&4294967295,z=P+(j<<7&4294967295|j>>>25),j=Y+(q^z&(P^q))+K[5]+1200080426&4294967295,Y=z+(j<<12&4294967295|j>>>20),j=q+(P^Y&(z^P))+K[6]+2821735955&4294967295,q=Y+(j<<17&4294967295|j>>>15),j=P+(z^q&(Y^z))+K[7]+4249261313&4294967295,P=q+(j<<22&4294967295|j>>>10),j=z+(Y^P&(q^Y))+K[8]+1770035416&4294967295,z=P+(j<<7&4294967295|j>>>25),j=Y+(q^z&(P^q))+K[9]+2336552879&4294967295,Y=z+(j<<12&4294967295|j>>>20),j=q+(P^Y&(z^P))+K[10]+4294925233&4294967295,q=Y+(j<<17&4294967295|j>>>15),j=P+(z^q&(Y^z))+K[11]+2304563134&4294967295,P=q+(j<<22&4294967295|j>>>10),j=z+(Y^P&(q^Y))+K[12]+1804603682&4294967295,z=P+(j<<7&4294967295|j>>>25),j=Y+(q^z&(P^q))+K[13]+4254626195&4294967295,Y=z+(j<<12&4294967295|j>>>20),j=q+(P^Y&(z^P))+K[14]+2792965006&4294967295,q=Y+(j<<17&4294967295|j>>>15),j=P+(z^q&(Y^z))+K[15]+1236535329&4294967295,P=q+(j<<22&4294967295|j>>>10),j=z+(q^Y&(P^q))+K[1]+4129170786&4294967295,z=P+(j<<5&4294967295|j>>>27),j=Y+(P^q&(z^P))+K[6]+3225465664&4294967295,Y=z+(j<<9&4294967295|j>>>23),j=q+(z^P&(Y^z))+K[11]+643717713&4294967295,q=Y+(j<<14&4294967295|j>>>18),j=P+(Y^z&(q^Y))+K[0]+3921069994&4294967295,P=q+(j<<20&4294967295|j>>>12),j=z+(q^Y&(P^q))+K[5]+3593408605&4294967295,z=P+(j<<5&4294967295|j>>>27),j=Y+(P^q&(z^P))+K[10]+38016083&4294967295,Y=z+(j<<9&4294967295|j>>>23),j=q+(z^P&(Y^z))+K[15]+3634488961&4294967295,q=Y+(j<<14&4294967295|j>>>18),j=P+(Y^z&(q^Y))+K[4]+3889429448&4294967295,P=q+(j<<20&4294967295|j>>>12),j=z+(q^Y&(P^q))+K[9]+568446438&4294967295,z=P+(j<<5&4294967295|j>>>27),j=Y+(P^q&(z^P))+K[14]+3275163606&4294967295,Y=z+(j<<9&4294967295|j>>>23),j=q+(z^P&(Y^z))+K[3]+4107603335&4294967295,q=Y+(j<<14&4294967295|j>>>18),j=P+(Y^z&(q^Y))+K[8]+1163531501&4294967295,P=q+(j<<20&4294967295|j>>>12),j=z+(q^Y&(P^q))+K[13]+2850285829&4294967295,z=P+(j<<5&4294967295|j>>>27),j=Y+(P^q&(z^P))+K[2]+4243563512&4294967295,Y=z+(j<<9&4294967295|j>>>23),j=q+(z^P&(Y^z))+K[7]+1735328473&4294967295,q=Y+(j<<14&4294967295|j>>>18),j=P+(Y^z&(q^Y))+K[12]+2368359562&4294967295,P=q+(j<<20&4294967295|j>>>12),j=z+(P^q^Y)+K[5]+4294588738&4294967295,z=P+(j<<4&4294967295|j>>>28),j=Y+(z^P^q)+K[8]+2272392833&4294967295,Y=z+(j<<11&4294967295|j>>>21),j=q+(Y^z^P)+K[11]+1839030562&4294967295,q=Y+(j<<16&4294967295|j>>>16),j=P+(q^Y^z)+K[14]+4259657740&4294967295,P=q+(j<<23&4294967295|j>>>9),j=z+(P^q^Y)+K[1]+2763975236&4294967295,z=P+(j<<4&4294967295|j>>>28),j=Y+(z^P^q)+K[4]+1272893353&4294967295,Y=z+(j<<11&4294967295|j>>>21),j=q+(Y^z^P)+K[7]+4139469664&4294967295,q=Y+(j<<16&4294967295|j>>>16),j=P+(q^Y^z)+K[10]+3200236656&4294967295,P=q+(j<<23&4294967295|j>>>9),j=z+(P^q^Y)+K[13]+681279174&4294967295,z=P+(j<<4&4294967295|j>>>28),j=Y+(z^P^q)+K[0]+3936430074&4294967295,Y=z+(j<<11&4294967295|j>>>21),j=q+(Y^z^P)+K[3]+3572445317&4294967295,q=Y+(j<<16&4294967295|j>>>16),j=P+(q^Y^z)+K[6]+76029189&4294967295,P=q+(j<<23&4294967295|j>>>9),j=z+(P^q^Y)+K[9]+3654602809&4294967295,z=P+(j<<4&4294967295|j>>>28),j=Y+(z^P^q)+K[12]+3873151461&4294967295,Y=z+(j<<11&4294967295|j>>>21),j=q+(Y^z^P)+K[15]+530742520&4294967295,q=Y+(j<<16&4294967295|j>>>16),j=P+(q^Y^z)+K[2]+3299628645&4294967295,P=q+(j<<23&4294967295|j>>>9),j=z+(q^(P|~Y))+K[0]+4096336452&4294967295,z=P+(j<<6&4294967295|j>>>26),j=Y+(P^(z|~q))+K[7]+1126891415&4294967295,Y=z+(j<<10&4294967295|j>>>22),j=q+(z^(Y|~P))+K[14]+2878612391&4294967295,q=Y+(j<<15&4294967295|j>>>17),j=P+(Y^(q|~z))+K[5]+4237533241&4294967295,P=q+(j<<21&4294967295|j>>>11),j=z+(q^(P|~Y))+K[12]+1700485571&4294967295,z=P+(j<<6&4294967295|j>>>26),j=Y+(P^(z|~q))+K[3]+2399980690&4294967295,Y=z+(j<<10&4294967295|j>>>22),j=q+(z^(Y|~P))+K[10]+4293915773&4294967295,q=Y+(j<<15&4294967295|j>>>17),j=P+(Y^(q|~z))+K[1]+2240044497&4294967295,P=q+(j<<21&4294967295|j>>>11),j=z+(q^(P|~Y))+K[8]+1873313359&4294967295,z=P+(j<<6&4294967295|j>>>26),j=Y+(P^(z|~q))+K[15]+4264355552&4294967295,Y=z+(j<<10&4294967295|j>>>22),j=q+(z^(Y|~P))+K[6]+2734768916&4294967295,q=Y+(j<<15&4294967295|j>>>17),j=P+(Y^(q|~z))+K[13]+1309151649&4294967295,P=q+(j<<21&4294967295|j>>>11),j=z+(q^(P|~Y))+K[4]+4149444226&4294967295,z=P+(j<<6&4294967295|j>>>26),j=Y+(P^(z|~q))+K[11]+3174756917&4294967295,Y=z+(j<<10&4294967295|j>>>22),j=q+(z^(Y|~P))+K[2]+718787259&4294967295,q=Y+(j<<15&4294967295|j>>>17),j=P+(Y^(q|~z))+K[9]+3951481745&4294967295,k.g[0]=k.g[0]+z&4294967295,k.g[1]=k.g[1]+(q+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+q&4294967295,k.g[3]=k.g[3]+Y&4294967295}u.prototype.v=function(k,z){z===void 0&&(z=k.length);const P=z-this.blockSize,K=this.C;let q=this.h,Y=0;for(;Y<z;){if(q==0)for(;Y<=P;)d(this,k,Y),Y+=this.blockSize;if(typeof k=="string"){for(;Y<z;)if(K[q++]=k.charCodeAt(Y++),q==this.blockSize){d(this,K),q=0;break}}else for(;Y<z;)if(K[q++]=k[Y++],q==this.blockSize){d(this,K),q=0;break}}this.h=q,this.o+=z},u.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var z=1;z<k.length-8;++z)k[z]=0;z=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=z&255,z/=256;for(this.v(k),k=Array(16),z=0,P=0;P<4;++P)for(let K=0;K<32;K+=8)k[z++]=this.g[P]>>>K&255;return k};function m(k,z){var P=S;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=z(k)}function _(k,z){this.h=z;const P=[];let K=!0;for(let q=k.length-1;q>=0;q--){const Y=k[q]|0;K&&Y==z||(P[q]=Y,K=!1)}this.g=P}var S={};function I(k){return-128<=k&&k<128?m(k,function(z){return new _([z|0],z<0?-1:0)}):new _([k|0],k<0?-1:0)}function T(k){if(isNaN(k)||!isFinite(k))return L;if(k<0)return At(T(-k));const z=[];let P=1;for(let K=0;k>=P;K++)z[K]=k/P|0,P*=4294967296;return new _(z,0)}function M(k,z){if(k.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(k.charAt(0)=="-")return At(M(k.substring(1),z));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=T(Math.pow(z,8));let K=L;for(let Y=0;Y<k.length;Y+=8){var q=Math.min(8,k.length-Y);const j=parseInt(k.substring(Y,Y+q),z);q<8?(q=T(Math.pow(z,q)),K=K.j(q).add(T(j))):(K=K.j(P),K=K.add(T(j)))}return K}var L=I(0),X=I(1),et=I(16777216);o=_.prototype,o.m=function(){if(gt(this))return-At(this).m();let k=0,z=1;for(let P=0;P<this.g.length;P++){const K=this.i(P);k+=(K>=0?K:4294967296+K)*z,z*=4294967296}return k},o.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(wt(this))return"0";if(gt(this))return"-"+At(this).toString(k);const z=T(Math.pow(k,6));var P=this;let K="";for(;;){const q=jt(P,z).g;P=zt(P,q.j(z));let Y=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=q,wt(P))return Y+K;for(;Y.length<6;)Y="0"+Y;K=Y+K}},o.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function wt(k){if(k.h!=0)return!1;for(let z=0;z<k.g.length;z++)if(k.g[z]!=0)return!1;return!0}function gt(k){return k.h==-1}o.l=function(k){return k=zt(this,k),gt(k)?-1:wt(k)?0:1};function At(k){const z=k.g.length,P=[];for(let K=0;K<z;K++)P[K]=~k.g[K];return new _(P,~k.h).add(X)}o.abs=function(){return gt(this)?At(this):this},o.add=function(k){const z=Math.max(this.g.length,k.g.length),P=[];let K=0;for(let q=0;q<=z;q++){let Y=K+(this.i(q)&65535)+(k.i(q)&65535),j=(Y>>>16)+(this.i(q)>>>16)+(k.i(q)>>>16);K=j>>>16,Y&=65535,j&=65535,P[q]=j<<16|Y}return new _(P,P[P.length-1]&-2147483648?-1:0)};function zt(k,z){return k.add(At(z))}o.j=function(k){if(wt(this)||wt(k))return L;if(gt(this))return gt(k)?At(this).j(At(k)):At(At(this).j(k));if(gt(k))return At(this.j(At(k)));if(this.l(et)<0&&k.l(et)<0)return T(this.m()*k.m());const z=this.g.length+k.g.length,P=[];for(var K=0;K<2*z;K++)P[K]=0;for(K=0;K<this.g.length;K++)for(let q=0;q<k.g.length;q++){const Y=this.i(K)>>>16,j=this.i(K)&65535,Pt=k.i(q)>>>16,nt=k.i(q)&65535;P[2*K+2*q]+=j*nt,Lt(P,2*K+2*q),P[2*K+2*q+1]+=Y*nt,Lt(P,2*K+2*q+1),P[2*K+2*q+1]+=j*Pt,Lt(P,2*K+2*q+1),P[2*K+2*q+2]+=Y*Pt,Lt(P,2*K+2*q+2)}for(k=0;k<z;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=z;k<2*z;k++)P[k]=0;return new _(P,0)};function Lt(k,z){for(;(k[z]&65535)!=k[z];)k[z+1]+=k[z]>>>16,k[z]&=65535,z++}function bt(k,z){this.g=k,this.h=z}function jt(k,z){if(wt(z))throw Error("division by zero");if(wt(k))return new bt(L,L);if(gt(k))return z=jt(At(k),z),new bt(At(z.g),At(z.h));if(gt(z))return z=jt(k,At(z)),new bt(At(z.g),z.h);if(k.g.length>30){if(gt(k)||gt(z))throw Error("slowDivide_ only works with positive integers.");for(var P=X,K=z;K.l(k)<=0;)P=Le(P),K=Le(K);var q=Ht(P,1),Y=Ht(K,1);for(K=Ht(K,2),P=Ht(P,2);!wt(K);){var j=Y.add(K);j.l(k)<=0&&(q=q.add(P),Y=j),K=Ht(K,1),P=Ht(P,1)}return z=zt(k,q.j(z)),new bt(q,z)}for(q=L;k.l(z)>=0;){for(P=Math.max(1,Math.floor(k.m()/z.m())),K=Math.ceil(Math.log(P)/Math.LN2),K=K<=48?1:Math.pow(2,K-48),Y=T(P),j=Y.j(z);gt(j)||j.l(k)>0;)P-=K,Y=T(P),j=Y.j(z);wt(Y)&&(Y=X),q=q.add(Y),k=zt(k,j)}return new bt(q,k)}o.B=function(k){return jt(this,k).h},o.and=function(k){const z=Math.max(this.g.length,k.g.length),P=[];for(let K=0;K<z;K++)P[K]=this.i(K)&k.i(K);return new _(P,this.h&k.h)},o.or=function(k){const z=Math.max(this.g.length,k.g.length),P=[];for(let K=0;K<z;K++)P[K]=this.i(K)|k.i(K);return new _(P,this.h|k.h)},o.xor=function(k){const z=Math.max(this.g.length,k.g.length),P=[];for(let K=0;K<z;K++)P[K]=this.i(K)^k.i(K);return new _(P,this.h^k.h)};function Le(k){const z=k.g.length+1,P=[];for(let K=0;K<z;K++)P[K]=k.i(K)<<1|k.i(K-1)>>>31;return new _(P,k.h)}function Ht(k,z){const P=z>>5;z%=32;const K=k.g.length-P,q=[];for(let Y=0;Y<K;Y++)q[Y]=z>0?k.i(Y+P)>>>z|k.i(Y+P+1)<<32-z:k.i(Y+P);return new _(q,k.h)}u.prototype.digest=u.prototype.A,u.prototype.reset=u.prototype.u,u.prototype.update=u.prototype.v,Hp=u,_.prototype.add=_.prototype.add,_.prototype.multiply=_.prototype.j,_.prototype.modulo=_.prototype.B,_.prototype.compare=_.prototype.l,_.prototype.toNumber=_.prototype.m,_.prototype.toString=_.prototype.toString,_.prototype.getBits=_.prototype.i,_.fromNumber=T,_.fromString=M,Ua=_}).apply(typeof N2<"u"?N2:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gp,cu,Yp,Gc,j1,Xp,qp,Qp;(function(){var o,t=Object.defineProperty;function r(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var C=0;C<p.length;++C){var N=p[C];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var u=r(this);function d(p,C){if(C)t:{var N=u;p=p.split(".");for(var V=0;V<p.length-1;V++){var $=p[V];if(!($ in N))break t;N=N[$]}p=p[p.length-1],V=N[p],C=C(V),C!=V&&C!=null&&t(N,p,{configurable:!0,writable:!0,value:C})}}d("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),d("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),d("Object.entries",function(p){return p||function(C){var N=[],V;for(V in C)Object.prototype.hasOwnProperty.call(C,V)&&N.push([V,C[V]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var m=m||{},_=this||self;function S(p){var C=typeof p;return C=="object"&&p!=null||C=="function"}function I(p,C,N){return p.call.apply(p.bind,arguments)}function T(p,C,N){return T=I,T.apply(null,arguments)}function M(p,C){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),p.apply(this,V)}}function L(p,C){function N(){}N.prototype=C.prototype,p.Z=C.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(V,$,ct){for(var It=Array(arguments.length-2),re=2;re<arguments.length;re++)It[re-2]=arguments[re];return C.prototype[$].apply(V,It)}}var X=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function et(p){const C=p.length;if(C>0){const N=Array(C);for(let V=0;V<C;V++)N[V]=p[V];return N}return[]}function wt(p,C){for(let V=1;V<arguments.length;V++){const $=arguments[V];var N=typeof $;if(N=N!="object"?N:$?Array.isArray($)?"array":N:"null",N=="array"||N=="object"&&typeof $.length=="number"){N=p.length||0;const ct=$.length||0;p.length=N+ct;for(let It=0;It<ct;It++)p[N+It]=$[It]}else p.push($)}}class gt{constructor(C,N){this.i=C,this.j=N,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function At(p){_.setTimeout(()=>{throw p},0)}function zt(){var p=k;let C=null;return p.g&&(C=p.g,p.g=p.g.next,p.g||(p.h=null),C.next=null),C}class Lt{constructor(){this.h=this.g=null}add(C,N){const V=bt.get();V.set(C,N),this.h?this.h.next=V:this.g=V,this.h=V}}var bt=new gt(()=>new jt,p=>p.reset());class jt{constructor(){this.next=this.g=this.h=null}set(C,N){this.h=C,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Ht=!1,k=new Lt,z=()=>{const p=Promise.resolve(void 0);Le=()=>{p.then(P)}};function P(){for(var p;p=zt();){try{p.h.call(p.g)}catch(N){At(N)}var C=bt;C.j(p),C.h<100&&(C.h++,p.next=C.g,C.g=p)}Ht=!1}function K(){this.u=this.u,this.C=this.C}K.prototype.u=!1,K.prototype.dispose=function(){this.u||(this.u=!0,this.N())},K.prototype[Symbol.dispose]=function(){this.dispose()},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(p,C){this.type=p,this.g=this.target=C,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!_.addEventListener||!Object.defineProperty)return!1;var p=!1,C=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};_.addEventListener("test",N,C),_.removeEventListener("test",N,C)}catch{}return p})();function j(p){return/^[\s\xa0]*$/.test(p)}function Pt(p,C){q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,C)}L(Pt,q),Pt.prototype.init=function(p,C){const N=this.type=p.type,V=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=C,C=p.relatedTarget,C||(N=="mouseover"?C=p.fromElement:N=="mouseout"&&(C=p.toElement)),this.relatedTarget=C,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Pt.Z.h.call(this)},Pt.prototype.h=function(){Pt.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),ot=0;function pt(p,C,N,V,$){this.listener=p,this.proxy=null,this.src=C,this.type=N,this.capture=!!V,this.ha=$,this.key=++ot,this.da=this.fa=!1}function Yt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ce(p,C,N){for(const V in p)C.call(N,p[V],V,p)}function ye(p,C){for(const N in p)C.call(void 0,p[N],N,p)}function W(p){const C={};for(const N in p)C[N]=p[N];return C}const ft="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dt(p,C){let N,V;for(let $=1;$<arguments.length;$++){V=arguments[$];for(N in V)p[N]=V[N];for(let ct=0;ct<ft.length;ct++)N=ft[ct],Object.prototype.hasOwnProperty.call(V,N)&&(p[N]=V[N])}}function Mt(p){this.src=p,this.g={},this.h=0}Mt.prototype.add=function(p,C,N,V,$){const ct=p.toString();p=this.g[ct],p||(p=this.g[ct]=[],this.h++);const It=Nt(p,C,V,$);return It>-1?(C=p[It],N||(C.fa=!1)):(C=new pt(C,this.src,ct,!!V,$),C.fa=N,p.push(C)),C};function ee(p,C){const N=C.type;if(N in p.g){var V=p.g[N],$=Array.prototype.indexOf.call(V,C,void 0),ct;(ct=$>=0)&&Array.prototype.splice.call(V,$,1),ct&&(Yt(C),p.g[N].length==0&&(delete p.g[N],p.h--))}}function Nt(p,C,N,V){for(let $=0;$<p.length;++$){const ct=p[$];if(!ct.da&&ct.listener==C&&ct.capture==!!N&&ct.ha==V)return $}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),xe={};function Ze(p,C,N,V,$){if(Array.isArray(C)){for(let ct=0;ct<C.length;ct++)Ze(p,C[ct],N,V,$);return null}return N=je(N),p&&p[nt]?p.J(C,N,S(V)?!!V.capture:!1,$):sr(p,C,N,!1,V,$)}function sr(p,C,N,V,$,ct){if(!C)throw Error("Invalid event type");const It=S($)?!!$.capture:!!$;let re=ar(p);if(re||(p[Ee]=re=new Mt(p)),N=re.add(C,N,V,It,ct),N.proxy)return N;if(V=Fn(),N.proxy=V,V.src=p,V.listener=N,p.addEventListener)Y||($=It),$===void 0&&($=!1),p.addEventListener(C.toString(),V,$);else if(p.attachEvent)p.attachEvent(ci(C.toString()),V);else if(p.addListener&&p.removeListener)p.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Fn(){function p(N){return C.call(p.src,p.listener,N)}const C=Ni;return p}function Xr(p,C,N,V,$){if(Array.isArray(C))for(var ct=0;ct<C.length;ct++)Xr(p,C[ct],N,V,$);else V=S(V)?!!V.capture:!!V,N=je(N),p&&p[nt]?(p=p.i,ct=String(C).toString(),ct in p.g&&(C=p.g[ct],N=Nt(C,N,V,$),N>-1&&(Yt(C[N]),Array.prototype.splice.call(C,N,1),C.length==0&&(delete p.g[ct],p.h--)))):p&&(p=ar(p))&&(C=p.g[C.toString()],p=-1,C&&(p=Nt(C,N,V,$)),(N=p>-1?C[p]:null)&&Ae(N))}function Ae(p){if(typeof p!="number"&&p&&!p.da){var C=p.src;if(C&&C[nt])ee(C.i,p);else{var N=p.type,V=p.proxy;C.removeEventListener?C.removeEventListener(N,V,p.capture):C.detachEvent?C.detachEvent(ci(N),V):C.addListener&&C.removeListener&&C.removeListener(V),(N=ar(C))?(ee(N,p),N.h==0&&(N.src=null,C[Ee]=null)):Yt(p)}}}function ci(p){return p in xe?xe[p]:xe[p]="on"+p}function Ni(p,C){if(p.da)p=!0;else{C=new Pt(C,this);const N=p.listener,V=p.ha||p.src;p.fa&&Ae(p),p=N.call(V,C)}return p}function ar(p){return p=p[Ee],p instanceof Mt?p:null}var bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(p){return typeof p=="function"?p:(p[bn]||(p[bn]=function(C){return p.handleEvent(C)}),p[bn])}function Wt(){K.call(this),this.i=new Mt(this),this.M=this,this.G=null}L(Wt,K),Wt.prototype[nt]=!0,Wt.prototype.removeEventListener=function(p,C,N,V){Xr(this,p,C,N,V)};function xn(p,C){var N,V=p.G;if(V)for(N=[];V;V=V.G)N.push(V);if(p=p.M,V=C.type||C,typeof C=="string")C=new q(C,p);else if(C instanceof q)C.target=C.target||p;else{var $=C;C=new q(V,p),Dt(C,$)}$=!0;let ct,It;if(N)for(It=N.length-1;It>=0;It--)ct=C.g=N[It],$=Bt(ct,V,!0,C)&&$;if(ct=C.g=p,$=Bt(ct,V,!0,C)&&$,$=Bt(ct,V,!1,C)&&$,N)for(It=0;It<N.length;It++)ct=C.g=N[It],$=Bt(ct,V,!1,C)&&$}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var p=this.i;for(const C in p.g){const N=p.g[C];for(let V=0;V<N.length;V++)Yt(N[V]);delete p.g[C],p.h--}}this.G=null},Wt.prototype.J=function(p,C,N,V){return this.i.add(String(p),C,!1,N,V)},Wt.prototype.K=function(p,C,N,V){return this.i.add(String(p),C,!0,N,V)};function Bt(p,C,N,V){if(C=p.i.g[String(C)],!C)return!0;C=C.concat();let $=!0;for(let ct=0;ct<C.length;++ct){const It=C[ct];if(It&&!It.da&&It.capture==N){const re=It.listener,Sn=It.ha||It.src;It.fa&&ee(p.i,It),$=re.call(Sn,V)!==!1&&$}}return $&&!V.defaultPrevented}function na(p,C){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=T(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:_.setTimeout(p,C||0)}function Za(p){p.g=na(()=>{p.g=null,p.i&&(p.i=!1,Za(p))},p.l);const C=p.h;p.h=null,p.m.apply(null,C)}class dn extends K{constructor(C,N){super(),this.m=C,this.l=N,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Za(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(p){K.call(this),this.h=p,this.g={}}L(qr,K);var hi=[];function ia(p){ce(p.g,function(C,N){this.g.hasOwnProperty(N)&&Ae(C)},p),p.g={}}qr.prototype.N=function(){qr.Z.N.call(this),ia(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=_.JSON.stringify,Jn=_.JSON.parse,Wa=class{stringify(p){return _.JSON.stringify(p,void 0)}parse(p){return _.JSON.parse(p,void 0)}};function _s(){}function Ro(){}var He={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ct(){q.call(this,"d")}L(Ct,q);function Ge(){q.call(this,"c")}L(Ge,q);var ne={},ln=null;function br(){return ln=ln||new Wt}ne.Ia="serverreachability";function ra(p){q.call(this,ne.Ia,p)}L(ra,q);function or(p){const C=br();xn(C,new ra(C))}ne.STAT_EVENT="statevent";function pe(p,C){q.call(this,ne.STAT_EVENT,p),this.stat=C}L(pe,q);function rn(p){const C=br();xn(C,new pe(C,p))}ne.Ja="timingevent";function lr(p,C){q.call(this,ne.Ja,p),this.size=C}L(lr,q);function ur(p,C){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){p()},C)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function Ka(p,C,N,V,$,ct){p.info(function(){if(p.g)if(ct){var It="",re=ct.split("&");for(let Be=0;Be<re.length;Be++){var Sn=re[Be].split("=");if(Sn.length>1){const cn=Sn[0];Sn=Sn[1];const Hi=cn.split("_");It=Hi.length>=2&&Hi[1]=="type"?It+(cn+"="+Sn+"&"):It+(cn+"=redacted&")}}}else It=null;else It=ct;return"XMLHTTP REQ ("+V+") [attempt "+$+"]: "+C+`
`+N+`
`+It})}function zn(p,C,N,V,$,ct,It){p.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+$+"]: "+C+`
`+N+`
`+ct+" "+It})}function di(p,C,N,V){p.info(function(){return"XMLHTTP TEXT ("+C+"): "+qi(p,N)+(V?" "+V:"")})}function Ir(p,C){p.info(function(){return"TIMEOUT: "+C})}In.prototype.info=function(){};function qi(p,C){if(!p.g)return C;if(!C)return null;try{const ct=JSON.parse(C);if(ct){for(p=0;p<ct.length;p++)if(Array.isArray(ct[p])){var N=ct[p];if(!(N.length<2)){var V=N[1];if(Array.isArray(V)&&!(V.length<1)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(let It=1;It<V.length;It++)V[It]=""}}}}return fi(ct)}catch{return C}}var ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ts;function Bn(){}L(Bn,_s),Bn.prototype.g=function(){return new XMLHttpRequest},Ts=new Bn;function gi(p){return encodeURIComponent(String(p))}function mi(p){var C=1;p=p.split(":");const N=[];for(;C>0&&p.length;)N.push(p.shift()),C--;return p.length&&N.push(p.join(":")),N}function Ot(p,C,N,V){this.j=p,this.i=C,this.l=N,this.S=V||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var An={},Fe={};function pi(p,C,N){p.M=1,p.A=Di(wn(C)),p.u=N,p.R=!0,Qr(p,null)}function Qr(p,C){p.F=Date.now(),Nr(p),p.B=wn(p.A);var N=p.B,V=p.S;Array.isArray(V)||(V=[String(V)]),We(N.i,"t",V),p.C=0,N=p.j.L,p.h=new ri,p.g=ca(p.j,N?C:null,!p.u),p.P>0&&(p.O=new dn(T(p.Y,p,p.g),p.P)),C=p.V,N=p.g,V=p.ba;var $="readystatechange";Array.isArray($)||($&&(hi[0]=$.toString()),$=hi);for(let ct=0;ct<$.length;ct++){const It=Ze(N,$[ct],V||C.handleEvent,!1,C.h||C);if(!It)break;C.g[It.key]=It}C=p.J?W(p.J):{},p.u?(p.v||(p.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,C)):(p.v="GET",p.g.ea(p.B,p.v,null,C)),or(),Ka(p.i,p.v,p.B,p.l,p.S,p.u)}Ot.prototype.ba=function(p){p=p.target;const C=this.O;C&&Wi(p)==3?C.j():this.Y(p)},Ot.prototype.Y=function(p){try{if(p==this.g)t:{const re=Wi(this.g),Sn=this.g.ya(),Be=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||Dn(this.g)))){this.K||re!=4||Sn==7||(Sn==8||Be<=0?or(3):or(2)),fn(this);var C=this.g.ca();this.X=C;var N=sa(this);if(this.o=C==200,zn(this.i,this.v,this.B,this.l,this.S,re,C),this.o){if(this.U&&!this.L){e:{if(this.g){var V,$=this.g;if((V=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var ct=V;break e}}ct=null}if(p=ct)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$n(this,p);else{this.o=!1,this.m=3,rn(12),Ri(this),Te(this);break t}}if(this.R){p=!0;let cn;for(;!this.K&&this.C<N.length;)if(cn=Do(this,N),cn==Fe){re==4&&(this.m=4,rn(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==An){this.m=4,rn(15),di(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,cn,null),$n(this,cn);if(Fi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||N.length!=0||this.h.h||(this.m=1,rn(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,N,"[Invalid Chunked Response]"),Ri(this),Te(this);else if(N.length>0&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.aa&&!It.P&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),lt(It),It.P=!0,rn(11))}}else di(this.i,this.l,N,null),$n(this,N);re==4&&Ri(this),this.o&&!this.K&&(re==4?Ns(this.j,this):(this.o=!1,Nr(this)))}else ji(this.g),C==400&&N.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Ri(this),Te(this)}}}catch{}finally{}};function sa(p){if(!Fi(p))return p.g.la();const C=Dn(p.g);if(C==="")return"";let N="";const V=C.length,$=Wi(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Ri(p),Te(p),"";p.h.i=new _.TextDecoder}for(let ct=0;ct<V;ct++)p.h.h=!0,N+=p.h.i.decode(C[ct],{stream:!($&&ct==V-1)});return C.length=0,p.h.g+=N,p.C=0,p.h.g}function Fi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Do(p,C){var N=p.C,V=C.indexOf(`
`,N);return V==-1?Fe:(N=Number(C.substring(N,V)),isNaN(N)?An:(V+=1,V+N>C.length?Fe:(C=C.slice(V,V+N),p.C=V+N,C)))}Ot.prototype.cancel=function(){this.K=!0,Ri(this)};function Nr(p){p.T=Date.now()+p.H,yi(p,p.H)}function yi(p,C){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ur(T(p.aa,p),C)}function fn(p){p.D&&(_.clearTimeout(p.D),p.D=null)}Ot.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ir(this.i,this.B),this.M!=2&&(or(),rn(17)),Ri(this),this.m=2,Te(this)):yi(this,this.T-p)};function Te(p){p.j.I==0||p.K||Ns(p.j,p)}function Ri(p){fn(p);var C=p.O;C&&typeof C.dispose=="function"&&C.dispose(),p.O=null,ia(p.V),p.g&&(C=p.g,p.g=null,C.abort(),C.dispose())}function $n(p,C){try{var N=p.j;if(N.I!=0&&(N.g==p||Ei(N.h,p))){if(!p.L&&Ei(N.h,p)&&N.I==3){try{var V=N.Ba.g.parse(C)}catch{V=null}if(Array.isArray(V)&&V.length==3){var $=V;if($[0]==0){t:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)Tn(N),Kr(N);else break t;Is(N),rn(18)}}else N.xa=$[1],0<N.xa-N.K&&$[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=ur(T(N.Va,N),6e3));ze(N.h)<=1&&N.ta&&(N.ta=void 0)}else Mr(N,11)}else if((p.L||N.g==p)&&Tn(N),!j(C))for($=N.Ba.g.parse(C),C=0;C<$.length;C++){let Be=$[C];const cn=Be[0];if(!(cn<=N.K))if(N.K=cn,Be=Be[1],N.I==2)if(Be[0]=="c"){N.M=Be[1],N.ba=Be[2];const Hi=Be[3];Hi!=null&&(N.ka=Hi,N.j.info("VER="+N.ka));const Br=Be[4];Br!=null&&(N.za=Br,N.j.info("SVER="+N.za));const ai=Be[5];ai!=null&&typeof ai=="number"&&ai>0&&(V=1.5*ai,N.O=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const Gi=p.g;if(Gi){const Ds=Gi.g?Gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var ct=V.h;ct.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(ct.j=ct.l,ct.g=new Set,ct.h&&($a(ct,ct.h),ct.h=null))}if(V.G){const Vr=Gi.g?Gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Vr&&(V.wa=Vr,$t(V.J,V.G,Vr))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),V=N;var It=p;if(V.na=Oo(V,V.L?V.ba:null,V.W),It.L){Ie(V.h,It);var re=It,Sn=V.O;Sn&&(re.H=Sn),re.D&&(fn(re),Nr(re)),V.g=It}else gr(V);N.i.length>0&&Dr(N)}else Be[0]!="stop"&&Be[0]!="close"||Mr(N,7);else N.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Mr(N,7):oa(N):Be[0]!="noop"&&N.l&&N.l.qa(Be),N.A=0)}}or(4)}catch{}}var _n=class{constructor(p,C){this.g=p,this.map=C}};function Et(p){this.l=p||10,_.PerformanceNavigationTiming?(p=_.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ja(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function ze(p){return p.h?1:p.g?p.g.size:0}function Ei(p,C){return p.h?p.h==C:p.g?p.g.has(C):!1}function $a(p,C){p.g?p.g.add(C):p.h=C}function Ie(p,C){p.h&&p.h==C?p.h=null:p.g&&p.g.has(C)&&p.g.delete(C)}Et.prototype.cancel=function(){if(this.i=Ce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ce(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let C=p.i;for(const N of p.g.values())C=C.concat(N.G);return C}return et(p.i)}var ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rs(p,C){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const V=p[N].indexOf("=");let $,ct=null;V>=0?($=p[N].substring(0,V),ct=p[N].substring(V+1)):$=p[N],C($,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}function xi(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;p instanceof xi?(this.l=p.l,_e(this,p.j),this.o=p.o,this.g=p.g,Ai(this,p.u),this.h=p.h,to(this,eo(p.i)),this.m=p.m):p&&(C=String(p).match(ge))?(this.l=!1,_e(this,C[1]||"",!0),this.o=Rr(C[2]||""),this.g=Rr(C[3]||"",!0),Ai(this,C[4]),this.h=Rr(C[5]||"",!0),to(this,C[6]||"",!0),this.m=Rr(C[7]||"")):(this.l=!1,this.i=new jn(null,this.l))}xi.prototype.toString=function(){const p=[];var C=this.j;C&&p.push(Qi(C,Nn,!0),":");var N=this.g;return(N||C=="file")&&(p.push("//"),(C=this.o)&&p.push(Qi(C,Nn,!0),"@"),p.push(gi(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(Qi(N,N.charAt(0)=="/"?U:it,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",Qi(N,Rn)),p.join("")},xi.prototype.resolve=function(p){const C=wn(this);let N=!!p.j;N?_e(C,p.j):N=!!p.o,N?C.o=p.o:N=!!p.g,N?C.g=p.g:N=p.u!=null;var V=p.h;if(N)Ai(C,p.u);else if(N=!!p.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var $=C.h.lastIndexOf("/");$!=-1&&(V=C.h.slice(0,$+1)+V)}if($=V,$==".."||$==".")V="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){V=$.lastIndexOf("/",0)==0,$=$.split("/");const ct=[];for(let It=0;It<$.length;){const re=$[It++];re=="."?V&&It==$.length&&ct.push(""):re==".."?((ct.length>1||ct.length==1&&ct[0]!="")&&ct.pop(),V&&It==$.length&&ct.push("")):(ct.push(re),V=!0)}V=ct.join("/")}else V=$}return N?C.h=V:N=p.i.toString()!=="",N?to(C,eo(p.i)):N=!!p.m,N&&(C.m=p.m),C};function wn(p){return new xi(p)}function _e(p,C,N){p.j=N?Rr(C,!0):C,p.j&&(p.j=p.j.replace(/:$/,""))}function Ai(p,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);p.u=C}else p.u=null}function to(p,C,N){C instanceof jn?(p.i=C,as(p.i,p.l)):(N||(C=Qi(C,Ut)),p.i=new jn(C,p.l))}function $t(p,C,N){p.i.set(C,N)}function Di(p){return $t(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Rr(p,C){return p?C?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Qi(p,C,N){return typeof p=="string"?(p=encodeURI(p).replace(C,fe),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function fe(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Nn=/[#\/\?@]/g,it=/[#\?:]/g,U=/[#\?]/g,Ut=/[#\?@]/g,Rn=/#/g;function jn(p,C){this.h=this.g=null,this.i=p||null,this.j=!!C}function Mi(p){p.g||(p.g=new Map,p.h=0,p.i&&rs(p.i,function(C,N){p.add(decodeURIComponent(C.replace(/\+/g," ")),N)}))}o=jn.prototype,o.add=function(p,C){Mi(this),this.i=null,p=ss(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(C),this.h+=1,this};function aa(p,C){Mi(p),C=ss(p,C),p.g.has(C)&&(p.i=null,p.h-=p.g.get(C).length,p.g.delete(C))}function si(p,C){return Mi(p),C=ss(p,C),p.g.has(C)}o.forEach=function(p,C){Mi(this),this.g.forEach(function(N,V){N.forEach(function($){p.call(C,$,V,this)},this)},this)};function Xt(p,C){Mi(p);let N=[];if(typeof C=="string")si(p,C)&&(N=N.concat(p.g.get(ss(p,C))));else for(p=Array.from(p.g.values()),C=0;C<p.length;C++)N=N.concat(p[C]);return N}o.set=function(p,C){return Mi(this),this.i=null,p=ss(this,p),si(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[C]),this.h+=1,this},o.get=function(p,C){return p?(p=Xt(this,p),p.length>0?String(p[0]):C):C};function We(p,C,N){aa(p,C),N.length>0&&(p.i=null,p.g.set(ss(p,C),et(N)),p.h+=N.length)}o.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],C=Array.from(this.g.keys());for(let V=0;V<C.length;V++){var N=C[V];const $=gi(N);N=Xt(this,N);for(let ct=0;ct<N.length;ct++){let It=$;N[ct]!==""&&(It+="="+gi(N[ct])),p.push(It)}}return this.i=p.join("&")};function eo(p){const C=new jn;return C.i=p.i,p.g&&(C.g=new Map(p.g),C.h=p.h),C}function ss(p,C){return C=String(C),p.j&&(C=C.toLowerCase()),C}function as(p,C){C&&!p.j&&(Mi(p),p.i=null,p.g.forEach(function(N,V){const $=V.toLowerCase();V!=$&&(aa(this,V),We(this,$,N))},p)),p.j=C}function Oi(p,C){const N=new In;if(_.Image){const V=new Image;V.onload=M(Zi,N,"TestLoadImage: loaded",!0,C,V),V.onerror=M(Zi,N,"TestLoadImage: error",!1,C,V),V.onabort=M(Zi,N,"TestLoadImage: abort",!1,C,V),V.ontimeout=M(Zi,N,"TestLoadImage: timeout",!1,C,V),_.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=p}else C(!1)}function Cs(p,C){const N=new In,V=new AbortController,$=setTimeout(()=>{V.abort(),Zi(N,"TestPingServer: timeout",!1,C)},1e4);fetch(p,{signal:V.signal}).then(ct=>{clearTimeout($),ct.ok?Zi(N,"TestPingServer: ok",!0,C):Zi(N,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout($),Zi(N,"TestPingServer: error",!1,C)})}function Zi(p,C,N,V,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),V(N)}catch{}}function un(){this.g=new Wa}function Li(p){this.i=p.Sb||null,this.h=p.ab||!1}L(Li,_s),Li.prototype.g=function(){return new Bi(this.i,this.h)};function Bi(p,C){Wt.call(this),this.H=p,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}L(Bi,Wt),o=Bi.prototype,o.open=function(p,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=C,this.readyState=1,Kt(this)},o.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(C.body=p),(this.H||_).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},o.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},o.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qt(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qt(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}o.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var C=p.value?p.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!p.done}))&&(this.response=this.responseText+=C)}p.done?os(this):Kt(this),this.readyState==3&&Qt(this)}},o.Oa=function(p){this.g&&(this.response=this.responseText=p,os(this))},o.Na=function(p){this.g&&(this.response=p,os(this))},o.ga=function(){this.g&&os(this)};function os(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Kt(p)}o.setRequestHeader=function(p,C){this.A.append(p,C)},o.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},o.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],C=this.h.entries();for(var N=C.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=C.next();return p.join(`\r
`)};function Kt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Ke(p){let C="";return ce(p,function(N,V){C+=V,C+=":",C+=N,C+=`\r
`}),C}function Ss(p,C,N){t:{for(V in N){var V=!1;break t}V=!0}V||(N=Ke(N),typeof p=="string"?N!=null&&gi(N):$t(p,C,N))}function Ye(p){Wt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}L(Ye,Wt);var hr=/^https?$/i,fr=["POST","PUT"];o=Ye.prototype,o.Fa=function(p){this.H=p},o.ea=function(p,C,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);C=C?C.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ts.g(),this.g.onreadystatechange=X(T(this.Ca,this));try{this.B=!0,this.g.open(C,String(p),!0),this.B=!1}catch(ct){vs(this,ct);return}if(p=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var $ in V)N.set($,V[$]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ct of V.keys())N.set(ct,V.get(ct));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(ct=>ct.toLowerCase()=="content-type"),$=_.FormData&&p instanceof _.FormData,!(Array.prototype.indexOf.call(fr,C,void 0)>=0)||V||$||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ct,It]of N)this.g.setRequestHeader(ct,It);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ct){vs(this,ct)}};function vs(p,C){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=C,p.o=5,Zr(p),zi(p)}function Zr(p){p.A||(p.A=!0,xn(p,"complete"),xn(p,"error"))}o.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,xn(this,"complete"),xn(this,"abort"),zi(this))},o.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Ye.Z.N.call(this)},o.Ca=function(){this.u||(this.B||this.v||this.j?dr(this):this.Xa())},o.Xa=function(){dr(this)};function dr(p){if(p.h&&typeof m<"u"){if(p.v&&Wi(p)==4)setTimeout(p.Ca.bind(p),0);else if(xn(p,"readystatechange"),Wi(p)==4){p.h=!1;try{const ct=p.ca();t:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break t;default:C=!1}var N;if(!(N=C)){var V;if(V=ct===0){let It=String(p.D).match(ge)[1]||null;!It&&_.self&&_.self.location&&(It=_.self.location.protocol.slice(0,-1)),V=!hr.test(It?It.toLowerCase():"")}N=V}if(N)xn(p,"complete"),xn(p,"success");else{p.o=6;try{var $=Wi(p)>2?p.g.statusText:""}catch{$=""}p.l=$+" ["+p.ca()+"]",Zr(p)}}finally{zi(p)}}}}function zi(p,C){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,C||xn(p,"ready");try{N.onreadystatechange=null}catch{}}}o.isActive=function(){return!!this.g};function Wi(p){return p.g?p.g.readyState:0}o.ca=function(){try{return Wi(this)>2?this.g.status:-1}catch{return-1}},o.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},o.La=function(p){if(this.g){var C=this.g.responseText;return p&&C.indexOf(p)==0&&(C=C.substring(p.length)),Jn(C)}};function Dn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(p){const C={};p=(p.g&&Wi(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<p.length;V++){if(j(p[V]))continue;var N=mi(p[V]);const $=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ct=C[$]||[];C[$]=ct,ct.push(N)}ye(C,function(V){return V.join(", ")})}o.ya=function(){return this.o},o.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gn(p,C,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||C}function Wr(p){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gn("baseRetryDelayMs",5e3,p),this.Za=gn("retryDelaySeedMs",1e4,p),this.Ta=gn("forwardChannelMaxRetries",2,p),this.va=gn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Et(p&&p.concurrentRequestLimit),this.Ba=new un,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}o=Wr.prototype,o.ka=8,o.I=1,o.connect=function(p,C,N,V){rn(0),this.W=p,this.H=C||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.J=Oo(this,null,this.W),Dr(this)};function oa(p){if(la(p),p.I==3){var C=p.V++,N=wn(p.J);if($t(N,"SID",p.M),$t(N,"RID",C),$t(N,"TYPE","terminate"),ls(p,N),C=new Ot(p,p.j,C),C.M=2,C.A=Di(wn(N)),N=!1,_.navigator&&_.navigator.sendBeacon)try{N=_.navigator.sendBeacon(C.A.toString(),"")}catch{}!N&&_.Image&&(new Image().src=C.A,N=!0),N||(C.g=ca(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Nr(C)}Mo(p)}function Kr(p){p.g&&(lt(p),p.g.cancel(),p.g=null)}function la(p){Kr(p),p.v&&(_.clearTimeout(p.v),p.v=null),Tn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&_.clearTimeout(p.m),p.m=null)}function Dr(p){if(!Ja(p.h)&&!p.m){p.m=!0;var C=p.Ea;Le||z(),Ht||(Le(),Ht=!0),k.add(C,p),p.D=0}}function ua(p,C){return ze(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=C.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ur(T(p.Ea,p,C),no(p,p.D)),p.D++,!0)}o.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const $=new Ot(this,this.j,p);let ct=this.o;if(this.U&&(ct?(ct=W(ct),Dt(ct,this.U)):ct=this.U),this.u!==null||this.R||($.J=ct,ct=null),this.S)t:{for(var C=0,N=0;N<this.i.length;N++){e:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break e}V=void 0}if(V===void 0)break;if(C+=V,C>4096){C=N;break t}if(C===4096||N===this.i.length-1){C=N+1;break t}}C=1e3}else C=1e3;C=bs(this,$,C),N=wn(this.J),$t(N,"RID",p),$t(N,"CVER",22),this.G&&$t(N,"X-HTTP-Session-Id",this.G),ls(this,N),ct&&(this.R?C="headers="+gi(Ke(ct))+"&"+C:this.u&&Ss(N,this.u,ct)),$a(this.h,$),this.Ra&&$t(N,"TYPE","init"),this.S?($t(N,"$req",C),$t(N,"SID","null"),$.U=!0,pi($,N,null)):pi($,N,C),this.I=2}}else this.I==3&&(p?Pe(this,p):this.i.length==0||Ja(this.h)||Pe(this))};function Pe(p,C){var N;C?N=C.l:N=p.V++;const V=wn(p.J);$t(V,"SID",p.M),$t(V,"RID",N),$t(V,"AID",p.K),ls(p,V),p.u&&p.o&&Ss(V,p.u,p.o),N=new Ot(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),C&&(p.i=C.G.concat(p.i)),C=bs(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),$a(p.h,N),pi(N,V,C)}function ls(p,C){p.H&&ce(p.H,function(N,V){$t(C,V,N)}),p.l&&ce({},function(N,V){$t(C,V,N)})}function bs(p,C,N){N=Math.min(p.i.length,N);const V=p.l?T(p.l.Ka,p.l,p):null;t:{var $=p.i;let re=-1;for(;;){const Sn=["count="+N];re==-1?N>0?(re=$[0].g,Sn.push("ofs="+re)):re=0:Sn.push("ofs="+re);let Be=!0;for(let cn=0;cn<N;cn++){var ct=$[cn].g;const Hi=$[cn].map;if(ct-=re,ct<0)re=Math.max(0,$[cn].g-100),Be=!1;else try{ct="req"+ct+"_"||"";try{var It=Hi instanceof Map?Hi:Object.entries(Hi);for(const[Br,ai]of It){let Gi=ai;S(ai)&&(Gi=fi(ai)),Sn.push(ct+Br+"="+encodeURIComponent(Gi))}}catch(Br){throw Sn.push(ct+"type="+encodeURIComponent("_badmap")),Br}}catch{V&&V(Hi)}}if(Be){It=Sn.join("&");break t}}It=void 0}return p=p.i.splice(0,N),C.G=p,It}function gr(p){if(!p.g&&!p.v){p.Y=1;var C=p.Da;Le||z(),Ht||(Le(),Ht=!0),k.add(C,p),p.A=0}}function Is(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ur(T(p.Da,p),no(p,p.A)),p.A++,!0)}o.Da=function(){if(this.v=null,oe(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ur(T(this.Wa,this),p)}},o.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Kr(this),oe(this))};function lt(p){p.B!=null&&(_.clearTimeout(p.B),p.B=null)}function oe(p){p.g=new Ot(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var C=wn(p.na);$t(C,"RID","rpc"),$t(C,"SID",p.M),$t(C,"AID",p.K),$t(C,"CI",p.F?"0":"1"),!p.F&&p.ia&&$t(C,"TO",p.ia),$t(C,"TYPE","xmlhttp"),ls(p,C),p.u&&p.o&&Ss(C,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=Di(wn(C)),N.u=null,N.R=!0,Qr(N,p)}o.Va=function(){this.C!=null&&(this.C=null,Kr(this),Is(this),rn(19))};function Tn(p){p.C!=null&&(_.clearTimeout(p.C),p.C=null)}function Ns(p,C){var N=null;if(p.g==C){Tn(p),lt(p),p.g=null;var V=2}else if(Ei(p.h,C))N=C.G,Ie(p.h,C),V=1;else return;if(p.I!=0){if(C.o)if(V==1){N=C.u?C.u.length:0,C=Date.now()-C.F;var $=p.D;V=br(),xn(V,new lr(V,N)),Dr(p)}else gr(p);else if($=C.m,$==3||$==0&&C.X>0||!(V==1&&ua(p,C)||V==2&&Is(p)))switch(N&&N.length>0&&(C=p.h,C.i=C.i.concat(N)),$){case 1:Mr(p,5);break;case 4:Mr(p,10);break;case 3:Mr(p,6);break;default:Mr(p,2)}}}function no(p,C){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*C}function Mr(p,C){if(p.j.info("Error code "+C),C==2){var N=T(p.bb,p),V=p.Ua;const $=!V;V=new xi(V||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||_e(V,"https"),Di(V),$?Oi(V.toString(),N):Cs(V.toString(),N)}else rn(2);p.I=0,p.l&&p.l.pa(C),Mo(p),la(p)}o.bb=function(p){p?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Mo(p){if(p.I=0,p.ja=[],p.l){const C=Ce(p.h);(C.length!=0||p.i.length!=0)&&(wt(p.ja,C),wt(p.ja,p.i),p.h.i.length=0,et(p.i),p.i.length=0),p.l.oa()}}function Oo(p,C,N){var V=N instanceof xi?wn(N):new xi(N);if(V.g!="")C&&(V.g=C+"."+V.g),Ai(V,V.u);else{var $=_.location;V=$.protocol,C=C?C+"."+$.hostname:$.hostname,$=+$.port;const ct=new xi(null);V&&_e(ct,V),C&&(ct.g=C),$&&Ai(ct,$),N&&(ct.h=N),V=ct}return N=p.G,C=p.wa,N&&C&&$t(V,N,C),$t(V,"VER",p.ka),ls(p,V),V}function ca(p,C,N){if(C&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=p.Aa&&!p.ma?new Ye(new Li({ab:N})):new Ye(p.ma),C.Fa(p.L),C}o.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cn(){}o=Cn.prototype,o.ra=function(){},o.qa=function(){},o.pa=function(){},o.oa=function(){},o.isActive=function(){return!0},o.Ka=function(){};function Or(){}Or.prototype.g=function(p,C){return new we(p,C)};function we(p,C){Wt.call(this),this.g=new Wr(C),this.l=p,this.h=C&&C.messageUrlParams||null,p=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(p?p["X-WebChannel-Content-Type"]=C.messageContentType:p={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(p?p["X-WebChannel-Client-Profile"]=C.sa:p={"X-WebChannel-Client-Profile":C.sa}),this.g.U=p,(p=C&&C.Qb)&&!j(p)&&(this.g.u=p),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!j(C)&&(this.g.G=C,p=this.h,p!==null&&C in p&&(p=this.h,C in p&&delete p[C])),this.j=new Se(this)}L(we,Wt),we.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){oa(this.g)},we.prototype.o=function(p){var C=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=fi(p),p=N);C.i.push(new _n(C.Ya++,p)),C.I==3&&Dr(C)},we.prototype.N=function(){this.g.l=null,delete this.j,oa(this.g),delete this.g,we.Z.N.call(this)};function Rs(p){Ct.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var C=p.__sm__;if(C){t:{for(const N in C){p=N;break t}p=void 0}(this.i=p)&&(p=this.i,C=C!==null&&p in C?C[p]:void 0),this.data=C}else this.data=p}L(Rs,Ct);function Lr(){Ge.call(this),this.status=1}L(Lr,Ge);function Se(p){this.g=p}L(Se,Cn),Se.prototype.ra=function(){xn(this.g,"a")},Se.prototype.qa=function(p){xn(this.g,new Rs(p))},Se.prototype.pa=function(p){xn(this.g,new Lr)},Se.prototype.oa=function(){xn(this.g,"b")},Or.prototype.createWebChannel=Or.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,Qp=function(){return new Or},qp=function(){return br()},Xp=ne,j1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,Gc=ws,cr.COMPLETE="complete",Yp=cr,Ro.EventType=He,He.OPEN="a",He.CLOSE="b",He.ERROR="c",He.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,cu=Ro,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Gp=Ye}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="12.8.0";function U3(o){wl=o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Pp("@firebase/firestore");function ol(){return So.logLevel}function Vt(o,...t){if(So.logLevel<=Ue.DEBUG){const r=t.map(h0);So.debug(`Firestore (${wl}): ${o}`,...r)}}function $s(o,...t){if(So.logLevel<=Ue.ERROR){const r=t.map(h0);So.error(`Firestore (${wl}): ${o}`,...r)}}function ml(o,...t){if(So.logLevel<=Ue.WARN){const r=t.map(h0);So.warn(`Firestore (${wl}): ${o}`,...r)}}function h0(o){if(typeof o=="string")return o;try{return(function(r){return JSON.stringify(r)})(o)}catch{return o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(o,t,r){let u="Unexpected state";typeof t=="string"?u=t:r=t,Zp(o,u,r)}function Zp(o,t,r){let u=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${o.toString(16)})`;if(r!==void 0)try{u+=" CONTEXT: "+JSON.stringify(r)}catch{u+=" CONTEXT: "+r}throw $s(u),new Error(u)}function $e(o,t,r,u){let d="Unexpected state";typeof r=="string"?d=r:u=r,o||Zp(t,d,u)}function ue(o,t){return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends _l{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class F3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(ki.UNAUTHENTICATED)))}shutdown(){}}class z3{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class j3{constructor(t){this.t=t,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){$e(this.o===void 0,42304);let u=this.i;const d=I=>this.i!==u?(u=this.i,r(I)):Promise.resolve();let m=new Fa;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Fa,t.enqueueRetryable((()=>d(this.currentUser)))};const _=()=>{const I=m;t.enqueueRetryable((async()=>{await I.promise,await d(this.currentUser)}))},S=I=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.o&&(this.auth.addAuthTokenListener(this.o),_())};this.t.onInit((I=>S(I))),setTimeout((()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?S(I):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Fa)}}),0),_()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((u=>this.i!==t?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?($e(typeof u.accessToken=="string",31837,{l:u}),new Wp(u.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $e(t===null||typeof t=="string",2055,{h:t}),new ki(t)}}class H3{constructor(t,r,u){this.P=t,this.T=r,this.I=u,this.type="FirstParty",this.user=ki.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class G3{constructor(t,r,u){this.P=t,this.T=r,this.I=u}getToken(){return Promise.resolve(new H3(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(ki.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class R2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y3{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,w3(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){$e(this.o===void 0,3512);const u=m=>{m.error!=null&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const _=m.token!==this.m;return this.m=m.token,Vt("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?r(m.token):Promise.resolve()};this.o=m=>{t.enqueueRetryable((()=>u(m)))};const d=m=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>d(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?d(m):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new R2(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?($e(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new R2(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(o){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(o);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let u=0;u<o;u++)r[u]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let u="";for(;u.length<20;){const d=X3(40);for(let m=0;m<d.length;++m)u.length<20&&d[m]<r&&(u+=t.charAt(d[m]%62))}return u}}function Me(o,t){return o<t?-1:o>t?1:0}function H1(o,t){const r=Math.min(o.length,t.length);for(let u=0;u<r;u++){const d=o.charAt(u),m=t.charAt(u);if(d!==m)return I1(d)===I1(m)?Me(d,m):I1(d)?1:-1}return Me(o.length,t.length)}const q3=55296,Q3=57343;function I1(o){const t=o.charCodeAt(0);return t>=q3&&t<=Q3}function pl(o,t,r){return o.length===t.length&&o.every(((u,d)=>r(u,t[d])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="__name__";class ms{constructor(t,r,u){r===void 0?r=0:r>t.length&&ie(637,{offset:r,range:t.length}),u===void 0?u=t.length-r:u>t.length-r&&ie(1746,{length:u,range:t.length-r}),this.segments=t,this.offset=r,this.len=u}get length(){return this.len}isEqual(t){return ms.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof ms?t.forEach((u=>{r.push(u)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,u=this.limit();r<u;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const u=Math.min(t.length,r.length);for(let d=0;d<u;d++){const m=ms.compareSegments(t.get(d),r.get(d));if(m!==0)return m}return Me(t.length,r.length)}static compareSegments(t,r){const u=ms.isNumericId(t),d=ms.isNumericId(r);return u&&!d?-1:!u&&d?1:u&&d?ms.extractNumericId(t).compare(ms.extractNumericId(r)):H1(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ua.fromString(t.substring(4,t.length-2))}}class On extends ms{construct(t,r,u){return new On(t,r,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const u of t){if(u.indexOf("//")>=0)throw new qt(Tt.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);r.push(...u.split("/").filter((d=>d.length>0)))}return new On(r)}static emptyPath(){return new On([])}}const Z3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends ms{construct(t,r,u){return new bi(t,r,u)}static isValidIdentifier(t){return Z3.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D2}static keyField(){return new bi([D2])}static fromServerFormat(t){const r=[];let u="",d=0;const m=()=>{if(u.length===0)throw new qt(Tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(u),u=""};let _=!1;for(;d<t.length;){const S=t[d];if(S==="\\"){if(d+1===t.length)throw new qt(Tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const I=t[d+1];if(I!=="\\"&&I!=="."&&I!=="`")throw new qt(Tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);u+=I,d+=2}else S==="`"?(_=!_,d++):S!=="."||_?(u+=S,d++):(m(),d++)}if(m(),_)throw new qt(Tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bi(r)}static emptyPath(){return new bi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.path=t}static fromPath(t){return new Jt(On.fromString(t))}static fromName(t){return new Jt(On.fromString(t).popFirst(5))}static empty(){return new Jt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&On.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return On.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Jt(new On(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(o,t,r){if(!r)throw new qt(Tt.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${t}.`)}function K3(o,t,r,u){if(t===!0&&u===!0)throw new qt(Tt.INVALID_ARGUMENT,`${o} and ${r} cannot be used together.`)}function M2(o){if(!Jt.isDocumentKey(o))throw new qt(Tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function Kp(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}function d0(o){if(o===void 0)return"undefined";if(o===null)return"null";if(typeof o=="string")return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if(typeof o=="number"||typeof o=="boolean")return""+o;if(typeof o=="object"){if(o instanceof Array)return"an array";{const t=(function(u){return u.constructor?u.constructor.name:null})(o);return t?`a custom ${t} object`:"an object"}}return typeof o=="function"?"a function":ie(12329,{type:typeof o})}function wu(o,t){if("_delegate"in o&&(o=o._delegate),!(o instanceof t)){if(t.name===o.constructor.name)throw new qt(Tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=d0(o);throw new qt(Tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return o}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(o,t){const r={typeString:o};return t&&(r.value=t),r}function Ru(o,t){if(!Kp(o))throw new qt(Tt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const u in t)if(t[u]){const d=t[u].typeString,m="value"in t[u]?{value:t[u].value}:void 0;if(!(u in o)){r=`JSON missing required field: '${u}'`;break}const _=o[u];if(d&&typeof _!==d){r=`JSON field '${u}' must be a ${d}.`;break}if(m!==void 0&&_!==m.value){r=`Expected '${u}' field to equal '${m.value}'`;break}}if(r)throw new qt(Tt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=-62135596800,L2=1e6;class En{static now(){return En.fromMillis(Date.now())}static fromDate(t){return En.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),u=Math.floor((t-1e3*r)*L2);return new En(r,u)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new qt(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new qt(Tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<O2)throw new qt(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qt(Tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L2}_compareTo(t){return this.seconds===t.seconds?Me(this.nanoseconds,t.nanoseconds):Me(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:En._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ru(t,En._jsonSchema))return new En(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-O2;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}En._jsonSchemaVersion="firestore/timestamp/1.0",En._jsonSchema={type:Kn("string",En._jsonSchemaVersion),seconds:Kn("number"),nanoseconds:Kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(t){return new ae(t)}static min(){return new ae(new En(0,0))}static max(){return new ae(new En(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function J3(o,t){const r=o.toTimestamp().seconds,u=o.toTimestamp().nanoseconds+1,d=ae.fromTimestamp(u===1e9?new En(r+1,0):new En(r,u));return new ja(d,Jt.empty(),t)}function $3(o){return new ja(o.readTime,o.key,Tu)}class ja{constructor(t,r,u){this.readTime=t,this.documentKey=r,this.largestBatchId=u}static min(){return new ja(ae.min(),Jt.empty(),Tu)}static max(){return new ja(ae.max(),Jt.empty(),Tu)}}function tw(o,t){let r=o.readTime.compareTo(t.readTime);return r!==0?r:(r=Jt.comparator(o.documentKey,t.documentKey),r!==0?r:Me(o.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(o){if(o.code!==Tt.FAILED_PRECONDITION||o.message!==ew)throw o;Vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new xt(((u,d)=>{this.nextCallback=m=>{this.wrapSuccess(t,m).next(u,d)},this.catchCallback=m=>{this.wrapFailure(r,m).next(u,d)}}))}toPromise(){return new Promise(((t,r)=>{this.next(t,r)}))}wrapUserFunction(t){try{const r=t();return r instanceof xt?r:xt.resolve(r)}catch(r){return xt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction((()=>t(r))):xt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction((()=>t(r))):xt.reject(r)}static resolve(t){return new xt(((r,u)=>{r(t)}))}static reject(t){return new xt(((r,u)=>{u(t)}))}static waitFor(t){return new xt(((r,u)=>{let d=0,m=0,_=!1;t.forEach((S=>{++d,S.next((()=>{++m,_&&m===d&&r()}),(I=>u(I)))})),_=!0,m===d&&r()}))}static or(t){let r=xt.resolve(!1);for(const u of t)r=r.next((d=>d?xt.resolve(d):u()));return r}static forEach(t,r){const u=[];return t.forEach(((d,m)=>{u.push(r.call(this,d,m))})),this.waitFor(u)}static mapArray(t,r){return new xt(((u,d)=>{const m=t.length,_=new Array(m);let S=0;for(let I=0;I<m;I++){const T=I;r(t[T]).next((M=>{_[T]=M,++S,S===m&&u(_)}),(M=>d(M)))}}))}static doWhile(t,r){return new xt(((u,d)=>{const m=()=>{t()===!0?r().next((()=>{m()}),d):u()};m()}))}}function iw(o){const t=o.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Cl(o){return o.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=u=>this.ae(u),this.ue=u=>r.writeSequenceNumber(u))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=-1;function ph(o){return o==null}function nh(o){return o===0&&1/o==-1/0}function rw(o){return typeof o=="number"&&Number.isInteger(o)&&!nh(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="";function sw(o){let t="";for(let r=0;r<o.length;r++)t.length>0&&(t=B2(t)),t=aw(o.get(r),t);return B2(t)}function aw(o,t){let r=t;const u=o.length;for(let d=0;d<u;d++){const m=o.charAt(d);switch(m){case"\0":r+="";break;case Jp:r+="";break;default:r+=m}}return r}function B2(o){return o+Jp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(o){let t=0;for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&t++;return t}function Qa(o,t){for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&t(r,o[r])}function $p(o){for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,r){this.comparator=t,this.root=r||vi.EMPTY}insert(t,r){return new Ln(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(t){return new Ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vi.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const u=this.comparator(t,r.key);if(u===0)return r.value;u<0?r=r.left:u>0&&(r=r.right)}return null}indexOf(t){let r=0,u=this.root;for(;!u.isEmpty();){const d=this.comparator(t,u.key);if(d===0)return r+u.left.size;d<0?u=u.left:(r+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((r,u)=>(t(r,u),!1)))}toString(){const t=[];return this.inorderTraversal(((r,u)=>(t.push(`${r}:${u}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,r,u,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!t.isEmpty();)if(m=r?u(t.key,r):1,r&&d&&(m*=-1),m<0)t=this.isReverse?t.left:t.right;else{if(m===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vi{constructor(t,r,u,d,m){this.key=t,this.value=r,this.color=u??vi.RED,this.left=d??vi.EMPTY,this.right=m??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,u,d,m){return new vi(t??this.key,r??this.value,u??this.color,d??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,u){let d=this;const m=u(t,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(t,r,u),null):m===0?d.copy(null,r,null,null,null):d.copy(null,null,null,null,d.right.insert(t,r,u)),d.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let u,d=this;if(r(t,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(t,r),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),r(t,d.key)===0){if(d.right.isEmpty())return vi.EMPTY;u=d.right.min(),d=d.copy(u.key,u.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(t,r))}return d.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ie(27949);return t+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1;vi.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(t,r,u,d,m){return this}insert(t,r,u){return new vi(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.comparator=t,this.data=new Ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((r,u)=>(t(r),!1)))}forEachInRange(t,r){const u=this.data.getIteratorFrom(t[0]);for(;u.hasNext();){const d=u.getNext();if(this.comparator(d.key,t[1])>=0)return;r(d.key)}}forEachWhile(t,r){let u;for(u=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();u.hasNext();)if(!t(u.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new P2(this.data.getIterator())}getIteratorFrom(t){return new P2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach((u=>{r=r.add(u)})),r}isEqual(t){if(!(t instanceof ii)||this.size!==t.size)return!1;const r=this.data.getIterator(),u=t.data.getIterator();for(;r.hasNext();){const d=r.getNext().key,m=u.getNext().key;if(this.comparator(d,m)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((r=>{t.push(r)})),t}toString(){const t=[];return this.forEach((r=>t.push(r))),"SortedSet("+t.toString()+")"}copy(t){const r=new ii(this.comparator);return r.data=t,r}}class P2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.fields=t,t.sort(bi.comparator)}static empty(){return new ns([])}unionWith(t){let r=new ii(bi.comparator);for(const u of this.fields)r=r.add(u);for(const u of t)r=r.add(u);return new ns(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return pl(this.fields,t.fields,((r,u)=>r.isEqual(u)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(d){try{return atob(d)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new ty("Invalid base64 string: "+m):m}})(t);return new Ii(r)}static fromUint8Array(t){const r=(function(d){let m="";for(let _=0;_<d.length;++_)m+=String.fromCharCode(d[_]);return m})(t);return new Ii(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const u=new Uint8Array(r.length);for(let d=0;d<r.length;d++)u[d]=r.charCodeAt(d);return u})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Me(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const ow=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(o){if($e(!!o,39018),typeof o=="string"){let t=0;const r=ow.exec(o);if($e(!!r,46558,{timestamp:o}),r[1]){let d=r[1];d=(d+"000000000").substr(0,9),t=Number(d)}const u=new Date(o);return{seconds:Math.floor(u.getTime()/1e3),nanos:t}}return{seconds:Yn(o.seconds),nanos:Yn(o.nanos)}}function Yn(o){return typeof o=="number"?o:typeof o=="string"?Number(o):0}function Ga(o){return typeof o=="string"?Ii.fromBase64String(o):Ii.fromUint8Array(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="server_timestamp",ny="__type__",iy="__previous_value__",ry="__local_write_time__";function m0(o){var r,u;return((u=(((r=o==null?void 0:o.mapValue)==null?void 0:r.fields)||{})[ny])==null?void 0:u.stringValue)===ey}function yh(o){const t=o.mapValue.fields[iy];return m0(t)?yh(t):t}function Cu(o){const t=Ha(o.mapValue.fields[ry].timestampValue);return new En(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,r,u,d,m,_,S,I,T,M,L){this.databaseId=t,this.appId=r,this.persistenceKey=u,this.host=d,this.ssl=m,this.forceLongPolling=_,this.autoDetectLongPolling=S,this.longPollingOptions=I,this.useFetchStreams=T,this.isUsingEmulator=M,this.apiKey=L}}const ih="(default)";class Su{constructor(t,r){this.projectId=t,this.database=r||ih}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===ih}isEqual(t){return t instanceof Su&&t.projectId===this.projectId&&t.database===this.database}}function uw(o,t){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new qt(Tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(o.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="__type__",cw="__max__",zc={mapValue:{}},ay="__vector__",rh="value";function Ya(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?m0(o)?4:fw(o)?9007199254740991:hw(o)?10:11:ie(28295,{value:o})}function xs(o,t){if(o===t)return!0;const r=Ya(o);if(r!==Ya(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===t.booleanValue;case 4:return Cu(o).isEqual(Cu(t));case 3:return(function(d,m){if(typeof d.timestampValue=="string"&&typeof m.timestampValue=="string"&&d.timestampValue.length===m.timestampValue.length)return d.timestampValue===m.timestampValue;const _=Ha(d.timestampValue),S=Ha(m.timestampValue);return _.seconds===S.seconds&&_.nanos===S.nanos})(o,t);case 5:return o.stringValue===t.stringValue;case 6:return(function(d,m){return Ga(d.bytesValue).isEqual(Ga(m.bytesValue))})(o,t);case 7:return o.referenceValue===t.referenceValue;case 8:return(function(d,m){return Yn(d.geoPointValue.latitude)===Yn(m.geoPointValue.latitude)&&Yn(d.geoPointValue.longitude)===Yn(m.geoPointValue.longitude)})(o,t);case 2:return(function(d,m){if("integerValue"in d&&"integerValue"in m)return Yn(d.integerValue)===Yn(m.integerValue);if("doubleValue"in d&&"doubleValue"in m){const _=Yn(d.doubleValue),S=Yn(m.doubleValue);return _===S?nh(_)===nh(S):isNaN(_)&&isNaN(S)}return!1})(o,t);case 9:return pl(o.arrayValue.values||[],t.arrayValue.values||[],xs);case 10:case 11:return(function(d,m){const _=d.mapValue.fields||{},S=m.mapValue.fields||{};if(V2(_)!==V2(S))return!1;for(const I in _)if(_.hasOwnProperty(I)&&(S[I]===void 0||!xs(_[I],S[I])))return!1;return!0})(o,t);default:return ie(52216,{left:o})}}function vu(o,t){return(o.values||[]).find((r=>xs(r,t)))!==void 0}function yl(o,t){if(o===t)return 0;const r=Ya(o),u=Ya(t);if(r!==u)return Me(r,u);switch(r){case 0:case 9007199254740991:return 0;case 1:return Me(o.booleanValue,t.booleanValue);case 2:return(function(m,_){const S=Yn(m.integerValue||m.doubleValue),I=Yn(_.integerValue||_.doubleValue);return S<I?-1:S>I?1:S===I?0:isNaN(S)?isNaN(I)?0:-1:1})(o,t);case 3:return k2(o.timestampValue,t.timestampValue);case 4:return k2(Cu(o),Cu(t));case 5:return H1(o.stringValue,t.stringValue);case 6:return(function(m,_){const S=Ga(m),I=Ga(_);return S.compareTo(I)})(o.bytesValue,t.bytesValue);case 7:return(function(m,_){const S=m.split("/"),I=_.split("/");for(let T=0;T<S.length&&T<I.length;T++){const M=Me(S[T],I[T]);if(M!==0)return M}return Me(S.length,I.length)})(o.referenceValue,t.referenceValue);case 8:return(function(m,_){const S=Me(Yn(m.latitude),Yn(_.latitude));return S!==0?S:Me(Yn(m.longitude),Yn(_.longitude))})(o.geoPointValue,t.geoPointValue);case 9:return U2(o.arrayValue,t.arrayValue);case 10:return(function(m,_){var X,et,wt,gt;const S=m.fields||{},I=_.fields||{},T=(X=S[rh])==null?void 0:X.arrayValue,M=(et=I[rh])==null?void 0:et.arrayValue,L=Me(((wt=T==null?void 0:T.values)==null?void 0:wt.length)||0,((gt=M==null?void 0:M.values)==null?void 0:gt.length)||0);return L!==0?L:U2(T,M)})(o.mapValue,t.mapValue);case 11:return(function(m,_){if(m===zc.mapValue&&_===zc.mapValue)return 0;if(m===zc.mapValue)return 1;if(_===zc.mapValue)return-1;const S=m.fields||{},I=Object.keys(S),T=_.fields||{},M=Object.keys(T);I.sort(),M.sort();for(let L=0;L<I.length&&L<M.length;++L){const X=H1(I[L],M[L]);if(X!==0)return X;const et=yl(S[I[L]],T[M[L]]);if(et!==0)return et}return Me(I.length,M.length)})(o.mapValue,t.mapValue);default:throw ie(23264,{he:r})}}function k2(o,t){if(typeof o=="string"&&typeof t=="string"&&o.length===t.length)return Me(o,t);const r=Ha(o),u=Ha(t),d=Me(r.seconds,u.seconds);return d!==0?d:Me(r.nanos,u.nanos)}function U2(o,t){const r=o.values||[],u=t.values||[];for(let d=0;d<r.length&&d<u.length;++d){const m=yl(r[d],u[d]);if(m)return m}return Me(r.length,u.length)}function El(o){return G1(o)}function G1(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?(function(r){const u=Ha(r);return`time(${u.seconds},${u.nanos})`})(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?(function(r){return Ga(r).toBase64()})(o.bytesValue):"referenceValue"in o?(function(r){return Jt.fromName(r).toString()})(o.referenceValue):"geoPointValue"in o?(function(r){return`geo(${r.latitude},${r.longitude})`})(o.geoPointValue):"arrayValue"in o?(function(r){let u="[",d=!0;for(const m of r.values||[])d?d=!1:u+=",",u+=G1(m);return u+"]"})(o.arrayValue):"mapValue"in o?(function(r){const u=Object.keys(r.fields||{}).sort();let d="{",m=!0;for(const _ of u)m?m=!1:d+=",",d+=`${_}:${G1(r.fields[_])}`;return d+"}"})(o.mapValue):ie(61005,{value:o})}function Yc(o){switch(Ya(o)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yh(o);return t?16+Yc(t):16;case 5:return 2*o.stringValue.length;case 6:return Ga(o.bytesValue).approximateByteSize();case 7:return o.referenceValue.length;case 9:return(function(u){return(u.values||[]).reduce(((d,m)=>d+Yc(m)),0)})(o.arrayValue);case 10:case 11:return(function(u){let d=0;return Qa(u.fields,((m,_)=>{d+=m.length+Yc(_)})),d})(o.mapValue);default:throw ie(13486,{value:o})}}function Y1(o){return!!o&&"integerValue"in o}function p0(o){return!!o&&"arrayValue"in o}function F2(o){return!!o&&"nullValue"in o}function z2(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Xc(o){return!!o&&"mapValue"in o}function hw(o){var r,u;return((u=(((r=o==null?void 0:o.mapValue)==null?void 0:r.fields)||{})[sy])==null?void 0:u.stringValue)===ay}function mu(o){if(o.geoPointValue)return{geoPointValue:{...o.geoPointValue}};if(o.timestampValue&&typeof o.timestampValue=="object")return{timestampValue:{...o.timestampValue}};if(o.mapValue){const t={mapValue:{fields:{}}};return Qa(o.mapValue.fields,((r,u)=>t.mapValue.fields[r]=mu(u))),t}if(o.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(o.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=mu(o.arrayValue.values[r]);return t}return{...o}}function fw(o){return(((o.mapValue||{}).fields||{}).__type__||{}).stringValue===cw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.value=t}static empty(){return new vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let u=0;u<t.length-1;++u)if(r=(r.mapValue.fields||{})[t.get(u)],!Xc(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=mu(r)}setAll(t){let r=bi.emptyPath(),u={},d=[];t.forEach(((_,S)=>{if(!r.isImmediateParentOf(S)){const I=this.getFieldsMap(r);this.applyChanges(I,u,d),u={},d=[],r=S.popLast()}_?u[S.lastSegment()]=mu(_):d.push(S.lastSegment())}));const m=this.getFieldsMap(r);this.applyChanges(m,u,d)}delete(t){const r=this.field(t.popLast());Xc(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return xs(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let u=0;u<t.length;++u){let d=r.mapValue.fields[t.get(u)];Xc(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},r.mapValue.fields[t.get(u)]=d),r=d}return r.mapValue.fields}applyChanges(t,r,u){Qa(r,((d,m)=>t[d]=m));for(const d of u)delete t[d]}clone(){return new vr(mu(this.value))}}function oy(o){const t=[];return Qa(o.fields,((r,u)=>{const d=new bi([r]);if(Xc(u)){const m=oy(u.mapValue).fields;if(m.length===0)t.push(d);else for(const _ of m)t.push(d.child(_))}else t.push(d)})),new ns(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,r,u,d,m,_,S){this.key=t,this.documentType=r,this.version=u,this.readTime=d,this.createTime=m,this.data=_,this.documentState=S}static newInvalidDocument(t){return new Ui(t,0,ae.min(),ae.min(),ae.min(),vr.empty(),0)}static newFoundDocument(t,r,u,d){return new Ui(t,1,r,ae.min(),u,d,0)}static newNoDocument(t,r){return new Ui(t,2,r,ae.min(),ae.min(),vr.empty(),0)}static newUnknownDocument(t,r){return new Ui(t,3,r,ae.min(),ae.min(),vr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t,r){this.position=t,this.inclusive=r}}function j2(o,t,r){let u=0;for(let d=0;d<o.position.length;d++){const m=t[d],_=o.position[d];if(m.field.isKeyField()?u=Jt.comparator(Jt.fromName(_.referenceValue),r.key):u=yl(_,r.data.field(m.field)),m.dir==="desc"&&(u*=-1),u!==0)break}return u}function H2(o,t){if(o===null)return t===null;if(t===null||o.inclusive!==t.inclusive||o.position.length!==t.position.length)return!1;for(let r=0;r<o.position.length;r++)if(!xs(o.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,r="asc"){this.field=t,this.dir=r}}function dw(o,t){return o.dir===t.dir&&o.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{}class ni extends ly{constructor(t,r,u){super(),this.field=t,this.op=r,this.value=u}static create(t,r,u){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,u):new mw(t,r,u):r==="array-contains"?new Ew(t,u):r==="in"?new xw(t,u):r==="not-in"?new Aw(t,u):r==="array-contains-any"?new _w(t,u):new ni(t,r,u)}static createKeyFieldInFilter(t,r,u){return r==="in"?new pw(t,u):new yw(t,u)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(yl(r,this.value)):r!==null&&Ya(this.value)===Ya(r)&&this.matchesComparison(yl(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class As extends ly{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new As(t,r)}matches(t){return uy(this)?this.filters.find((r=>!r.matches(t)))===void 0:this.filters.find((r=>r.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,r)=>t.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uy(o){return o.op==="and"}function cy(o){return gw(o)&&uy(o)}function gw(o){for(const t of o.filters)if(t instanceof As)return!1;return!0}function X1(o){if(o instanceof ni)return o.field.canonicalString()+o.op.toString()+El(o.value);if(cy(o))return o.filters.map((t=>X1(t))).join(",");{const t=o.filters.map((r=>X1(r))).join(",");return`${o.op}(${t})`}}function hy(o,t){return o instanceof ni?(function(u,d){return d instanceof ni&&u.op===d.op&&u.field.isEqual(d.field)&&xs(u.value,d.value)})(o,t):o instanceof As?(function(u,d){return d instanceof As&&u.op===d.op&&u.filters.length===d.filters.length?u.filters.reduce(((m,_,S)=>m&&hy(_,d.filters[S])),!0):!1})(o,t):void ie(19439)}function fy(o){return o instanceof ni?(function(r){return`${r.field.canonicalString()} ${r.op} ${El(r.value)}`})(o):o instanceof As?(function(r){return r.op.toString()+" {"+r.getFilters().map(fy).join(" ,")+"}"})(o):"Filter"}class mw extends ni{constructor(t,r,u){super(t,r,u),this.key=Jt.fromName(u.referenceValue)}matches(t){const r=Jt.comparator(t.key,this.key);return this.matchesComparison(r)}}class pw extends ni{constructor(t,r){super(t,"in",r),this.keys=dy("in",r)}matches(t){return this.keys.some((r=>r.isEqual(t.key)))}}class yw extends ni{constructor(t,r){super(t,"not-in",r),this.keys=dy("not-in",r)}matches(t){return!this.keys.some((r=>r.isEqual(t.key)))}}function dy(o,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map((u=>Jt.fromName(u.referenceValue)))}class Ew extends ni{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return p0(r)&&vu(r.arrayValue,this.value)}}class xw extends ni{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&vu(this.value.arrayValue,r)}}class Aw extends ni{constructor(t,r){super(t,"not-in",r)}matches(t){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!vu(this.value.arrayValue,r)}}class _w extends ni{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!p0(r)||!r.arrayValue.values)&&r.arrayValue.values.some((u=>vu(this.value.arrayValue,u)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,r=null,u=[],d=[],m=null,_=null,S=null){this.path=t,this.collectionGroup=r,this.orderBy=u,this.filters=d,this.limit=m,this.startAt=_,this.endAt=S,this.Te=null}}function G2(o,t=null,r=[],u=[],d=null,m=null,_=null){return new ww(o,t,r,u,d,m,_)}function y0(o){const t=ue(o);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map((u=>X1(u))).join(","),r+="|ob:",r+=t.orderBy.map((u=>(function(m){return m.field.canonicalString()+m.dir})(u))).join(","),ph(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((u=>El(u))).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((u=>El(u))).join(",")),t.Te=r}return t.Te}function E0(o,t){if(o.limit!==t.limit||o.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<o.orderBy.length;r++)if(!dw(o.orderBy[r],t.orderBy[r]))return!1;if(o.filters.length!==t.filters.length)return!1;for(let r=0;r<o.filters.length;r++)if(!hy(o.filters[r],t.filters[r]))return!1;return o.collectionGroup===t.collectionGroup&&!!o.path.isEqual(t.path)&&!!H2(o.startAt,t.startAt)&&H2(o.endAt,t.endAt)}function q1(o){return Jt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,r=null,u=[],d=[],m=null,_="F",S=null,I=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=u,this.filters=d,this.limit=m,this.limitType=_,this.startAt=S,this.endAt=I,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Tw(o,t,r,u,d,m,_,S){return new Eh(o,t,r,u,d,m,_,S)}function x0(o){return new Eh(o)}function Y2(o){return o.filters.length===0&&o.limit===null&&o.startAt==null&&o.endAt==null&&(o.explicitOrderBy.length===0||o.explicitOrderBy.length===1&&o.explicitOrderBy[0].field.isKeyField())}function Cw(o){return Jt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}function Sw(o){return o.collectionGroup!==null}function pu(o){const t=ue(o);if(t.Ie===null){t.Ie=[];const r=new Set;for(const m of t.explicitOrderBy)t.Ie.push(m),r.add(m.field.canonicalString());const u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(_){let S=new ii(bi.comparator);return _.filters.forEach((I=>{I.getFlattenedFilters().forEach((T=>{T.isInequality()&&(S=S.add(T.field))}))})),S})(t).forEach((m=>{r.has(m.canonicalString())||m.isKeyField()||t.Ie.push(new ah(m,u))})),r.has(bi.keyField().canonicalString())||t.Ie.push(new ah(bi.keyField(),u))}return t.Ie}function ps(o){const t=ue(o);return t.Ee||(t.Ee=vw(t,pu(o))),t.Ee}function vw(o,t){if(o.limitType==="F")return G2(o.path,o.collectionGroup,t,o.filters,o.limit,o.startAt,o.endAt);{t=t.map((d=>{const m=d.dir==="desc"?"asc":"desc";return new ah(d.field,m)}));const r=o.endAt?new sh(o.endAt.position,o.endAt.inclusive):null,u=o.startAt?new sh(o.startAt.position,o.startAt.inclusive):null;return G2(o.path,o.collectionGroup,t,o.filters,o.limit,r,u)}}function Q1(o,t,r){return new Eh(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),t,r,o.startAt,o.endAt)}function xh(o,t){return E0(ps(o),ps(t))&&o.limitType===t.limitType}function gy(o){return`${y0(ps(o))}|lt:${o.limitType}`}function ll(o){return`Query(target=${(function(r){let u=r.path.canonicalString();return r.collectionGroup!==null&&(u+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(u+=`, filters: [${r.filters.map((d=>fy(d))).join(", ")}]`),ph(r.limit)||(u+=", limit: "+r.limit),r.orderBy.length>0&&(u+=`, orderBy: [${r.orderBy.map((d=>(function(_){return`${_.field.canonicalString()} (${_.dir})`})(d))).join(", ")}]`),r.startAt&&(u+=", startAt: ",u+=r.startAt.inclusive?"b:":"a:",u+=r.startAt.position.map((d=>El(d))).join(",")),r.endAt&&(u+=", endAt: ",u+=r.endAt.inclusive?"a:":"b:",u+=r.endAt.position.map((d=>El(d))).join(",")),`Target(${u})`})(ps(o))}; limitType=${o.limitType})`}function Ah(o,t){return t.isFoundDocument()&&(function(u,d){const m=d.key.path;return u.collectionGroup!==null?d.key.hasCollectionId(u.collectionGroup)&&u.path.isPrefixOf(m):Jt.isDocumentKey(u.path)?u.path.isEqual(m):u.path.isImmediateParentOf(m)})(o,t)&&(function(u,d){for(const m of pu(u))if(!m.field.isKeyField()&&d.data.field(m.field)===null)return!1;return!0})(o,t)&&(function(u,d){for(const m of u.filters)if(!m.matches(d))return!1;return!0})(o,t)&&(function(u,d){return!(u.startAt&&!(function(_,S,I){const T=j2(_,S,I);return _.inclusive?T<=0:T<0})(u.startAt,pu(u),d)||u.endAt&&!(function(_,S,I){const T=j2(_,S,I);return _.inclusive?T>=0:T>0})(u.endAt,pu(u),d))})(o,t)}function bw(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function my(o){return(t,r)=>{let u=!1;for(const d of pu(o)){const m=Iw(d,t,r);if(m!==0)return m;u=u||d.field.isKeyField()}return 0}}function Iw(o,t,r){const u=o.field.isKeyField()?Jt.comparator(t.key,r.key):(function(m,_,S){const I=_.data.field(m),T=S.data.field(m);return I!==null&&T!==null?yl(I,T):ie(42886)})(o.field,t,r);switch(o.dir){case"asc":return u;case"desc":return-1*u;default:return ie(19790,{direction:o.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),u=this.inner[r];if(u!==void 0){for(const[d,m]of u)if(this.equalsFn(d,t))return m}}has(t){return this.get(t)!==void 0}set(t,r){const u=this.mapKeyFn(t),d=this.inner[u];if(d===void 0)return this.inner[u]=[[t,r]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],t))return void(d[m]=[t,r]);d.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),u=this.inner[r];if(u===void 0)return!1;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return u.length===1?delete this.inner[r]:u.splice(d,1),this.innerSize--,!0;return!1}forEach(t){Qa(this.inner,((r,u)=>{for(const[d,m]of u)t(d,m)}))}isEmpty(){return $p(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Ln(Jt.comparator);function ta(){return Nw}const py=new Ln(Jt.comparator);function hu(...o){let t=py;for(const r of o)t=t.insert(r.key,r);return t}function yy(o){let t=py;return o.forEach(((r,u)=>t=t.insert(r,u.overlayedDocument))),t}function wo(){return yu()}function Ey(){return yu()}function yu(){return new bo((o=>o.toString()),((o,t)=>o.isEqual(t)))}const Rw=new Ln(Jt.comparator),Dw=new ii(Jt.comparator);function Oe(...o){let t=Dw;for(const r of o)t=t.add(r);return t}const Mw=new ii(Me);function Ow(){return Mw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(o,t){if(o.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(t)?"-0":t}}function xy(o){return{integerValue:""+o}}function Lw(o,t){return rw(t)?xy(t):A0(o,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function Bw(o,t,r){return o instanceof oh?(function(d,m){const _={fields:{[ny]:{stringValue:ey},[ry]:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return m&&m0(m)&&(m=yh(m)),m&&(_.fields[iy]=m),{mapValue:_}})(r,t):o instanceof bu?_y(o,t):o instanceof Iu?wy(o,t):(function(d,m){const _=Ay(d,m),S=X2(_)+X2(d.Ae);return Y1(_)&&Y1(d.Ae)?xy(S):A0(d.serializer,S)})(o,t)}function Vw(o,t,r){return o instanceof bu?_y(o,t):o instanceof Iu?wy(o,t):r}function Ay(o,t){return o instanceof lh?(function(u){return Y1(u)||(function(m){return!!m&&"doubleValue"in m})(u)})(t)?t:{integerValue:0}:null}class oh extends _h{}class bu extends _h{constructor(t){super(),this.elements=t}}function _y(o,t){const r=Ty(t);for(const u of o.elements)r.some((d=>xs(d,u)))||r.push(u);return{arrayValue:{values:r}}}class Iu extends _h{constructor(t){super(),this.elements=t}}function wy(o,t){let r=Ty(t);for(const u of o.elements)r=r.filter((d=>!xs(d,u)));return{arrayValue:{values:r}}}class lh extends _h{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function X2(o){return Yn(o.integerValue||o.doubleValue)}function Ty(o){return p0(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}function Pw(o,t){return o.field.isEqual(t.field)&&(function(u,d){return u instanceof bu&&d instanceof bu||u instanceof Iu&&d instanceof Iu?pl(u.elements,d.elements,xs):u instanceof lh&&d instanceof lh?xs(u.Ae,d.Ae):u instanceof oh&&d instanceof oh})(o.transform,t.transform)}class kw{constructor(t,r){this.version=t,this.transformResults=r}}class Ks{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Ks}static exists(t){return new Ks(void 0,t)}static updateTime(t){return new Ks(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qc(o,t){return o.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(o.updateTime):o.exists===void 0||o.exists===t.isFoundDocument()}class wh{}function Cy(o,t){if(!o.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return o.isNoDocument()?new vy(o.key,Ks.none()):new Th(o.key,o.data,Ks.none());{const r=o.data,u=vr.empty();let d=new ii(bi.comparator);for(let m of t.fields)if(!d.has(m)){let _=r.field(m);_===null&&m.length>1&&(m=m.popLast(),_=r.field(m)),_===null?u.delete(m):u.set(m,_),d=d.add(m)}return new Io(o.key,u,new ns(d.toArray()),Ks.none())}}function Uw(o,t,r){o instanceof Th?(function(d,m,_){const S=d.value.clone(),I=Q2(d.fieldTransforms,m,_.transformResults);S.setAll(I),m.convertToFoundDocument(_.version,S).setHasCommittedMutations()})(o,t,r):o instanceof Io?(function(d,m,_){if(!qc(d.precondition,m))return void m.convertToUnknownDocument(_.version);const S=Q2(d.fieldTransforms,m,_.transformResults),I=m.data;I.setAll(Sy(d)),I.setAll(S),m.convertToFoundDocument(_.version,I).setHasCommittedMutations()})(o,t,r):(function(d,m,_){m.convertToNoDocument(_.version).setHasCommittedMutations()})(0,t,r)}function Eu(o,t,r,u){return o instanceof Th?(function(m,_,S,I){if(!qc(m.precondition,_))return S;const T=m.value.clone(),M=Z2(m.fieldTransforms,I,_);return T.setAll(M),_.convertToFoundDocument(_.version,T).setHasLocalMutations(),null})(o,t,r,u):o instanceof Io?(function(m,_,S,I){if(!qc(m.precondition,_))return S;const T=Z2(m.fieldTransforms,I,_),M=_.data;return M.setAll(Sy(m)),M.setAll(T),_.convertToFoundDocument(_.version,M).setHasLocalMutations(),S===null?null:S.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((L=>L.field)))})(o,t,r,u):(function(m,_,S){return qc(m.precondition,_)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):S})(o,t,r)}function Fw(o,t){let r=null;for(const u of o.fieldTransforms){const d=t.data.field(u.field),m=Ay(u.transform,d||null);m!=null&&(r===null&&(r=vr.empty()),r.set(u.field,m))}return r||null}function q2(o,t){return o.type===t.type&&!!o.key.isEqual(t.key)&&!!o.precondition.isEqual(t.precondition)&&!!(function(u,d){return u===void 0&&d===void 0||!(!u||!d)&&pl(u,d,((m,_)=>Pw(m,_)))})(o.fieldTransforms,t.fieldTransforms)&&(o.type===0?o.value.isEqual(t.value):o.type!==1||o.data.isEqual(t.data)&&o.fieldMask.isEqual(t.fieldMask))}class Th extends wh{constructor(t,r,u,d=[]){super(),this.key=t,this.value=r,this.precondition=u,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Io extends wh{constructor(t,r,u,d,m=[]){super(),this.key=t,this.data=r,this.fieldMask=u,this.precondition=d,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Sy(o){const t=new Map;return o.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const u=o.data.field(r);t.set(r,u)}})),t}function Q2(o,t,r){const u=new Map;$e(o.length===r.length,32656,{Ve:r.length,de:o.length});for(let d=0;d<r.length;d++){const m=o[d],_=m.transform,S=t.data.field(m.field);u.set(m.field,Vw(_,S,r[d]))}return u}function Z2(o,t,r){const u=new Map;for(const d of o){const m=d.transform,_=r.data.field(d.field);u.set(d.field,Bw(m,_,t))}return u}class vy extends wh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zw extends wh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t,r,u,d){this.batchId=t,this.localWriteTime=r,this.baseMutations=u,this.mutations=d}applyToRemoteDocument(t,r){const u=r.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(t.key)&&Uw(m,t,u[d])}}applyToLocalView(t,r){for(const u of this.baseMutations)u.key.isEqual(t.key)&&(r=Eu(u,t,r,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(t.key)&&(r=Eu(u,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const u=Ey();return this.mutations.forEach((d=>{const m=t.get(d.key),_=m.overlayedDocument;let S=this.applyToLocalView(_,m.mutatedFields);S=r.has(d.key)?null:S;const I=Cy(_,S);I!==null&&u.set(d.key,I),_.isValidDocument()||_.convertToNoDocument(ae.min())})),u}keys(){return this.mutations.reduce(((t,r)=>t.add(r.key)),Oe())}isEqual(t){return this.batchId===t.batchId&&pl(this.mutations,t.mutations,((r,u)=>q2(r,u)))&&pl(this.baseMutations,t.baseMutations,((r,u)=>q2(r,u)))}}class _0{constructor(t,r,u,d){this.batch=t,this.commitVersion=r,this.mutationResults=u,this.docVersions=d}static from(t,r,u){$e(t.mutations.length===u.length,58842,{me:t.mutations.length,fe:u.length});let d=(function(){return Rw})();const m=t.mutations;for(let _=0;_<m.length;_++)d=d.insert(m[_].key,u[_].version);return new _0(t,r,u,d)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,ke;function Yw(o){switch(o){case Tt.OK:return ie(64938);case Tt.CANCELLED:case Tt.UNKNOWN:case Tt.DEADLINE_EXCEEDED:case Tt.RESOURCE_EXHAUSTED:case Tt.INTERNAL:case Tt.UNAVAILABLE:case Tt.UNAUTHENTICATED:return!1;case Tt.INVALID_ARGUMENT:case Tt.NOT_FOUND:case Tt.ALREADY_EXISTS:case Tt.PERMISSION_DENIED:case Tt.FAILED_PRECONDITION:case Tt.ABORTED:case Tt.OUT_OF_RANGE:case Tt.UNIMPLEMENTED:case Tt.DATA_LOSS:return!0;default:return ie(15467,{code:o})}}function by(o){if(o===void 0)return $s("GRPC error has no .code"),Tt.UNKNOWN;switch(o){case Wn.OK:return Tt.OK;case Wn.CANCELLED:return Tt.CANCELLED;case Wn.UNKNOWN:return Tt.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return Tt.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return Tt.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return Tt.INTERNAL;case Wn.UNAVAILABLE:return Tt.UNAVAILABLE;case Wn.UNAUTHENTICATED:return Tt.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return Tt.INVALID_ARGUMENT;case Wn.NOT_FOUND:return Tt.NOT_FOUND;case Wn.ALREADY_EXISTS:return Tt.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return Tt.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return Tt.FAILED_PRECONDITION;case Wn.ABORTED:return Tt.ABORTED;case Wn.OUT_OF_RANGE:return Tt.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return Tt.UNIMPLEMENTED;case Wn.DATA_LOSS:return Tt.DATA_LOSS;default:return ie(39323,{code:o})}}(ke=Wn||(Wn={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Ua([4294967295,4294967295],0);function W2(o){const t=Xw().encode(o),r=new Hp;return r.update(t),new Uint8Array(r.digest())}function K2(o){const t=new DataView(o.buffer),r=t.getUint32(0,!0),u=t.getUint32(4,!0),d=t.getUint32(8,!0),m=t.getUint32(12,!0);return[new Ua([r,u],0),new Ua([d,m],0)]}class w0{constructor(t,r,u){if(this.bitmap=t,this.padding=r,this.hashCount=u,r<0||r>=8)throw new fu(`Invalid padding: ${r}`);if(u<0)throw new fu(`Invalid hash count: ${u}`);if(t.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${u}`);if(t.length===0&&r!==0)throw new fu(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Ua.fromNumber(this.ge)}ye(t,r,u){let d=t.add(r.multiply(Ua.fromNumber(u)));return d.compare(qw)===1&&(d=new Ua([d.getBits(0),d.getBits(1)],0)),d.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=W2(t),[u,d]=K2(r);for(let m=0;m<this.hashCount;m++){const _=this.ye(u,d,m);if(!this.we(_))return!1}return!0}static create(t,r,u){const d=t%8==0?0:8-t%8,m=new Uint8Array(Math.ceil(t/8)),_=new w0(m,d,r);return u.forEach((S=>_.insert(S))),_}insert(t){if(this.ge===0)return;const r=W2(t),[u,d]=K2(r);for(let m=0;m<this.hashCount;m++){const _=this.ye(u,d,m);this.be(_)}}be(t){const r=Math.floor(t/8),u=t%8;this.bitmap[r]|=1<<u}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,r,u,d,m){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=u,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(t,r,u){const d=new Map;return d.set(t,Du.createSynthesizedTargetChangeForCurrentChange(t,r,u)),new Ch(ae.min(),d,new Ln(Me),ta(),Oe())}}class Du{constructor(t,r,u,d,m){this.resumeToken=t,this.current=r,this.addedDocuments=u,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(t,r,u){return new Du(u,r,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,r,u,d){this.Se=t,this.removedTargetIds=r,this.key=u,this.De=d}}class Iy{constructor(t,r){this.targetId=t,this.Ce=r}}class Ny{constructor(t,r,u=Ii.EMPTY_BYTE_STRING,d=null){this.state=t,this.targetIds=r,this.resumeToken=u,this.cause=d}}class J2{constructor(){this.ve=0,this.Fe=$2(),this.Me=Ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Oe(),r=Oe(),u=Oe();return this.Fe.forEach(((d,m)=>{switch(m){case 0:t=t.add(d);break;case 2:r=r.add(d);break;case 1:u=u.add(d);break;default:ie(38017,{changeType:m})}})),new Du(this.Me,this.xe,t,r,u)}Ke(){this.Oe=!1,this.Fe=$2()}qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Qw{constructor(t){this.Ge=t,this.ze=new Map,this.je=ta(),this.He=jc(),this.Je=jc(),this.Ze=new Ln(Me)}Xe(t){for(const r of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,(r=>{const u=this.nt(r);switch(t.state){case 0:this.rt(r)&&u.Le(t.resumeToken);break;case 1:u.We(),u.Ne||u.Ke(),u.Le(t.resumeToken);break;case 2:u.We(),u.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(u.Qe(),u.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),u.Le(t.resumeToken));break;default:ie(56790,{state:t.state})}}))}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach(((u,d)=>{this.rt(d)&&r(d)}))}st(t){const r=t.targetId,u=t.Ce.count,d=this.ot(r);if(d){const m=d.target;if(q1(m))if(u===0){const _=new Jt(m.path);this.et(r,_,Ui.newNoDocument(_,ae.min()))}else $e(u===1,20013,{expectedCount:u});else{const _=this._t(r);if(_!==u){const S=this.ut(t),I=S?this.ct(S,t,_):1;if(I!==0){this.it(r);const T=I===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,T)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:u="",padding:d=0},hashCount:m=0}=r;let _,S;try{_=Ga(u).toUint8Array()}catch(I){if(I instanceof ty)return ml("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw I}try{S=new w0(_,d,m)}catch(I){return ml(I instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",I),null}return S.ge===0?null:S}ct(t,r,u){return r.Ce.count===u-this.Pt(t,r.targetId)?0:2}Pt(t,r){const u=this.Ge.getRemoteKeysForTarget(r);let d=0;return u.forEach((m=>{const _=this.Ge.ht(),S=`projects/${_.projectId}/databases/${_.database}/documents/${m.path.canonicalString()}`;t.mightContain(S)||(this.et(r,m,null),d++)})),d}Tt(t){const r=new Map;this.ze.forEach(((m,_)=>{const S=this.ot(_);if(S){if(m.current&&q1(S.target)){const I=new Jt(S.target.path);this.It(I).has(_)||this.Et(_,I)||this.et(_,I,Ui.newNoDocument(I,t))}m.Be&&(r.set(_,m.ke()),m.Ke())}}));let u=Oe();this.Je.forEach(((m,_)=>{let S=!0;_.forEachWhile((I=>{const T=this.ot(I);return!T||T.purpose==="TargetPurposeLimboResolution"||(S=!1,!1)})),S&&(u=u.add(m))})),this.je.forEach(((m,_)=>_.setReadTime(t)));const d=new Ch(t,r,this.Ze,this.je,u);return this.je=ta(),this.He=jc(),this.Je=jc(),this.Ze=new Ln(Me),d}Ye(t,r){if(!this.rt(t))return;const u=this.Et(t,r.key)?2:0;this.nt(t).qe(r.key,u),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(t)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(t))}et(t,r,u){if(!this.rt(t))return;const d=this.nt(t);this.Et(t,r)?d.qe(r,1):d.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(t)),this.Je=this.Je.insert(r,this.Rt(r).add(t)),u&&(this.je=this.je.insert(r,u))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let r=this.ze.get(t);return r||(r=new J2,this.ze.set(t,r)),r}Rt(t){let r=this.Je.get(t);return r||(r=new ii(Me),this.Je=this.Je.insert(t,r)),r}It(t){let r=this.He.get(t);return r||(r=new ii(Me),this.He=this.He.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||Vt("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new J2),this.Ge.getRemoteKeysForTarget(t).forEach((r=>{this.et(t,r,null)}))}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function jc(){return new Ln(Jt.comparator)}function $2(){return new Ln(Jt.comparator)}const Zw={asc:"ASCENDING",desc:"DESCENDING"},Ww={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kw={and:"AND",or:"OR"};class Jw{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Z1(o,t){return o.useProto3Json||ph(t)?t:{value:t}}function uh(o,t){return o.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ry(o,t){return o.useProto3Json?t.toBase64():t.toUint8Array()}function $w(o,t){return uh(o,t.toTimestamp())}function ys(o){return $e(!!o,49232),ae.fromTimestamp((function(r){const u=Ha(r);return new En(u.seconds,u.nanos)})(o))}function T0(o,t){return W1(o,t).canonicalString()}function W1(o,t){const r=(function(d){return new On(["projects",d.projectId,"databases",d.database])})(o).child("documents");return t===void 0?r:r.child(t)}function Dy(o){const t=On.fromString(o);return $e(Vy(t),10190,{key:t.toString()}),t}function K1(o,t){return T0(o.databaseId,t.path)}function N1(o,t){const r=Dy(t);if(r.get(1)!==o.databaseId.projectId)throw new qt(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+o.databaseId.projectId);if(r.get(3)!==o.databaseId.database)throw new qt(Tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+o.databaseId.database);return new Jt(Oy(r))}function My(o,t){return T0(o.databaseId,t)}function tT(o){const t=Dy(o);return t.length===4?On.emptyPath():Oy(t)}function J1(o){return new On(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Oy(o){return $e(o.length>4&&o.get(4)==="documents",29091,{key:o.toString()}),o.popFirst(5)}function tp(o,t,r){return{name:K1(o,t),fields:r.value.mapValue.fields}}function eT(o,t){let r;if("targetChange"in t){t.targetChange;const u=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:ie(39313,{state:T})})(t.targetChange.targetChangeType||"NO_CHANGE"),d=t.targetChange.targetIds||[],m=(function(T,M){return T.useProto3Json?($e(M===void 0||typeof M=="string",58123),Ii.fromBase64String(M||"")):($e(M===void 0||M instanceof Buffer||M instanceof Uint8Array,16193),Ii.fromUint8Array(M||new Uint8Array))})(o,t.targetChange.resumeToken),_=t.targetChange.cause,S=_&&(function(T){const M=T.code===void 0?Tt.UNKNOWN:by(T.code);return new qt(M,T.message||"")})(_);r=new Ny(u,d,m,S||null)}else if("documentChange"in t){t.documentChange;const u=t.documentChange;u.document,u.document.name,u.document.updateTime;const d=N1(o,u.document.name),m=ys(u.document.updateTime),_=u.document.createTime?ys(u.document.createTime):ae.min(),S=new vr({mapValue:{fields:u.document.fields}}),I=Ui.newFoundDocument(d,m,_,S),T=u.targetIds||[],M=u.removedTargetIds||[];r=new Qc(T,M,I.key,I)}else if("documentDelete"in t){t.documentDelete;const u=t.documentDelete;u.document;const d=N1(o,u.document),m=u.readTime?ys(u.readTime):ae.min(),_=Ui.newNoDocument(d,m),S=u.removedTargetIds||[];r=new Qc([],S,_.key,_)}else if("documentRemove"in t){t.documentRemove;const u=t.documentRemove;u.document;const d=N1(o,u.document),m=u.removedTargetIds||[];r=new Qc([],m,d,null)}else{if(!("filter"in t))return ie(11601,{Vt:t});{t.filter;const u=t.filter;u.targetId;const{count:d=0,unchangedNames:m}=u,_=new Gw(d,m),S=u.targetId;r=new Iy(S,_)}}return r}function nT(o,t){let r;if(t instanceof Th)r={update:tp(o,t.key,t.value)};else if(t instanceof vy)r={delete:K1(o,t.key)};else if(t instanceof Io)r={update:tp(o,t.key,t.data),updateMask:hT(t.fieldMask)};else{if(!(t instanceof zw))return ie(16599,{dt:t.type});r={verify:K1(o,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((u=>(function(m,_){const S=_.transform;if(S instanceof oh)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof bu)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Iu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof lh)return{fieldPath:_.field.canonicalString(),increment:S.Ae};throw ie(20930,{transform:_.transform})})(0,u)))),t.precondition.isNone||(r.currentDocument=(function(d,m){return m.updateTime!==void 0?{updateTime:$w(d,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:ie(27497)})(o,t.precondition)),r}function iT(o,t){return o&&o.length>0?($e(t!==void 0,14353),o.map((r=>(function(d,m){let _=d.updateTime?ys(d.updateTime):ys(m);return _.isEqual(ae.min())&&(_=ys(m)),new kw(_,d.transformResults||[])})(r,t)))):[]}function rT(o,t){return{documents:[My(o,t.path)]}}function sT(o,t){const r={structuredQuery:{}},u=t.path;let d;t.collectionGroup!==null?(d=u,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(d=u.popLast(),r.structuredQuery.from=[{collectionId:u.lastSegment()}]),r.parent=My(o,d);const m=(function(T){if(T.length!==0)return By(As.create(T,"and"))})(t.filters);m&&(r.structuredQuery.where=m);const _=(function(T){if(T.length!==0)return T.map((M=>(function(X){return{field:ul(X.field),direction:lT(X.dir)}})(M)))})(t.orderBy);_&&(r.structuredQuery.orderBy=_);const S=Z1(o,t.limit);return S!==null&&(r.structuredQuery.limit=S),t.startAt&&(r.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(t.startAt)),t.endAt&&(r.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(t.endAt)),{ft:r,parent:d}}function aT(o){let t=tT(o.parent);const r=o.structuredQuery,u=r.from?r.from.length:0;let d=null;if(u>0){$e(u===1,65062);const M=r.from[0];M.allDescendants?d=M.collectionId:t=t.child(M.collectionId)}let m=[];r.where&&(m=(function(L){const X=Ly(L);return X instanceof As&&cy(X)?X.getFilters():[X]})(r.where));let _=[];r.orderBy&&(_=(function(L){return L.map((X=>(function(wt){return new ah(cl(wt.field),(function(At){switch(At){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(wt.direction))})(X)))})(r.orderBy));let S=null;r.limit&&(S=(function(L){let X;return X=typeof L=="object"?L.value:L,ph(X)?null:X})(r.limit));let I=null;r.startAt&&(I=(function(L){const X=!!L.before,et=L.values||[];return new sh(et,X)})(r.startAt));let T=null;return r.endAt&&(T=(function(L){const X=!L.before,et=L.values||[];return new sh(et,X)})(r.endAt)),Tw(t,d,_,m,S,"F",I,T)}function oT(o,t){const r=(function(d){switch(d){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:d})}})(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Ly(o){return o.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const u=cl(r.unaryFilter.field);return ni.create(u,"==",{doubleValue:NaN});case"IS_NULL":const d=cl(r.unaryFilter.field);return ni.create(d,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=cl(r.unaryFilter.field);return ni.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=cl(r.unaryFilter.field);return ni.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(o):o.fieldFilter!==void 0?(function(r){return ni.create(cl(r.fieldFilter.field),(function(d){switch(d){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(o):o.compositeFilter!==void 0?(function(r){return As.create(r.compositeFilter.filters.map((u=>Ly(u))),(function(d){switch(d){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(r.compositeFilter.op))})(o):ie(30097,{filter:o})}function lT(o){return Zw[o]}function uT(o){return Ww[o]}function cT(o){return Kw[o]}function ul(o){return{fieldPath:o.canonicalString()}}function cl(o){return bi.fromServerFormat(o.fieldPath)}function By(o){return o instanceof ni?(function(r){if(r.op==="=="){if(z2(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NAN"}};if(F2(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(z2(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NOT_NAN"}};if(F2(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(r.field),op:uT(r.op),value:r.value}}})(o):o instanceof As?(function(r){const u=r.getFilters().map((d=>By(d)));return u.length===1?u[0]:{compositeFilter:{op:cT(r.op),filters:u}}})(o):ie(54877,{filter:o})}function hT(o){const t=[];return o.fields.forEach((r=>t.push(r.canonicalString()))),{fieldPaths:t}}function Vy(o){return o.length>=4&&o.get(0)==="projects"&&o.get(2)==="databases"}function Py(o){return!!o&&typeof o._toProto=="function"&&o._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,r,u,d,m=ae.min(),_=ae.min(),S=Ii.EMPTY_BYTE_STRING,I=null){this.target=t,this.targetId=r,this.purpose=u,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=S,this.expectedCount=I}withSequenceNumber(t){return new Va(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.yt=t}}function dT(o){const t=aT({parent:o.parent,structuredQuery:o.structuredQuery});return o.limitType==="LAST"?Q1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.Sn=new mT}addToCollectionParentIndex(t,r){return this.Sn.add(r),xt.resolve()}getCollectionParents(t,r){return xt.resolve(this.Sn.getEntries(r))}addFieldIndex(t,r){return xt.resolve()}deleteFieldIndex(t,r){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,r){return xt.resolve()}getDocumentsMatchingTarget(t,r){return xt.resolve(null)}getIndexType(t,r){return xt.resolve(0)}getFieldIndexes(t,r){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,r){return xt.resolve(ja.min())}getMinOffsetFromCollectionGroup(t,r){return xt.resolve(ja.min())}updateCollectionGroup(t,r,u){return xt.resolve()}updateIndexEntries(t,r){return xt.resolve()}}class mT{constructor(){this.index={}}add(t){const r=t.lastSegment(),u=t.popLast(),d=this.index[r]||new ii(On.comparator),m=!d.has(u);return this.index[r]=d.add(u),m}has(t){const r=t.lastSegment(),u=t.popLast(),d=this.index[r];return d&&d.has(u)}getEntries(t){return(this.index[t]||new ii(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ky=41943040;class rr{static withCacheSize(t){return new rr(t,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,u){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(ky,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new xl(0)}static ar(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="LruGarbageCollector",pT=1048576;function ip([o,t],[r,u]){const d=Me(o,r);return d===0?Me(t,u):d}class yT{constructor(t){this.Pr=t,this.buffer=new ii(ip),this.Tr=0}Ir(){return++this.Tr}Er(t){const r=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const u=this.buffer.last();ip(r,u)<0&&(this.buffer=this.buffer.delete(u).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ET{constructor(t,r,u){this.garbageCollector=t,this.asyncQueue=r,this.localStore=u,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){Vt(np,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Cl(r)?Vt(np,"Ignoring IndexedDB error during garbage collection: ",r):await Tl(r)}await this.Ar(3e5)}))}}class xT{constructor(t,r){this.Vr=t,this.params=r}calculateTargetCount(t,r){return this.Vr.dr(t).next((u=>Math.floor(r/100*u)))}nthSequenceNumber(t,r){if(r===0)return xt.resolve(mh.ce);const u=new yT(r);return this.Vr.forEachTarget(t,(d=>u.Er(d.sequenceNumber))).next((()=>this.Vr.mr(t,(d=>u.Er(d))))).next((()=>u.maxValue))}removeTargets(t,r,u){return this.Vr.removeTargets(t,r,u)}removeOrphanedDocuments(t,r){return this.Vr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(ep)):this.getCacheSize(t).next((u=>u<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ep):this.gr(t,r)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,r){let u,d,m,_,S,I,T;const M=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((L=>(L>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${L}`),d=this.params.maximumSequenceNumbersToCollect):d=L,_=Date.now(),this.nthSequenceNumber(t,d)))).next((L=>(u=L,S=Date.now(),this.removeTargets(t,u,r)))).next((L=>(m=L,I=Date.now(),this.removeOrphanedDocuments(t,u)))).next((L=>(T=Date.now(),ol()<=Ue.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${_-M}ms
	Determined least recently used ${d} in `+(S-_)+`ms
	Removed ${m} targets in `+(I-S)+`ms
	Removed ${L} documents in `+(T-I)+`ms
Total Duration: ${T-M}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:L}))))}}function AT(o,t){return new xT(o,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.changes=new bo((t=>t.toString()),((t,r)=>t.isEqual(r))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Ui.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const u=this.changes.get(r);return u!==void 0?xt.resolve(u):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,r,u,d){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=u,this.indexManager=d}getDocument(t,r){let u=null;return this.documentOverlayCache.getOverlay(t,r).next((d=>(u=d,this.remoteDocumentCache.getEntry(t,r)))).next((d=>(u!==null&&Eu(u.mutation,d,ns.empty(),En.now()),d)))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next((u=>this.getLocalViewOfDocuments(t,u,Oe()).next((()=>u))))}getLocalViewOfDocuments(t,r,u=Oe()){const d=wo();return this.populateOverlays(t,d,r).next((()=>this.computeViews(t,r,d,u).next((m=>{let _=hu();return m.forEach(((S,I)=>{_=_.insert(S,I.overlayedDocument)})),_}))))}getOverlayedDocuments(t,r){const u=wo();return this.populateOverlays(t,u,r).next((()=>this.computeViews(t,r,u,Oe())))}populateOverlays(t,r,u){const d=[];return u.forEach((m=>{r.has(m)||d.push(m)})),this.documentOverlayCache.getOverlays(t,d).next((m=>{m.forEach(((_,S)=>{r.set(_,S)}))}))}computeViews(t,r,u,d){let m=ta();const _=yu(),S=(function(){return yu()})();return r.forEach(((I,T)=>{const M=u.get(T.key);d.has(T.key)&&(M===void 0||M.mutation instanceof Io)?m=m.insert(T.key,T):M!==void 0?(_.set(T.key,M.mutation.getFieldMask()),Eu(M.mutation,T,M.mutation.getFieldMask(),En.now())):_.set(T.key,ns.empty())})),this.recalculateAndSaveOverlays(t,m).next((I=>(I.forEach(((T,M)=>_.set(T,M))),r.forEach(((T,M)=>S.set(T,new wT(M,_.get(T)??null)))),S)))}recalculateAndSaveOverlays(t,r){const u=yu();let d=new Ln(((_,S)=>_-S)),m=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next((_=>{for(const S of _)S.keys().forEach((I=>{const T=r.get(I);if(T===null)return;let M=u.get(I)||ns.empty();M=S.applyToLocalView(T,M),u.set(I,M);const L=(d.get(S.batchId)||Oe()).add(I);d=d.insert(S.batchId,L)}))})).next((()=>{const _=[],S=d.getReverseIterator();for(;S.hasNext();){const I=S.getNext(),T=I.key,M=I.value,L=Ey();M.forEach((X=>{if(!m.has(X)){const et=Cy(r.get(X),u.get(X));et!==null&&L.set(X,et),m=m.add(X)}})),_.push(this.documentOverlayCache.saveOverlays(t,T,L))}return xt.waitFor(_)})).next((()=>u))}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next((u=>this.recalculateAndSaveOverlays(t,u)))}getDocumentsMatchingQuery(t,r,u,d){return Cw(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):Sw(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,u,d):this.getDocumentsMatchingCollectionQuery(t,r,u,d)}getNextDocuments(t,r,u,d){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,u,d).next((m=>{const _=d-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,u.largestBatchId,d-m.size):xt.resolve(wo());let S=Tu,I=m;return _.next((T=>xt.forEach(T,((M,L)=>(S<L.largestBatchId&&(S=L.largestBatchId),m.get(M)?xt.resolve():this.remoteDocumentCache.getEntry(t,M).next((X=>{I=I.insert(M,X)}))))).next((()=>this.populateOverlays(t,T,m))).next((()=>this.computeViews(t,I,T,Oe()))).next((M=>({batchId:S,changes:yy(M)})))))}))}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Jt(r)).next((u=>{let d=hu();return u.isFoundDocument()&&(d=d.insert(u.key,u)),d}))}getDocumentsMatchingCollectionGroupQuery(t,r,u,d){const m=r.collectionGroup;let _=hu();return this.indexManager.getCollectionParents(t,m).next((S=>xt.forEach(S,(I=>{const T=(function(L,X){return new Eh(X,null,L.explicitOrderBy.slice(),L.filters.slice(),L.limit,L.limitType,L.startAt,L.endAt)})(r,I.child(m));return this.getDocumentsMatchingCollectionQuery(t,T,u,d).next((M=>{M.forEach(((L,X)=>{_=_.insert(L,X)}))}))})).next((()=>_))))}getDocumentsMatchingCollectionQuery(t,r,u,d){let m;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,u.largestBatchId).next((_=>(m=_,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,u,m,d)))).next((_=>{m.forEach(((I,T)=>{const M=T.getKey();_.get(M)===null&&(_=_.insert(M,Ui.newInvalidDocument(M)))}));let S=hu();return _.forEach(((I,T)=>{const M=m.get(I);M!==void 0&&Eu(M.mutation,T,ns.empty(),En.now()),Ah(r,T)&&(S=S.insert(I,T))})),S}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,r){return xt.resolve(this.Nr.get(r))}saveBundleMetadata(t,r){return this.Nr.set(r.id,(function(d){return{id:d.id,version:d.version,createTime:ys(d.createTime)}})(r)),xt.resolve()}getNamedQuery(t,r){return xt.resolve(this.Br.get(r))}saveNamedQuery(t,r){return this.Br.set(r.name,(function(d){return{name:d.name,query:dT(d.bundledQuery),readTime:ys(d.readTime)}})(r)),xt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.overlays=new Ln(Jt.comparator),this.Lr=new Map}getOverlay(t,r){return xt.resolve(this.overlays.get(r))}getOverlays(t,r){const u=wo();return xt.forEach(r,(d=>this.getOverlay(t,d).next((m=>{m!==null&&u.set(d,m)})))).next((()=>u))}saveOverlays(t,r,u){return u.forEach(((d,m)=>{this.bt(t,r,m)})),xt.resolve()}removeOverlaysForBatchId(t,r,u){const d=this.Lr.get(u);return d!==void 0&&(d.forEach((m=>this.overlays=this.overlays.remove(m))),this.Lr.delete(u)),xt.resolve()}getOverlaysForCollection(t,r,u){const d=wo(),m=r.length+1,_=new Jt(r.child("")),S=this.overlays.getIteratorFrom(_);for(;S.hasNext();){const I=S.getNext().value,T=I.getKey();if(!r.isPrefixOf(T.path))break;T.path.length===m&&I.largestBatchId>u&&d.set(I.getKey(),I)}return xt.resolve(d)}getOverlaysForCollectionGroup(t,r,u,d){let m=new Ln(((T,M)=>T-M));const _=this.overlays.getIterator();for(;_.hasNext();){const T=_.getNext().value;if(T.getKey().getCollectionGroup()===r&&T.largestBatchId>u){let M=m.get(T.largestBatchId);M===null&&(M=wo(),m=m.insert(T.largestBatchId,M)),M.set(T.getKey(),T)}}const S=wo(),I=m.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach(((T,M)=>S.set(T,M))),!(S.size()>=d)););return xt.resolve(S)}bt(t,r,u){const d=this.overlays.get(u.key);if(d!==null){const _=this.Lr.get(d.largestBatchId).delete(u.key);this.Lr.set(d.largestBatchId,_)}this.overlays=this.overlays.insert(u.key,new Hw(r,u));let m=this.Lr.get(r);m===void 0&&(m=Oe(),this.Lr.set(r,m)),this.Lr.set(r,m.add(u.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.sessionToken=Ii.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,xt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.kr=new ii(li.Kr),this.qr=new ii(li.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,r){const u=new li(t,r);this.kr=this.kr.add(u),this.qr=this.qr.add(u)}$r(t,r){t.forEach((u=>this.addReference(u,r)))}removeReference(t,r){this.Wr(new li(t,r))}Qr(t,r){t.forEach((u=>this.removeReference(u,r)))}Gr(t){const r=new Jt(new On([])),u=new li(r,t),d=new li(r,t+1),m=[];return this.qr.forEachInRange([u,d],(_=>{this.Wr(_),m.push(_.key)})),m}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const r=new Jt(new On([])),u=new li(r,t),d=new li(r,t+1);let m=Oe();return this.qr.forEachInRange([u,d],(_=>{m=m.add(_.key)})),m}containsKey(t){const r=new li(t,0),u=this.kr.firstAfterOrEqual(r);return u!==null&&t.isEqual(u.key)}}class li{constructor(t,r){this.key=t,this.Hr=r}static Kr(t,r){return Jt.comparator(t.key,r.key)||Me(t.Hr,r.Hr)}static Ur(t,r){return Me(t.Hr,r.Hr)||Jt.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new ii(li.Kr)}checkEmpty(t){return xt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,u,d){const m=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const _=new jw(m,r,u,d);this.mutationQueue.push(_);for(const S of d)this.Jr=this.Jr.add(new li(S.key,m)),this.indexManager.addToCollectionParentIndex(t,S.key.path.popLast());return xt.resolve(_)}lookupMutationBatch(t,r){return xt.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(t,r){const u=r+1,d=this.Xr(u),m=d<0?0:d;return xt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(this.mutationQueue.length===0?g0:this.Yn-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const u=new li(r,0),d=new li(r,Number.POSITIVE_INFINITY),m=[];return this.Jr.forEachInRange([u,d],(_=>{const S=this.Zr(_.Hr);m.push(S)})),xt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(t,r){let u=new ii(Me);return r.forEach((d=>{const m=new li(d,0),_=new li(d,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([m,_],(S=>{u=u.add(S.Hr)}))})),xt.resolve(this.Yr(u))}getAllMutationBatchesAffectingQuery(t,r){const u=r.path,d=u.length+1;let m=u;Jt.isDocumentKey(m)||(m=m.child(""));const _=new li(new Jt(m),0);let S=new ii(Me);return this.Jr.forEachWhile((I=>{const T=I.key.path;return!!u.isPrefixOf(T)&&(T.length===d&&(S=S.add(I.Hr)),!0)}),_),xt.resolve(this.Yr(S))}Yr(t){const r=[];return t.forEach((u=>{const d=this.Zr(u);d!==null&&r.push(d)})),r}removeMutationBatch(t,r){$e(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let u=this.Jr;return xt.forEach(r.mutations,(d=>{const m=new li(d.key,r.batchId);return u=u.delete(m),this.referenceDelegate.markPotentiallyOrphaned(t,d.key)})).next((()=>{this.Jr=u}))}nr(t){}containsKey(t,r){const u=new li(r,0),d=this.Jr.firstAfterOrEqual(u);return xt.resolve(r.isEqual(d&&d.key))}performConsistencyCheck(t){return this.mutationQueue.length,xt.resolve()}ei(t,r){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const r=this.Xr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.ti=t,this.docs=(function(){return new Ln(Jt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const u=r.key,d=this.docs.get(u),m=d?d.size:0,_=this.ti(r);return this.docs=this.docs.insert(u,{document:r.mutableCopy(),size:_}),this.size+=_-m,this.indexManager.addToCollectionParentIndex(t,u.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const u=this.docs.get(r);return xt.resolve(u?u.document.mutableCopy():Ui.newInvalidDocument(r))}getEntries(t,r){let u=ta();return r.forEach((d=>{const m=this.docs.get(d);u=u.insert(d,m?m.document.mutableCopy():Ui.newInvalidDocument(d))})),xt.resolve(u)}getDocumentsMatchingQuery(t,r,u,d){let m=ta();const _=r.path,S=new Jt(_.child("__id-9223372036854775808__")),I=this.docs.getIteratorFrom(S);for(;I.hasNext();){const{key:T,value:{document:M}}=I.getNext();if(!_.isPrefixOf(T.path))break;T.path.length>_.length+1||tw($3(M),u)<=0||(d.has(M.key)||Ah(r,M))&&(m=m.insert(M.key,M.mutableCopy()))}return xt.resolve(m)}getAllFromCollectionGroup(t,r,u,d){ie(9500)}ni(t,r){return xt.forEach(this.docs,(u=>r(u)))}newChangeBuffer(t){return new NT(this)}getSize(t){return xt.resolve(this.size)}}class NT extends _T{constructor(t){super(),this.Mr=t}applyChanges(t){const r=[];return this.changes.forEach(((u,d)=>{d.isValidDocument()?r.push(this.Mr.addEntry(t,d)):this.Mr.removeEntry(u)})),xt.waitFor(r)}getFromCache(t,r){return this.Mr.getEntry(t,r)}getAllFromCache(t,r){return this.Mr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this.persistence=t,this.ri=new bo((r=>y0(r)),E0),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.ii=0,this.si=new C0,this.targetCount=0,this.oi=xl._r()}forEachTarget(t,r){return this.ri.forEach(((u,d)=>r(d))),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,u){return u&&(this.lastRemoteSnapshotVersion=u),r>this.ii&&(this.ii=r),xt.resolve()}lr(t){this.ri.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.oi=new xl(r),this.highestTargetId=r),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,r){return this.lr(r),this.targetCount+=1,xt.resolve()}updateTargetData(t,r){return this.lr(r),xt.resolve()}removeTargetData(t,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,r,u){let d=0;const m=[];return this.ri.forEach(((_,S)=>{S.sequenceNumber<=r&&u.get(S.targetId)===null&&(this.ri.delete(_),m.push(this.removeMatchingKeysForTargetId(t,S.targetId)),d++)})),xt.waitFor(m).next((()=>d))}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,r){const u=this.ri.get(r)||null;return xt.resolve(u)}addMatchingKeys(t,r,u){return this.si.$r(r,u),xt.resolve()}removeMatchingKeys(t,r,u){this.si.Qr(r,u);const d=this.persistence.referenceDelegate,m=[];return d&&r.forEach((_=>{m.push(d.markPotentiallyOrphaned(t,_))})),xt.waitFor(m)}removeMatchingKeysForTargetId(t,r){return this.si.Gr(r),xt.resolve()}getMatchingKeysForTargetId(t,r){const u=this.si.jr(r);return xt.resolve(u)}containsKey(t,r){return xt.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,r){this._i={},this.overlays={},this.ai=new mh(0),this.ui=!1,this.ui=!0,this.ci=new vT,this.referenceDelegate=t(this),this.li=new RT(this),this.indexManager=new gT,this.remoteDocumentCache=(function(d){return new IT(d)})((u=>this.referenceDelegate.hi(u))),this.serializer=new fT(r),this.Pi=new CT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new ST,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let u=this._i[t.toKey()];return u||(u=new bT(r,this.referenceDelegate),this._i[t.toKey()]=u),u}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,r,u){Vt("MemoryPersistence","Starting transaction:",t);const d=new DT(this.ai.next());return this.referenceDelegate.Ti(),u(d).next((m=>this.referenceDelegate.Ii(d).next((()=>m)))).toPromise().then((m=>(d.raiseOnCommittedEvent(),m)))}Ei(t,r){return xt.or(Object.values(this._i).map((u=>()=>u.containsKey(t,r))))}}class DT extends nw{constructor(t){super(),this.currentSequenceNumber=t}}class S0{constructor(t){this.persistence=t,this.Ri=new C0,this.Ai=null}static Vi(t){return new S0(t)}get di(){if(this.Ai)return this.Ai;throw ie(60996)}addReference(t,r,u){return this.Ri.addReference(u,r),this.di.delete(u.toString()),xt.resolve()}removeReference(t,r,u){return this.Ri.removeReference(u,r),this.di.add(u.toString()),xt.resolve()}markPotentiallyOrphaned(t,r){return this.di.add(r.toString()),xt.resolve()}removeTarget(t,r){this.Ri.Gr(r.targetId).forEach((d=>this.di.add(d.toString())));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(t,r.targetId).next((d=>{d.forEach((m=>this.di.add(m.toString())))})).next((()=>u.removeTargetData(t,r)))}Ti(){this.Ai=new Set}Ii(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.di,(u=>{const d=Jt.fromPath(u);return this.mi(t,d).next((m=>{m||r.removeEntry(d,ae.min())}))})).next((()=>(this.Ai=null,r.apply(t))))}updateLimboDocument(t,r){return this.mi(t,r).next((u=>{u?this.di.delete(r.toString()):this.di.add(r.toString())}))}hi(t){return 0}mi(t,r){return xt.or([()=>xt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ei(t,r)])}}class ch{constructor(t,r){this.persistence=t,this.fi=new bo((u=>sw(u.path)),((u,d)=>u.isEqual(d))),this.garbageCollector=AT(this,r)}static Vi(t,r){return new ch(t,r)}Ti(){}Ii(t){return xt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}dr(t){const r=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((u=>r.next((d=>u+d))))}pr(t){let r=0;return this.mr(t,(u=>{r++})).next((()=>r))}mr(t,r){return xt.forEach(this.fi,((u,d)=>this.wr(t,u,d).next((m=>m?xt.resolve():r(d)))))}removeTargets(t,r,u){return this.persistence.getTargetCache().removeTargets(t,r,u)}removeOrphanedDocuments(t,r){let u=0;const d=this.persistence.getRemoteDocumentCache(),m=d.newChangeBuffer();return d.ni(t,(_=>this.wr(t,_,r).next((S=>{S||(u++,m.removeEntry(_,ae.min()))})))).next((()=>m.apply(t))).next((()=>u))}markPotentiallyOrphaned(t,r){return this.fi.set(r,t.currentSequenceNumber),xt.resolve()}removeTarget(t,r){const u=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,u)}addReference(t,r,u){return this.fi.set(u,t.currentSequenceNumber),xt.resolve()}removeReference(t,r,u){return this.fi.set(u,t.currentSequenceNumber),xt.resolve()}updateLimboDocument(t,r){return this.fi.set(r,t.currentSequenceNumber),xt.resolve()}hi(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Yc(t.data.value)),r}wr(t,r,u){return xt.or([()=>this.persistence.Ei(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const d=this.fi.get(r);return xt.resolve(d!==void 0&&d>u)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,r,u,d){this.targetId=t,this.fromCache=r,this.Ts=u,this.Is=d}static Es(t,r){let u=Oe(),d=Oe();for(const m of r.docChanges)switch(m.type){case 0:u=u.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new v0(t,r.fromCache,u,d)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return x_()?8:iw(y_())>0?6:4})()}initialize(t,r){this.fs=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,u,d){const m={result:null};return this.gs(t,r).next((_=>{m.result=_})).next((()=>{if(!m.result)return this.ps(t,r,d,u).next((_=>{m.result=_}))})).next((()=>{if(m.result)return;const _=new MT;return this.ys(t,r,_).next((S=>{if(m.result=S,this.As)return this.ws(t,r,_,S.size)}))})).next((()=>m.result))}ws(t,r,u,d){return u.documentReadCount<this.Vs?(ol()<=Ue.DEBUG&&Vt("QueryEngine","SDK will not create cache indexes for query:",ll(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xt.resolve()):(ol()<=Ue.DEBUG&&Vt("QueryEngine","Query:",ll(r),"scans",u.documentReadCount,"local documents and returns",d,"documents as results."),u.documentReadCount>this.ds*d?(ol()<=Ue.DEBUG&&Vt("QueryEngine","The SDK decides to create cache indexes for query:",ll(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ps(r))):xt.resolve())}gs(t,r){if(Y2(r))return xt.resolve(null);let u=ps(r);return this.indexManager.getIndexType(t,u).next((d=>d===0?null:(r.limit!==null&&d===1&&(r=Q1(r,null,"F"),u=ps(r)),this.indexManager.getDocumentsMatchingTarget(t,u).next((m=>{const _=Oe(...m);return this.fs.getDocuments(t,_).next((S=>this.indexManager.getMinOffset(t,u).next((I=>{const T=this.bs(r,S);return this.Ss(r,T,_,I.readTime)?this.gs(t,Q1(r,null,"F")):this.Ds(t,T,r,I)}))))})))))}ps(t,r,u,d){return Y2(r)||d.isEqual(ae.min())?xt.resolve(null):this.fs.getDocuments(t,u).next((m=>{const _=this.bs(r,m);return this.Ss(r,_,u,d)?xt.resolve(null):(ol()<=Ue.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ll(r)),this.Ds(t,_,r,J3(d,Tu)).next((S=>S)))}))}bs(t,r){let u=new ii(my(t));return r.forEach(((d,m)=>{Ah(t,m)&&(u=u.add(m))})),u}Ss(t,r,u,d){if(t.limit===null)return!1;if(u.size!==r.size)return!0;const m=t.limitType==="F"?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}ys(t,r,u){return ol()<=Ue.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",ll(r)),this.fs.getDocumentsMatchingQuery(t,r,ja.min(),u)}Ds(t,r,u,d){return this.fs.getDocumentsMatchingQuery(t,u,d).next((m=>(r.forEach((_=>{m=m.insert(_.key,_)})),m)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",LT=3e8;class BT{constructor(t,r,u,d){this.persistence=t,this.Cs=r,this.serializer=d,this.vs=new Ln(Me),this.Fs=new bo((m=>y0(m)),E0),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(u)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>t.collect(r,this.vs)))}}function VT(o,t,r,u){return new BT(o,t,r,u)}async function Fy(o,t){const r=ue(o);return await r.persistence.runTransaction("Handle user change","readonly",(u=>{let d;return r.mutationQueue.getAllMutationBatches(u).next((m=>(d=m,r.Os(t),r.mutationQueue.getAllMutationBatches(u)))).next((m=>{const _=[],S=[];let I=Oe();for(const T of d){_.push(T.batchId);for(const M of T.mutations)I=I.add(M.key)}for(const T of m){S.push(T.batchId);for(const M of T.mutations)I=I.add(M.key)}return r.localDocuments.getDocuments(u,I).next((T=>({Ns:T,removedBatchIds:_,addedBatchIds:S})))}))}))}function PT(o,t){const r=ue(o);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(u=>{const d=t.batch.keys(),m=r.xs.newChangeBuffer({trackRemovals:!0});return(function(S,I,T,M){const L=T.batch,X=L.keys();let et=xt.resolve();return X.forEach((wt=>{et=et.next((()=>M.getEntry(I,wt))).next((gt=>{const At=T.docVersions.get(wt);$e(At!==null,48541),gt.version.compareTo(At)<0&&(L.applyToRemoteDocument(gt,T),gt.isValidDocument()&&(gt.setReadTime(T.commitVersion),M.addEntry(gt)))}))})),et.next((()=>S.mutationQueue.removeMutationBatch(I,L)))})(r,u,t,m).next((()=>m.apply(u))).next((()=>r.mutationQueue.performConsistencyCheck(u))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(u,d,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,(function(S){let I=Oe();for(let T=0;T<S.mutationResults.length;++T)S.mutationResults[T].transformResults.length>0&&(I=I.add(S.batch.mutations[T].key));return I})(t)))).next((()=>r.localDocuments.getDocuments(u,d)))}))}function zy(o){const t=ue(o);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>t.li.getLastRemoteSnapshotVersion(r)))}function kT(o,t){const r=ue(o),u=t.snapshotVersion;let d=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const _=r.xs.newChangeBuffer({trackRemovals:!0});d=r.vs;const S=[];t.targetChanges.forEach(((M,L)=>{const X=d.get(L);if(!X)return;S.push(r.li.removeMatchingKeys(m,M.removedDocuments,L).next((()=>r.li.addMatchingKeys(m,M.addedDocuments,L))));let et=X.withSequenceNumber(m.currentSequenceNumber);t.targetMismatches.get(L)!==null?et=et.withResumeToken(Ii.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):M.resumeToken.approximateByteSize()>0&&(et=et.withResumeToken(M.resumeToken,u)),d=d.insert(L,et),(function(gt,At,zt){return gt.resumeToken.approximateByteSize()===0||At.snapshotVersion.toMicroseconds()-gt.snapshotVersion.toMicroseconds()>=LT?!0:zt.addedDocuments.size+zt.modifiedDocuments.size+zt.removedDocuments.size>0})(X,et,M)&&S.push(r.li.updateTargetData(m,et))}));let I=ta(),T=Oe();if(t.documentUpdates.forEach((M=>{t.resolvedLimboDocuments.has(M)&&S.push(r.persistence.referenceDelegate.updateLimboDocument(m,M))})),S.push(UT(m,_,t.documentUpdates).next((M=>{I=M.Bs,T=M.Ls}))),!u.isEqual(ae.min())){const M=r.li.getLastRemoteSnapshotVersion(m).next((L=>r.li.setTargetsMetadata(m,m.currentSequenceNumber,u)));S.push(M)}return xt.waitFor(S).next((()=>_.apply(m))).next((()=>r.localDocuments.getLocalViewOfDocuments(m,I,T))).next((()=>I))})).then((m=>(r.vs=d,m)))}function UT(o,t,r){let u=Oe(),d=Oe();return r.forEach((m=>u=u.add(m))),t.getEntries(o,u).next((m=>{let _=ta();return r.forEach(((S,I)=>{const T=m.get(S);I.isFoundDocument()!==T.isFoundDocument()&&(d=d.add(S)),I.isNoDocument()&&I.version.isEqual(ae.min())?(t.removeEntry(S,I.readTime),_=_.insert(S,I)):!T.isValidDocument()||I.version.compareTo(T.version)>0||I.version.compareTo(T.version)===0&&T.hasPendingWrites?(t.addEntry(I),_=_.insert(S,I)):Vt(b0,"Ignoring outdated watch update for ",S,". Current version:",T.version," Watch version:",I.version)})),{Bs:_,Ls:d}}))}function FT(o,t){const r=ue(o);return r.persistence.runTransaction("Get next mutation batch","readonly",(u=>(t===void 0&&(t=g0),r.mutationQueue.getNextMutationBatchAfterBatchId(u,t))))}function zT(o,t){const r=ue(o);return r.persistence.runTransaction("Allocate target","readwrite",(u=>{let d;return r.li.getTargetData(u,t).next((m=>m?(d=m,xt.resolve(d)):r.li.allocateTargetId(u).next((_=>(d=new Va(t,_,"TargetPurposeListen",u.currentSequenceNumber),r.li.addTargetData(u,d).next((()=>d)))))))})).then((u=>{const d=r.vs.get(u.targetId);return(d===null||u.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(r.vs=r.vs.insert(u.targetId,u),r.Fs.set(t,u.targetId)),u}))}async function $1(o,t,r){const u=ue(o),d=u.vs.get(t),m=r?"readwrite":"readwrite-primary";try{r||await u.persistence.runTransaction("Release target",m,(_=>u.persistence.referenceDelegate.removeTarget(_,d)))}catch(_){if(!Cl(_))throw _;Vt(b0,`Failed to update sequence numbers for target ${t}: ${_}`)}u.vs=u.vs.remove(t),u.Fs.delete(d.target)}function rp(o,t,r){const u=ue(o);let d=ae.min(),m=Oe();return u.persistence.runTransaction("Execute query","readwrite",(_=>(function(I,T,M){const L=ue(I),X=L.Fs.get(M);return X!==void 0?xt.resolve(L.vs.get(X)):L.li.getTargetData(T,M)})(u,_,ps(t)).next((S=>{if(S)return d=S.lastLimboFreeSnapshotVersion,u.li.getMatchingKeysForTargetId(_,S.targetId).next((I=>{m=I}))})).next((()=>u.Cs.getDocumentsMatchingQuery(_,t,r?d:ae.min(),r?m:Oe()))).next((S=>(jT(u,bw(t),S),{documents:S,ks:m})))))}function jT(o,t,r){let u=o.Ms.get(t)||ae.min();r.forEach(((d,m)=>{m.readTime.compareTo(u)>0&&(u=m.readTime)})),o.Ms.set(t,u)}class sp{constructor(){this.activeTargetIds=Ow()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HT{constructor(){this.vo=new sp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,u){}addLocalQueryTarget(t,r=!0){return r&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,r,u){this.Fo[t]=r}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new sp,Promise.resolve()}handleUserChange(t,r,u){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="ConnectivityMonitor";class op{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Vt(ap,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){Vt(ap,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function t0(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="RestConnection",YT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class XT{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+t.host,this.Uo=`projects/${u}/databases/${d}`,this.$o=this.databaseId.database===ih?`project_id=${u}`:`project_id=${u}&database_id=${d}`}Wo(t,r,u,d,m){const _=t0(),S=this.Qo(t,r.toUriEncodedString());Vt(R1,`Sending RPC '${t}' ${_}:`,S,u);const I={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(I,d,m);const{host:T}=new URL(S),M=u0(T);return this.zo(t,S,I,u,M).then((L=>(Vt(R1,`Received RPC '${t}' ${_}: `,L),L)),(L=>{throw ml(R1,`RPC '${t}' ${_} failed with error: `,L,"url: ",S,"request:",u),L}))}jo(t,r,u,d,m,_){return this.Wo(t,r,u,d,m)}Go(t,r,u){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((d,m)=>t[m]=d)),u&&u.headers.forEach(((d,m)=>t[m]=d))}Qo(t,r){const u=YT[t];let d=`${this.qo}/v1/${r}:${u}`;return this.databaseInfo.apiKey&&(d=`${d}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),d}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection",lu=(o,t,r)=>{o.listen(t,(u=>{try{r(u)}catch(d){setTimeout((()=>{throw d}),0)}}))};class dl extends XT{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!dl.c_){const t=qp();lu(t,Xp.STAT_EVENT,(r=>{r.stat===j1.PROXY?Vt(Pi,"STAT_EVENT: detected buffering proxy"):r.stat===j1.NOPROXY&&Vt(Pi,"STAT_EVENT: detected no buffering proxy")})),dl.c_=!0}}zo(t,r,u,d,m){const _=t0();return new Promise(((S,I)=>{const T=new Gp;T.setWithCredentials(!0),T.listenOnce(Yp.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case Gc.NO_ERROR:const L=T.getResponseJson();Vt(Pi,`XHR for RPC '${t}' ${_} received:`,JSON.stringify(L)),S(L);break;case Gc.TIMEOUT:Vt(Pi,`RPC '${t}' ${_} timed out`),I(new qt(Tt.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const X=T.getStatus();if(Vt(Pi,`RPC '${t}' ${_} failed with status:`,X,"response text:",T.getResponseText()),X>0){let et=T.getResponseJson();Array.isArray(et)&&(et=et[0]);const wt=et==null?void 0:et.error;if(wt&&wt.status&&wt.message){const gt=(function(zt){const Lt=zt.toLowerCase().replace(/_/g,"-");return Object.values(Tt).indexOf(Lt)>=0?Lt:Tt.UNKNOWN})(wt.status);I(new qt(gt,wt.message))}else I(new qt(Tt.UNKNOWN,"Server responded with status "+T.getStatus()))}else I(new qt(Tt.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:t,streamId:_,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Vt(Pi,`RPC '${t}' ${_} completed.`)}}));const M=JSON.stringify(d);Vt(Pi,`RPC '${t}' ${_} sending request:`,d),T.send(r,"POST",M,u,15)}))}T_(t,r,u){const d=t0(),m=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],_=this.createWebChannelTransport(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;I!==void 0&&(S.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Go(S.initMessageHeaders,r,u),S.encodeInitMessageHeaders=!0;const T=m.join("");Vt(Pi,`Creating RPC '${t}' stream ${d}: ${T}`,S);const M=_.createWebChannel(T,S);this.I_(M);let L=!1,X=!1;const et=new qT({Ho:wt=>{X?Vt(Pi,`Not sending because RPC '${t}' stream ${d} is closed:`,wt):(L||(Vt(Pi,`Opening RPC '${t}' stream ${d} transport.`),M.open(),L=!0),Vt(Pi,`RPC '${t}' stream ${d} sending:`,wt),M.send(wt))},Jo:()=>M.close()});return lu(M,cu.EventType.OPEN,(()=>{X||(Vt(Pi,`RPC '${t}' stream ${d} transport opened.`),et.i_())})),lu(M,cu.EventType.CLOSE,(()=>{X||(X=!0,Vt(Pi,`RPC '${t}' stream ${d} transport closed`),et.o_(),this.E_(M))})),lu(M,cu.EventType.ERROR,(wt=>{X||(X=!0,ml(Pi,`RPC '${t}' stream ${d} transport errored. Name:`,wt.name,"Message:",wt.message),et.o_(new qt(Tt.UNAVAILABLE,"The operation could not be completed")))})),lu(M,cu.EventType.MESSAGE,(wt=>{var gt;if(!X){const At=wt.data[0];$e(!!At,16349);const zt=At,Lt=(zt==null?void 0:zt.error)||((gt=zt[0])==null?void 0:gt.error);if(Lt){Vt(Pi,`RPC '${t}' stream ${d} received error:`,Lt);const bt=Lt.status;let jt=(function(k){const z=Wn[k];if(z!==void 0)return by(z)})(bt),Le=Lt.message;jt===void 0&&(jt=Tt.INTERNAL,Le="Unknown error status: "+bt+" with message "+Lt.message),X=!0,et.o_(new qt(jt,Le)),M.close()}else Vt(Pi,`RPC '${t}' stream ${d} received:`,At),et.__(At)}})),dl.u_(),setTimeout((()=>{et.s_()}),0),et}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((r=>r===t))}Go(t,r,u){super.Go(t,r,u),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Qp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(o){return new dl(o)}function D1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(o){return new Jw(o,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dl.c_=!1;class jy{constructor(t,r,u=1e3,d=1.5,m=6e4){this.Ci=t,this.timerId=r,this.R_=u,this.A_=d,this.V_=m,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const r=Math.floor(this.d_+this.y_()),u=Math.max(0,Date.now()-this.f_),d=Math.max(0,r-u);d>0&&Vt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${u} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,d,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="PersistentStream";class Hy{constructor(t,r,u,d,m,_,S,I){this.Ci=t,this.b_=u,this.S_=d,this.connection=m,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=S,this.listener=I,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jy(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Tt.RESOURCE_EXHAUSTED?($s(r.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(r)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([u,d])=>{this.D_===r&&this.G_(u,d)}),(u=>{t((()=>{const d=new qt(Tt.UNKNOWN,"Fetching auth token failed: "+u.message);return this.z_(d)}))}))}G_(t,r){const u=this.Q_(this.D_);this.stream=this.j_(t,r),this.stream.Zo((()=>{u((()=>this.listener.Zo()))})),this.stream.Yo((()=>{u((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((d=>{u((()=>this.z_(d)))})),this.stream.onMessage((d=>{u((()=>++this.F_==1?this.H_(d):this.onNext(d)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Vt(lp,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return r=>{this.Ci.enqueueAndForget((()=>this.D_===t?r():(Vt(lp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZT extends Hy{constructor(t,r,u,d,m,_){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,u,d,_),this.serializer=m}j_(t,r){return this.connection.T_("Listen",t,r)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=eT(this.serializer,t),u=(function(m){if(!("targetChange"in m))return ae.min();const _=m.targetChange;return _.targetIds&&_.targetIds.length?ae.min():_.readTime?ys(_.readTime):ae.min()})(t);return this.listener.J_(r,u)}Z_(t){const r={};r.database=J1(this.serializer),r.addTarget=(function(m,_){let S;const I=_.target;if(S=q1(I)?{documents:rT(m,I)}:{query:sT(m,I).ft},S.targetId=_.targetId,_.resumeToken.approximateByteSize()>0){S.resumeToken=Ry(m,_.resumeToken);const T=Z1(m,_.expectedCount);T!==null&&(S.expectedCount=T)}else if(_.snapshotVersion.compareTo(ae.min())>0){S.readTime=uh(m,_.snapshotVersion.toTimestamp());const T=Z1(m,_.expectedCount);T!==null&&(S.expectedCount=T)}return S})(this.serializer,t);const u=oT(this.serializer,t);u&&(r.labels=u),this.K_(r)}X_(t){const r={};r.database=J1(this.serializer),r.removeTarget=t,this.K_(r)}}class WT extends Hy{constructor(t,r,u,d,m,_){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,u,d,_),this.serializer=m}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}H_(t){return $e(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,$e(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){$e(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=iT(t.writeResults,t.commitTime),u=ys(t.commitTime);return this.listener.na(u,r)}ra(){const t={};t.database=J1(this.serializer),this.K_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map((u=>nT(this.serializer,u)))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class JT extends KT{constructor(t,r,u,d){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=u,this.serializer=d,this.ia=!1}sa(){if(this.ia)throw new qt(Tt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,r,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,_])=>this.connection.Wo(t,W1(r,u),d,m,_))).catch((m=>{throw m.name==="FirebaseError"?(m.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new qt(Tt.UNKNOWN,m.toString())}))}jo(t,r,u,d,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([_,S])=>this.connection.jo(t,W1(r,u),d,_,S,m))).catch((_=>{throw _.name==="FirebaseError"?(_.code===Tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new qt(Tt.UNKNOWN,_.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function $T(o,t,r,u){return new JT(o,t,r,u)}class tC{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($s(r),this.aa=!1):Vt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class eC{constructor(t,r,u,d,m){this.localStore=t,this.datastore=r,this.asyncQueue=u,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=m,this.Aa.Mo((_=>{u.enqueueAndForget((async()=>{No(this)&&(Vt(vo,"Restarting streams for network reachability change."),await(async function(I){const T=ue(I);T.Ea.add(4),await Mu(T),T.Va.set("Unknown"),T.Ea.delete(4),await vh(T)})(this))}))})),this.Va=new tC(u,d)}}async function vh(o){if(No(o))for(const t of o.Ra)await t(!0)}async function Mu(o){for(const t of o.Ra)await t(!1)}function Gy(o,t){const r=ue(o);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),D0(r)?R0(r):Sl(r).O_()&&N0(r,t))}function I0(o,t){const r=ue(o),u=Sl(r);r.Ia.delete(t),u.O_()&&Yy(r,t),r.Ia.size===0&&(u.O_()?u.L_():No(r)&&r.Va.set("Unknown"))}function N0(o,t){if(o.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ae.min())>0){const r=o.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Sl(o).Z_(t)}function Yy(o,t){o.da.$e(t),Sl(o).X_(t)}function R0(o){o.da=new Qw({getRemoteKeysForTarget:t=>o.remoteSyncer.getRemoteKeysForTarget(t),At:t=>o.Ia.get(t)||null,ht:()=>o.datastore.serializer.databaseId}),Sl(o).start(),o.Va.ua()}function D0(o){return No(o)&&!Sl(o).x_()&&o.Ia.size>0}function No(o){return ue(o).Ea.size===0}function Xy(o){o.da=void 0}async function nC(o){o.Va.set("Online")}async function iC(o){o.Ia.forEach(((t,r)=>{N0(o,t)}))}async function rC(o,t){Xy(o),D0(o)?(o.Va.ha(t),R0(o)):o.Va.set("Unknown")}async function sC(o,t,r){if(o.Va.set("Online"),t instanceof Ny&&t.state===2&&t.cause)try{await(async function(d,m){const _=m.cause;for(const S of m.targetIds)d.Ia.has(S)&&(await d.remoteSyncer.rejectListen(S,_),d.Ia.delete(S),d.da.removeTarget(S))})(o,t)}catch(u){Vt(vo,"Failed to remove targets %s: %s ",t.targetIds.join(","),u),await hh(o,u)}else if(t instanceof Qc?o.da.Xe(t):t instanceof Iy?o.da.st(t):o.da.tt(t),!r.isEqual(ae.min()))try{const u=await zy(o.localStore);r.compareTo(u)>=0&&await(function(m,_){const S=m.da.Tt(_);return S.targetChanges.forEach(((I,T)=>{if(I.resumeToken.approximateByteSize()>0){const M=m.Ia.get(T);M&&m.Ia.set(T,M.withResumeToken(I.resumeToken,_))}})),S.targetMismatches.forEach(((I,T)=>{const M=m.Ia.get(I);if(!M)return;m.Ia.set(I,M.withResumeToken(Ii.EMPTY_BYTE_STRING,M.snapshotVersion)),Yy(m,I);const L=new Va(M.target,I,T,M.sequenceNumber);N0(m,L)})),m.remoteSyncer.applyRemoteEvent(S)})(o,r)}catch(u){Vt(vo,"Failed to raise snapshot:",u),await hh(o,u)}}async function hh(o,t,r){if(!Cl(t))throw t;o.Ea.add(1),await Mu(o),o.Va.set("Offline"),r||(r=()=>zy(o.localStore)),o.asyncQueue.enqueueRetryable((async()=>{Vt(vo,"Retrying IndexedDB access"),await r(),o.Ea.delete(1),await vh(o)}))}function qy(o,t){return t().catch((r=>hh(o,r,t)))}async function bh(o){const t=ue(o),r=Xa(t);let u=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:g0;for(;aC(t);)try{const d=await FT(t.localStore,u);if(d===null){t.Ta.length===0&&r.L_();break}u=d.batchId,oC(t,d)}catch(d){await hh(t,d)}Qy(t)&&Zy(t)}function aC(o){return No(o)&&o.Ta.length<10}function oC(o,t){o.Ta.push(t);const r=Xa(o);r.O_()&&r.Y_&&r.ea(t.mutations)}function Qy(o){return No(o)&&!Xa(o).x_()&&o.Ta.length>0}function Zy(o){Xa(o).start()}async function lC(o){Xa(o).ra()}async function uC(o){const t=Xa(o);for(const r of o.Ta)t.ea(r.mutations)}async function cC(o,t,r){const u=o.Ta.shift(),d=_0.from(u,t,r);await qy(o,(()=>o.remoteSyncer.applySuccessfulWrite(d))),await bh(o)}async function hC(o,t){t&&Xa(o).Y_&&await(async function(u,d){if((function(_){return Yw(_)&&_!==Tt.ABORTED})(d.code)){const m=u.Ta.shift();Xa(u).B_(),await qy(u,(()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d))),await bh(u)}})(o,t),Qy(o)&&Zy(o)}async function up(o,t){const r=ue(o);r.asyncQueue.verifyOperationInProgress(),Vt(vo,"RemoteStore received new credentials");const u=No(r);r.Ea.add(3),await Mu(r),u&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await vh(r)}async function fC(o,t){const r=ue(o);t?(r.Ea.delete(2),await vh(r)):t||(r.Ea.add(2),await Mu(r),r.Va.set("Unknown"))}function Sl(o){return o.ma||(o.ma=(function(r,u,d){const m=ue(r);return m.sa(),new ZT(u,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,d)})(o.datastore,o.asyncQueue,{Zo:nC.bind(null,o),Yo:iC.bind(null,o),t_:rC.bind(null,o),J_:sC.bind(null,o)}),o.Ra.push((async t=>{t?(o.ma.B_(),D0(o)?R0(o):o.Va.set("Unknown")):(await o.ma.stop(),Xy(o))}))),o.ma}function Xa(o){return o.fa||(o.fa=(function(r,u,d){const m=ue(r);return m.sa(),new WT(u,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,d)})(o.datastore,o.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lC.bind(null,o),t_:hC.bind(null,o),ta:uC.bind(null,o),na:cC.bind(null,o)}),o.Ra.push((async t=>{t?(o.fa.B_(),await bh(o)):(await o.fa.stop(),o.Ta.length>0&&(Vt(vo,`Stopping write stream with ${o.Ta.length} pending writes`),o.Ta=[]))}))),o.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t,r,u,d,m){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=u,this.op=d,this.removalCallback=m,this.deferred=new Fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((_=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,u,d,m){const _=Date.now()+u,S=new M0(t,r,_,d,m);return S.start(u),S}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(Tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(o,t){if($s("AsyncQueue",`${t}: ${o}`),Cl(o))return new qt(Tt.UNAVAILABLE,`${t}: ${o}`);throw o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(t){return new gl(t.comparator)}constructor(t){this.comparator=t?(r,u)=>t(r,u)||Jt.comparator(r.key,u.key):(r,u)=>Jt.comparator(r.key,u.key),this.keyedMap=hu(),this.sortedSet=new Ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((r,u)=>(t(r),!1)))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof gl)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),u=t.sortedSet.getIterator();for(;r.hasNext();){const d=r.getNext().key,m=u.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const t=[];return this.forEach((r=>{t.push(r.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const u=new gl;return u.comparator=this.comparator,u.keyedMap=t,u.sortedSet=r,u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.ga=new Ln(Jt.comparator)}track(t){const r=t.doc.key,u=this.ga.get(r);u?t.type!==0&&u.type===3?this.ga=this.ga.insert(r,t):t.type===3&&u.type!==1?this.ga=this.ga.insert(r,{type:u.type,doc:t.doc}):t.type===2&&u.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&u.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&u.type===0?this.ga=this.ga.remove(r):t.type===1&&u.type===2?this.ga=this.ga.insert(r,{type:1,doc:u.doc}):t.type===0&&u.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):ie(63341,{Vt:t,pa:u}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal(((r,u)=>{t.push(u)})),t}}class Al{constructor(t,r,u,d,m,_,S,I,T){this.query=t,this.docs=r,this.oldDocs=u,this.docChanges=d,this.mutatedKeys=m,this.fromCache=_,this.syncStateChanged=S,this.excludesMetadataChanges=I,this.hasCachedResults=T}static fromInitialDocuments(t,r,u,d,m){const _=[];return r.forEach((S=>{_.push({type:0,doc:S})})),new Al(t,r,gl.emptySet(r),_,u,d,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,u=t.docChanges;if(r.length!==u.length)return!1;for(let d=0;d<r.length;d++)if(r[d].type!==u[d].type||!r[d].doc.isEqual(u[d].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class gC{constructor(){this.queries=hp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,u){const d=ue(r),m=d.queries;d.queries=hp(),m.forEach(((_,S)=>{for(const I of S.ba)I.onError(u)}))})(this,new qt(Tt.ABORTED,"Firestore shutting down"))}}function hp(){return new bo((o=>gy(o)),xh)}async function mC(o,t){const r=ue(o);let u=3;const d=t.query;let m=r.queries.get(d);m?!m.Sa()&&t.Da()&&(u=2):(m=new dC,u=t.Da()?0:1);try{switch(u){case 0:m.wa=await r.onListen(d,!0);break;case 1:m.wa=await r.onListen(d,!1);break;case 2:await r.onFirstRemoteStoreListen(d)}}catch(_){const S=O0(_,`Initialization of query '${ll(t.query)}' failed`);return void t.onError(S)}r.queries.set(d,m),m.ba.push(t),t.va(r.onlineState),m.wa&&t.Fa(m.wa)&&L0(r)}async function pC(o,t){const r=ue(o),u=t.query;let d=3;const m=r.queries.get(u);if(m){const _=m.ba.indexOf(t);_>=0&&(m.ba.splice(_,1),m.ba.length===0?d=t.Da()?0:1:!m.Sa()&&t.Da()&&(d=2))}switch(d){case 0:return r.queries.delete(u),r.onUnlisten(u,!0);case 1:return r.queries.delete(u),r.onUnlisten(u,!1);case 2:return r.onLastRemoteStoreUnlisten(u);default:return}}function yC(o,t){const r=ue(o);let u=!1;for(const d of t){const m=d.query,_=r.queries.get(m);if(_){for(const S of _.ba)S.Fa(d)&&(u=!0);_.wa=d}}u&&L0(r)}function EC(o,t,r){const u=ue(o),d=u.queries.get(t);if(d)for(const m of d.ba)m.onError(r);u.queries.delete(t)}function L0(o){o.Ca.forEach((t=>{t.next()}))}var e0,fp;(fp=e0||(e0={})).Ma="default",fp.Cache="cache";class xC{constructor(t,r,u){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=u||{}}Fa(t){if(!this.options.includeMetadataChanges){const u=[];for(const d of t.docChanges)d.type!==3&&u.push(d);t=new Al(t.query,t.docs,t.oldDocs,u,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const u=r!=="Offline";return(!this.options.Ka||!u)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Al.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==e0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t){this.key=t}}class Ky{constructor(t){this.key=t}}class AC{constructor(t,r){this.query=t,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=my(t),this.tu=new gl(this.eu)}get nu(){return this.Za}ru(t,r){const u=r?r.iu:new cp,d=r?r.tu:this.tu;let m=r?r.mutatedKeys:this.mutatedKeys,_=d,S=!1;const I=this.query.limitType==="F"&&d.size===this.query.limit?d.last():null,T=this.query.limitType==="L"&&d.size===this.query.limit?d.first():null;if(t.inorderTraversal(((M,L)=>{const X=d.get(M),et=Ah(this.query,L)?L:null,wt=!!X&&this.mutatedKeys.has(X.key),gt=!!et&&(et.hasLocalMutations||this.mutatedKeys.has(et.key)&&et.hasCommittedMutations);let At=!1;X&&et?X.data.isEqual(et.data)?wt!==gt&&(u.track({type:3,doc:et}),At=!0):this.su(X,et)||(u.track({type:2,doc:et}),At=!0,(I&&this.eu(et,I)>0||T&&this.eu(et,T)<0)&&(S=!0)):!X&&et?(u.track({type:0,doc:et}),At=!0):X&&!et&&(u.track({type:1,doc:X}),At=!0,(I||T)&&(S=!0)),At&&(et?(_=_.add(et),m=gt?m.add(M):m.delete(M)):(_=_.delete(M),m=m.delete(M)))})),this.query.limit!==null)for(;_.size>this.query.limit;){const M=this.query.limitType==="F"?_.last():_.first();_=_.delete(M.key),m=m.delete(M.key),u.track({type:1,doc:M})}return{tu:_,iu:u,Ss:S,mutatedKeys:m}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,u,d){const m=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const _=t.iu.ya();_.sort(((M,L)=>(function(et,wt){const gt=At=>{switch(At){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Vt:At})}};return gt(et)-gt(wt)})(M.type,L.type)||this.eu(M.doc,L.doc))),this.ou(u),d=d??!1;const S=r&&!d?this._u():[],I=this.Ya.size===0&&this.current&&!d?1:0,T=I!==this.Xa;return this.Xa=I,_.length!==0||T?{snapshot:new Al(this.query,t.tu,m,_,t.mutatedKeys,I===0,T,!1,!!u&&u.resumeToken.approximateByteSize()>0),au:S}:{au:S}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((r=>this.Za=this.Za.add(r))),t.modifiedDocuments.forEach((r=>{})),t.removedDocuments.forEach((r=>this.Za=this.Za.delete(r))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Oe(),this.tu.forEach((u=>{this.uu(u.key)&&(this.Ya=this.Ya.add(u.key))}));const r=[];return t.forEach((u=>{this.Ya.has(u)||r.push(new Ky(u))})),this.Ya.forEach((u=>{t.has(u)||r.push(new Wy(u))})),r}cu(t){this.Za=t.ks,this.Ya=Oe();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const B0="SyncEngine";class _C{constructor(t,r,u){this.query=t,this.targetId=r,this.view=u}}class wC{constructor(t){this.key=t,this.hu=!1}}class TC{constructor(t,r,u,d,m,_){this.localStore=t,this.remoteStore=r,this.eventManager=u,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=_,this.Pu={},this.Tu=new bo((S=>gy(S)),xh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ln(Jt.comparator),this.Au=new Map,this.Vu=new C0,this.du={},this.mu=new Map,this.fu=xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CC(o,t,r=!0){const u=iE(o);let d;const m=u.Tu.get(t);return m?(u.sharedClientState.addLocalQueryTarget(m.targetId),d=m.view.lu()):d=await Jy(u,t,r,!0),d}async function SC(o,t){const r=iE(o);await Jy(r,t,!0,!1)}async function Jy(o,t,r,u){const d=await zT(o.localStore,ps(t)),m=d.targetId,_=o.sharedClientState.addLocalQueryTarget(m,r);let S;return u&&(S=await vC(o,t,m,_==="current",d.resumeToken)),o.isPrimaryClient&&r&&Gy(o.remoteStore,d),S}async function vC(o,t,r,u,d){o.pu=(L,X,et)=>(async function(gt,At,zt,Lt){let bt=At.view.ru(zt);bt.Ss&&(bt=await rp(gt.localStore,At.query,!1).then((({documents:k})=>At.view.ru(k,bt))));const jt=Lt&&Lt.targetChanges.get(At.targetId),Le=Lt&&Lt.targetMismatches.get(At.targetId)!=null,Ht=At.view.applyChanges(bt,gt.isPrimaryClient,jt,Le);return gp(gt,At.targetId,Ht.au),Ht.snapshot})(o,L,X,et);const m=await rp(o.localStore,t,!0),_=new AC(t,m.ks),S=_.ru(m.documents),I=Du.createSynthesizedTargetChangeForCurrentChange(r,u&&o.onlineState!=="Offline",d),T=_.applyChanges(S,o.isPrimaryClient,I);gp(o,r,T.au);const M=new _C(t,r,_);return o.Tu.set(t,M),o.Iu.has(r)?o.Iu.get(r).push(t):o.Iu.set(r,[t]),T.snapshot}async function bC(o,t,r){const u=ue(o),d=u.Tu.get(t),m=u.Iu.get(d.targetId);if(m.length>1)return u.Iu.set(d.targetId,m.filter((_=>!xh(_,t)))),void u.Tu.delete(t);u.isPrimaryClient?(u.sharedClientState.removeLocalQueryTarget(d.targetId),u.sharedClientState.isActiveQueryTarget(d.targetId)||await $1(u.localStore,d.targetId,!1).then((()=>{u.sharedClientState.clearQueryState(d.targetId),r&&I0(u.remoteStore,d.targetId),n0(u,d.targetId)})).catch(Tl)):(n0(u,d.targetId),await $1(u.localStore,d.targetId,!0))}async function IC(o,t){const r=ue(o),u=r.Tu.get(t),d=r.Iu.get(u.targetId);r.isPrimaryClient&&d.length===1&&(r.sharedClientState.removeLocalQueryTarget(u.targetId),I0(r.remoteStore,u.targetId))}async function NC(o,t,r){const u=VC(o);try{const d=await(function(_,S){const I=ue(_),T=En.now(),M=S.reduce(((et,wt)=>et.add(wt.key)),Oe());let L,X;return I.persistence.runTransaction("Locally write mutations","readwrite",(et=>{let wt=ta(),gt=Oe();return I.xs.getEntries(et,M).next((At=>{wt=At,wt.forEach(((zt,Lt)=>{Lt.isValidDocument()||(gt=gt.add(zt))}))})).next((()=>I.localDocuments.getOverlayedDocuments(et,wt))).next((At=>{L=At;const zt=[];for(const Lt of S){const bt=Fw(Lt,L.get(Lt.key).overlayedDocument);bt!=null&&zt.push(new Io(Lt.key,bt,oy(bt.value.mapValue),Ks.exists(!0)))}return I.mutationQueue.addMutationBatch(et,T,zt,S)})).next((At=>{X=At;const zt=At.applyToLocalDocumentSet(L,gt);return I.documentOverlayCache.saveOverlays(et,At.batchId,zt)}))})).then((()=>({batchId:X.batchId,changes:yy(L)})))})(u.localStore,t);u.sharedClientState.addPendingMutation(d.batchId),(function(_,S,I){let T=_.du[_.currentUser.toKey()];T||(T=new Ln(Me)),T=T.insert(S,I),_.du[_.currentUser.toKey()]=T})(u,d.batchId,r),await Ou(u,d.changes),await bh(u.remoteStore)}catch(d){const m=O0(d,"Failed to persist write");r.reject(m)}}async function $y(o,t){const r=ue(o);try{const u=await kT(r.localStore,t);t.targetChanges.forEach(((d,m)=>{const _=r.Au.get(m);_&&($e(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1,22616),d.addedDocuments.size>0?_.hu=!0:d.modifiedDocuments.size>0?$e(_.hu,14607):d.removedDocuments.size>0&&($e(_.hu,42227),_.hu=!1))})),await Ou(r,u,t)}catch(u){await Tl(u)}}function dp(o,t,r){const u=ue(o);if(u.isPrimaryClient&&r===0||!u.isPrimaryClient&&r===1){const d=[];u.Tu.forEach(((m,_)=>{const S=_.view.va(t);S.snapshot&&d.push(S.snapshot)})),(function(_,S){const I=ue(_);I.onlineState=S;let T=!1;I.queries.forEach(((M,L)=>{for(const X of L.ba)X.va(S)&&(T=!0)})),T&&L0(I)})(u.eventManager,t),d.length&&u.Pu.J_(d),u.onlineState=t,u.isPrimaryClient&&u.sharedClientState.setOnlineState(t)}}async function RC(o,t,r){const u=ue(o);u.sharedClientState.updateQueryState(t,"rejected",r);const d=u.Au.get(t),m=d&&d.key;if(m){let _=new Ln(Jt.comparator);_=_.insert(m,Ui.newNoDocument(m,ae.min()));const S=Oe().add(m),I=new Ch(ae.min(),new Map,new Ln(Me),_,S);await $y(u,I),u.Ru=u.Ru.remove(m),u.Au.delete(t),V0(u)}else await $1(u.localStore,t,!1).then((()=>n0(u,t,r))).catch(Tl)}async function DC(o,t){const r=ue(o),u=t.batch.batchId;try{const d=await PT(r.localStore,t);eE(r,u,null),tE(r,u),r.sharedClientState.updateMutationState(u,"acknowledged"),await Ou(r,d)}catch(d){await Tl(d)}}async function MC(o,t,r){const u=ue(o);try{const d=await(function(_,S){const I=ue(_);return I.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let M;return I.mutationQueue.lookupMutationBatch(T,S).next((L=>($e(L!==null,37113),M=L.keys(),I.mutationQueue.removeMutationBatch(T,L)))).next((()=>I.mutationQueue.performConsistencyCheck(T))).next((()=>I.documentOverlayCache.removeOverlaysForBatchId(T,M,S))).next((()=>I.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,M))).next((()=>I.localDocuments.getDocuments(T,M)))}))})(u.localStore,t);eE(u,t,r),tE(u,t),u.sharedClientState.updateMutationState(t,"rejected",r),await Ou(u,d)}catch(d){await Tl(d)}}function tE(o,t){(o.mu.get(t)||[]).forEach((r=>{r.resolve()})),o.mu.delete(t)}function eE(o,t,r){const u=ue(o);let d=u.du[u.currentUser.toKey()];if(d){const m=d.get(t);m&&(r?m.reject(r):m.resolve(),d=d.remove(t)),u.du[u.currentUser.toKey()]=d}}function n0(o,t,r=null){o.sharedClientState.removeLocalQueryTarget(t);for(const u of o.Iu.get(t))o.Tu.delete(u),r&&o.Pu.yu(u,r);o.Iu.delete(t),o.isPrimaryClient&&o.Vu.Gr(t).forEach((u=>{o.Vu.containsKey(u)||nE(o,u)}))}function nE(o,t){o.Eu.delete(t.path.canonicalString());const r=o.Ru.get(t);r!==null&&(I0(o.remoteStore,r),o.Ru=o.Ru.remove(t),o.Au.delete(r),V0(o))}function gp(o,t,r){for(const u of r)u instanceof Wy?(o.Vu.addReference(u.key,t),OC(o,u)):u instanceof Ky?(Vt(B0,"Document no longer in limbo: "+u.key),o.Vu.removeReference(u.key,t),o.Vu.containsKey(u.key)||nE(o,u.key)):ie(19791,{wu:u})}function OC(o,t){const r=t.key,u=r.path.canonicalString();o.Ru.get(r)||o.Eu.has(u)||(Vt(B0,"New document in limbo: "+r),o.Eu.add(u),V0(o))}function V0(o){for(;o.Eu.size>0&&o.Ru.size<o.maxConcurrentLimboResolutions;){const t=o.Eu.values().next().value;o.Eu.delete(t);const r=new Jt(On.fromString(t)),u=o.fu.next();o.Au.set(u,new wC(r)),o.Ru=o.Ru.insert(r,u),Gy(o.remoteStore,new Va(ps(x0(r.path)),u,"TargetPurposeLimboResolution",mh.ce))}}async function Ou(o,t,r){const u=ue(o),d=[],m=[],_=[];u.Tu.isEmpty()||(u.Tu.forEach(((S,I)=>{_.push(u.pu(I,t,r).then((T=>{var M;if((T||r)&&u.isPrimaryClient){const L=T?!T.fromCache:(M=r==null?void 0:r.targetChanges.get(I.targetId))==null?void 0:M.current;u.sharedClientState.updateQueryState(I.targetId,L?"current":"not-current")}if(T){d.push(T);const L=v0.Es(I.targetId,T);m.push(L)}})))})),await Promise.all(_),u.Pu.J_(d),await(async function(I,T){const M=ue(I);try{await M.persistence.runTransaction("notifyLocalViewChanges","readwrite",(L=>xt.forEach(T,(X=>xt.forEach(X.Ts,(et=>M.persistence.referenceDelegate.addReference(L,X.targetId,et))).next((()=>xt.forEach(X.Is,(et=>M.persistence.referenceDelegate.removeReference(L,X.targetId,et)))))))))}catch(L){if(!Cl(L))throw L;Vt(b0,"Failed to update sequence numbers: "+L)}for(const L of T){const X=L.targetId;if(!L.fromCache){const et=M.vs.get(X),wt=et.snapshotVersion,gt=et.withLastLimboFreeSnapshotVersion(wt);M.vs=M.vs.insert(X,gt)}}})(u.localStore,m))}async function LC(o,t){const r=ue(o);if(!r.currentUser.isEqual(t)){Vt(B0,"User change. New user:",t.toKey());const u=await Fy(r.localStore,t);r.currentUser=t,(function(m,_){m.mu.forEach((S=>{S.forEach((I=>{I.reject(new qt(Tt.CANCELLED,_))}))})),m.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,u.removedBatchIds,u.addedBatchIds),await Ou(r,u.Ns)}}function BC(o,t){const r=ue(o),u=r.Au.get(t);if(u&&u.hu)return Oe().add(u.key);{let d=Oe();const m=r.Iu.get(t);if(!m)return d;for(const _ of m){const S=r.Tu.get(_);d=d.unionWith(S.view.nu)}return d}}function iE(o){const t=ue(o);return t.remoteStore.remoteSyncer.applyRemoteEvent=$y.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=RC.bind(null,t),t.Pu.J_=yC.bind(null,t.eventManager),t.Pu.yu=EC.bind(null,t.eventManager),t}function VC(o){const t=ue(o);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=MC.bind(null,t),t}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return VT(this.persistence,new OT,t.initialUser,this.serializer)}Cu(t){return new Uy(S0.Vi,this.serializer)}Du(t){return new HT}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class PC extends fh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){$e(this.persistence.referenceDelegate instanceof ch,46915);const u=this.persistence.referenceDelegate.garbageCollector;return new ET(u,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new Uy((u=>ch.Vi(u,r)),this.serializer)}}class i0{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=u=>dp(this.syncEngine,u,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await fC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gC})()}createDatastore(t){const r=Sh(t.databaseInfo.databaseId),u=QT(t.databaseInfo);return $T(t.authCredentials,t.appCheckCredentials,u,r)}createRemoteStore(t){return(function(u,d,m,_,S){return new eC(u,d,m,_,S)})(this.localStore,this.datastore,t.asyncQueue,(r=>dp(this.syncEngine,r,0)),(function(){return op.v()?new op:new GT})())}createSyncEngine(t,r){return(function(d,m,_,S,I,T,M){const L=new TC(d,m,_,S,I,T);return M&&(L.gu=!0),L})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(d){const m=ue(d);Vt(vo,"RemoteStore shutting down."),m.Ea.add(5),await Mu(m),m.Aa.shutdown(),m.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}i0.provider={build:()=>new i0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):$s("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout((()=>{this.muted||t(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="FirestoreClient";class UC{constructor(t,r,u,d,m){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=u,this._databaseInfo=d,this.user=ki.UNAUTHENTICATED,this.clientId=f0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(u,(async _=>{Vt(qa,"Received user=",_.uid),await this.authCredentialListener(_),this.user=_})),this.appCheckCredentials.start(u,(_=>(Vt(qa,"Received new app check token=",_),this.appCheckCredentialListener(_,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const u=O0(r,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}async function M1(o,t){o.asyncQueue.verifyOperationInProgress(),Vt(qa,"Initializing OfflineComponentProvider");const r=o.configuration;await t.initialize(r);let u=r.initialUser;o.setCredentialChangeListener((async d=>{u.isEqual(d)||(await Fy(t.localStore,d),u=d)})),t.persistence.setDatabaseDeletedListener((()=>o.terminate())),o._offlineComponents=t}async function mp(o,t){o.asyncQueue.verifyOperationInProgress();const r=await FC(o);Vt(qa,"Initializing OnlineComponentProvider"),await t.initialize(r,o.configuration),o.setCredentialChangeListener((u=>up(t.remoteStore,u))),o.setAppCheckTokenChangeListener(((u,d)=>up(t.remoteStore,d))),o._onlineComponents=t}async function FC(o){if(!o._offlineComponents)if(o._uninitializedComponentsProvider){Vt(qa,"Using user provided OfflineComponentProvider");try{await M1(o,o._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!(function(d){return d.name==="FirebaseError"?d.code===Tt.FAILED_PRECONDITION||d.code===Tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||d.code===22||d.code===20||d.code===11})(r))throw r;ml("Error using user provided cache. Falling back to memory cache: "+r),await M1(o,new fh)}}else Vt(qa,"Using default OfflineComponentProvider"),await M1(o,new PC(void 0));return o._offlineComponents}async function rE(o){return o._onlineComponents||(o._uninitializedComponentsProvider?(Vt(qa,"Using user provided OnlineComponentProvider"),await mp(o,o._uninitializedComponentsProvider._online)):(Vt(qa,"Using default OnlineComponentProvider"),await mp(o,new i0))),o._onlineComponents}function zC(o){return rE(o).then((t=>t.syncEngine))}async function jC(o){const t=await rE(o),r=t.eventManager;return r.onListen=CC.bind(null,t.syncEngine),r.onUnlisten=bC.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=SC.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=IC.bind(null,t.syncEngine),r}function HC(o,t,r={}){const u=new Fa;return o.asyncQueue.enqueueAndForget((async()=>(function(m,_,S,I,T){const M=new kC({next:X=>{M.Nu(),_.enqueueAndForget((()=>pC(m,L)));const et=X.docs.has(S);!et&&X.fromCache?T.reject(new qt(Tt.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&X.fromCache&&I&&I.source==="server"?T.reject(new qt(Tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(X)},error:X=>T.reject(X)}),L=new xC(x0(S.path),M,{includeMetadataChanges:!0,Ka:!0});return mC(m,L)})(await jC(o),o.asyncQueue,t,r,u))),u.promise}function GC(o,t){const r=new Fa;return o.asyncQueue.enqueueAndForget((async()=>NC(await zC(o),t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(o){const t={};return o.timeoutSeconds!==void 0&&(t.timeoutSeconds=o.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="ComponentProvider",pp=new Map;function XC(o,t,r,u,d){return new lw(o,t,r,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sE(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator,u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firestore.googleapis.com",yp=!0;class Ep{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new qt(Tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aE,this.ssl=yp}else this.host=t.host,this.ssl=t.ssl??yp;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ky;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pT)throw new qt(Tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}K3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sE(t.experimentalLongPollingOptions??{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new qt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new qt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new qt(Tt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(u,d){return u.timeoutSeconds===d.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class P0{constructor(t,r,u,d){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=u,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ep({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(Tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qt(Tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ep(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(u){if(!u)return new F3;switch(u.type){case"firstParty":return new G3(u.sessionIndex||"0",u.iamToken||null,u.authTokenFactory||null);case"provider":return u.client;default:throw new qt(Tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const u=pp.get(r);u&&(Vt(YC,"Removing Datastore"),pp.delete(r),u.terminate())})(this),Promise.resolve()}}function qC(o,t,r,u={}){var T;o=wu(o,P0);const d=u0(t),m=o._getSettings(),_={...m,emulatorOptions:o._getEmulatorOptions()},S=`${t}:${r}`;d&&(f_(`https://${S}`),p_("Firestore",!0)),m.host!==aE&&m.host!==S&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const I={...m,host:S,ssl:d,emulatorOptions:u};if(!$c(I,_)&&(o._setSettings(I),u.mockUserToken)){let M,L;if(typeof u.mockUserToken=="string")M=u.mockUserToken,L=ki.MOCK_USER;else{M=d_(u.mockUserToken,(T=o._app)==null?void 0:T.options.projectId);const X=u.mockUserToken.sub||u.mockUserToken.user_id;if(!X)throw new qt(Tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");L=new ki(X)}o._authCredentials=new z3(new Wp(M,L))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,r,u){this.converter=r,this._query=u,this.type="query",this.firestore=t}withConverter(t){return new k0(this.firestore,t,this._query)}}class ui{constructor(t,r,u){this.converter=r,this._key=u,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ui(this.firestore,t,this._key)}toJSON(){return{type:ui._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,u){if(Ru(r,ui._jsonSchema))return new ui(t,u||null,new Jt(On.fromString(r.referencePath)))}}ui._jsonSchemaVersion="firestore/documentReference/1.0",ui._jsonSchema={type:Kn("string",ui._jsonSchemaVersion),referencePath:Kn("string")};class Nu extends k0{constructor(t,r,u){super(t,r,x0(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ui(this.firestore,null,new Jt(t))}withConverter(t){return new Nu(this.firestore,t,this._path)}}function O1(o,t,...r){if(o=Co(o),arguments.length===1&&(t=f0.newId()),W3("doc","path",t),o instanceof P0){const u=On.fromString(t,...r);return M2(u),new ui(o,null,new Jt(u))}{if(!(o instanceof ui||o instanceof Nu))throw new qt(Tt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=o._path.child(On.fromString(t,...r));return M2(u),new ui(o.firestore,o instanceof Nu?o.converter:null,new Jt(u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="AsyncQueue";class Ap{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jy(this,"async_queue_retry"),this._c=()=>{const u=D1();u&&Vt(xp,"Visibility state changed to "+u.visibilityState),this.M_.w_()},this.ac=t;const r=D1();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=D1();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new Fa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Cl(t))throw t;Vt(xp,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((u=>{throw this.nc=u,this.rc=!1,$s("INTERNAL UNHANDLED ERROR: ",_p(u)),u})).then((u=>(this.rc=!1,u))))));return this.ac=r,r}enqueueAfterDelay(t,r,u){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const d=M0.createAndSchedule(this,t,r,u,(m=>this.hc(m)));return this.tc.push(d),d}uc(){this.nc&&ie(47125,{Pc:_p(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,u)=>r.targetTimeMs-u.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function _p(o){let t=o.message||"";return o.stack&&(t=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),t}class U0 extends P0{constructor(t,r,u,d){super(t,r,u,d),this.type="firestore",this._queue=new Ap,this._persistenceKey=(d==null?void 0:d.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ap(t),this._firestoreClient=void 0,await t}}}function QC(o,t){const r=typeof o=="object"?o:v3(),u=typeof o=="string"?o:ih,d=_3(r,"firestore").getImmediate({identifier:u});if(!d._initialized){const m=c_("firestore");m&&qC(d,...m)}return d}function oE(o){if(o._terminated)throw new qt(Tt.FAILED_PRECONDITION,"The client has already been terminated.");return o._firestoreClient||ZC(o),o._firestoreClient}function ZC(o){var u,d,m,_;const t=o._freezeSettings(),r=XC(o._databaseId,((u=o._app)==null?void 0:u.options.appId)||"",o._persistenceKey,(d=o._app)==null?void 0:d.options.apiKey,t);o._componentsProvider||(m=t.localCache)!=null&&m._offlineComponentProvider&&((_=t.localCache)!=null&&_._onlineComponentProvider)&&(o._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),o._firestoreClient=new UC(o._authCredentials,o._appCheckCredentials,o._queue,r,o._componentsProvider&&(function(I){const T=I==null?void 0:I._online.build();return{_offline:I==null?void 0:I._offline.build(T),_online:T}})(o._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yr(Ii.fromBase64String(t))}catch(r){throw new qt(Tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Yr(Ii.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ru(t,Yr._jsonSchema))return Yr.fromBase64String(t.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:Kn("string",Yr._jsonSchemaVersion),bytes:Kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new qt(Tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new qt(Tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new qt(Tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Me(this._lat,t._lat)||Me(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(t){if(Ru(t,Es._jsonSchema))return new Es(t.latitude,t.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Kn("string",Es._jsonSchemaVersion),latitude:Kn("number"),longitude:Kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(u,d){if(u.length!==d.length)return!1;for(let m=0;m<u.length;++m)if(u[m]!==d[m])return!1;return!0})(this._values,t._values)}toJSON(){return{type:is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ru(t,is._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new is(t.vectorValues);throw new qt(Tt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}is._jsonSchemaVersion="firestore/vectorValue/1.0",is._jsonSchema={type:Kn("string",is._jsonSchemaVersion),vectorValues:Kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^__.*__$/;class lE{constructor(t,r,u){this.data=t,this.fieldMask=r,this.fieldTransforms=u}toMutation(t,r){return new Io(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function uE(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{dataSource:o})}}class j0{constructor(t,r,u,d,m,_){this.settings=t,this.databaseId=r,this.serializer=u,this.ignoreUndefinedProperties=d,m===void 0&&this.validatePath(),this.fieldTransforms=m||[],this.fieldMask=_||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new j0({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var d;const r=(d=this.path)==null?void 0:d.child(t),u=this.contextWith({path:r,arrayElement:!1});return u.validatePathSegment(t),u}childContextForFieldPath(t){var d;const r=(d=this.path)==null?void 0:d.child(t),u=this.contextWith({path:r,arrayElement:!1});return u.validatePath(),u}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return gh(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((r=>t.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>t.isPrefixOf(r.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(uE(this.dataSource)&&WC.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class KC{constructor(t,r,u){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=u||Sh(t)}createContext(t,r,u,d=!1){return new j0({dataSource:t,methodName:r,targetDoc:u,path:bi.emptyPath(),arrayElement:!1,hasConverter:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JC(o){const t=o._freezeSettings(),r=Sh(o._databaseId);return new KC(o._databaseId,!!t.ignoreUndefinedProperties,r)}class Ih extends z0{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ih}}function $C(o,t,r,u){const d=o.createContext(1,t,r);hE("Data must be an object, but it was:",d,u);const m=[],_=vr.empty();Qa(u,((I,T)=>{const M=fE(t,I,r);T=Co(T);const L=d.childContextForFieldPath(M);if(T instanceof Ih)m.push(M);else{const X=Nh(T,L);X!=null&&(m.push(M),_.set(M,X))}}));const S=new ns(m);return new lE(_,S,d.fieldTransforms)}function t4(o,t,r,u,d,m){const _=o.createContext(1,t,r),S=[dh(t,u,r)],I=[d];if(m.length%2!=0)throw new qt(Tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let X=0;X<m.length;X+=2)S.push(dh(t,m[X])),I.push(m[X+1]);const T=[],M=vr.empty();for(let X=S.length-1;X>=0;--X)if(!i4(T,S[X])){const et=S[X];let wt=I[X];wt=Co(wt);const gt=_.childContextForFieldPath(et);if(wt instanceof Ih)T.push(et);else{const At=Nh(wt,gt);At!=null&&(T.push(et),M.set(et,At))}}const L=new ns(T);return new lE(M,L,_.fieldTransforms)}function Nh(o,t){if(cE(o=Co(o)))return hE("Unsupported field value:",t,o),e4(o,t);if(o instanceof z0)return(function(u,d){if(!uE(d.dataSource))throw d.createError(`${u._methodName}() can only be used with update() and set()`);if(!d.path)throw d.createError(`${u._methodName}() is not currently supported inside arrays`);const m=u._toFieldTransform(d);m&&d.fieldTransforms.push(m)})(o,t),null;if(o===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),o instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(u,d){const m=[];let _=0;for(const S of u){let I=Nh(S,d.childContextForArray(_));I==null&&(I={nullValue:"NULL_VALUE"}),m.push(I),_++}return{arrayValue:{values:m}}})(o,t)}return(function(u,d){if((u=Co(u))===null)return{nullValue:"NULL_VALUE"};if(typeof u=="number")return Lw(d.serializer,u);if(typeof u=="boolean")return{booleanValue:u};if(typeof u=="string")return{stringValue:u};if(u instanceof Date){const m=En.fromDate(u);return{timestampValue:uh(d.serializer,m)}}if(u instanceof En){const m=new En(u.seconds,1e3*Math.floor(u.nanoseconds/1e3));return{timestampValue:uh(d.serializer,m)}}if(u instanceof Es)return{geoPointValue:{latitude:u.latitude,longitude:u.longitude}};if(u instanceof Yr)return{bytesValue:Ry(d.serializer,u._byteString)};if(u instanceof ui){const m=d.databaseId,_=u.firestore._databaseId;if(!_.isEqual(m))throw d.createError(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:T0(u.firestore._databaseId||d.databaseId,u._key.path)}}if(u instanceof is)return(function(_,S){const I=_ instanceof is?_.toArray():_;return{mapValue:{fields:{[sy]:{stringValue:ay},[rh]:{arrayValue:{values:I.map((M=>{if(typeof M!="number")throw S.createError("VectorValues must only contain numeric values.");return A0(S.serializer,M)}))}}}}}})(u,d);if(Py(u))return u._toProto(d.serializer);throw d.createError(`Unsupported field value: ${d0(u)}`)})(o,t)}function e4(o,t){const r={};return $p(o)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qa(o,((u,d)=>{const m=Nh(d,t.childContextForField(u));m!=null&&(r[u]=m)})),{mapValue:{fields:r}}}function cE(o){return!(typeof o!="object"||o===null||o instanceof Array||o instanceof Date||o instanceof En||o instanceof Es||o instanceof Yr||o instanceof ui||o instanceof z0||o instanceof is||Py(o))}function hE(o,t,r){if(!cE(r)||!Kp(r)){const u=d0(r);throw u==="an object"?t.createError(o+" a custom object"):t.createError(o+" "+u)}}function dh(o,t,r){if((t=Co(t))instanceof F0)return t._internalPath;if(typeof t=="string")return fE(o,t);throw gh("Field path arguments must be of type string or ",o,!1,void 0,r)}const n4=new RegExp("[~\\*/\\[\\]]");function fE(o,t,r){if(t.search(n4)>=0)throw gh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,r);try{return new F0(...t.split("."))._internalPath}catch{throw gh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,r)}}function gh(o,t,r,u,d){const m=u&&!u.isEmpty(),_=d!==void 0;let S=`Function ${t}() called with invalid data`;r&&(S+=" (via `toFirestore()`)"),S+=". ";let I="";return(m||_)&&(I+=" (found",m&&(I+=` in field ${u}`),_&&(I+=` in document ${d}`),I+=")"),new qt(Tt.INVALID_ARGUMENT,S+o+I)}function i4(o,t){return o.some((r=>r.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{convertValue(t,r="none"){switch(Ya(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Yn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Ga(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ie(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const u={};return Qa(t,((d,m)=>{u[d]=this.convertValue(m,r)})),u}convertVectorValue(t){var u,d,m;const r=(m=(d=(u=t.fields)==null?void 0:u[rh].arrayValue)==null?void 0:d.values)==null?void 0:m.map((_=>Yn(_.doubleValue)));return new is(r)}convertGeoPoint(t){return new Es(Yn(t.latitude),Yn(t.longitude))}convertArray(t,r){return(t.values||[]).map((u=>this.convertValue(u,r)))}convertServerTimestamp(t,r){switch(r){case"previous":const u=yh(t);return u==null?null:this.convertValue(u,r);case"estimate":return this.convertTimestamp(Cu(t));default:return null}}convertTimestamp(t){const r=Ha(t);return new En(r.seconds,r.nanos)}convertDocumentKey(t,r){const u=On.fromString(t);$e(Vy(u),9688,{name:t});const d=new Su(u.get(1),u.get(3)),m=new Jt(u.popFirst(5));return d.isEqual(r)||$s(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4 extends r4{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yr(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ui(this.firestore,null,r)}}const wp="@firebase/firestore",Tp="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,r,u,d,m){this._firestore=t,this._userDataWriter=r,this._key=u,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new a4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const r=this._document.data.field(dh("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class a4 extends dE{data(){return super.data()}}class du{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class To extends dE{constructor(t,r,u,d,m,_){super(t,r,u,d,_),this._firestore=t,this._firestoreImpl=t,this.metadata=m}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const u=this._document.data.field(dh("DocumentSnapshot.get",t));if(u!==null)return this._userDataWriter.convertValue(u,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Tt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=To._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:Kn("string",To._jsonSchemaVersion),bundleSource:Kn("string","DocumentSnapshot"),bundleName:Kn("string"),bundle:Kn("string")};class Zc extends To{data(t={}){return super.data(t)}}class xu{constructor(t,r,u,d){this._firestore=t,this._userDataWriter=r,this._snapshot=d,this.metadata=new du(d.hasPendingWrites,d.fromCache),this.query=u}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((u=>{t.call(r,new Zc(this._firestore,this._userDataWriter,u.key,u,new du(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new qt(Tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(d,m){if(d._snapshot.oldDocs.isEmpty()){let _=0;return d._snapshot.docChanges.map((S=>{const I=new Zc(d._firestore,d._userDataWriter,S.doc.key,S.doc,new du(d._snapshot.mutatedKeys.has(S.doc.key),d._snapshot.fromCache),d.query.converter);return S.doc,{type:"added",doc:I,oldIndex:-1,newIndex:_++}}))}{let _=d._snapshot.oldDocs;return d._snapshot.docChanges.filter((S=>m||S.type!==3)).map((S=>{const I=new Zc(d._firestore,d._userDataWriter,S.doc.key,S.doc,new du(d._snapshot.mutatedKeys.has(S.doc.key),d._snapshot.fromCache),d.query.converter);let T=-1,M=-1;return S.type!==0&&(T=_.indexOf(S.doc.key),_=_.delete(S.doc.key)),S.type!==1&&(_=_.add(S.doc),M=_.indexOf(S.doc.key)),{type:o4(S.type),doc:I,oldIndex:T,newIndex:M}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Tt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=xu._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=f0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],u=[],d=[];return this.docs.forEach((m=>{m._document!==null&&(r.push(m._document),u.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),d.push(m.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function o4(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:o})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xu._jsonSchemaVersion="firestore/querySnapshot/1.0",xu._jsonSchema={type:Kn("string",xu._jsonSchemaVersion),bundleSource:Kn("string","QuerySnapshot"),bundleName:Kn("string"),bundle:Kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(o){o=wu(o,ui);const t=wu(o.firestore,U0),r=oE(t);return HC(r,o._key).then((u=>c4(t,o,u)))}function Cp(o,t,r,...u){o=wu(o,ui);const d=wu(o.firestore,U0),m=JC(d);let _;return _=typeof(t=Co(t))=="string"||t instanceof F0?t4(m,"updateDoc",o._key,t,r,u):$C(m,"updateDoc",o._key,t),u4(d,[_.toMutation(o._key,Ks.exists(!0))])}function u4(o,t){const r=oE(o);return GC(r,t)}function c4(o,t,r){const u=r.docs.get(t._key),d=new s4(o);return new To(o,d,t._key,u,new du(r.hasPendingWrites,r.fromCache),t.converter)}(function(t,r=!0){U3(S3),eh(new Au("firestore",((u,{instanceIdentifier:d,options:m})=>{const _=u.getProvider("app").getImmediate(),S=new U0(new j3(u.getProvider("auth-internal")),new Y3(_,u.getProvider("app-check-internal")),uw(_,d),_);return m={useFetchStreams:r,...m},S._setSettings(m),S}),"PUBLIC").setMultipleInstances(!0)),fl(wp,Tp,t),fl(wp,Tp,"esm2020")})();const h4={apiKey:"AIzaSyBqsrPg7DutKyhnvGwdchuEfg7LECz684Q",authDomain:"devwell-b6a4b.firebaseapp.com",databaseURL:"https://devwell-b6a4b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"devwell-b6a4b",storageBucket:"devwell-b6a4b.firebasestorage.app",messagingSenderId:"76204363860",appId:"1:76204363860:web:aff448db2428445cd89dc1",measurementId:"G-NGCJ2KNP4S"},f4=Fp(h4),L1=QC(f4);class d4{async verifySyncCode(t){try{const r=O1(L1,"remote_sessions",t);if((await l4(r)).exists())return{hostId:t,status:"connected"};throw new Error("Invalid Session ID")}catch(r){throw new Error(r.message||"Connection Failed")}}async streamDataToHost(t,r,u){try{const d=O1(L1,"remote_sessions",t);await Cp(d,{data:{image:r,timestamp:Date.now(),...u}})}catch(d){console.error("Stream Error",d)}}async terminateSession(t){try{const r=O1(L1,"remote_sessions",t);await Cp(r,{isActive:!1,data:null})}catch(r){console.error("Termination Error",r)}}}const B1=new d4,g4=()=>{const[o,t]=Mn.useState("scan"),[r,u]=Mn.useState(""),[d,m]=Mn.useState(null),[_,S]=Mn.useState(null),[I,T]=Mn.useState(null),[M,L]=Mn.useState("environment"),X=Mn.useRef(null),et=Mn.useRef(null),wt=Mn.useRef(null),gt=Mn.useRef(null),At=Mn.useRef(null),[zt,Lt]=Mn.useState(12),[bt,jt]=Mn.useState(98);Mn.useEffect(()=>{const Pt=localStorage.getItem("devwell_host_id");Pt&&m(Pt)},[]),Mn.useEffect(()=>{const Pt=nt=>{nt.preventDefault(),T(nt)};return window.addEventListener("beforeinstallprompt",Pt),()=>window.removeEventListener("beforeinstallprompt",Pt)},[]),Mn.useEffect(()=>()=>{K()},[]),Mn.useEffect(()=>{if(o==="scanning"){const Pt=setTimeout(()=>{const nt=new RA("reader",{fps:10,qrbox:{width:250,height:250}},!1);nt.render(ot=>{nt.clear(),t("syncing"),k(ot)},ot=>{}),X.current=nt},100);return()=>{if(clearTimeout(Pt),X.current)try{X.current.clear()}catch{}}}},[o]);const Le=async()=>{if(!I)return;I.prompt();const{outcome:Pt}=await I.userChoice;Pt==="accepted"&&T(null)},Ht=Pt=>{const nt=Pt.target.value.trim();u(nt),S(null)},k=async Pt=>{S(null);try{const nt=await B1.verifySyncCode(Pt);m(nt.hostId),localStorage.setItem("devwell_host_id",nt.hostId),t("stream"),P()}catch{t("scan"),S("INVALID OR EXPIRED SESSION")}},z=async()=>{if(r.length<5){S("ENTER VALID HOST CODE");return}t("syncing"),await k(r)},P=async(Pt="environment")=>{try{const nt=await navigator.mediaDevices.getUserMedia({video:{facingMode:Pt},audio:!0});et.current&&(et.current.srcObject=nt,gt.current=nt),At.current&&clearInterval(At.current),At.current=window.setInterval(()=>{Y(),Lt(ot=>Math.max(0,Math.min(100,ot+(Math.random()*10-5)))),jt(ot=>Math.max(80,Math.min(100,ot+(Math.random()*4-2))))},1e3)}catch(nt){console.error("Camera access denied:",nt),S("NEURAL INTERFACE LOCKED: PERMISSION DENIED"),t("scan")}},K=()=>{gt.current&&gt.current.getTracks().forEach(Pt=>Pt.stop()),At.current&&clearInterval(At.current),m(null),localStorage.removeItem("devwell_host_id")},q=()=>{gt.current&&gt.current.getTracks().forEach(nt=>nt.stop());const Pt=M==="environment"?"user":"environment";L(Pt),P(Pt)},Y=()=>{if(!et.current||!wt.current||!d)return;const Pt=wt.current.getContext("2d");if(!Pt)return;wt.current.width=et.current.videoWidth,wt.current.height=et.current.videoHeight,Pt.drawImage(et.current,0,0);const nt=wt.current.toDataURL("image/jpeg",.5);B1.streamDataToHost(d,nt,{timestamp:Date.now(),vocalTension:zt})},j=()=>{d&&B1.terminateSession(d),K(),t("scan"),u("")};return o==="scanning"?Rt.jsxs("div",{className:"flex flex-col items-center justify-center p-8 h-full",children:[Rt.jsx("h2",{className:"text-xl font-bold tracking-widest text-white uppercase mb-4",children:"Neural Scan"}),Rt.jsx("div",{id:"reader",className:"w-full max-w-sm bg-white rounded-xl overflow-hidden shadow-2xl"}),Rt.jsx("button",{onClick:()=>t("scan"),className:"mt-8 text-slate-500 uppercase font-bold tracking-widest text-xs hover:text-white",children:"Cancel Scan"})]}):o==="scan"?Rt.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 animate-in fade-in duration-500 overflow-y-auto",children:[Rt.jsxs("div",{className:"mb-8 relative",children:[Rt.jsx("div",{className:"absolute inset-0 bg-blue-500 blur-[40px] opacity-20 rounded-full"}),Rt.jsx(PA,{className:"w-16 h-16 text-blue-500 relative z-10 animate-pulse"})]}),Rt.jsx("h1",{className:"text-2xl font-bold tracking-[0.2em] text-blue-100 mb-2 text-center uppercase",children:"Neural Probe"}),Rt.jsx("p",{className:"text-slate-400 text-xs tracking-widest mb-12 font-mono",children:"PROTOCOL V.3.0 // READY TO SYNC"}),Rt.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[Rt.jsxs("div",{className:"space-y-2",children:[Rt.jsx("label",{className:"text-[10px] font-bold tracking-widest text-blue-400 uppercase ml-1",children:"Manual Frequency Code"}),Rt.jsxs("div",{className:"relative group",children:[Rt.jsx("input",{type:"text",value:r,onChange:Ht,placeholder:"Paste Session ID",className:"w-full bg-slate-900/50 border border-slate-700 text-center text-sm font-mono text-white py-4 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all placeholder-slate-800 backdrop-blur-md"}),Rt.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-indigo-500/10 opacity-0 group-focus-within:opacity-100 pointer-events-none transition-opacity"})]}),_&&Rt.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-xs font-mono mt-2 animate-pulse",children:[Rt.jsx(ZA,{className:"w-3 h-3"}),_]})]}),Rt.jsx("button",{onClick:z,disabled:r.length<5,className:`
              w-full relative overflow-hidden py-4 rounded-xl font-bold tracking-widest uppercase transition-all duration-300
              ${r.length>=5?"bg-blue-600 text-white shadow-lg shadow-blue-600/40 hover:bg-blue-500 hover:scale-[1.02]":"bg-slate-800 text-slate-500 cursor-not-allowed"}
            `,children:Rt.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[Rt.jsx($A,{className:"w-4 h-4"}),"Initiate Handshake"]})}),Rt.jsxs("div",{className:"relative flex py-2 items-center",children:[Rt.jsx("div",{className:"flex-grow border-t border-slate-800"}),Rt.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-600 text-[10px] uppercase tracking-widest",children:"Or"}),Rt.jsx("div",{className:"flex-grow border-t border-slate-800"})]}),Rt.jsxs("button",{onClick:()=>t("scanning"),className:"w-full border border-slate-700 hover:border-blue-500/50 hover:bg-slate-800/50 text-slate-300 py-4 rounded-xl flex items-center justify-center gap-3 transition-all group",children:[Rt.jsx(YA,{className:"w-5 h-5 text-blue-400 group-hover:text-blue-300"}),Rt.jsx("span",{className:"tracking-widest text-xs font-bold uppercase",children:"Scan Host Matrix"})]}),I&&Rt.jsxs("button",{onClick:Le,className:"w-full mt-4 bg-slate-900/50 border border-blue-500/20 hover:bg-blue-900/20 text-blue-400 py-3 rounded-xl flex items-center justify-center gap-2 transition-all",children:[Rt.jsx(zA,{className:"w-4 h-4"}),Rt.jsx("span",{className:"tracking-widest text-[10px] font-bold uppercase",children:"Install Neural Uplink"})]})]})]}):o==="syncing"?Rt.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 relative overflow-hidden",children:[Rt.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[Rt.jsx("div",{className:"w-64 h-64 border border-blue-500/30 rounded-full radar-ping"}),Rt.jsx("div",{className:"w-64 h-64 border border-blue-500/20 rounded-full radar-ping",style:{animationDelay:"0.5s"}}),Rt.jsx("div",{className:"w-64 h-64 border border-blue-500/10 rounded-full radar-ping",style:{animationDelay:"1s"}})]}),Rt.jsxs("div",{className:"z-10 flex flex-col items-center space-y-8",children:[Rt.jsxs("div",{className:"relative",children:[Rt.jsx(UA,{className:"w-16 h-16 text-blue-400 animate-pulse"}),Rt.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full animate-ping"})]}),Rt.jsxs("div",{className:"text-center space-y-2",children:[Rt.jsx("h2",{className:"text-xl font-bold tracking-widest text-white uppercase",children:"Searching for Host"}),Rt.jsxs("p",{className:"text-blue-400 font-mono text-xs",children:["BEACON: ",r]})]}),Rt.jsxs("div",{className:"flex gap-1 items-center h-8",children:[Rt.jsx("div",{className:"w-1 h-3 bg-blue-600 animate-[pulse_1s_ease-in-out_infinite]"}),Rt.jsx("div",{className:"w-1 h-5 bg-blue-600 animate-[pulse_1s_ease-in-out_0.1s_infinite]"}),Rt.jsx("div",{className:"w-1 h-8 bg-blue-600 animate-[pulse_1s_ease-in-out_0.2s_infinite]"}),Rt.jsx("div",{className:"w-1 h-5 bg-blue-600 animate-[pulse_1s_ease-in-out_0.3s_infinite]"}),Rt.jsx("div",{className:"w-1 h-3 bg-blue-600 animate-[pulse_1s_ease-in-out_0.4s_infinite]"})]})]})]}):Rt.jsxs("div",{className:"relative w-full h-full bg-black flex flex-col",children:[Rt.jsx("canvas",{ref:wt,className:"hidden"}),Rt.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 bg-gradient-to-b from-black/80 to-transparent backdrop-blur-sm",children:Rt.jsxs("div",{className:"flex justify-between items-start",children:[Rt.jsxs("div",{className:"flex flex-col",children:[Rt.jsxs("span",{className:"text-[10px] text-blue-400 font-mono tracking-widest flex items-center gap-1",children:[Rt.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"LIVE FEED"]}),Rt.jsx("span",{className:"text-xs text-slate-300 font-bold uppercase tracking-wider mt-1",children:(d==null?void 0:d.split("_")[1])||"UNKNOWN"})]}),Rt.jsx("div",{className:"flex gap-3",children:Rt.jsxs("div",{className:"bg-slate-900/80 border border-slate-700 px-3 py-1 rounded-full flex items-center gap-2",children:[Rt.jsx(KA,{className:`w-3 h-3 ${bt>90?"text-green-400":"text-yellow-400"}`}),Rt.jsxs("span",{className:"text-[10px] font-mono text-slate-300",children:[bt,"%"]})]})})]})}),Rt.jsxs("div",{className:"flex-grow relative overflow-hidden m-0 sm:m-4 sm:rounded-3xl border-y-2 sm:border-2 border-slate-800 bg-slate-900",children:[Rt.jsx("video",{ref:et,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover opacity-80"}),Rt.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[Rt.jsx("div",{className:"scan-line z-10 opacity-30"}),Rt.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 border-t-2 border-l-2 border-blue-500/50 rounded-tl-lg"}),Rt.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 border-t-2 border-r-2 border-blue-500/50 rounded-tr-lg"}),Rt.jsx("div",{className:"absolute bottom-4 left-4 w-8 h-8 border-b-2 border-l-2 border-blue-500/50 rounded-bl-lg"}),Rt.jsx("div",{className:"absolute bottom-4 right-4 w-8 h-8 border-b-2 border-r-2 border-blue-500/50 rounded-br-lg"}),Rt.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 border border-blue-400/20 rounded-full flex items-center justify-center",children:Rt.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"})})]}),Rt.jsx("div",{className:"absolute bottom-6 left-4 right-4 z-20 space-y-3",children:Rt.jsxs("div",{className:"bg-black/40 backdrop-blur-md p-3 rounded-xl border border-white/10",children:[Rt.jsxs("div",{className:"flex justify-between items-end mb-1",children:[Rt.jsx("span",{className:"text-[10px] font-bold text-blue-300 uppercase tracking-wider",children:"Vocal Tension"}),Rt.jsxs("span",{className:"text-sm font-mono text-white",children:[Math.round(zt),Rt.jsx("span",{className:"text-[10px] text-slate-400 ml-1",children:"Hz"})]})]}),Rt.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden",children:Rt.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-400 transition-all duration-300 ease-out",style:{width:`${zt}%`}})})]})})]}),Rt.jsxs("div",{className:"p-6 bg-slate-950 border-t border-slate-800 z-30 pb-8 sm:pb-6 flex gap-3",children:[Rt.jsx("button",{onClick:q,className:"flex-[1] group bg-slate-900 border border-blue-900/30 hover:bg-blue-950/20 hover:border-blue-500/50 text-blue-400 py-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:Rt.jsx(qA,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"})}),Rt.jsxs("button",{onClick:j,className:"flex-[4] group bg-slate-900 border border-red-900/30 hover:bg-red-950/20 hover:border-red-500/50 text-red-400 py-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300",children:[Rt.jsx(HA,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Rt.jsx("span",{className:"font-mono text-xs tracking-[0.2em] font-bold uppercase",children:"Terminate Protocol"})]})]})]})},m4=()=>Rt.jsxs("div",{className:"w-full h-screen bg-slate-950 text-slate-100 overflow-hidden relative selection:bg-blue-500/30",children:[Rt.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none z-0",children:[Rt.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[60%] h-[60%] bg-blue-600 rounded-full blur-[120px]"}),Rt.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[50%] h-[50%] bg-indigo-600 rounded-full blur-[120px]"})]}),Rt.jsx("div",{className:"relative z-10 w-full h-full",children:Rt.jsx(g4,{})})]});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(o=>{console.log("Neural Probe ServiceWorker registered: ",o.scope)}).catch(o=>{console.log("ServiceWorker registration failed: ",o)})});const gE=document.getElementById("root");if(!gE)throw new Error("Could not find root element to mount to");const p4=Gx.createRoot(gE);p4.render(Rt.jsx(Vx.StrictMode,{children:Rt.jsx(m4,{})}));
